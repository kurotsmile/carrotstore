self.addEventListener("install",(function(event){event.waitUntil(preLoad())}));var preLoad=function(){return console.log("Installing web app"),caches.open("offline").then((function(cache){return console.log("caching index and important routes"),cache.addAll(["/js/offline.html"])}))};self.addEventListener("fetch",(function(event){event.respondWith(checkResponse(event.request).catch((function(){return returnFromCache(event.request)}))),event.waitUntil(addToCache(event.request))}));var checkResponse=function(request){return new Promise((function(fulfill,reject){fetch(request).then((function(response){404!==response.status?fulfill(response):reject()}),reject)}))},addToCache=function(request){return caches.open("offline").then((function(cache){return fetch(request).then((function(response){return console.log(response.url+" was cached"),cache.put(request,response)}))}))},returnFromCache=function(request){return caches.open("offline").then((function(cache){return cache.match(request).then((function(matching){return matching&&404!=matching.status?matching:cache.match("offline.html")}))}))};
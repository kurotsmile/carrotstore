(function(){if(window.CKEDITOR&&window.CKEDITOR.dom){return}window.CKEDITOR||(window.CKEDITOR=function(){var f=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,g={timestamp:"K24B",version:"4.14.0",revision:"8a12b04171",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:f},status:"unloaded",basePath:function(){var i=window.CKEDITOR_BASEPATH||"";if(!i){for(var l=document.getElementsByTagName("script"),k=0;k<l.length;k++){var j=l[k].src.match(f);if(j){i=j[1];break}}}-1==i.indexOf(":/")&&"//"!=i.slice(0,2)&&(i=0===i.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+i:location.href.match(/^[^\?]*\/(?:)/)[0]+i);if(!i){throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.'}return i}(),getUrl:function(b){-1==b.indexOf(":/")&&0!==b.indexOf("/")&&(b=this.basePath+b);this.timestamp&&"/"!=b.charAt(b.length-1)&&!/[&?]t=/.test(b)&&(b+=(0<=b.indexOf("?")?"\x26":"?")+"t\x3d"+this.timestamp);return b},domReady:function(){function i(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",i,!1),d()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",i),d())}catch(b){}}function d(){for(var b;b=j.shift();){b()}}var j=[];return function(c){function l(){try{document.documentElement.doScroll("left")}catch(m){setTimeout(l,1);return}i()}j.push(c);"complete"===document.readyState&&setTimeout(i,1);if(1==j.length){if(document.addEventListener){document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",i);window.attachEvent("onload",i);c=!1;try{c=!window.frameElement}catch(k){}document.documentElement.doScroll&&c&&l()}}}}}()},e=window.CKEDITOR_GETURL;if(e){var h=g.getUrl;g.getUrl=function(b){return e.call(g,b)||h.call(g,b)}}return g}());CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var f=CKEDITOR.event.prototype,c;for(c in f){null==e[c]&&(e[c]=f[c])}},CKEDITOR.event.prototype=function(){function e(b){var d=f(this);return d[b]||(d[b]=new c(b))}var f=function(b){b=b.getPrivate&&b.getPrivate()||b._||(b._={});return b.events||(b.events={})},c=function(b){this.name=b;this.listeners=[]};c.prototype={getListenerIndex:function(h){for(var g=0,i=this.listeners;g<i.length;g++){if(i[g].fn==h){return g}}return -1}};return{define:function(g,j){var i=e.call(this,g);CKEDITOR.tools.extend(i,j,!0)},on:function(q,p,m,j,n){function i(d,b,g,h){d={name:q,sender:this,editor:d,data:b,listenerData:j,stop:g,cancel:h,removeListener:s};return !1===p.call(m,d)?!1:d.data}function s(){r.removeListener(q,p)}var o=e.call(this,q);if(0>o.getListenerIndex(p)){o=o.listeners;m||(m=this);isNaN(n)&&(n=10);var r=this;i.fn=p;i.priority=n;for(var u=o.length-1;0<=u;u--){if(o[u].priority<=n){return o.splice(u+1,0,i),{removeListener:s}}}o.unshift(i)}return{removeListener:s}},once:function(){var g=Array.prototype.slice.call(arguments),d=g[1];g[1]=function(b){b.removeListener();return d.apply(this,arguments)};return this.on.apply(this,g)},capture:function(){CKEDITOR.event.useCapture=1;var b=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return b},fire:function(){var g=0,d=function(){g=1},j=0,i=function(){j=1};return function(h,b,o){var k=f(this)[h];h=g;var n=j;g=j=0;if(k){var r=k.listeners;if(r.length){for(var r=r.slice(0),m,q=0;q<r.length;q++){if(k.errorProof){try{m=r[q].call(this,o,b,d,i)}catch(p){}}else{m=r[q].call(this,o,b,d,i)}!1===m?j=1:"undefined"!=typeof m&&(b=m);if(g||j){break}}}}b=j?!1:"undefined"==typeof b?!0:b;g=h;j=n;return b}}(),fireOnce:function(g,d,i){d=this.fire(g,d,i);delete f(this)[g];return d},removeListener:function(g,d){var j=f(this)[g];if(j){var i=j.getListenerIndex(d);0<=i&&j.listeners.splice(i,1)}},removeAllListeners:function(){var g=f(this),d;for(d in g){delete g[d]}},hasListeners:function(b){return(b=f(this)[b])&&0<b.listeners.length}}}());CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(b,c){b in {instanceReady:1,loaded:1}&&(this[b]=!0);return CKEDITOR.event.prototype.fire.call(this,b,c,this)},CKEDITOR.editor.prototype.fireOnce=function(b,c){b in {instanceReady:1,loaded:1}&&(this[b]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,b,c,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));CKEDITOR.env||(CKEDITOR.env=function(){var f=navigator.userAgent.toLowerCase(),g=f.match(/edge[ \/](\d+.?\d*)/),e=-1<f.indexOf("trident/"),e=!(!g&&!e),e={ie:e,edge:!!g,webkit:!e&&-1<f.indexOf(" applewebkit/"),air:-1<f.indexOf(" adobeair/"),mac:-1<f.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<f.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(f),isCustomDomain:function(){if(!this.ie){return !1}var d=document.domain,c=window.location.hostname;return d!=c&&d!="["+c+"]"},secure:"https:"==location.protocol};e.gecko="Gecko"==navigator.product&&!e.webkit&&!e.ie;e.webkit&&(-1<f.indexOf("chrome")?e.chrome=!0:e.safari=!0);var h=0;e.ie&&(h=g?parseFloat(g[1]):e.quirks||!document.documentMode?parseFloat(f.match(/msie (\d+)/)[1]):document.documentMode,e.ie9Compat=9==h,e.ie8Compat=8==h,e.ie7Compat=7==h,e.ie6Compat=7>h||e.quirks);e.gecko&&(g=f.match(/rv:([\d\.]+)/))&&(g=g[1].split("."),h=10000*g[0]+100*(g[1]||0)+1*(g[2]||0));e.air&&(h=parseFloat(f.match(/ adobeair\/(\d+)/)[1]));e.webkit&&(h=parseFloat(f.match(/ applewebkit\/(\d+)/)[1]));e.version=h;e.isCompatible=!(e.ie&&7>h)&&!(e.gecko&&40000>h)&&!(e.webkit&&534>h);e.hidpi=2<=window.devicePixelRatio;e.needsBrFiller=e.gecko||e.webkit||e.ie&&10<h;e.needsNbspFiller=e.ie&&11>h;e.cssClass="cke_browser_"+(e.ie?"ie":e.gecko?"gecko":e.webkit?"webkit":"unknown");e.quirks&&(e.cssClass+=" cke_browser_quirks");e.ie&&(e.cssClass+=" cke_browser_ie"+(e.quirks?"6 cke_browser_iequirks":e.version));e.air&&(e.cssClass+=" cke_browser_air");e.iOS&&(e.cssClass+=" cke_browser_ios");e.hidpi&&(e.cssClass+=" cke_hidpi");return e}());"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status){CKEDITOR.loadFullCore._load=1}else{delete CKEDITOR.loadFullCore;var b=document.createElement("script");b.type="text/javascript";b.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(b)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(b){(this._.pending||(this._.pending=[])).push(b)};(function(){CKEDITOR.domReady(function(){var b=CKEDITOR.loadFullCore,c=CKEDITOR.loadFullCoreTimeout;b&&(CKEDITOR.status="basic_ready",b&&b._load?b():c&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1000*c))})})();CKEDITOR.status="basic_loaded"}();"use strict";CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(b,c){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:b,additionalData:c})};CKEDITOR.error=function(b,c){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:b,additionalData:c})};CKEDITOR.on("log",function(e){if(window.console&&window.console.log){var f=console[e.data.type]?e.data.type:"log",c=e.data.errorCode;if(e=e.data.additionalData){console[f]("[CKEDITOR] Error code: "+c+".",e)}else{console[f]("[CKEDITOR] Error code: "+c+".")}console[f]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+c)}},null,null,999);CKEDITOR.dom={};(function(){function t(f,d,g){this._minInterval=f;this._context=g;this._lastOutput=this._scheduledTimer=0;this._output=CKEDITOR.tools.bind(d,g||{});var h=this;this.input=function(){function c(){h._lastOutput=(new Date).getTime();h._scheduledTimer=0;h._call()}if(!h._scheduledTimer||!1!==h._reschedule()){var b=(new Date).getTime()-h._lastOutput;b<h._minInterval?h._scheduledTimer=setTimeout(c,h._minInterval-b):c()}}}function q(f,d,g){t.call(this,f,d,g);this._args=[];var h=this;this.input=CKEDITOR.tools.override(this.input,function(b){return function(){h._args=Array.prototype.slice.call(arguments);b.call(this)}})}var s=[],r=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",o=/&/g,m=/>/g,j=/</g,n=/"/g,i=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,u={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',nbsp:" ",shy:""},p=function(d,c){return"#"==c[0]?String.fromCharCode(parseInt(c.slice(1),10)):u[c]};CKEDITOR.on("reset",function(){s=[]});CKEDITOR.tools={arrayCompare:function(d,c){if(!d&&!c){return !0}if(!d||!c||d.length!=c.length){return !1}for(var f=0;f<d.length;f++){if(d[f]!=c[f]){return !1}}return !0},getIndex:function(d,c){for(var f=0;f<d.length;++f){if(c(d[f])){return f}}return -1},clone:function(d){var c;if(d&&d instanceof Array){c=[];for(var f=0;f<d.length;f++){c[f]=CKEDITOR.tools.clone(d[f])}return c}if(null===d||"object"!=typeof d||d instanceof String||d instanceof Number||d instanceof Boolean||d instanceof Date||d instanceof RegExp||d.nodeType||d.window===d){return d}c=new d.constructor;for(f in d){c[f]=CKEDITOR.tools.clone(d[f])}return c},capitalize:function(d,c){return d.charAt(0).toUpperCase()+(c?d.slice(1):d.slice(1).toLowerCase())},extend:function(f){var d=arguments.length,k,v;"boolean"==typeof(k=arguments[d-1])?d--:"boolean"==typeof(k=arguments[d-2])&&(v=arguments[d-1],d-=2);for(var h=1;h<d;h++){var l=arguments[h]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(l),function(c){if(!0===k||null==f[c]){if(!v||c in v){f[c]=l[c]}}})}return f},prototypedCopy:function(d){var c=function(){};c.prototype=d;return new c},copy:function(d){var c={},f;for(f in d){c[f]=d[f]}return c},isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)},isEmpty:function(d){for(var c in d){if(d.hasOwnProperty(c)){return !1}}return !0},cssVendorPrefix:function(d,c,f){if(f){return r+d+":"+c+";"+d+":"+c}f={};f[d]=c;f[r+d]=c;return f},cssStyleToDomStyle:function(){var d=document.createElement("div").style,c="undefined"!=typeof d.cssFloat?"cssFloat":"undefined"!=typeof d.styleFloat?"styleFloat":"float";return function(b){return"float"==b?c:b.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),buildStyleHtml:function(f){f=[].concat(f);for(var d,g=[],h=0;h<f.length;h++){if(d=f[h]){/@import|[{}]/.test(d)?g.push("\x3cstyle\x3e"+d+"\x3c/style\x3e"):g.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+d+'"\x3e')}}return g.join("")},htmlEncode:function(b){return void 0===b||null===b?"":String(b).replace(o,"\x26amp;").replace(m,"\x26gt;").replace(j,"\x26lt;")},htmlDecode:function(b){return b.replace(i,p)},htmlEncodeAttr:function(b){return CKEDITOR.tools.htmlEncode(b).replace(n,"\x26quot;")},htmlDecodeAttr:function(b){return CKEDITOR.tools.htmlDecode(b)},transformPlainTextToHtml:function(k,f){var w=f==CKEDITOR.ENTER_BR,z=this.htmlEncode(k.replace(/\r\n/g,"\n")),z=z.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;"),v=f==CKEDITOR.ENTER_P?"p":"div";if(!w){var y=/\n{2}/g;if(y.test(z)){var x="\x3c"+v+"\x3e",h="\x3c/"+v+"\x3e",z=x+z.replace(y,function(){return h+x})+h}}z=z.replace(/\n/g,"\x3cbr\x3e");w||(z=z.replace(new RegExp("\x3cbr\x3e(?\x3d\x3c/"+v+"\x3e)"),function(b){return CKEDITOR.tools.repeat(b,2)}));z=z.replace(/^ | $/g,"\x26nbsp;");return z=z.replace(/(>|\s) /g,function(d,c){return c+"\x26nbsp;"}).replace(/ (?=<)/g,"\x26nbsp;")},getNextNumber:function(){var b=0;return function(){return ++b}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var d="e",c=0;8>c;c++){d+=Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return d},override:function(d,c){var f=c(d);f.prototype=d.prototype;return f},setTimeout:function(f,d,k,l,h){h||(h=window);k||(k=h);return h.setTimeout(function(){l?f.apply(k,[].concat(l)):f.apply(k)},d||0)},throttle:function(d,c,f){return new this.buffers.throttle(d,c,f)},trim:function(){var b=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(c){return c.replace(b,"")}}(),ltrim:function(){var b=/^[ \t\n\r]+/g;return function(c){return c.replace(b,"")}}(),rtrim:function(){var b=/[ \t\n\r]+$/g;return function(c){return c.replace(b,"")}}(),indexOf:function(f,d){if("function"==typeof d){for(var g=0,h=f.length;g<h;g++){if(d(f[g])){return g}}}else{if(f.indexOf){return f.indexOf(d)}g=0;for(h=f.length;g<h;g++){if(f[g]===d){return g}}}return -1},search:function(d,c){var f=CKEDITOR.tools.indexOf(d,c);return 0<=f?d[f]:null},bind:function(d,c){var f=Array.prototype.slice.call(arguments,2);return function(){return d.apply(c,f.concat(Array.prototype.slice.call(arguments)))}},createClass:function(f){var d=f.$,k=f.base,w=f.privates||f._,h=f.proto;f=f.statics;!d&&(d=function(){k&&this.base.apply(this,arguments)});if(w){var v=d,d=function(){var g=this._||(this._={}),c;for(c in w){var x=w[c];g[c]="function"==typeof x?CKEDITOR.tools.bind(x,this):x}v.apply(this,arguments)}}k&&(d.prototype=this.prototypedCopy(k.prototype),d.prototype.constructor=d,d.base=k,d.baseProto=k.prototype,d.prototype.base=function l(){this.base=k.prototype.base;k.apply(this,arguments);this.base=l});h&&this.extend(d.prototype,h,!0);f&&this.extend(d,f,!0);return d},addFunction:function(b,c){return s.push(function(){return b.apply(c||this,arguments)})-1},removeFunction:function(b){s[b]=null},callFunction:function(b){var c=s[b];return c&&c.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var d=/^-?\d+\.?\d*px$/,c;return function(b){c=CKEDITOR.tools.trim(b+"")+"px";return d.test(c)?c:b||""}}(),convertToPx:function(){var b;return function(c){b||(b=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(b));if(!/%$/.test(c)){var d=0>parseFloat(c);d&&(c=c.replace("-",""));b.setStyle("width",c);c=b.$.clientWidth;return d?-c:c}return c}}(),repeat:function(d,c){return Array(c+1).join(d)},tryThese:function(){for(var f,d=0,k=arguments.length;d<k;d++){var l=arguments[d];try{f=l();break}catch(h){}}return f},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(b){return function(){var c=arguments,d=this;window.setTimeout(function(){b.apply(d,c)},0)}},normalizeCssText:function(f,d){var k=[],l,h=CKEDITOR.tools.parseCssText(f,!0,d);for(l in h){k.push(l+":"+h[l])}k.sort();return k.length?k.join(";")+";":""},convertRgbToHex:function(b){return b.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(f,d,g,h){f=[d,g,h];for(d=0;3>d;d++){f[d]=("0"+parseInt(f[d],10).toString(16)).slice(-2)}return"#"+f.join("")})},normalizeHex:function(b){return b.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(f,d,g,h){f=d.toLowerCase();3==f.length&&(f=f.split(""),f=[f[0],f[0],f[1],f[1],f[2],f[2]].join(""));return"#"+f+h})},parseCssText:function(f,d,g){var h={};g&&(f=(new CKEDITOR.dom.element("span")).setAttribute("style",f).getAttribute("style")||"");f&&(f=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(f)));if(!f||";"==f){return h}f.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(c,k,b){d&&(k=k.toLowerCase(),"font-family"==k&&(b=b.replace(/\s*,\s*/g,",")),b=CKEDITOR.tools.trim(b));h[k]=b});return h},writeCssText:function(f,d){var g,h=[];for(g in f){h.push(g+":"+f[g])}d&&h.sort();return h.join("; ")},objectCompare:function(f,d,g){var h;if(!f&&!d){return !0}if(!f||!d){return !1}for(h in f){if(f[h]!=d[h]){return !1}}if(!g){for(h in d){if(f[h]!=d[h]){return !1}}}return !0},objectKeys:function(b){return CKEDITOR.tools.object.keys(b)},convertArrayToObject:function(f,d){var k={};1==arguments.length&&(d=!0);for(var l=0,h=f.length;l<h;++l){k[f[l]]=d}return k},fixDomain:function(){for(var d;;){try{d=window.parent.document.domain;break}catch(c){d=d?d.replace(/.+?(?:\.|$)/,""):document.domain;if(!d){break}document.domain=d}}return !!d},eventsBuffer:function(d,c,f){return new this.buffers.event(d,c,f)},enableHtml5Elements:function(f,d){for(var k="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),l=k.length,h;l--;){h=f.createElement(k[l]),d&&f.appendChild(h)}},checkIfAnyArrayItemMatches:function(f,d){for(var g=0,h=f.length;g<h;++g){if(f[g].match(d)){return !0}}return !1},checkIfAnyObjectPropertyMatches:function(d,c){for(var f in d){if(f.match(c)){return !0}}return !1},keystrokeToString:function(d,c){var f=this.keystrokeToArray(d,c);f.display=f.display.join("+");f.aria=f.aria.join("+");return f},keystrokeToArray:function(h,f){var l=f&16711680,x=f&65535,k=CKEDITOR.env.mac,w=[],v=[];l&CKEDITOR.CTRL&&(w.push(k?"⌘":h[17]),v.push(k?h[224]:h[17]));l&CKEDITOR.ALT&&(w.push(k?"⌥":h[18]),v.push(h[18]));l&CKEDITOR.SHIFT&&(w.push(k?"⇧":h[16]),v.push(h[16]));x&&(h[x]?(w.push(h[x]),v.push(h[x])):(w.push(String.fromCharCode(x)),v.push(String.fromCharCode(x))));return{display:w,aria:v}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",getCookie:function(f){f=f.toLowerCase();for(var d=document.cookie.split(";"),k,l,h=0;h<d.length;h++){if(k=d[h].split("\x3d"),l=decodeURIComponent(CKEDITOR.tools.trim(k[0]).toLowerCase()),l===f){return decodeURIComponent(1<k.length?k[1]:"")}}return null},setCookie:function(d,c){document.cookie=encodeURIComponent(d)+"\x3d"+encodeURIComponent(c)+";path\x3d/"},getCsrfToken:function(){var f=CKEDITOR.tools.getCookie("ckCsrfToken");if(!f||40!=f.length){var f=[],d="";if(window.crypto&&window.crypto.getRandomValues){f=new Uint8Array(40),window.crypto.getRandomValues(f)}else{for(var g=0;40>g;g++){f.push(Math.floor(256*Math.random()))}}for(g=0;g<f.length;g++){var h="abcdefghijklmnopqrstuvwxyz0123456789".charAt(f[g]%36),d=d+(0.5<Math.random()?h.toUpperCase():h)}f=d;CKEDITOR.tools.setCookie("ckCsrfToken",f)}return f},escapeCss:function(b){return b?window.CSS&&CSS.escape?CSS.escape(b):isNaN(parseInt(b.charAt(0),10))?b:"\\3"+b.charAt(0)+" "+b.substring(1,b.length):""},getMouseButton:function(b){return(b=b&&b.data?b.data.$:b)?CKEDITOR.tools.normalizeMouseButton(b.button):!1},normalizeMouseButton:function(f,d){if(!CKEDITOR.env.ie||9<=CKEDITOR.env.version&&!CKEDITOR.env.ie6Compat){return f}for(var k=[[CKEDITOR.MOUSE_BUTTON_LEFT,1],[CKEDITOR.MOUSE_BUTTON_MIDDLE,4],[CKEDITOR.MOUSE_BUTTON_RIGHT,2]],l=0;l<k.length;l++){var h=k[l];if(h[0]===f&&d){return h[1]}if(!d&&h[1]===f){return h[0]}}},convertHexStringToBytes:function(f){var d=[],g=f.length/2,h;for(h=0;h<g;h++){d.push(parseInt(f.substr(2*h,2),16))}return d},convertBytesToBase64:function(k){var f="",w=k.length,z;for(z=0;z<w;z+=3){var v=k.slice(z,z+3),y=v.length,x=[],h;if(3>y){for(h=y;3>h;h++){v[h]=0}}x[0]=(v[0]&252)>>2;x[1]=(v[0]&3)<<4|v[1]>>4;x[2]=(v[1]&15)<<2|(v[2]&192)>>6;x[3]=v[2]&63;for(h=0;4>h;h++){f=h<=y?f+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(x[h]):f+"\x3d"}}return f},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(d){var c={},f=this._findColor(d);f.length&&(c.color=f[0],CKEDITOR.tools.array.forEach(f,function(e){d=d.replace(e,"")}));if(d=CKEDITOR.tools.trim(d)){c.unprocessed=d}return c},margin:function(b){return CKEDITOR.tools.style.parse.sideShorthand(b,function(c){return c.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]})},sideShorthand:function(f,d){function k(b){l.top=h[b[0]];l.right=h[b[1]];l.bottom=h[b[2]];l.left=h[b[3]]}var l={},h=d?d(f):f.split(/\s+/);switch(h.length){case 1:k([0,0,0,0]);break;case 2:k([0,1,0,1]);break;case 3:k([0,1,2,1]);break;case 4:k([0,1,2,3])}return l},border:function(b){return CKEDITOR.tools.style.border.fromCssRule(b)},_findColor:function(d){var c=[],f=CKEDITOR.tools.array,c=c.concat(d.match(this._rgbaRegExp)||[]),c=c.concat(d.match(this._hslaRegExp)||[]);return c=c.concat(f.filter(d.split(/\s+/),function(b){return b.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)?!0:b.toLowerCase() in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(f,d,g){var h=[];this.forEach(f,function(b,c){d.call(g,b,c,f)&&h.push(b)});return h},find:function(f,d,k){for(var l=f.length,h=0;h<l;){if(d.call(k,f[h],h,f)){return f[h]}h++}},forEach:function(f,d,k){var l=f.length,h;for(h=0;h<l;h++){d.call(k,f[h],h,f)}},map:function(f,d,k){for(var l=[],h=0;h<f.length;h++){l.push(d.call(k,f[h],h,f))}return l},reduce:function(f,d,k,l){for(var h=0;h<f.length;h++){k=d.call(l,k,f[h],h,f)}return k},every:function(d,c,f){if(!d.length){return !0}c=this.filter(d,c,f);return d.length===c.length},some:function(f,d,g){for(var h=0;h<f.length;h++){if(d.call(g,f[h],h,f)){return !0}}return !1}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(b){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(b),function(c){return[c,b[c]]})},values:function(b){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(b),function(c){return b[c]})},keys:function(f){var d=Object.prototype.hasOwnProperty,k=[],l=CKEDITOR.tools.object.DONT_ENUMS;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(!f||"object"!==typeof f)){d=[];if("string"===typeof f){for(k=0;k<f.length;k++){d.push(String(k))}}return d}for(var h in f){k.push(h)}if(CKEDITOR.env.ie&&9>CKEDITOR.env.version){for(h=0;h<l.length;h++){d.call(f,l[h])&&k.push(l[h])}}return k},findKey:function(d,c){if("object"!==typeof d){return null}for(var f in d){if(d[f]===c){return f}}return null},merge:function(f,d){var k=CKEDITOR.tools,l=k.clone(f),h=k.clone(d);k.array.forEach(k.object.keys(h),function(b){l[b]="object"===typeof h[b]&&"object"===typeof l[b]?k.object.merge(l[b],h[b]):h[b]});return l}},getAbsoluteRectPosition:function(f,d){function k(e){if(e){var c=e.getClientRect();l.top+=c.top;l.left+=c.left;"x" in l&&"y" in l&&(l.x+=c.x,l.y+=c.y);k(e.getWindow().getFrame())}}var l=CKEDITOR.tools.copy(d);k(f.getFrame());var h=CKEDITOR.document.getWindow().getScrollPosition();l.top+=h.y;l.left+=h.x;"x" in l&&"y" in l&&(l.y+=h.y,l.x+=h.x);l.right=l.left+l.width;l.bottom=l.top+l.height;return l}};t.prototype={reset:function(){this._lastOutput=0;this._clearTimer()},_reschedule:function(){return !1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer);this._scheduledTimer=0}};q.prototype=CKEDITOR.tools.prototypedCopy(t.prototype);q.prototype._reschedule=function(){this._scheduledTimer&&this._clearTimer()};q.prototype._call=function(){this._output.apply(this._context,this._args)};CKEDITOR.tools.buffers={};CKEDITOR.tools.buffers.event=t;CKEDITOR.tools.buffers.throttle=q;CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(b){b=b||{};this.width=b.width;this.style=b.style;this.color=b.color;this._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var d in this._.normalizeMap){var c=this[d];c&&(this[d]=CKEDITOR.tools.array.reduce(this._.normalizeMap[d],function(f,e){return f.replace(e[0],e[1])},c))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([this.width,this.style,this.color],function(b){return !!b}).join(" ")}},statics:{fromCssRule:function(d){var c={},f=d.split(/\s+/g);d=CKEDITOR.tools.style.parse._findColor(d);d.length&&(c.color=d[0]);CKEDITOR.tools.array.forEach(f,function(b){c.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,b)?!c.width&&CKEDITOR.tools.style.parse._widthRegExp.test(b)&&(c.width=b):c.style=b});return new CKEDITOR.tools.style.border(c)},splitCssValues:function(d,c){c=c||{};var f=CKEDITOR.tools.array.reduce(["width","style","color"],function(h,k){var b=d["border-"+k]||c[k];h[k]=b?CKEDITOR.tools.style.parse.sideShorthand(b):null;return h},{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],function(e,w){var k={},v;for(v in f){var h=d["border-"+w+"-"+v];k[v]=h?h:f[v]&&f[v][w]}e["border-"+w]=new CKEDITOR.tools.style.border(k);return e},{})}}});CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf;CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray;CKEDITOR.MOUSE_BUTTON_LEFT=0;CKEDITOR.MOUSE_BUTTON_MIDDLE=1;CKEDITOR.MOUSE_BUTTON_RIGHT=2})();CKEDITOR.dtd=function(){var r=CKEDITOR.tools.extend,o=function(h,f){for(var s=CKEDITOR.tools.clone(h),k=1;k<arguments.length;k++){f=arguments[k];for(var l in f){delete s[l]}}return s},q={},p={},n={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},j={command:1,link:1,meta:1,noscript:1,script:1,style:1},i={},m={"#":1},e={center:1,dir:1,noframes:1};r(q,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},m,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});r(p,n,q,e);o={a:o(q,{a:1,button:1}),abbr:q,address:p,area:i,article:p,aside:p,audio:r({source:1,track:1},p),b:q,base:i,bdi:q,bdo:q,blockquote:p,body:p,br:i,button:o(q,{a:1,button:1}),canvas:q,caption:p,cite:q,code:q,col:i,colgroup:{col:1},command:i,datalist:r({option:1},q),dd:p,del:q,details:r({summary:1},p),dfn:q,div:p,dl:{dt:1,dd:1},dt:p,em:q,embed:i,fieldset:r({legend:1},p),figcaption:p,figure:r({figcaption:1},p),footer:p,form:p,h1:q,h2:q,h3:q,h4:q,h5:q,h6:q,head:r({title:1,base:1},j),header:p,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:i,html:r({head:1,body:1},p,j),i:q,iframe:m,img:i,input:i,ins:q,kbd:q,keygen:i,label:q,legend:q,li:p,link:i,main:p,map:p,mark:q,menu:r({li:1},p),meta:i,meter:o(q,{meter:1}),nav:p,noscript:r({link:1,meta:1,style:1},q),object:r({param:1},q),ol:{li:1},optgroup:{option:1},option:m,output:q,p:q,param:i,pre:q,progress:o(q,{progress:1}),q:q,rp:q,rt:q,ruby:r({rp:1,rt:1},q),s:q,samp:q,script:m,section:p,select:{optgroup:1,option:1},small:q,source:i,span:q,strong:q,style:m,sub:q,summary:r({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},q),sup:q,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:p,textarea:m,tfoot:{tr:1},th:p,thead:{tr:1},time:o(q,{time:1}),title:m,tr:{th:1,td:1},track:i,u:q,ul:{li:1},"var":q,video:r({source:1,track:1},p),wbr:i,acronym:q,applet:r({param:1},p),basefont:i,big:q,center:p,dialog:i,dir:{li:1},font:q,isindex:i,noframes:p,strike:q,tt:q};r(o,{$block:r({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},n,e),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:q,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:r({body:1,head:1,html:1},o.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return o}();CKEDITOR.dom.event=function(b){this.$=b};CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var b=this.getKey();if(this.$.ctrlKey||this.$.metaKey){b+=CKEDITOR.CTRL}this.$.shiftKey&&(b+=CKEDITOR.SHIFT);this.$.altKey&&(b+=CKEDITOR.ALT);return b},preventDefault:function(b){var c=this.$;c.preventDefault?c.preventDefault():c.returnValue=!1;b&&this.stopPropagation()},stopPropagation:function(){var b=this.$;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},getTarget:function(){var b=this.$.target||this.$.srcElement;return b?new CKEDITOR.dom.node(b):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var b=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(b.documentElement.scrollLeft||b.body.scrollLeft),y:this.$.pageY||this.$.clientY+(b.documentElement.scrollTop||b.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(b){b&&(this.$=b)};CKEDITOR.dom.domObject.prototype=function(){var b=function(d,c){return function(e){"undefined"!=typeof CKEDITOR&&d.fire(c,new CKEDITOR.dom.event(e))}};return{getPrivate:function(){var c;(c=this.getCustomData("_"))||this.setCustomData("_",c={});return c},on:function(e){var c=this.getCustomData("_cke_nativeListeners");c||(c={},this.setCustomData("_cke_nativeListeners",c));c[e]||(c=c[e]=b(this,e),this.$.addEventListener?this.$.addEventListener(e,c,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+e,c));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(e)){var d=this.getCustomData("_cke_nativeListeners"),f=d&&d[e];f&&(this.$.removeEventListener?this.$.removeEventListener(e,f,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,f),delete d[e])}},removeAllListeners:function(){try{var e=this.getCustomData("_cke_nativeListeners"),d;for(d in e){var h=e[d];this.$.detachEvent?this.$.detachEvent("on"+d,h):this.$.removeEventListener&&this.$.removeEventListener(d,h,!1);delete e[d]}}catch(g){if(!CKEDITOR.env.edge||-2146828218!==g.number){throw g}}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();(function(b){var c={};CKEDITOR.on("reset",function(){c={}});b.equals=function(d){try{return d&&d.$===this.$}catch(e){return !1}};b.setCustomData=function(d,g){var e=this.getUniqueId();(c[e]||(c[e]={}))[d]=g;return this};b.getCustomData=function(d){var e=this.$["data-cke-expando"];return(e=e&&c[e])&&d in e?e[d]:null};b.removeCustomData=function(d){var i=this.$["data-cke-expando"],i=i&&c[i],g,e;i&&(g=i[d],e=d in i,delete i[d]);return e?g:null};b.clearCustomData=function(){this.removeAllListeners();var d=this.getUniqueId();d&&delete c[d]};b.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(b)})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.node=function(b){return b?new CKEDITOR.dom[b.nodeType==CKEDITOR.NODE_DOCUMENT?"document":b.nodeType==CKEDITOR.NODE_ELEMENT?"element":b.nodeType==CKEDITOR.NODE_TEXT?"text":b.nodeType==CKEDITOR.NODE_COMMENT?"comment":b.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](b):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(b,c){b.append(this,c);return b},clone:function(g,i){function e(d){d["data-cke-expando"]&&(d["data-cke-expando"]=!1);if(d.nodeType==CKEDITOR.NODE_ELEMENT||d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(i||d.nodeType!=CKEDITOR.NODE_ELEMENT||d.removeAttribute("id",!1),g){d=d.childNodes;for(var b=0;b<d.length;b++){e(d[b])}}}}function j(c){if(c.type==CKEDITOR.NODE_ELEMENT||c.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(c.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var f=c.getName();":"==f[0]&&c.renameNode(f.substring(1))}if(g){for(f=0;f<c.getChildCount();f++){j(c.getChild(f))}}}}var h=this.$.cloneNode(g);e(h);h=new CKEDITOR.dom.node(h);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&j(h);return h},hasPrevious:function(){return !!this.$.previousSibling},hasNext:function(){return !!this.$.nextSibling},insertAfter:function(b){b.$.parentNode.insertBefore(this.$,b.$.nextSibling);return b},insertBefore:function(b){b.$.parentNode.insertBefore(this.$,b.$);return b},insertBeforeMe:function(b){this.$.parentNode.insertBefore(b.$,this.$);return b},getAddress:function(g){for(var i=[],e=this.getDocument().$.documentElement,j=this;j&&j!=e;){var h=j.getParent();h&&i.unshift(this.getIndex.call(j,g));j=h}return i},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(g){function i(f,d){var k=d?f.getNext():f.getPrevious();return k&&k.type==CKEDITOR.NODE_TEXT?k.isEmpty()?i(k,d):k:null}var e=this,j=-1,h;if(!this.getParent()||g&&e.type==CKEDITOR.NODE_TEXT&&e.isEmpty()&&!i(e)&&!i(e,!0)){return -1}do{if(!g||e.equals(this)||e.type!=CKEDITOR.NODE_TEXT||!h&&!e.isEmpty()){j++,h=e.type==CKEDITOR.NODE_TEXT}}while(e=e.getPrevious());return j},getNextSourceNode:function(g,i,e){if(e&&!e.call){var j=e;e=function(b){return !b.equals(j)}}g=!g&&this.getFirst&&this.getFirst();var h;if(!g){if(this.type==CKEDITOR.NODE_ELEMENT&&e&&!1===e(this,!0)){return null}g=this.getNext()}for(;!g&&(h=(h||this).getParent());){if(e&&!1===e(h,!0)){return null}g=h.getNext()}return !g||e&&!1===e(g)?null:i&&i!=g.type?g.getNextSourceNode(!1,i,e):g},getPreviousSourceNode:function(g,i,e){if(e&&!e.call){var j=e;e=function(b){return !b.equals(j)}}g=!g&&this.getLast&&this.getLast();var h;if(!g){if(this.type==CKEDITOR.NODE_ELEMENT&&e&&!1===e(this,!0)){return null}g=this.getPrevious()}for(;!g&&(h=(h||this).getParent());){if(e&&!1===e(h,!0)){return null}g=h.getPrevious()}return !g||e&&!1===e(g)?null:i&&g.type!=i?g.getPreviousSourceNode(!1,i,e):g},getPrevious:function(e){var f=this.$,c;do{c=(f=f.previousSibling)&&10!=f.nodeType&&new CKEDITOR.dom.node(f)}while(c&&e&&!e(c));return c},getNext:function(e){var f=this.$,c;do{c=(f=f.nextSibling)&&new CKEDITOR.dom.node(f)}while(c&&e&&!e(c));return c},getParent:function(b){var c=this.$.parentNode;return c&&(c.nodeType==CKEDITOR.NODE_ELEMENT||b&&c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(c):null},getParents:function(e){var f=this,c=[];do{c[e?"push":"unshift"](f)}while(f=f.getParent());return c},getCommonAncestor:function(b){if(b.equals(this)){return this}if(b.contains&&b.contains(this)){return b}var c=this.contains?this:this.getParent();do{if(c.contains(b)){return c}}while(c=c.getParent());return null},getPosition:function(f){var g=this.$,e=f.$;if(g.compareDocumentPosition){return g.compareDocumentPosition(e)}if(g==e){return CKEDITOR.POSITION_IDENTICAL}if(this.type==CKEDITOR.NODE_ELEMENT&&f.type==CKEDITOR.NODE_ELEMENT){if(g.contains){if(g.contains(e)){return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING}if(e.contains(g)){return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}}if("sourceIndex" in g){return 0>g.sourceIndex||0>e.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:g.sourceIndex<e.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}g=this.getAddress();f=f.getAddress();for(var e=Math.min(g.length,f.length),h=0;h<e;h++){if(g[h]!=f[h]){return g[h]<f[h]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}return g.length<f.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(g,k){var e=this.$,l,j;k||(e=e.parentNode);"function"==typeof g?(j=!0,l=g):(j=!1,l=function(c){c="string"==typeof c.nodeName?c.nodeName.toLowerCase():"";return"string"==typeof g?c==g:c in g});for(;e;){if(l(j?new CKEDITOR.dom.node(e):e)){return new CKEDITOR.dom.node(e)}try{e=e.parentNode}catch(i){e=null}}return null},hasAscendant:function(e,f){var c=this.$;f||(c=c.parentNode);for(;c;){if(c.nodeName&&c.nodeName.toLowerCase()==e){return !0}c=c.parentNode}return !1},move:function(b,c){b.append(this.remove(),c)},remove:function(e){var f=this.$,c=f.parentNode;if(c){if(e){for(;e=f.firstChild;){c.insertBefore(f.removeChild(e),f)}}c.removeChild(f)}return this},replace:function(b){this.insertBefore(b);b.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var f=CKEDITOR.tools.ltrim(e.getText()),c=e.getLength();if(f){f.length<c&&(e.split(c-f.length),this.$.removeChild(this.$.firstChild))}else{e.remove();continue}}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var f=CKEDITOR.tools.rtrim(e.getText()),c=e.getLength();if(f){f.length<c&&(e.split(f.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}else{e.remove();continue}}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(b){var c=this;this.type!=CKEDITOR.NODE_ELEMENT&&(c=this.getParent());CKEDITOR.env.edge&&c&&c.is("textarea","input")&&(b=!0);if(!b&&c&&"undefined"!=typeof c.$.isContentEditable){return !(c.$.isContentEditable||c.data("cke-editable"))}for(;c;){if(c.data("cke-editable")){return !1}if(c.hasAttribute("contenteditable")){return"false"==c.getAttribute("contenteditable")}c=c.getParent()}return !0}});CKEDITOR.dom.window=function(b){CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var b=this.$.document,c="CSS1Compat"==b.compatMode;return{width:(c?b.documentElement.clientWidth:b.body.clientWidth)||0,height:(c?b.documentElement.clientHeight:b.body.clientHeight)||0}},getScrollPosition:function(){var b=this.$;if("pageXOffset" in b){return{x:b.pageXOffset||0,y:b.pageYOffset||0}}b=b.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}},getFrame:function(){var b=this.$.frameElement;return b?new CKEDITOR.dom.element.get(b):null}});CKEDITOR.dom.document=function(b){CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(b){if(this.$.createStyleSheet){this.$.createStyleSheet(b)}else{var c=new CKEDITOR.dom.element("link");c.setAttributes({rel:"stylesheet",type:"text/css",href:b});this.getHead().append(c)}},appendStyleText:function(e){if(this.$.createStyleSheet){var f=this.$.createStyleSheet("");f.cssText=e}else{var c=new CKEDITOR.dom.element("style",this);c.append(new CKEDITOR.dom.text(e,this));this.getHead().append(c)}return f||c.$.sheet},createElement:function(e,f){var c=new CKEDITOR.dom.element(e,this);f&&(f.attributes&&c.setAttributes(f.attributes),f.styles&&c.setStyles(f.styles));return c},createText:function(b){return new CKEDITOR.dom.text(b,this)},focus:function(){this.getWindow().focus()},getActive:function(){var b;try{b=this.$.activeElement}catch(c){return null}return new CKEDITOR.dom.element(b)},getById:function(b){return(b=this.$.getElementById(b))?new CKEDITOR.dom.element(b):null},getByAddress:function(i,o){for(var e=this.$.documentElement,p=0;e&&p<i.length;p++){var n=i[p];if(o){for(var l=-1,j=0;j<e.childNodes.length;j++){var m=e.childNodes[j];if(!0!==o||3!=m.nodeType||!m.previousSibling||3!=m.previousSibling.nodeType){if(l++,l==n){e=m;break}}}}else{e=e.childNodes[n]}}return e?new CKEDITOR.dom.node(e):null},getElementsByTag:function(b,c){CKEDITOR.env.ie&&8>=document.documentMode||!c||(b=c+":"+b);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(b))},getHead:function(){var b=this.$.getElementsByTagName("head")[0];return b=b?new CKEDITOR.dom.element(b):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(b){this.$.open("text/html","replace");CKEDITOR.env.ie&&(b=b.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+CKEDITOR.tools.fixDomain+")();\x3c/script\x3e"));this.$.write(b);this.$.close()},find:function(b){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b))},findOne:function(b){return(b=this.$.querySelector(b))?new CKEDITOR.dom.element(b):null},_getHtml5ShivFrag:function(){var b=this.getCustomData("html5ShivFrag");b||(b=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(b,!0),this.setCustomData("html5ShivFrag",b));return b}});CKEDITOR.dom.nodeList=function(b){this.$=b};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(b){return 0>b||b>=this.$.length?null:(b=this.$[b])?new CKEDITOR.dom.node(b):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,function(b){return new CKEDITOR.dom.node(b)})}};CKEDITOR.dom.element=function(b,c){"string"==typeof b&&(b=(c?c.$:document).createElement(b));CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.element.get=function(b){return(b="string"==typeof b?document.getElementById(b)||document.getElementsByName(b)[0]:b)&&(b.$?b:new CKEDITOR.dom.element(b))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(e,f){var c=new CKEDITOR.dom.element("div",f);c.setHtml(e);return c.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(g,k,e,l){var j=k.getCustomData("list_marker_id")||k.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),i=k.getCustomData("list_marker_names")||k.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");g[j]=k;i[e]=1;return k.setCustomData(e,l)};CKEDITOR.dom.element.clearAllMarkers=function(b){for(var c in b){CKEDITOR.dom.element.clearMarkers(b,b[c],1)}};CKEDITOR.dom.element.clearMarkers=function(g,k,e){var l=k.getCustomData("list_marker_names"),j=k.getCustomData("list_marker_id"),i;for(i in l){k.removeCustomData(i)}k.removeCustomData("list_marker_names");e&&(k.removeCustomData("list_marker_id"),delete g[j])};(function(){function g(d,c){return -1<(" "+d+" ").replace(j," ").indexOf(" "+c+" ")}function m(d){var c=!0;d.$.id||(d.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),c=!1);return function(){c||d.removeAttribute("id")}}function e(f,d){var h=CKEDITOR.tools.escapeCss(f.$.id);return"#"+h+" "+d.split(/,\s*/).join(", #"+h+" ")}function n(f){for(var d=0,k=0,h=i[f].length;k<h;k++){d+=parseFloat(this.getComputedStyle(i[f][k])||0,10)||0}return d}var l=document.createElement("_").classList,l="undefined"!==typeof l&&null!==String(l.add).match(/\[Native code\]/gi),j=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:l?function(b){this.$.classList.add(b);return this}:function(d){var f=this.$.className;f&&(g(f,d)||(f+=" "+d));this.$.className=f||d;return this},removeClass:l?function(d){var c=this.$;c.classList.remove(d);c.className||c.removeAttribute("class");return this}:function(d){var f=this.getAttribute("class");f&&g(f,d)&&((f=f.replace(new RegExp("(?:^|\\s+)"+d+"(?\x3d\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",f):this.removeAttribute("class"));return this},hasClass:function(c){return g(this.$.className,c)},append:function(d,c){"string"==typeof d&&(d=this.getDocument().createElement(d));c?this.$.insertBefore(d.$,this.$.firstChild):this.$.appendChild(d.$);return d},appendHtml:function(d){if(this.$.childNodes.length){var c=new CKEDITOR.dom.element("div",this.getDocument());c.setHtml(d);c.moveChildren(this)}else{this.setHtml(d)}},appendText:function(b){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=b:this.append(new CKEDITOR.dom.text(b))},appendBogus:function(b){if(b||CKEDITOR.env.needsBrFiller){for(b=this.getLast();b&&b.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(b.getText());){b=b.getPrevious()}b&&b.is&&b.is("br")||(b=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&b.setAttribute("type","_moz"),this.append(b))}},breakParent:function(h,f){var p=new CKEDITOR.dom.range(this.getDocument());p.setStartAfter(this);p.setEndAfter(h);var k=p.extractContents(!1,f||!1),o;p.insertNode(this.remove());if(CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(p=new CKEDITOR.dom.element("div");o=k.getFirst();){o.$.style.backgroundColor&&(o.$.style.backgroundColor=o.$.style.backgroundColor),p.append(o)}p.insertAfter(this);p.remove(!0)}else{k.insertAfterNode(this)}},contains:document.compareDocumentPosition?function(b){return !!(this.$.compareDocumentPosition(b.$)&16)}:function(d){var c=this.$;return d.type!=CKEDITOR.NODE_ELEMENT?c.contains(d.getParent().$):c!=d.$&&c.contains(d.$)},focus:function(){function b(){try{this.$.focus()}catch(c){}}return function(c){c?CKEDITOR.tools.setTimeout(b,100,this):b.call(this)}}(),getHtml:function(){var b=this.$.innerHTML;return CKEDITOR.env.ie?b.replace(/<\?[^>]*>/g,""):b},getOuterHtml:function(){if(this.$.outerHTML){return this.$.outerHTML.replace(/<\?[^>]*>/,"")}var b=this.$.ownerDocument.createElement("div");b.appendChild(this.$.cloneNode(!0));return b.innerHTML},getClientRect:function(d){var c=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!c.width&&(c.width=c.right-c.left);!c.height&&(c.height=c.bottom-c.top);return d?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),c):c},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(f){try{var d=this.$;if(this.getParent()){return d.innerHTML=f}var k=this.getDocument()._getHtml5ShivFrag();k.appendChild(d);d.innerHTML=f;k.removeChild(d);return f}catch(h){this.$.innerHTML="";d=new CKEDITOR.dom.element("body",this.getDocument());d.$.innerHTML=f;for(d=d.getChildren();d.count();){this.append(d.getItem(0))}return f}}:function(b){return this.$.innerHTML=b},setText:function(){var b=document.createElement("p");b.innerHTML="x";b=b.textContent;return function(c){this.$[b?"textContent":"innerText"]=c}}(),getAttribute:function(){var b=function(c){return this.$.getAttribute(c,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(c){switch(c){case"class":c="className";break;case"http-equiv":c="httpEquiv";break;case"name":return this.$.name;case"tabindex":return c=this.$.getAttribute(c,2),0!==c&&0===this.$.tabIndex&&(c=null),c;case"checked":return c=this.$.attributes.getNamedItem(c),(c.specified?c.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[c];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(c,2)}:b}(),getAttributes:function(f){var d={},k=this.$.attributes,h;f=CKEDITOR.tools.isArray(f)?f:[];for(h=0;h<k.length;h++){-1===CKEDITOR.tools.indexOf(f,k[h].name)&&(d[k[h].name]=k[h].value)}return d},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getClientSize:function(){return{width:this.$.clientWidth,height:this.$.clientHeight}},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(d){var c=this.getWindow().$.getComputedStyle(this.$,null);return c?c.getPropertyValue(d):""}:function(b){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(b)]},getDtd:function(){var b=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return b};return b},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var b=this.$.tabIndex;return 0!==b||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?b:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var d=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var c=this.$.scopeName;"HTML"!=c&&(d=c.toLowerCase()+":"+d)}this.getName=function(){return d};return this.getName()},getValue:function(){return this.$.value},getFirst:function(d){var c=this.$.firstChild;(c=c&&new CKEDITOR.dom.node(c))&&d&&!d(c)&&(c=c.getNext(d));return c},getLast:function(d){var c=this.$.lastChild;(c=c&&new CKEDITOR.dom.node(c))&&d&&!d(c)&&(c=c.getPrevious(d));return c},getStyle:function(b){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(b)]},is:function(){var d=this.getName();if("object"==typeof arguments[0]){return !!arguments[0][d]}for(var c=0;c<arguments.length;c++){if(arguments[c]==d){return !0}}return !1},isEditable:function(d){var c=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[c]||CKEDITOR.dtd.$empty[c]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==d?(d=CKEDITOR.dtd[c]||CKEDITOR.dtd.span,!(!d||!d["#"])):!0},isIdentical:function(f){var d=this.clone(0,1);f=f.clone(0,1);d.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);f.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(d.$.isEqualNode){return d.$.style.cssText=CKEDITOR.tools.normalizeCssText(d.$.style.cssText),f.$.style.cssText=CKEDITOR.tools.normalizeCssText(f.$.style.cssText),d.$.isEqualNode(f.$)}d=d.getOuterHtml();f=f.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var h=this.getParent();h.type==CKEDITOR.NODE_ELEMENT&&(h=h.clone(),h.setHtml(d),d=h.getHtml(),h.setHtml(f),f=h.getHtml())}return d==f},isVisible:function(){var f=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),d,h;f&&CKEDITOR.env.webkit&&(d=this.getWindow(),!d.equals(CKEDITOR.document.getWindow())&&(h=d.$.frameElement)&&(f=(new CKEDITOR.dom.element(h)).isVisible()));return !!f},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()]){return !1}for(var f=this.getChildren(),d=0,k=f.count();d<k;d++){var h=f.getItem(d);if(h.type!=CKEDITOR.NODE_ELEMENT||!h.data("cke-bookmark")){if(h.type==CKEDITOR.NODE_ELEMENT&&!h.isEmptyInlineRemoveable()||h.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(h.getText())){return !1}}}return !0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var f=this.$.attributes,d=0;d<f.length;d++){var h=f[d];switch(h.nodeName){case"class":if(this.getAttribute("class")){return !0}case"data-cke-expando":continue;default:if(h.specified){return !0}}}return !1}:function(){var f=this.$.attributes,d=f.length,h={"data-cke-expando":1,_moz_dirty:1};return 0<d&&(2<d||!h[f[0].nodeName]||2==d&&!h[f[1].nodeName])},hasAttribute:function(){function b(d){var f=this.$.attributes.getNamedItem(d);if("input"==this.getName()){switch(d){case"class":return 0<this.$.className.length;case"checked":return !!this.$.checked;case"value":return d=this.getAttribute("type"),"checkbox"==d||"radio"==d?"on"!=this.$.value:!!this.$.value}}return f?f.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(c){return"name"==c?!!this.$.name:b.call(this,c)}:b:function(c){return !!this.$.attributes.getNamedItem(c)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(f,d){var k=this.$;f=f.$;if(k!=f){var h;if(d){for(;h=k.lastChild;){f.insertBefore(k.removeChild(h),f.firstChild)}}else{for(;h=k.firstChild;){f.appendChild(k.removeChild(h))}}}},mergeSiblings:function(){function b(f,p,k){if(p&&p.type==CKEDITOR.NODE_ELEMENT){for(var o=[];p.data("cke-bookmark")||p.isEmptyInlineRemoveable();){if(o.push(p),p=k?p.getNext():p.getPrevious(),!p||p.type!=CKEDITOR.NODE_ELEMENT){return}}if(f.isIdentical(p)){for(var h=k?f.getLast():f.getFirst();o.length;){o.shift().move(f,!k)}p.moveChildren(f,!k);p.remove();h&&h.type==CKEDITOR.NODE_ELEMENT&&h.mergeSiblings()}}}return function(c){if(!1===c||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a")){b(this,this.getNext(),!0),b(this,this.getPrevious())}}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var b=function(d,c){this.$.setAttribute(d,c);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(d,f){"class"==d?this.$.className=f:"style"==d?this.$.style.cssText=f:"tabindex"==d?this.$.tabIndex=f:"checked"==d?this.$.checked=f:"contenteditable"==d?b.call(this,"contentEditable",f):b.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(d,h){if("src"==d&&h.match(/^http:\/\//)){try{b.apply(this,arguments)}catch(f){}}else{b.apply(this,arguments)}return this}:b}(),setAttributes:function(d){for(var c in d){this.setAttribute(c,d[c])}return this},setValue:function(b){this.$.value=b;return this},removeAttribute:function(){var b=function(c){this.$.removeAttribute(c)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(c){"class"==c?c="className":"tabindex"==c?c="tabIndex":"contenteditable"==c&&(c="contentEditable");this.$.removeAttribute(c)}:b}(),removeAttributes:function(d){if(CKEDITOR.tools.isArray(d)){for(var c=0;c<d.length;c++){this.removeAttribute(d[c])}}else{for(c in d=d||this.getAttributes(),d){d.hasOwnProperty(c)&&this.removeAttribute(c)}}},removeStyle:function(h){var f=this.$.style;if(f.removeProperty||"border"!=h&&"margin"!=h&&"padding"!=h){f.removeProperty?f.removeProperty(h):f.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(h)),this.$.style.cssText||this.removeAttribute("style")}else{var q=["top","left","right","bottom"],o;"border"==h&&(o=["color","style","width"]);for(var f=[],p=0;p<q.length;p++){if(o){for(var k=0;k<o.length;k++){f.push([h,q[p],o[k]].join("-"))}}else{f.push([h,q[p]].join("-"))}}for(h=0;h<f.length;h++){this.removeStyle(f[h])}}},setStyle:function(d,c){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(d)]=c;return this},setStyles:function(d){for(var c in d){this.setStyle(c,d[c])}return this},setOpacity:function(b){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(b=Math.round(100*b),this.setStyle("filter",100<=b?"":"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d"+b+")")):this.setStyle("opacity",b)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var f,d=this.getElementsByTag("*"),k=0,h=d.count();k<h;k++){f=d.getItem(k),f.setAttribute("unselectable","on")}}},getPositionedAncestor:function(){for(var b=this;"html"!=b.getName();){if("static"!=b.getComputedStyle("position")){return b}b=b.getParent()}return null},getDocumentPosition:function(y){var x=0,w=0,s=this.getDocument(),v=s.getBody(),A="BackCompat"==s.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?8!==CKEDITOR.env.version:1)){var r=this.$.getBoundingClientRect(),q=s.$.documentElement,z=q.clientTop||v.$.clientTop||0,o=q.clientLeft||v.$.clientLeft||0,p=!0;CKEDITOR.env.ie&&(p=s.getDocumentElement().contains(this),s=s.getBody().contains(this),p=A&&s||!A&&p);p&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(x=v.$.scrollLeft||q.scrollLeft,w=v.$.scrollTop||q.scrollTop):(w=A?v.$:q,x=w.scrollLeft,w=w.scrollTop),x=r.left+x-o,w=r.top+w-z)}else{for(z=this,o=null;z&&"body"!=z.getName()&&"html"!=z.getName();){x+=z.$.offsetLeft-z.$.scrollLeft;w+=z.$.offsetTop-z.$.scrollTop;z.equals(this)||(x+=z.$.clientLeft||0,w+=z.$.clientTop||0);for(;o&&!o.equals(z);){x-=o.$.scrollLeft,w-=o.$.scrollTop,o=o.getParent()}o=z;z=(r=z.$.offsetParent)?new CKEDITOR.dom.element(r):null}}y&&(r=this.getWindow(),z=y.getWindow(),!r.equals(z)&&r.$.frameElement&&(y=(new CKEDITOR.dom.element(r.$.frameElement)).getDocumentPosition(y),x+=y.x,w+=y.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||A||(x+=this.$.clientLeft?1:0,w+=this.$.clientTop?1:0);return{x:x,y:w}},scrollIntoView:function(h){var f=this.getParent();if(f){do{if((f.$.clientWidth&&f.$.clientWidth<f.$.scrollWidth||f.$.clientHeight&&f.$.clientHeight<f.$.scrollHeight)&&!f.is("body")&&this.scrollIntoParent(f,h,1),f.is("html")){var p=f.getWindow();try{var k=p.$.frameElement;k&&(f=new CKEDITOR.dom.element(k))}catch(o){}}}while(f=f.getParent())}},scrollIntoParent:function(B,A,x){var v,w,F,s;function r(d,f){/body|html/.test(B.getName())?B.getWindow().$.scrollBy(d,f):(B.$.scrollLeft+=d,B.$.scrollTop+=f)}function E(f,d){var k={x:0,y:0};if(!f.is(q?"body":"html")){var h=f.$.getBoundingClientRect();k.x=h.left;k.y=h.top}h=f.getWindow();h.equals(d)||(h=E(CKEDITOR.dom.element.get(h.$.frameElement),d),k.x+=h.x,k.y+=h.y);return k}function o(d,c){return parseInt(d.getComputedStyle("margin-"+c)||0,10)||0}!B&&(B=this.getWindow());F=B.getDocument();var q="BackCompat"==F.$.compatMode;B instanceof CKEDITOR.dom.window&&(B=q?F.getBody():F.getDocumentElement());CKEDITOR.env.webkit&&(F=this.getEditor(!1))&&(F._.previousScrollTop=null);F=B.getWindow();w=E(this,F);var z=E(B,F),D=this.$.offsetHeight;v=this.$.offsetWidth;var C=B.$.clientHeight,p=B.$.clientWidth;F=w.x-o(this,"left")-z.x||0;s=w.y-o(this,"top")-z.y||0;v=w.x+v+o(this,"right")-(z.x+p)||0;w=w.y+D+o(this,"bottom")-(z.y+C)||0;(0>s||0<w)&&r(0,!0===A?s:!1===A?w:0>s?s:w);x&&(0>F||0<v)&&r(0>F?F:v,0)},setState:function(f,d,h){d=d||"cke";switch(f){case CKEDITOR.TRISTATE_ON:this.addClass(d+"_on");this.removeClass(d+"_off");this.removeClass(d+"_disabled");h&&this.setAttribute("aria-pressed",!0);h&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(d+"_disabled");this.removeClass(d+"_off");this.removeClass(d+"_on");h&&this.setAttribute("aria-disabled",!0);h&&this.removeAttribute("aria-pressed");break;default:this.addClass(d+"_off"),this.removeClass(d+"_on"),this.removeClass(d+"_disabled"),h&&this.removeAttribute("aria-pressed"),h&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var d=this.$;try{d.contentWindow.document}catch(c){d.src=d.src}return d&&new CKEDITOR.dom.document(d.contentWindow.document)},copyAttributes:function(k,h){var s=this.$.attributes;h=h||{};for(var q=0;q<s.length;q++){var r=s[q],o=r.nodeName.toLowerCase(),p;if(!(o in h)){if("checked"==o&&(p=this.getAttribute(o))){k.setAttribute(o,p)}else{if(!CKEDITOR.env.ie||this.hasAttribute(o)){p=this.getAttribute(o),null===p&&(p=r.nodeValue),k.setAttribute(o,p)}}}}""!==this.$.style.cssText&&(k.$.style.cssText=this.$.style.cssText)},renameNode:function(d){if(this.getName()!=d){var c=this.getDocument();d=new CKEDITOR.dom.element(d,c);this.copyAttributes(d);this.moveChildren(d);this.getParent(!0)&&this.$.parentNode.replaceChild(d.$,this.$);d.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=d.$;delete this.getName}},getChild:function(){function b(d,h){var f=d.childNodes;if(0<=h&&h<f.length){return f[h]}}return function(d){var f=this.$;if(d.slice){for(d=d.slice();0<d.length&&f;){f=b(f,d.shift())}}else{f=b(f,d)}return f?new CKEDITOR.dom.node(f):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function b(c){return c.type==CKEDITOR.NODE_ELEMENT&&c.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(c){c.data.getTarget().getAscendant(b,!0)||c.data.preventDefault()})},getDirection:function(b){return b?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(d,c){d="data-"+d;if(void 0===c){return this.getAttribute(d)}!1===c?this.removeAttribute(d):this.setAttribute(d,c);return null},getEditor:function(h){var f=CKEDITOR.instances,p,k,o;h=h||void 0===h;for(p in f){if(k=f[p],k.element.equals(this)&&k.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!h&&(o=k.editable())&&(o.equals(this)||o.contains(this))){return k}}return null},find:function(b){var d=m(this);b=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e(this,b)));d();return b},findOne:function(b){var d=m(this);b=this.$.querySelector(e(this,b));d();return b?new CKEDITOR.dom.element(b):null},forEach:function(h,f,p){if(!(p||f&&this.type!=f)){var k=h(this)}if(!1!==k){p=this.getChildren();for(var o=0;o<p.count();o++){k=p.getItem(o),k.type==CKEDITOR.NODE_ELEMENT?k.forEach(h,f):f&&k.type!=f||h(k)}}},fireEventHandler:function(k,h){var r="on"+k,p=this.$;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version){var q=p.ownerDocument.createEventObject(),o;for(o in h){q[o]=h[o]}p.fireEvent(r,q)}else{p[p[k]?k:r](h)}},isDetached:function(){var d=this.getDocument(),c=d.getDocumentElement();return c.equals(this)||c.contains(this)?!CKEDITOR.env.ie||8<CKEDITOR.env.version&&!CKEDITOR.env.quirks?!d.$.defaultView:!1:!0}});var i={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(f,c,h){"number"==typeof c&&(!h||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(c-=n.call(this,f)),this.setStyle(f,c+"px"))};CKEDITOR.dom.element.prototype.getSize=function(f,c){var h=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(f)],this.$["client"+CKEDITOR.tools.capitalize(f)])||0;c&&(h-=n.call(this,f));return h}})();CKEDITOR.dom.documentFragment=function(b){b=b||CKEDITOR.document;this.$=b.type==CKEDITOR.NODE_DOCUMENT?b.$.createDocumentFragment():b};CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(b){b=b.$;b.parentNode.insertBefore(this.$,b.nextSibling)},getHtml:function(){var b=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(b);return b.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1});(function(){function u(O,N){var L=this.range;if(this._.end){return null}if(!this._.start){this._.start=1;if(L.collapsed){return this.end(),null}L.optimize()}var I,J=L.startContainer;I=L.endContainer;var H=L.startOffset,P=L.endOffset,F,G=this.guard,D=this.type,y=O?"getPreviousSourceNode":"getNextSourceNode";if(!O&&!this._.guardLTR){var M=I.type==CKEDITOR.NODE_ELEMENT?I:I.getParent(),z=I.type==CKEDITOR.NODE_ELEMENT?I.getChild(P):I.getNext();this._.guardLTR=function(d,c){return(!c||!M.equals(d))&&(!z||!d.equals(z))&&(d.type!=CKEDITOR.NODE_ELEMENT||!c||!d.equals(L.root))}}if(O&&!this._.guardRTL){var E=J.type==CKEDITOR.NODE_ELEMENT?J:J.getParent(),l=J.type==CKEDITOR.NODE_ELEMENT?H?J.getChild(H-1):null:J.getPrevious();this._.guardRTL=function(d,c){return(!c||!E.equals(d))&&(!l||!d.equals(l))&&(d.type!=CKEDITOR.NODE_ELEMENT||!c||!d.equals(L.root))}}var v=O?this._.guardRTL:this._.guardLTR;F=G?function(d,c){return !1===v(d,c)?!1:G(d,c)}:v;this.current?I=this.current[y](!1,D,F):(O?I.type==CKEDITOR.NODE_ELEMENT&&(I=0<P?I.getChild(P-1):!1===F(I,!0)?null:I.getPreviousSourceNode(!0,D,F)):(I=J,I.type==CKEDITOR.NODE_ELEMENT&&((I=I.getChild(H))||(I=!1===F(J,!0)?null:J.getNextSourceNode(!0,D,F)))),I&&!1===F(I)&&(I=null));for(;I&&!this._.end;){this.current=I;if(!this.evaluator||!1!==this.evaluator(I)){if(!N){return I}}else{if(N&&this.evaluator){return !1}}I=I[y](!1,D,F)}this.end();return this.current=null}function q(d){for(var g,f=null;g=u.call(this,d);){f=g}return f}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(b){this.range=b;this._={}},proto:{end:function(){this._.end=1},next:function(){return u.call(this)},previous:function(){return u.call(this,1)},checkForward:function(){return !1!==u.call(this,0,1)},checkBackward:function(){return !1!==u.call(this,1,1)},lastForward:function(){return q.call(this)},lastBackward:function(){return q.call(this,1)},reset:function(){delete this.current;this._={}}}});var s={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},r={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(b){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position") in r||!s[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||b&&this.is(b)):!0};CKEDITOR.dom.walker.blockBoundary=function(b){return function(c){return !(c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary(b))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(e,d){function f(b){return b&&b.getName&&"span"==b.getName()&&b.data("cke-bookmark")}return function(c){var g,b;g=c&&c.type!=CKEDITOR.NODE_ELEMENT&&(b=c.getParent())&&f(b);g=e?g:g||f(c);return !!(d^g)}};CKEDITOR.dom.walker.whitespaces=function(b){return function(d){var e;d&&d.type==CKEDITOR.NODE_TEXT&&(e=!CKEDITOR.tools.trim(d.getText())||CKEDITOR.env.webkit&&d.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return !!(b^e)}};CKEDITOR.dom.walker.invisible=function(e){var d=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.env.webkit?1:0;return function(b){d(b)?b=1:(b.type==CKEDITOR.NODE_TEXT&&(b=b.getParent()),b=b.$.offsetWidth<=f);return !!(e^b)}};CKEDITOR.dom.walker.nodeType=function(d,c){return function(b){return !!(c^b.type==d)}};CKEDITOR.dom.walker.bogus=function(d){function c(b){return !m(b)&&!j(b)}return function(f){var b=CKEDITOR.env.needsBrFiller?f.is&&f.is("br"):f.getText&&o.test(f.getText());b&&(b=f.getParent(),f=f.getNext(c),b=b.isBlockBoundary()&&(!f||f.type==CKEDITOR.NODE_ELEMENT&&f.isBlockBoundary()));return !!(d^b)}};CKEDITOR.dom.walker.temp=function(b){return function(c){c.type!=CKEDITOR.NODE_ELEMENT&&(c=c.getParent());c=c&&c.hasAttribute("data-cke-temp");return !!(b^c)}};var o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,m=CKEDITOR.dom.walker.whitespaces(),j=CKEDITOR.dom.walker.bookmark(),n=CKEDITOR.dom.walker.temp(),i=function(b){return j(b)||m(b)||b.type==CKEDITOR.NODE_ELEMENT&&b.is(CKEDITOR.dtd.$inline)&&!b.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(b){return function(c){c=m(c)||j(c)||n(c);return !!(b^c)}};var w=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(b){return function(d){for(var g=0,f=d.getChildCount();g<f;++g){if(!w(d.getChild(g))){return !!b}}return !b}};var p=CKEDITOR.dom.walker.empty(),t=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(e){var d={},f;for(f in e){CKEDITOR.dtd[f]["#"]&&(d[f]=1)}return d}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(b){return function(c){c=w(c)?!1:c.type==CKEDITOR.NODE_TEXT||c.type==CKEDITOR.NODE_ELEMENT&&(c.is(CKEDITOR.dtd.$inline)||c.is("hr")||"false"==c.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&c.is(t)&&p(c))?!0:!1;return !!(b^c)}};CKEDITOR.dom.element.prototype.getBogus=function(){var b=this;do{b=b.getPreviousSourceNode()}while(i(b));return b&&(CKEDITOR.env.needsBrFiller?b.is&&b.is("br"):b.getText&&o.test(b.getText()))?b:!1}})();CKEDITOR.dom.range=function(b){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var c=b instanceof CKEDITOR.dom.document;this.document=c?b:b.getDocument();this.root=c?b.getBody():b};(function(){function r(b){b.collapsed=b.startContainer&&b.endContainer&&b.startContainer.equals(b.endContainer)&&b.startOffset==b.endOffset}function o(an,am,al,ak,aj){function ah(f,d,k,h){var g=k?f.getPrevious():f.getNext();if(h&&ag){return g}af||h?d.append(f.clone(!0,aj),k):(f.remove(),Q&&d.append(f,k));return g}function ad(){var f,d,h,g=Math.min(x.length,ab.length);for(f=0;f<g;f++){if(d=x[f],h=ab[f],!d.equals(h)){return f}}return f-1}function ai(){var d=G-1,f=X&&R&&!ae.equals(aa);d<z-1||d<Z-1||f?(f?an.moveToPosition(aa,CKEDITOR.POSITION_BEFORE_START):Z==d+1&&Y?an.moveToPosition(ab[d],CKEDITOR.POSITION_BEFORE_END):an.moveToPosition(ab[d+1],CKEDITOR.POSITION_BEFORE_START),ak&&(d=x[d+1])&&d.type==CKEDITOR.NODE_ELEMENT&&(f=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',an.document),f.insertAfter(d),d.mergeSiblings(!1),an.moveToBookmark({startNode:f}))):an.collapse(!0)}an.optimizeBookmark();var ag=0===am,Q=1==am,af=2==am;am=af||Q;var ae=an.startContainer,aa=an.endContainer,I=an.startOffset,ac=an.endOffset,H,Y,X,R,P,u;if(af&&aa.type==CKEDITOR.NODE_TEXT&&(ae.equals(aa)||ae.type===CKEDITOR.NODE_ELEMENT&&ae.getFirst().equals(aa))){al.append(an.document.createText(aa.substring(I,ac)))}else{aa.type==CKEDITOR.NODE_TEXT?af?u=!0:aa=aa.split(ac):0<aa.getChildCount()?ac>=aa.getChildCount()?(aa=aa.getChild(ac-1),Y=!0):aa=aa.getChild(ac):R=Y=!0;ae.type==CKEDITOR.NODE_TEXT?af?P=!0:ae.split(I):0<ae.getChildCount()?0===I?(ae=ae.getChild(I),H=!0):ae=ae.getChild(I-1):X=H=!0;for(var x=ae.getParents(),ab=aa.getParents(),G=ad(),z=x.length-1,Z=ab.length-1,V=al,W,y,L,ao=-1,t=G;t<=z;t++){y=x[t];L=y.getNext();for(t!=z||y.equals(ab[t])&&z<Z?am&&(W=V.append(y.clone(0,aj))):H?ah(y,V,!1,X):P&&V.append(an.document.createText(y.substring(I)));L;){if(L.equals(ab[t])){ao=t;break}L=ah(L,V)}V=W}V=al;for(t=G;t<=Z;t++){if(al=ab[t],L=al.getPrevious(),al.equals(x[t])){am&&(V=V.getChild(0))}else{t!=Z||al.equals(x[t])&&Z<z?am&&(W=V.append(al.clone(0,aj))):Y?ah(al,V,!1,R):u&&V.append(an.document.createText(al.substring(0,ac)));if(t>ao){for(;L;){L=ah(L,V,!0)}}V=W}}af||ai()}}function q(){var g=!1,f=CKEDITOR.dom.walker.whitespaces(),k=CKEDITOR.dom.walker.bookmark(!0),h=CKEDITOR.dom.walker.bogus();return function(b){return k(b)||f(b)?!0:h(b)&&!g?g=!0:b.type==CKEDITOR.NODE_TEXT&&(b.hasAscendant("pre")||CKEDITOR.tools.trim(b.getText()).length)||b.type==CKEDITOR.NODE_ELEMENT&&!b.is(j)?!1:!0}}function p(f){var d=CKEDITOR.dom.walker.whitespaces(),g=CKEDITOR.dom.walker.bookmark(1);return function(b){return g(b)||d(b)?!0:!f&&i(b)||b.type==CKEDITOR.NODE_ELEMENT&&b.is(CKEDITOR.dtd.$removeEmpty)}}function n(b){return function(){var c;return this[b?"getPreviousNode":"getNextNode"](function(d){!c&&s(d)&&(c=d);return e(d)&&!(i(d)&&d.equals(c))})}}var j={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},i=CKEDITOR.dom.walker.bogus(),m=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,e=CKEDITOR.dom.walker.editable(),s=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var b=new CKEDITOR.dom.range(this.root);b._setStartContainer(this.startContainer);b.startOffset=this.startOffset;b._setEndContainer(this.endContainer);b.endOffset=this.endOffset;b.collapsed=this.collapsed;return b},collapse:function(b){b?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(d){var c=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||o(this,2,c,!1,"undefined"==typeof d?!0:d);return c},deleteContents:function(b){this.collapsed||o(this,0,null,b)},extractContents:function(f,d){var g=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||o(this,1,g,f,"undefined"==typeof d?!0:d);return g},equals:function(b){return this.startOffset===b.startOffset&&this.endOffset===b.endOffset&&this.startContainer.equals(b.startContainer)&&this.endContainer.equals(b.endContainer)},createBookmark:function(A){function z(b){return b.getAscendant(function(d){var c;if(c=d.data&&d.data("cke-temp")){c=-1===CKEDITOR.tools.array.indexOf(["cke_copybin","cke_pastebin"],d.getAttribute("id"))}return c},!0)}var y=this.startContainer,x=this.endContainer,w=this.collapsed,u,l,v,t;u=this.document.createElement("span");u.data("cke-bookmark",1);u.setStyle("display","none");u.setHtml("\x26nbsp;");A&&(v="cke_bm_"+CKEDITOR.tools.getNextNumber(),u.setAttribute("id",v+(w?"C":"S")));w||(l=u.clone(),l.setHtml("\x26nbsp;"),A&&l.setAttribute("id",v+"E"),t=this.clone(),z(x)&&(x=z(x),t.moveToPosition(x,CKEDITOR.POSITION_AFTER_END)),t.collapse(),t.insertNode(l));t=this.clone();z(y)&&(x=z(y),t.moveToPosition(x,CKEDITOR.POSITION_BEFORE_START));t.collapse(!0);t.insertNode(u);l?(this.setStartAfter(u),this.setEndBefore(l)):this.moveToPosition(u,CKEDITOR.POSITION_AFTER_END);return{startNode:A?v+(w?"C":"S"):u,endNode:A?v+"E":l,serializable:A,collapsed:w}},createBookmark2:function(){function f(c){var k=c.container,l=c.offset,t;t=k;var h=l;t=t.type!=CKEDITOR.NODE_ELEMENT||0===h||h==t.getChildCount()?0:t.getChild(h-1).type==CKEDITOR.NODE_TEXT&&t.getChild(h).type==CKEDITOR.NODE_TEXT;t&&(k=k.getChild(l-1),l=k.getLength());if(k.type==CKEDITOR.NODE_ELEMENT&&0<l){f:{for(t=k;l--;){if(h=t.getChild(l).getIndex(!0),0<=h){l=h;break f}}l=-1}l+=1}if(k.type==CKEDITOR.NODE_TEXT){t=k;for(h=0;(t=t.getPrevious())&&t.type==CKEDITOR.NODE_TEXT;){h+=t.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length}t=h;k.isEmpty()?(h=k.getPrevious(g),t?(l=t,k=h?h.getNext():k.getParent().getFirst()):(k=k.getParent(),l=h?h.getIndex(!0)+1:0)):l+=t}c.container=k;c.offset=l}function d(b,l){var h=l.getCustomData("cke-fillingChar");if(h){var k=b.container;h.equals(k)&&(b.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=b.offset&&(b.offset=k.getIndex(),b.container=k.getParent()))}}var g=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(l){var h=this.collapsed,b={container:this.startContainer,offset:this.startOffset},k={container:this.endContainer,offset:this.endOffset};l&&(f(b),d(b,this.root),h||(f(k),d(k,this.root)));return{start:b.container.getAddress(l),end:h?null:k.container.getAddress(l),startOffset:b.offset,endOffset:k.offset,normalized:l,collapsed:h,is2:!0}}}(),moveToBookmark:function(g){if(g.is2){var f=this.document.getByAddress(g.start,g.normalized),k=g.startOffset,h=g.end&&this.document.getByAddress(g.end,g.normalized);g=g.endOffset;this.setStart(f,k);h?this.setEnd(h,g):this.collapse(!0)}else{f=(k=g.serializable)?this.document.getById(g.startNode):g.startNode,g=k?this.document.getById(g.endNode):g.endNode,this.setStartBefore(f),f.remove(),g?(this.setEndBefore(g),g.remove()):this.collapse(!0)}},getBoundaryNodes:function(){var h=this.startContainer,g=this.endContainer,t=this.startOffset,l=this.endOffset,k;if(h.type==CKEDITOR.NODE_ELEMENT){if(k=h.getChildCount(),k>t){h=h.getChild(t)}else{if(1>k){h=h.getPreviousSourceNode()}else{for(h=h.$;h.lastChild;){h=h.lastChild}h=new CKEDITOR.dom.node(h);h=h.getNextSourceNode()||h}}}if(g.type==CKEDITOR.NODE_ELEMENT){if(k=g.getChildCount(),k>l){g=g.getChild(l).getPreviousSourceNode(!0)}else{if(1>k){g=g.getPreviousSourceNode()}else{for(g=g.$;g.lastChild;){g=g.lastChild}g=new CKEDITOR.dom.node(g)}}}h.getPosition(g)&CKEDITOR.POSITION_FOLLOWING&&(h=g);return{startNode:h,endNode:g}},getCommonAncestor:function(g,f){var k=this.startContainer,h=this.endContainer,k=k.equals(h)?g&&k.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?k.getChild(this.startOffset):k:k.getCommonAncestor(h);return f&&!k.is?k.getParent():k},optimize:function(){var d=this.startContainer,c=this.startOffset;d.type!=CKEDITOR.NODE_ELEMENT&&(c?c>=d.getLength()&&this.setStartAfter(d):this.setStartBefore(d));d=this.endContainer;c=this.endOffset;d.type!=CKEDITOR.NODE_ELEMENT&&(c?c>=d.getLength()&&this.setEndAfter(d):this.setEndBefore(d))},optimizeBookmark:function(){var d=this.startContainer,c=this.endContainer;d.is&&d.is("span")&&d.data("cke-bookmark")&&this.setStartAt(d,CKEDITOR.POSITION_BEFORE_START);c&&c.is&&c.is("span")&&c.data("cke-bookmark")&&this.setEndAt(c,CKEDITOR.POSITION_AFTER_END)},trim:function(k,g){var v=this.startContainer,u=this.startOffset,t=this.collapsed;if((!k||t)&&v&&v.type==CKEDITOR.NODE_TEXT){if(u){if(u>=v.getLength()){u=v.getIndex()+1,v=v.getParent()}else{var l=v.split(u),u=v.getIndex()+1,v=v.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(l,this.endOffset-this.startOffset):v.equals(this.endContainer)&&(this.endOffset+=1)}}else{u=v.getIndex(),v=v.getParent()}this.setStart(v,u);if(t){this.collapse(!0);return}}v=this.endContainer;u=this.endOffset;g||t||!v||v.type!=CKEDITOR.NODE_TEXT||(u?(u>=v.getLength()||v.split(u),u=v.getIndex()+1):u=v.getIndex(),v=v.getParent(),this.setEnd(v,u))},enlarge:function(ae,ad){function ac(b){return b&&b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable")?null:b}var ab=new RegExp(/[^\s\ufeff]/);switch(ae){case CKEDITOR.ENLARGE_INLINE:var aa=1;case CKEDITOR.ENLARGE_ELEMENT:var Y=function(f,d){var h=new CKEDITOR.dom.range(Z);h.setStart(f,d);h.setEndAt(Z,CKEDITOR.POSITION_BEFORE_END);var h=new CKEDITOR.dom.walker(h),g;for(h.guard=function(b){return !(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary())};g=h.next();){if(g.type!=CKEDITOR.NODE_TEXT){return !1}z=g!=f?g.getText():g.substring(d);if(ab.test(z)){return !1}}return !0};if(this.collapsed){break}var U=this.getCommonAncestor(),Z=this.root,X,G,W,V,P,D=!1,R,z;R=this.startContainer;var J=this.startOffset;R.type==CKEDITOR.NODE_TEXT?(J&&(R=!CKEDITOR.tools.trim(R.substring(0,J)).length&&R,D=!!R),R&&((V=R.getPrevious())||(W=R.getParent()))):(J&&(V=R.getChild(J-1)||R.getLast()),V||(W=R));for(W=ac(W);W||V;){if(W&&!V){!P&&W.equals(U)&&(P=!0);if(aa?W.isBlockBoundary():!Z.contains(W)){break}D&&"inline"==W.getComputedStyle("display")||(D=!1,P?X=W:this.setStartBefore(W));V=W.getPrevious()}for(;V;){if(R=!1,V.type==CKEDITOR.NODE_COMMENT){V=V.getPrevious()}else{if(V.type==CKEDITOR.NODE_TEXT){z=V.getText(),ab.test(z)&&(V=null),R=/[\s\ufeff]$/.test(z)}else{if((V.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||ad&&V.is("br"))&&!V.data("cke-bookmark")){if(D&&CKEDITOR.dtd.$removeEmpty[V.getName()]){z=V.getText();if(ab.test(z)){V=null}else{for(var J=V.$.getElementsByTagName("*"),I=0,H;H=J[I++];){if(!CKEDITOR.dtd.$removeEmpty[H.nodeName.toLowerCase()]){V=null;break}}}V&&(R=!!z.length)}else{V=null}}}R&&(D?P?X=W:W&&this.setStartBefore(W):D=!0);if(V){R=V.getPrevious();if(!W&&!R){W=V;V=null;break}V=R}else{W=null}}}W&&(W=ac(W.getParent()))}R=this.endContainer;J=this.endOffset;W=V=null;P=D=!1;R.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(R.substring(J)).length?D=!0:(D=!R.getLength(),J==R.getLength()?(V=R.getNext())||(W=R.getParent()):Y(R,J)&&(W=R.getParent())):(V=R.getChild(J))||(W=R);for(;W||V;){if(W&&!V){!P&&W.equals(U)&&(P=!0);if(aa?W.isBlockBoundary():!Z.contains(W)){break}D&&"inline"==W.getComputedStyle("display")||(D=!1,P?G=W:W&&this.setEndAfter(W));V=W.getNext()}for(;V;){R=!1;if(V.type==CKEDITOR.NODE_TEXT){z=V.getText(),Y(V,0)||(V=null),R=/^[\s\ufeff]/.test(z)}else{if(V.type==CKEDITOR.NODE_ELEMENT){if((0<V.$.offsetWidth||ad&&V.is("br"))&&!V.data("cke-bookmark")){if(D&&CKEDITOR.dtd.$removeEmpty[V.getName()]){z=V.getText();if(ab.test(z)){V=null}else{for(J=V.$.getElementsByTagName("*"),I=0;H=J[I++];){if(!CKEDITOR.dtd.$removeEmpty[H.nodeName.toLowerCase()]){V=null;break}}}V&&(R=!!z.length)}else{V=null}}}else{R=1}}R&&D&&(P?G=W:this.setEndAfter(W));if(V){R=V.getNext();if(!W&&!R){W=V;V=null;break}V=R}else{W=null}}W&&(W=ac(W.getParent()))}X&&G&&(U=X.contains(G)?G:X,this.setStartBefore(U),this.setEndAfter(U));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:W=new CKEDITOR.dom.range(this.root);Z=this.root;W.setStartAt(Z,CKEDITOR.POSITION_AFTER_START);W.setEnd(this.startContainer,this.startOffset);W=new CKEDITOR.dom.walker(W);var E,t,u=CKEDITOR.dom.walker.blockBoundary(ae==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),Q=null,y=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")){if(Q){if(Q.equals(d)){Q=null;return}}else{Q=d}}else{if(Q){return}}var c=u(d);c||(E=d);return c},aa=function(d){var c=y(d);!c&&d.is&&d.is("br")&&(t=d);return c};W.guard=y;W=W.lastBackward();E=E||Z;this.setStartAt(E,!E.is("br")&&(!W&&this.checkStartOfBlock()||W&&E.contains(W))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(ae==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){W=this.clone();W=new CKEDITOR.dom.walker(W);var x=CKEDITOR.dom.walker.whitespaces(),L=CKEDITOR.dom.walker.bookmark();W.evaluator=function(b){return !x(b)&&!L(b)};if((W=W.previous())&&W.type==CKEDITOR.NODE_ELEMENT&&W.is("br")){break}}W=this.clone();W.collapse();W.setEndAt(Z,CKEDITOR.POSITION_BEFORE_END);W=new CKEDITOR.dom.walker(W);W.guard=ae==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?aa:y;E=Q=t=null;W=W.lastForward();E=E||Z;this.setEndAt(E,!W&&this.checkEndOfBlock()||W&&E.contains(W)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);t&&this.setEndAfter(t)}},shrink:function(H,G,E){var D="boolean"===typeof E?E:E&&"boolean"===typeof E.shrinkOnBlockBoundary?E.shrinkOnBlockBoundary:!0,C=E&&E.skipBogus;if(!this.collapsed){H=H||CKEDITOR.SHRINK_TEXT;var z=this.clone(),u=this.startContainer,A=this.endContainer,y=this.startOffset,x=this.endOffset,I=E=1;u&&u.type==CKEDITOR.NODE_TEXT&&(y?y>=u.getLength()?z.setStartAfter(u):(z.setStartBefore(u),E=0):z.setStartBefore(u));A&&A.type==CKEDITOR.NODE_TEXT&&(x?x>=A.getLength()?z.setEndAfter(A):(z.setEndAfter(A),I=0):z.setEndBefore(A));var z=new CKEDITOR.dom.walker(z),w=CKEDITOR.dom.walker.bookmark(),t=CKEDITOR.dom.walker.bogus();z.evaluator=function(c){return c.type==(H==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var F;z.guard=function(d,f){if(C&&t(d)||w(d)){return !0}if(H==CKEDITOR.SHRINK_ELEMENT&&d.type==CKEDITOR.NODE_TEXT||f&&d.equals(F)||!1===D&&d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()||d.type==CKEDITOR.NODE_ELEMENT&&d.hasAttribute("contenteditable")){return !1}f||d.type!=CKEDITOR.NODE_ELEMENT||(F=d);return !0};E&&(u=z[H==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(u,G?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);I&&(z.reset(),(z=z[H==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(z,G?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return !(!E&&!I)}},insertNode:function(f){this.optimizeBookmark();this.trim(!1,!0);var d=this.startContainer,g=d.getChild(this.startOffset);g?f.insertBefore(g):d.append(f);f.getParent()&&f.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(f)},moveToPosition:function(d,c){this.setStartAt(d,c);this.collapse(!0)},moveToRange:function(b){this.setStart(b.startContainer,b.startOffset);this.setEnd(b.endContainer,b.endOffset)},selectNodeContents:function(b){this.setStart(b,0);this.setEnd(b,b.type==CKEDITOR.NODE_TEXT?b.getLength():b.getChildCount())},setStart:function(d,f){d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[d.getName()]&&(f=d.getIndex(),d=d.getParent());this._setStartContainer(d);this.startOffset=f;this.endContainer||(this._setEndContainer(d),this.endOffset=f);r(this)},setEnd:function(d,f){d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[d.getName()]&&(f=d.getIndex()+1,d=d.getParent());this._setEndContainer(d);this.endOffset=f;this.startContainer||(this._setStartContainer(d),this.startOffset=f);r(this)},setStartAfter:function(b){this.setStart(b.getParent(),b.getIndex()+1)},setStartBefore:function(b){this.setStart(b.getParent(),b.getIndex())},setEndAfter:function(b){this.setEnd(b.getParent(),b.getIndex()+1)},setEndBefore:function(b){this.setEnd(b.getParent(),b.getIndex())},setStartAt:function(d,f){switch(f){case CKEDITOR.POSITION_AFTER_START:this.setStart(d,0);break;case CKEDITOR.POSITION_BEFORE_END:d.type==CKEDITOR.NODE_TEXT?this.setStart(d,d.getLength()):this.setStart(d,d.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(d);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(d)}r(this)},setEndAt:function(d,f){switch(f){case CKEDITOR.POSITION_AFTER_START:this.setEnd(d,0);break;case CKEDITOR.POSITION_BEFORE_END:d.type==CKEDITOR.NODE_TEXT?this.setEnd(d,d.getLength()):this.setEnd(d,d.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(d);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(d)}r(this)},fixBlock:function(h,g){var t=this.createBookmark(),l=this.document.createElement(g);this.collapse(h);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(l);l.trim();this.insertNode(l);var k=l.getBogus();k&&k.remove();l.appendBogus();this.moveToBookmark(t);return l},splitBlock:function(k,g){var w=new CKEDITOR.dom.elementPath(this.startContainer,this.root),u=new CKEDITOR.dom.elementPath(this.endContainer,this.root),t=w.block,l=u.block,v=null;if(!w.blockLimit.equals(u.blockLimit)){return null}"br"!=k&&(t||(t=this.fixBlock(!0,k),l=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),l||(l=this.fixBlock(!1,k)));w=t&&this.checkStartOfBlock();u=l&&this.checkEndOfBlock();this.deleteContents();t&&t.equals(l)&&(u?(v=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(l,CKEDITOR.POSITION_AFTER_END),l=null):w?(v=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t=null):(l=this.splitElement(t,g||!1),t.is("ul","ol")||t.appendBogus()));return{previousBlock:t,nextBlock:l,wasStartOfBlock:w,wasEndOfBlock:u,elementPath:v}},splitElement:function(g,f){if(!this.collapsed){return null}this.setEndAt(g,CKEDITOR.POSITION_BEFORE_END);var k=this.extractContents(!1,f||!1),h=g.clone(!1,f||!1);k.appendTo(h);h.insertAfter(g);this.moveToPosition(g,CKEDITOR.POSITION_AFTER_END);return h},removeEmptyBlocksAtEnd:function(){function f(b){return function(c){return d(c)||g(c)||c.type==CKEDITOR.NODE_ELEMENT&&c.isEmptyInlineRemoveable()||b.is("table")&&c.is("caption")?!1:!0}}var d=CKEDITOR.dom.walker.whitespaces(),g=CKEDITOR.dom.walker.bookmark(!1);return function(k){for(var v=this.createBookmark(),u=this[k?"endPath":"startPath"](),t=u.block||u.blockLimit,l;t&&!t.equals(u.root)&&!t.getFirst(f(t));){l=t.getParent(),this[k?"setEndAt":"setStartAt"](t,CKEDITOR.POSITION_AFTER_END),t.remove(1),t=l}this.moveToBookmark(v)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(g,c){var k=c==CKEDITOR.START,h=this.clone();h.collapse(k);h[k?"setStartAt":"setEndAt"](g,k?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.evaluator=p(k);return h[k?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var b=this.startContainer,d=this.startOffset;CKEDITOR.env.ie&&d&&b.type==CKEDITOR.NODE_TEXT&&(b=CKEDITOR.tools.ltrim(b.substring(0,d)),m.test(b)&&this.trim(0,1));this.trim();b=new CKEDITOR.dom.elementPath(this.startContainer,this.root);d=this.clone();d.collapse(!0);d.setStartAt(b.block||b.blockLimit,CKEDITOR.POSITION_AFTER_START);b=new CKEDITOR.dom.walker(d);b.evaluator=q();return b.checkBackward()},checkEndOfBlock:function(){var b=this.endContainer,d=this.endOffset;CKEDITOR.env.ie&&b.type==CKEDITOR.NODE_TEXT&&(b=CKEDITOR.tools.rtrim(b.substring(d)),m.test(b)&&this.trim(1,0));this.trim();b=new CKEDITOR.dom.elementPath(this.endContainer,this.root);d=this.clone();d.collapse(!1);d.setEndAt(b.block||b.blockLimit,CKEDITOR.POSITION_BEFORE_END);b=new CKEDITOR.dom.walker(d);b.evaluator=q();return b.checkForward()},getPreviousNode:function(g,f,k){var h=this.clone();h.collapse(1);h.setStartAt(k||this.root,CKEDITOR.POSITION_AFTER_START);k=new CKEDITOR.dom.walker(h);k.evaluator=g;k.guard=f;return k.previous()},getNextNode:function(g,f,k){var h=this.clone();h.collapse();h.setEndAt(k||this.root,CKEDITOR.POSITION_BEFORE_END);k=new CKEDITOR.dom.walker(h);k.evaluator=g;k.guard=f;return k.next()},checkReadOnly:function(){function b(d,f){for(;d;){if(d.type==CKEDITOR.NODE_ELEMENT){if("false"==d.getAttribute("contentEditable")&&!d.data("cke-editable")){return 0}if(d.is("html")||"true"==d.getAttribute("contentEditable")&&(d.contains(f)||d.equals(f))){break}}d=d.getParent()}return 1}return function(){var d=this.startContainer,f=this.endContainer;return !(b(d,f)&&b(f,d))}}(),moveToElementEditablePosition:function(k,g){if(k.type==CKEDITOR.NODE_ELEMENT&&!k.isEditable(!1)){return this.moveToPosition(k,g?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0}for(var v=0;k;){if(k.type==CKEDITOR.NODE_TEXT){g&&this.endContainer&&this.checkEndOfBlock()&&m.test(k.getText())?this.moveToPosition(k,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(k,g?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);v=1;break}if(k.type==CKEDITOR.NODE_ELEMENT){if(k.isEditable()){this.moveToPosition(k,g?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),v=1}else{if(g&&k.is("br")&&this.endContainer&&this.checkEndOfBlock()){this.moveToPosition(k,CKEDITOR.POSITION_BEFORE_START)}else{if("false"==k.getAttribute("contenteditable")&&k.is(CKEDITOR.dtd.$block)){return this.setStartBefore(k),this.setEndAfter(k),!0}}}}var u=k,t=v,l=void 0;u.type==CKEDITOR.NODE_ELEMENT&&u.isEditable(!1)&&(l=u[g?"getLast":"getFirst"](s));t||l||(l=u[g?"getPrevious":"getNext"](s));k=l}return !!v},moveToClosestEditablePosition:function(k,g){var w,u=0,t,l,v=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];k?(w=new CKEDITOR.dom.range(this.root),w.moveToPosition(k,v[g?0:1])):w=this.clone();if(k&&!k.is(CKEDITOR.dtd.$block)){u=1}else{if(t=w[g?"getNextEditableNode":"getPreviousEditableNode"]()){u=1,(l=t.type==CKEDITOR.NODE_ELEMENT)&&t.is(CKEDITOR.dtd.$block)&&"false"==t.getAttribute("contenteditable")?(w.setStartAt(t,CKEDITOR.POSITION_BEFORE_START),w.setEndAt(t,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&l&&t.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(w.setEnd(t,0),w.collapse()):w.moveToPosition(t,v[g?1:0])}}u&&this.moveToRange(w);return !!u},moveToElementEditStart:function(b){return this.moveToElementEditablePosition(b)},moveToElementEditEnd:function(b){return this.moveToElementEditablePosition(b,!0)},getEnclosedNode:function(){var g=this.clone();g.optimize();if(g.startContainer.type!=CKEDITOR.NODE_ELEMENT||g.endContainer.type!=CKEDITOR.NODE_ELEMENT){return null}var g=new CKEDITOR.dom.walker(g),f=CKEDITOR.dom.walker.bookmark(!1,!0),k=CKEDITOR.dom.walker.whitespaces(!0);g.evaluator=function(b){return k(b)&&f(b)};var h=g.next();g.reset();return h&&h.equals(g.previous())?h:null},getTouchedStartNode:function(){var b=this.startContainer;return this.collapsed||b.type!=CKEDITOR.NODE_ELEMENT?b:b.getChild(this.startOffset)||b},getTouchedEndNode:function(){var b=this.endContainer;return this.collapsed||b.type!=CKEDITOR.NODE_ELEMENT?b:b.getChild(this.endOffset-1)||b},getNextEditableNode:n(),getPreviousEditableNode:n(1),_getTableElement:function(g){g=g||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var f=this.getTouchedStartNode(),k=this.getTouchedEndNode(),h=f.getAscendant("table",!0),k=k.getAscendant("table",!0);return h&&!this.root.contains(h)?null:this.getEnclosedNode()?this.getEnclosedNode().getAscendant(g,!0):h&&k&&(h.equals(k)||h.contains(k)||k.contains(h))?f.getAscendant(g,!0):null},scrollIntoView:function(){var h=new CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",this.document),g,t,l,k=this.clone();k.optimize();(l=k.startContainer.type==CKEDITOR.NODE_TEXT)?(t=k.startContainer.getText(),g=k.startContainer.split(k.startOffset),h.insertAfter(k.startContainer)):k.insertNode(h);h.scrollIntoView();l&&(k.startContainer.setText(t),g.remove());h.remove()},getClientRects:function(){function g(l,y){var x=CKEDITOR.tools.array.map(l,function(b){return b}),w=new CKEDITOR.dom.range(y.root),v,t,u;y.startContainer instanceof CKEDITOR.dom.element&&(t=0===y.startOffset&&y.startContainer.hasAttribute("data-widget"));y.endContainer instanceof CKEDITOR.dom.element&&(u=(u=y.endOffset===(y.endContainer.getChildCount?y.endContainer.getChildCount():y.endContainer.length))&&y.endContainer.hasAttribute("data-widget"));t&&w.setStart(y.startContainer.getParent(),y.startContainer.getIndex());u&&w.setEnd(y.endContainer.getParent(),y.endContainer.getIndex()+1);if(t||u){y=w}w=y.cloneContents().find("[data-cke-widget-id]").toArray();if(w=CKEDITOR.tools.array.map(w,function(d){var c=y.root.editor;d=d.getAttribute("data-cke-widget-id");return c.widgets.instances[d].element})){return w=CKEDITOR.tools.array.map(w,function(d){var c;c=d.getParent().hasClass("cke_widget_wrapper")?d.getParent():d;v=this.root.getDocument().$.createRange();v.setStart(c.getParent().$,c.getIndex());v.setEnd(c.getParent().$,c.getIndex()+1);c=v.getClientRects();c.widgetRect=d.getClientRect();return c},y),CKEDITOR.tools.array.forEach(w,function(z){function d(b){CKEDITOR.tools.array.forEach(x,function(c,C){var B=CKEDITOR.tools.objectCompare(z[b],c);B||(B=CKEDITOR.tools.objectCompare(z.widgetRect,c));B&&(Array.prototype.splice.call(x,C,z.length-b,z.widgetRect),A=!0)});A||(b<x.length-1?d(b+1):x.push(z.widgetRect))}var A;d(0)}),x}}function f(b,t,l){var d;t.collapsed?l.startContainer instanceof CKEDITOR.dom.element?(b=l.checkStartOfBlock(),d=new CKEDITOR.dom.text(""),b?l.startContainer.append(d,!0):0===l.startOffset?d.insertBefore(l.startContainer.getFirst()):(l=l.startContainer.getChildren().getItem(l.startOffset-1),d.insertAfter(l)),t.setStart(d.$,0),t.setEnd(d.$,0),b=t.getClientRects(),d.remove()):l.startContainer instanceof CKEDITOR.dom.text&&(""===l.startContainer.getText()?(l.startContainer.setText(""),b=t.getClientRects(),l.startContainer.setText("")):b=[h(l.createBookmark())]):b=[h(l.createBookmark())];return b}function k(l,c,t){l=CKEDITOR.tools.extend({},l);c&&(l=CKEDITOR.tools.getAbsoluteRectPosition(t.document.getWindow(),l));!l.width&&(l.width=l.right-l.left);!l.height&&(l.height=l.bottom-l.top);return l}function h(l){var d=l.startNode;l=l.endNode;var t;d.setText("");d.removeStyle("display");l?(l.setText(""),l.removeStyle("display"),t=[d.getClientRect(),l.getClientRect()],l.remove()):t=[d.getClientRect(),d.getClientRect()];d.remove();return{right:Math.max(t[0].right,t[1].right),bottom:Math.max(t[0].bottom,t[1].bottom),left:Math.min(t[0].left,t[1].left),top:Math.min(t[0].top,t[1].top),width:Math.abs(t[0].left-t[1].left),height:Math.max(t[0].bottom,t[1].bottom)-Math.min(t[0].top,t[1].top)}}return void 0!==this.document.getSelection?function(c){var b=this.root.getDocument().$.createRange(),l;b.setStart(this.startContainer.$,this.startOffset);b.setEnd(this.endContainer.$,this.endOffset);l=b.getClientRects();l=g(l,this);l.length||(l=f(l,b,this));return CKEDITOR.tools.array.map(l,function(d){return k(d,c,this)},this)}:function(b){return[k(h(this.createBookmark()),b,this)]}}(),_setStartContainer:function(b){this.startContainer=b},_setEndContainer:function(b){this.endContainer=b},_find:function(A,z){var y=this.getCommonAncestor(),x=this.getBoundaryNodes(),w=[],u,l,v,t;if(y&&y.find){for(l=y.find(A),u=0;u<l.count();u++){if(y=l.getItem(u),z||!y.isReadOnly()){v=y.getPosition(x.startNode)&CKEDITOR.POSITION_FOLLOWING||x.startNode.equals(y),t=y.getPosition(x.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||x.endNode.equals(y),v&&t&&w.push(y)}}}return w}};CKEDITOR.dom.range.mergeRanges=function(b){return CKEDITOR.tools.array.reduce(b,function(h,g){var u=h[h.length-1],t=!1;g=g.clone();g.enlarge(CKEDITOR.ENLARGE_ELEMENT);if(u){var l=new CKEDITOR.dom.range(g.root),t=new CKEDITOR.dom.walker(l),k=CKEDITOR.dom.walker.whitespaces();l.setStart(u.endContainer,u.endOffset);l.setEnd(g.startContainer,g.startOffset);for(l=t.next();k(l)||g.endContainer.equals(l);){l=t.next()}t=!l}t?u.setEnd(g.endContainer,g.endOffset):h.push(g);return h},[])}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";(function(){function r(b){1>arguments.length||(this.range=b,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function o(d){var c=[];d.forEach(function(b){if("true"==b.getAttribute("contenteditable")){return c.push(b),!1}},CKEDITOR.NODE_ELEMENT,!0);return c}function q(b,s,l,d){b:{null==d&&(d=o(l));for(var k;k=d.shift();){if(k.getDtd().p){d={element:k,remaining:d};break b}}d=null}if(!d){return 0}if((k=CKEDITOR.filter.instances[d.element.data("cke-filter")])&&!k.check(s)){return q(b,s,l,d.remaining)}s=new CKEDITOR.dom.range(d.element);s.selectNodeContents(d.element);s=s.createIterator();s.enlargeBr=b.enlargeBr;s.enforceRealBlocks=b.enforceRealBlocks;s.activeFilter=s.filter=k;b._.nestedEditable={element:d.element,container:l,remaining:d.remaining,iterator:s};return 1}function p(f,d,g){if(!d){return !1}f=f.clone();f.collapse(!g);return f.checkBoundaryOfElement(d,g?CKEDITOR.START:CKEDITOR.END)}var n=/^[\r\n\t ]+$/,j=CKEDITOR.dom.walker.bookmark(!1,!0),i=CKEDITOR.dom.walker.whitespaces(!0),m=function(b){return j(b)&&i(b)},e={dd:1,dt:1,li:1};r.prototype={getNextParagraph:function(v){var g,f,C,l,A;v=v||"p";if(this._.nestedEditable){if(g=this._.nestedEditable.iterator.getNextParagraph(v)){return this.activeFilter=this._.nestedEditable.iterator.activeFilter,g}this.activeFilter=this.filter;if(q(this,v,this._.nestedEditable.container,this._.nestedEditable.remaining)){return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(v)}this._.nestedEditable=null}if(!this.range.root.getDtd()[v]){return null}if(!this._.started){var B=this.range.clone();f=B.startPath();var b=B.endPath(),h=!B.collapsed&&p(B,f.block),s=!B.collapsed&&p(B,b.block,1);B.shrink(CKEDITOR.SHRINK_ELEMENT,!0);h&&B.setStartAt(f.block,CKEDITOR.POSITION_BEFORE_END);s&&B.setEndAt(b.block,CKEDITOR.POSITION_AFTER_START);f=B.endContainer.hasAscendant("pre",!0)||B.startContainer.hasAscendant("pre",!0);B.enlarge(this.forceBrBreak&&!f||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);B.collapsed||(f=new CKEDITOR.dom.walker(B.clone()),b=CKEDITOR.dom.walker.bookmark(!0,!0),f.evaluator=b,this._.nextNode=f.next(),f=new CKEDITOR.dom.walker(B.clone()),f.evaluator=b,f=f.previous(),this._.lastNode=f.getNextSourceNode(!0,null,B.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(b=this.range.clone(),b.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),b.checkEndOfBlock()&&(b=new CKEDITOR.dom.elementPath(b.endContainer,b.root),this._.lastNode=(b.block||b.blockLimit).getNextSourceNode(!0))),this._.lastNode&&B.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=B.document.createText(""),this._.lastNode.insertAfter(f)),B=null);this._.started=1;f=B}b=this._.nextNode;B=this._.lastNode;for(this._.nextNode=null;b;){var h=0,s=b.hasAscendant("pre"),x=b.type!=CKEDITOR.NODE_ELEMENT,w=0;if(x){b.type==CKEDITOR.NODE_TEXT&&n.test(b.getText())&&(x=0)}else{var c=b.getName();if(CKEDITOR.dtd.$block[c]&&"false"==b.getAttribute("contenteditable")){g=b;q(this,v,g);break}else{if(b.isBlockBoundary(this.forceBrBreak&&!s&&{br:1})){if("br"==c){x=1}else{if(!f&&!b.getChildCount()&&"hr"!=c){g=b;C=b.equals(B);break}}f&&(f.setEndAt(b,CKEDITOR.POSITION_BEFORE_START),"br"!=c&&(this._.nextNode=b));h=1}else{if(b.getFirst()){f||(f=this.range.clone(),f.setStartAt(b,CKEDITOR.POSITION_BEFORE_START));b=b.getFirst();continue}x=1}}}x&&!f&&(f=this.range.clone(),f.setStartAt(b,CKEDITOR.POSITION_BEFORE_START));C=(!h||x)&&b.equals(B);if(f&&!h){for(;!b.getNext(m)&&!C;){c=b.getParent();if(c.isBlockBoundary(this.forceBrBreak&&!s&&{br:1})){h=1;x=0;C||c.equals(B);f.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);break}b=c;x=1;C=b.equals(B);w=1}}x&&f.setEndAt(b,CKEDITOR.POSITION_AFTER_END);b=this._getNextSourceNode(b,w,B);if((C=!b)||h&&f){break}}if(!g){if(!f){return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null}g=new CKEDITOR.dom.elementPath(f.startContainer,f.root);b=g.blockLimit;h={div:1,th:1,td:1};g=g.block;!g&&b&&!this.enforceRealBlocks&&h[b.getName()]&&f.checkStartOfBlock()&&f.checkEndOfBlock()&&!b.equals(f.root)?g=b:!g||this.enforceRealBlocks&&g.is(e)?(g=this.range.document.createElement(v),f.extractContents().appendTo(g),g.trim(),f.insertNode(g),l=A=!0):"li"!=g.getName()?f.checkStartOfBlock()&&f.checkEndOfBlock()||(g=g.clone(!1),f.extractContents().appendTo(g),g.trim(),A=f.splitBlock(),l=!A.wasStartOfBlock,A=!A.wasEndOfBlock,f.insertNode(g)):C||(this._.nextNode=g.equals(B)?null:this._getNextSourceNode(f.getBoundaryNodes().endNode,1,B))}l&&(l=g.getPrevious())&&l.type==CKEDITOR.NODE_ELEMENT&&("br"==l.getName()?l.remove():l.getLast()&&"br"==l.getLast().$.nodeName.toLowerCase()&&l.getLast().remove());A&&(l=g.getLast())&&l.type==CKEDITOR.NODE_ELEMENT&&"br"==l.getName()&&(!CKEDITOR.env.needsBrFiller||l.getPrevious(j)||l.getNext(j))&&l.remove();this._.nextNode||(this._.nextNode=C||g.equals(B)||!B?null:this._getNextSourceNode(g,1,B));return g},_getNextSourceNode:function(h,g,s){function l(b){return !(b.equals(s)||b.equals(k))}var k=this.range.root;for(h=h.getNextSourceNode(g,null,l);!j(h);){h=h.getNextSourceNode(g,null,l)}return h}};CKEDITOR.dom.range.prototype.createIterator=function(){return new r(this)}})();CKEDITOR.command=function(e,f){this.uiItems=[];this.exec=function(d){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed()){return !1}this.editorFocus&&e.focus();return !1===this.fire("exec")?!0:!1!==f.exec.call(this,e,d)};this.refresh=function(g,d){if(!this.readOnly&&g.readOnly){return !0}if(this.context&&!d.isContextFor(this.context)||!this.checkAllowed(!0)){return this.disable(),!0}this.startDisabled||this.enable();this.modes&&!this.modes[g.mode]&&this.disable();return !1===this.fire("refresh",{editor:g,path:d})?!0:f.refresh&&!1!==f.refresh.apply(this,arguments)};var c;this.checkAllowed=function(b){return b||"boolean"!=typeof c?c=e.activeFilter.checkFeature(this):c};CKEDITOR.tools.extend(this,f,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!f.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(b){if(this.state==b||b!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()){return !1}this.previousState=this.state;this.state=b;this.fire("state");return !0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"\x3c!DOCTYPE html\x3e",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:10000,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};(function(){function aw(S,O,M,L,K){var I,C;S=[];for(I in O){C=O[I];C="boolean"==typeof C?{}:"function"==typeof C?{match:C}:X(C);"$"!=I.charAt(0)&&(C.elements=I);M&&(C.featureName=M.toLowerCase());var y=C;y.elements=an(y.elements,/\s+/)||null;y.propertiesOnly=y.propertiesOnly||!0===y.elements;var t=/\s*,\s*/,v=void 0;for(v in i){y[v]=an(y[v],t)||null;var G=y,z=j[v],A=an(y[j[v]],t),H=y[v],l=[],u=!0,k=void 0;A?u=!1:A={};for(k in H){"!"==k.charAt(0)&&(k=k.slice(1),l.push(k),A[k]=!0,u=!1)}for(;k=l.pop();){H[k]=H["!"+k],delete H["!"+k]}G[z]=(u?!1:A)||null}y.match=y.match||null;L.push(C);S.push(C)}O=K.elements;K=K.generic;var x;M=0;for(L=S.length;M<L;++M){I=X(S[M]);C=!0===I.classes||!0===I.styles||!0===I.attributes;y=I;v=z=t=void 0;for(t in i){y[t]=J(y[t])}G=!0;for(v in j){t=j[v];z=y[t];A=[];H=void 0;for(H in z){-1<H.indexOf("*")?A.push(new RegExp("^"+H.replace(/\*/g,".*")+"$")):A.push(H)}z=A;z.length&&(y[t]=z,G=!1)}y.nothingRequired=G;y.noProperties=!(y.attributes||y.classes||y.styles);if(!0===I.elements||null===I.elements){K[C?"unshift":"push"](I)}else{for(x in y=I.elements,delete I.elements,y){if(O[x]){O[x][C?"unshift":"push"](I)}else{O[x]=[I]}}}}}function at(g,p,n,l){if(!g.match||g.match(p)){if(l||ap(g,p)){if(g.propertiesOnly||(n.valid=!0),n.allAttributes||(n.allAttributes=av(g.attributes,p.attributes,n.validAttributes)),n.allStyles||(n.allStyles=av(g.styles,p.styles,n.validStyles)),!n.allClasses){g=g.classes;p=p.classes;l=n.validClasses;if(g){if(!0===g){g=!0}else{for(var k=0,b=p.length,h;k<b;++k){h=p[k],l[h]||(l[h]=g(h))}g=!1}}else{g=!1}n.allClasses=g}}}}function av(f,e,h){if(!f){return !1}if(!0===f){return !0}for(var g in e){h[g]||(h[g]=f(g))}return !1}function au(h,g,n){if(!h.match||h.match(g)){if(h.noProperties){return !1}n.hadInvalidAttribute=aq(h.attributes,g.attributes)||n.hadInvalidAttribute;n.hadInvalidStyle=aq(h.styles,g.styles)||n.hadInvalidStyle;h=h.classes;g=g.classes;if(h){for(var l=!1,k=!0===h,f=g.length;f--;){if(k||h(g[f])){g.splice(f,1),l=!0}}h=l}else{h=!1}n.hadInvalidClass=h||n.hadInvalidClass}}function aq(g,f){if(!g){return !1}var l=!1,k=!0===g,h;for(h in f){if(k||g(h)){delete f[h],l=!0}}return l}function ao(e,d,f){if(e.disabled||e.customConfig&&!f||!d){return !1}e._.cachedChecks={};return !0}function an(g,f){if(!g){return !1}if(!0===g){return g}if("string"==typeof g){return g=V(g),"*"==g?!0:CKEDITOR.tools.convertArrayToObject(g.split(f))}if(CKEDITOR.tools.isArray(g)){return g.length?CKEDITOR.tools.convertArrayToObject(g):!1}var l={},k=0,h;for(h in g){l[h]=g[h],k++}return k?l:!1}function ap(h,g){if(h.nothingRequired){return !0}var n,m,l,k;if(l=h.requiredClasses){for(k=g.classes,n=0;n<l.length;++n){if(m=l[n],"string"==typeof m){if(-1==CKEDITOR.tools.indexOf(k,m)){return !1}}else{if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(k,m)){return !1}}}}return am(g.styles,h.requiredStyles)&&am(g.attributes,h.requiredAttributes)}function am(f,e){if(!e){return !0}for(var h=0,g;h<e.length;++h){if(g=e[h],"string"==typeof g){if(!(g in f)){return !1}}else{if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(f,g)){return !1}}}return !0}function ae(d){if(!d){return{}}d=d.split(/\s*,\s*/).sort();for(var c={};d.length;){c[d.shift()]="cke-test"}return c}function ar(k){var h,q,p,n,l={},g=1;for(k=V(k);h=k.match(aj);){(q=h[2])?(p=ac(q,"styles"),n=ac(q,"attrs"),q=ac(q,"classes")):p=n=q=null,l["$"+g++]={elements:h[1],classes:q,styles:p,attributes:n},k=k.slice(h[0].length)}return l}function ac(e,d){var f=e.match(s[d]);return f?V(f[1]):null}function ag(e){var d=e.styleBackup=e.attributes.style,f=e.classBackup=e.attributes["class"];e.styles||(e.styles=CKEDITOR.tools.parseCssText(d||"",1));e.classes||(e.classes=f?f.split(/\s+/):[])}function aa(ax,T,S,O){var q=0,v;O.toHtml&&(T.name=T.name.replace(o,"$1"));if(O.doCallbacks&&ax.elementCallbacks){ax:{v=ax.elementCallbacks;for(var z=0,I=v.length,L;z<I;++z){if(L=v[z](T)){v=L;break ax}}v=void 0}if(v){return v}}if(O.doTransform&&(v=ax._.transformations[T.name])){ag(T);for(z=0;z<v.length;++z){al(ax,T,v[z])}af(T)}if(O.doFilter){ax:{z=T.name;I=ax._;ax=I.allowedRules.elements[z];v=I.allowedRules.generic;z=I.disallowedRules.elements[z];I=I.disallowedRules.generic;L=O.skipRequired;var H={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},n,u;if(ax||v){ag(T);if(z){for(n=0,u=z.length;n<u;++n){if(!1===au(z[n],T,H)){ax=null;break ax}}}if(I){for(n=0,u=I.length;n<u;++n){au(I[n],T,H)}}if(ax){for(n=0,u=ax.length;n<u;++n){at(ax[n],T,H,L)}}if(v){for(n=0,u=v.length;n<u;++n){at(v[n],T,H,L)}}ax=H}else{ax=null}}if(!ax||!ax.valid){return S.push(T),1}u=ax.validAttributes;var c=ax.validStyles;v=ax.validClasses;var z=T.attributes,t=T.styles,I=T.classes;L=T.classBackup;var x=T.styleBackup,y,m,G=[],H=[],d=/^data-cke-/;n=!1;delete z.style;delete z["class"];delete T.classBackup;delete T.styleBackup;if(!ax.allAttributes){for(y in z){u[y]||(d.test(y)?y==(m=y.replace(/^data-cke-saved-/,""))||u[m]||(delete z[y],n=!0):(delete z[y],n=!0))}}if(!ax.allStyles||ax.hadInvalidStyle){for(y in t){ax.allStyles||c[y]?G.push(y+":"+t[y]):n=!0}G.length&&(z.style=G.sort().join("; "))}else{x&&(z.style=x)}if(!ax.allClasses||ax.hadInvalidClass){for(y=0;y<I.length;++y){(ax.allClasses||v[I[y]])&&H.push(I[y])}H.length&&(z["class"]=H.sort().join(" "));L&&H.length<L.split(/\s+/).length&&(n=!0)}else{L&&(z["class"]=L)}n&&(q=1);if(!O.skipFinalValidation&&!ak(T)){return S.push(T),1}}O.toHtml&&(T.name=T.name.replace(ai,"cke:$1"));return q}function U(e){var d=[],f;for(f in e){-1<f.indexOf("*")&&d.push(f.replace(/\*/g,".*"))}return d.length?new RegExp("^(?:"+d.join("|")+")$"):null}function af(e){var d=e.attributes,f;delete d.style;delete d["class"];if(f=CKEDITOR.tools.writeCssText(e.styles,!0)){d.style=f}e.classes.length&&(d["class"]=e.classes.sort().join(" "))}function ak(b){switch(b.name){case"a":if(!(b.children.length||b.attributes.name||b.attributes.id)){return !1}break;case"img":if(!b.attributes.src){return !1}}return !0}function J(d){if(!d){return !1}if(!0===d){return !0}var c=U(d);return function(b){return b in d||c&&b.match(c)}}function ab(){return new CKEDITOR.htmlParser.element("br")}function R(b){return b.type==CKEDITOR.NODE_ELEMENT&&("br"==b.name||ah.$block[b.name])}function Q(x,w,v){var u=x.name;if(ah.$empty[u]||!x.children.length){"hr"==u&&"br"==w?x.replaceWith(ab()):(x.parent&&v.push({check:"it",el:x.parent}),x.remove())}else{if(ah.$block[u]||"tr"==u){if("br"==w){x.previous&&!R(x.previous)&&(w=ab(),w.insertBefore(x)),x.next&&!R(x.next)&&(w=ab(),w.insertAfter(x)),x.replaceWithChildren()}else{var u=x.children,t;w:{t=ah[w];for(var r=0,l=u.length,g;r<l;++r){if(g=u[r],g.type==CKEDITOR.NODE_ELEMENT&&!t[g.name]){t=!1;break w}}t=!0}if(t){x.name=w,x.attributes={},v.push({check:"parent-down",el:x})}else{t=x.parent;for(var r=t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==t.name,k,n,l=u.length;0<l;){g=u[--l],r&&(g.type==CKEDITOR.NODE_TEXT||g.type==CKEDITOR.NODE_ELEMENT&&ah.$inline[g.name])?(k||(k=new CKEDITOR.htmlParser.element(w),k.insertAfter(x),v.push({check:"parent-down",el:k})),k.add(g,0)):(k=null,n=ah[t.name]||ah.span,g.insertAfter(x),t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||g.type!=CKEDITOR.NODE_ELEMENT||n[g.name]||v.push({check:"el-up",el:g}))}x.remove()}}}else{u in {style:1,script:1}?x.remove():(x.parent&&v.push({check:"it",el:x.parent}),x.replaceWithChildren())}}}function al(g,f,l){var k,h;for(k=0;k<l.length;++k){if(h=l[k],!(h.check&&!g.check(h.check,!1)||h.left&&!h.left(f))){h.right(f,W);break}}}function Y(v,u){var t=u.getDefinition(),r=t.attributes,n=t.styles,l,k,g,h;if(v.name!=t.element){return !1}for(l in r){if("class"==l){for(t=r[l].split(/\s+/),g=v.classes.join("|");h=t.pop();){if(-1==g.indexOf(h)){return !1}}}else{if(v.attributes[l]!=r[l]){return !1}}}for(k in n){if(v.styles[k]!=n[k]){return !1}}return !0}function P(f,e){var h,g;"string"==typeof f?h=f:f instanceof CKEDITOR.style?g=f:(h=f[0],g=f[1]);return[{element:h,left:g,right:function(b,d){d.transform(b,e)}}]}function Z(b){return function(c){return Y(c,b)}}function D(b){return function(d,e){e[b](d)}}var ah=CKEDITOR.dtd,X=CKEDITOR.tools.copy,V=CKEDITOR.tools.trim,ad=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(f,e){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}};CKEDITOR.filter.instances[this.id]=this;var h=this.editor=f instanceof CKEDITOR.editor?f:null;if(h&&!e){this.customConfig=!0;var g=h.config.allowedContent;!0===g?this.disabled=!0:(g||(this.customConfig=!1),this.allow(g,"config",1),this.allow(h.config.extraAllowedContent,"extra",1),this.allow(ad[h.enterMode]+" "+ad[h.shiftEnterMode],"default",1),this.disallow(h.config.disallowedContent))}else{this.customConfig=!1,this.allow(e||f,"default",1)}};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(g,l,k){if(!ao(this,g,k)){return !1}var h,e;if("string"==typeof g){g=ar(g)}else{if(g instanceof CKEDITOR.style){if(g.toAllowedContentRules){return this.allow(g.toAllowedContentRules(this.editor),l,k)}h=g.getDefinition();g={};k=h.attributes;g[h.element]=h={styles:h.styles,requiredStyles:h.styles&&CKEDITOR.tools.object.keys(h.styles)};k&&(k=X(k),h.classes=k["class"]?k["class"].split(/\s+/):null,h.requiredClasses=h.classes,delete k["class"],h.attributes=k,h.requiredAttributes=k&&CKEDITOR.tools.object.keys(k))}else{if(CKEDITOR.tools.isArray(g)){for(h=0;h<g.length;++h){e=this.allow(g[h],l,k)}return e}}}aw(this,g,l,this.allowedContent,this._.allowedRules);return !0},applyTo:function(z,y,x,w){if(this.disabled){return !1}var v=this,u=[],n=this.editor&&this.editor.config.protectedSource,k,l=!1,r={doFilter:!x,doTransform:!0,doCallbacks:!0,toHtml:y};z.forEach(function(b){if(b.type==CKEDITOR.NODE_ELEMENT){if("off"==b.attributes["data-cke-filter"]){return !1}if(!y||"span"!=b.name||!~CKEDITOR.tools.object.keys(b.attributes).join("|").indexOf("data-cke-")){if(k=aa(v,b,u,r),k&1){l=!0}else{if(k&2){return !1}}}}else{if(b.type==CKEDITOR.NODE_COMMENT&&b.value.match(/^\{cke_protected\}(?!\{C\})/)){var m;b:{var g=decodeURIComponent(b.value.replace(/^\{cke_protected\}/,""));m=[];var f,e,h;if(n){for(e=0;e<n.length;++e){if((h=g.match(n[e]))&&h[0].length==g.length){m=!0;break b}}}g=CKEDITOR.htmlParser.fragment.fromHtml(g);1==g.children.length&&(f=g.children[0]).type==CKEDITOR.NODE_ELEMENT&&aa(v,f,m,r);m=!m.length}m||u.push(b)}}},null,!0);u.length&&(l=!0);var A;z=[];w=ad[w||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var t;x=u.pop();){x.type==CKEDITOR.NODE_ELEMENT?Q(x,w,z):x.remove()}for(;A=z.pop();){if(x=A.el,x.parent){switch(t=ah[x.parent.name]||ah.span,A.check){case"it":ah.$removeEmpty[x.name]&&!x.children.length?Q(x,w,z):ak(x)||Q(x,w,z);break;case"el-up":x.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||t[x.name]||Q(x,w,z);break;case"parent-down":x.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||t[x.name]||Q(x.parent,w,z)}}}return l},checkFeature:function(b){if(this.disabled||!b){return !0}b.toFeature&&(b=b.toFeature(this.editor));return !b.requiredContent||this.check(b.requiredContent)},disable:function(){this.disabled=!0},disallow:function(c){if(!ao(this,c,!0)){return !1}"string"==typeof c&&(c=ar(c));aw(this,c,null,this.disallowedContent,this._.disallowedRules);return !0},addContentForms:function(g){if(!this.disabled&&g){var f,l,k=[],h;for(f=0;f<g.length&&!h;++f){l=g[f],("string"==typeof l||l instanceof CKEDITOR.style)&&this.check(l)&&(h=l)}if(h){for(f=0;f<g.length;++f){k.push(P(g[f],h))}this.addTransformations(k)}}},addElementCallback:function(b){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(b)},addFeature:function(b){if(this.disabled||!b){return !0}b.toFeature&&(b=b.toFeature(this.editor));this.allow(b.allowedContent,b.name);this.addTransformations(b.contentTransformations);this.addContentForms(b.contentForms);return b.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(b.requiredContent):!0},addTransformations:function(z){var y,x;if(!this.disabled&&z){var w=this._.transformations,v;for(v=0;v<z.length;++v){y=z[v];var u=void 0,n=void 0,k=void 0,l=void 0,g=void 0,t=void 0;x=[];for(n=0;n<y.length;++n){k=y[n],"string"==typeof k?(k=k.split(/\s*:\s*/),l=k[0],g=null,t=k[1]):(l=k.check,g=k.left,t=k.right),u||(u=k,u=u.element?u.element:l?l.match(/^([a-z0-9]+)/i)[0]:u.left.getDefinition().element),g instanceof CKEDITOR.style&&(g=Z(g)),x.push({check:l==u?null:l,left:g,right:"string"==typeof t?D(t):t})}y=u;w[y]||(w[y]=[]);w[y].push(x)}}},check:function(v,u,t){if(this.disabled){return !0}if(CKEDITOR.tools.isArray(v)){for(var n=v.length;n--;){if(this.check(v[n],u,t)){return !0}}return !1}var m,g;if("string"==typeof v){g=v+"\x3c"+(!1===u?"0":"1")+(t?"1":"0")+"\x3e";if(g in this._.cachedChecks){return this._.cachedChecks[g]}m=ar(v).$1;var k=m.styles,n=m.classes;m.name=m.elements;m.classes=n=n?n.split(/\s*,\s*/):[];m.styles=ae(k);m.attributes=ae(m.attributes);m.children=[];n.length&&(m.attributes["class"]=n.join(" "));k&&(m.attributes.style=CKEDITOR.tools.writeCssText(m.styles))}else{m=v.getDefinition(),k=m.styles,n=m.attributes||{},k&&!CKEDITOR.tools.isEmpty(k)?(k=X(k),n.style=CKEDITOR.tools.writeCssText(k,!0)):k={},m={name:m.element,attributes:n,classes:n["class"]?n["class"].split(/\s+/):[],styles:k,children:[]}}var k=CKEDITOR.tools.clone(m),e=[],l;if(!1!==u&&(l=this._.transformations[m.name])){for(n=0;n<l.length;++n){al(this,m,l[n])}af(m)}aa(this,k,e,{doFilter:!0,doTransform:!1!==u,skipRequired:!t,skipFinalValidation:!t});0<e.length?t=!1:((u=m.attributes["class"])&&(m.attributes["class"]=m.attributes["class"].split(" ").sort().join(" ")),t=CKEDITOR.tools.objectCompare(m.attributes,k.attributes,!0),u&&(m.attributes["class"]=u));"string"==typeof v&&(this._.cachedChecks[g]=t);return t},getAllowedEnterMode:function(){var d=["p","div","br"],c={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(k,h){var b=d.slice(),g;if(this.check(ad[k])){return k}for(h||(b=b.reverse());g=b.pop();){if(this.check(g)){return c[g]}}return CKEDITOR.ENTER_BR}}(),clone:function(){var d=new CKEDITOR.filter,c=CKEDITOR.tools.clone;d.allowedContent=c(this.allowedContent);d._.allowedRules=c(this._.allowedRules);d.disallowedContent=c(this.disallowedContent);d._.disallowedRules=c(this._.disallowedRules);d._.transformations=c(this._.transformations);d.disabled=this.disabled;d.editor=this.editor;return d},destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var i={styles:1,attributes:1,classes:1},j={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},aj=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,s={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},o=/^cke:(object|embed|param)$/,ai=/^(object|embed|param)$/,W;W=CKEDITOR.filter.transformationsTools={sizeToStyle:function(b){this.lengthToStyle(b,"width");this.lengthToStyle(b,"height")},sizeToAttribute:function(b){this.lengthToAttribute(b,"width");this.lengthToAttribute(b,"height")},lengthToStyle:function(f,e,h){h=h||e;if(!(h in f.styles)){var g=f.attributes[e];g&&(/^\d+$/.test(g)&&(g+="px"),f.styles[h]=g)}delete f.attributes[e]},lengthToAttribute:function(g,e,l){l=l||e;if(!(l in g.attributes)){var k=g.styles[e],h=k&&k.match(/^(\d+)(?:\.\d*)?px$/);h?g.attributes[l]=h[1]:"cke-test"==k&&(g.attributes[l]="cke-test")}delete g.styles[e]},alignmentToStyle:function(d){if(!("float" in d.styles)){var c=d.attributes.align;if("left"==c||"right"==c){d.styles["float"]=c}}delete d.attributes.align},alignmentToAttribute:function(d){if(!("align" in d.attributes)){var c=d.styles["float"];if("left"==c||"right"==c){d.attributes.align=c}}delete d.styles["float"]},splitBorderShorthand:function(d){if(d.styles.border){var c=CKEDITOR.tools.style.parse.border(d.styles.border);c.color&&(d.styles["border-color"]=c.color);c.style&&(d.styles["border-style"]=c.style);c.width&&(d.styles["border-width"]=c.width);delete d.styles.border}},listTypeToStyle:function(b){if(b.attributes.type){switch(b.attributes.type){case"a":b.styles["list-style-type"]="lower-alpha";break;case"A":b.styles["list-style-type"]="upper-alpha";break;case"i":b.styles["list-style-type"]="lower-roman";break;case"I":b.styles["list-style-type"]="upper-roman";break;case"1":b.styles["list-style-type"]="decimal";break;default:b.styles["list-style-type"]=b.attributes.type}}},splitMarginShorthand:function(e){function d(b){e.styles["margin-top"]=f[b[0]];e.styles["margin-right"]=f[b[1]];e.styles["margin-bottom"]=f[b[2]];e.styles["margin-left"]=f[b[3]]}if(e.styles.margin){var f=e.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(f.length){case 1:d([0,0,0,0]);break;case 2:d([0,1,0,1]);break;case 3:d([0,1,2,1]);break;case 4:d([0,1,2,3])}delete e.styles.margin}},matchesStyle:Y,transform:function(v,u){if("string"==typeof u){v.name=u}else{var t=u.getDefinition(),r=t.styles,l=t.attributes,n,k,g,h;v.name=t.element;for(n in l){if("class"==n){for(t=v.classes.join("|"),g=l[n].split(/\s+/);h=g.pop();){-1==t.indexOf(h)&&v.classes.push(h)}}else{v.attributes[n]=l[n]}}for(k in r){v.styles[k]=r[k]}}}}})();(function(){CKEDITOR.focusManager=function(b){if(b.focusManager){return b.focusManager}this.hasFocus=!1;this.currentActive=null;this._={editor:b};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(b){this._.timer&&clearTimeout(this._.timer);b&&(this.currentActive=b);this.hasFocus||this._.locked||((b=CKEDITOR.currentInstance)&&b.focusManager.blur(1),this.hasFocus=!0,(b=this._.editor.container)&&b.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function f(){if(this.hasFocus){this.hasFocus=!1;var b=this._.editor.container;b&&b.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var c=CKEDITOR.focusManager._.blurDelay;e||!c?f.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;f.call(this)},c,this)}},add:function(g,i){var e=g.getCustomData("focusmanager");if(!e||e!=this){e&&e.remove(g);var e="focus",j="blur";i&&(CKEDITOR.env.ie?(e="focusin",j="focusout"):CKEDITOR.event.useCapture=1);var h={blur:function(){g.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(g)}};g.on(e,h.focus,this);g.on(j,h.blur,this);i&&(CKEDITOR.event.useCapture=0);g.setCustomData("focusmanager",this);g.setCustomData("focusmanager_handlers",h)}},remove:function(b){b.removeCustomData("focusmanager");var c=b.removeCustomData("focusmanager_handlers");b.removeListener("blur",c.blur);b.removeListener("focus",c.focus)}}})();CKEDITOR.keystrokeHandler=function(b){if(b.keystrokeHandler){return b.keystrokeHandler}this.keystrokes={};this.blockedKeystrokes={};this._={editor:b};return this};(function(){var e,f=function(g){g=g.data;var l=g.getKeystroke(),j=this.keystrokes[l],i=this._.editor;e=!1===i.fire("key",{keyCode:l,domEvent:g});e||(j&&(e=!1!==i.execCommand(j,{from:"keystrokeHandler"})),e||(e=!!this.blockedKeystrokes[l]));e&&g.preventDefault(!0);return !e},c=function(d){e&&(e=!1,d.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(b){b.on("keydown",f,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac){b.on("keypress",c,this)}}}})();(function(){CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(f,g,e){f&&CKEDITOR.lang.languages[f]||(f=this.detect(g,f));var h=this;g=function(){h[f].dir=h.rtl[f]?"rtl":"ltr";e(f,h[f])};this[f]?g():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+f+".js"),g,this)},detect:function(g,i){var e=this.languages;i=i||navigator.userLanguage||navigator.language||g;var j=i.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),h=j[1],j=j[2];e[h+"-"+j]?h=h+"-"+j:e[h]||(h=null);CKEDITOR.lang.detect=h?function(){return h}:function(b){return b};return h||g}}})();CKEDITOR.scriptLoader=function(){var b={},c={};return{load:function(r,q,n,j){var i="string"==typeof r;i&&(r=[r]);n||(n=CKEDITOR);var m=r.length,d=[],u=[],o=function(e){q&&(i?q.call(n,e):q.call(n,d,u))};if(0===m){o(!0)}else{var s=function(f,e){(e?d:u).push(f);0>=--m&&(j&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),o(e))},y=function(g,l){b[g]=1;var h=c[g];delete c[g];for(var k=0;k<h.length;k++){h[k](g,l)}},p=function(g){if(b[g]){s(g,!0)}else{var h=c[g]||(c[g]=[]);h.push(s);if(!(1<h.length)){var k=new CKEDITOR.dom.element("script");k.setAttributes({type:"text/javascript",src:g});q&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?k.$.onreadystatechange=function(){if("loaded"==k.$.readyState||"complete"==k.$.readyState){k.$.onreadystatechange=null,y(g,!0)}}:(k.$.onload=function(){setTimeout(function(){k.$.onload=null;k.$.onerror=null;y(g,!0)},0)},k.$.onerror=function(){k.$.onload=null;k.$.onerror=null;y(g,!1)}));k.appendTo(CKEDITOR.document.getHead())}}};j&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var w=0;w<m;w++){p(r[w])}}},queue:function(){function d(){var f;(f=e[0])&&this.load(f.scriptUrl,f.callback,CKEDITOR,0)}var e=[];return function(i,g){var f=this;e.push({scriptUrl:i,callback:function(){g&&g.apply(this,arguments);e.shift();d.call(f)}});1==e.length&&d.call(this)}}()}}();CKEDITOR.resourceManager=function(b,c){this.basePath=b;this.fileName=c;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};CKEDITOR.resourceManager.prototype={add:function(e,f){if(this.registered[e]){throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.')}var c=this.registered[e]=f||{};c.name=e;c.path=this.getPath(e);CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",c);return this.get(e)},get:function(b){return this.registered[b]||null},getPath:function(b){var c=this.externals[b];return CKEDITOR.getUrl(c&&c.dir||this.basePath+b+"/")},getFilePath:function(b){var c=this.externals[b];return CKEDITOR.getUrl(this.getPath(b)+(c?c.file:this.fileName+".js"))},addExternal:function(f,g,e){e||(g=g.replace(/[^\/]+$/,function(b){e=b;return""}));e=e||this.fileName+".js";f=f.split(",");for(var h=0;h<f.length;h++){this.externals[f[h]]={dir:g,file:e}}},load:function(t,q,s){CKEDITOR.tools.isArray(t)||(t=t?[t]:[]);for(var r=this.loaded,o=this.registered,m=[],j={},n={},i=0;i<t.length;i++){var u=t[i];if(u){if(r[u]||o[u]){n[u]=this.get(u)}else{var p=this.getFilePath(u);m.push(p);p in j||(j[p]=[]);j[p].push(u)}}}CKEDITOR.scriptLoader.load(m,function(c,k){if(k.length){throw Error('[CKEDITOR.resourceManager.load] Resource name "'+j[k[0]].join(",")+'" was not found at "'+k[0]+'".')}for(var g=0;g<c.length;g++){for(var d=j[c[g]],b=0;b<d.length;b++){var v=d[b];n[v]=this.get(v);r[v]=1}}q.call(s,n)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(b){var c={};return function(d,j,i){var g={},e=function(f){b.call(this,f,function(k){CKEDITOR.tools.extend(g,k);var h=[],o;for(o in k){var n=k[o],l=n&&n.requires;if(!c[o]){if(n.icons){for(var p=n.icons.split(","),m=p.length;m--;){CKEDITOR.skin.addIcon(p[m],n.path+"icons/"+(CKEDITOR.env.hidpi&&n.hidpi?"hidpi/":"")+p[m]+".png")}}n.isSupportedEnvironment=n.isSupportedEnvironment||function(){return !0};c[o]=1}if(l){for(l.split&&(l=l.split(",")),n=0;n<l.length;n++){g[l[n]]||h.push(l[n])}}}if(h.length){e.call(this,h)}else{for(o in g){n=g[o],n.onLoad&&!n.onLoad._called&&(!1===n.onLoad()&&delete g[o],n.onLoad._called=1)}j&&j.call(i||window,g)}},this)};e.call(this,d)}});CKEDITOR.plugins.setLang=function(f,g,e){var h=this.get(f);f=h.langEntries||(h.langEntries={});h=h.lang||(h.lang=[]);h.split&&(h=h.split(","));-1==CKEDITOR.tools.indexOf(h,g)&&h.push(g);f[g]=e};CKEDITOR.ui=function(b){if(b.ui){return b.ui}this.items={};this.instances={};this.editor=b;this._={handlers:{}};return this};CKEDITOR.ui.prototype={add:function(f,g,e){e.name=f.toLowerCase();var h=this.items[f]={type:g,command:e.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(h,e)},get:function(b){return this.instances[b]},create:function(f){var g=this.items[f],e=g&&this._.handlers[g.type],h=g&&g.command&&this.editor.getCommand(g.command),e=e&&e.create.apply(this,g.args);this.instances[f]=e;h&&h.uiItems.push(e);e&&!e.type&&(e.type=g.type);return e},addHandler:function(b,c){this._.handlers[b]=c},space:function(b){return CKEDITOR.document.getById(this.spaceId(b))},spaceId:function(b){return this.editor.id+"_"+b}};CKEDITOR.event.implementOn(CKEDITOR.ui);(function(){function A(b,d,c){CKEDITOR.event.call(this);b=b&&CKEDITOR.tools.clone(b);if(void 0!==d){if(!(d instanceof CKEDITOR.dom.element)){throw Error("Expect element of type CKEDITOR.dom.element.")}if(!c){throw Error("One of the element modes must be specified.")}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&c==CKEDITOR.ELEMENT_MODE_INLINE){throw Error("Inline element mode is not supported on IE quirks.")}if(!w(d,c)){throw Error('The specified element mode is not supported on element: "'+d.getName()+'".')}this.element=d;this.elementMode=c;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(d.getId()||d.getNameAtt())}else{this.elementMode=CKEDITOR.ELEMENT_MODE_NONE}this._={};this.commands={};this.templates={};this.name=this.name||q();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",s);this.on("selectionChange",function(e){m(this,e.data.path)});this.on("activeFilterChange",function(){m(this,this.elementPath(),!0)});this.on("mode",s);CKEDITOR.dom.selection.setupEditorOptimization(this);this.on("instanceReady",function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var e=this.createRange();e.selectNodeContents(this.editable());e.shrink(CKEDITOR.SHRINK_ELEMENT,!0);e.collapse();this.getSelection().selectRanges([e])}this.focus()}});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){this.isDestroyed()||this.isDetached()||n(this,b)},0,this)}function q(){do{var b="editor"+ ++D}while(CKEDITOR.instances[b]);return b}function w(d,c){return c==CKEDITOR.ELEMENT_MODE_INLINE?d.is(CKEDITOR.dtd.$editable)||d.is("textarea"):c==CKEDITOR.ELEMENT_MODE_REPLACE?!d.is(CKEDITOR.dtd.$nonBodyContent):1}function s(){var d=this.commands,c;for(c in d){o(this,d[c])}}function o(d,c){c[c.startDisabled?"disable":d.readOnly&&!c.readOnly?"disable":c.modes[d.mode]?"enable":"disable"]()}function m(h,g,u){if(g){var t,l,k=h.commands;for(l in k){t=k[l],(u||t.contextSensitive)&&t.refresh(h,g)}}}function j(e){var d=e.config.customConfig;if(!d){return !1}var d=CKEDITOR.getUrl(d),f=C[d]||(C[d]={});f.fn?(f.fn.call(e,e.config),CKEDITOR.getUrl(e.config.customConfig)!=d&&j(e)||e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(d,function(){f.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};j(e)});return !0}function n(d,c){d.on("customConfigLoaded",function(){if(c){if(c.on){for(var b in c.on){d.on(b,c.on[b])}}CKEDITOR.tools.extend(d.config,c,!0);delete d.config.on}b=d.config;d.readOnly=b.readOnly?!0:d.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?d.element.is("textarea")?d.element.hasAttribute("disabled")||d.element.hasAttribute("readonly"):d.element.isReadOnly():d.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?d.element.hasAttribute("disabled")||d.element.hasAttribute("readonly"):!1;d.blockless=d.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(d.element.is("textarea")||CKEDITOR.dtd[d.element.getName()].p):!1;d.tabIndex=b.tabIndex||d.element&&d.element.getAttribute("tabindex")||0;d.activeEnterMode=d.enterMode=d.blockless?CKEDITOR.ENTER_BR:b.enterMode;d.activeShiftEnterMode=d.shiftEnterMode=d.blockless?CKEDITOR.ENTER_BR:b.shiftEnterMode;b.skin&&(CKEDITOR.skinName=b.skin);d.fireOnce("configLoaded");d.dataProcessor=new CKEDITOR.htmlDataProcessor(d);d.filter=d.activeFilter=new CKEDITOR.filter(d);i(d)});c&&null!=c.customConfig&&(d.config.customConfig=c.customConfig);j(d)||d.fireOnce("customConfigLoaded")}function i(b){CKEDITOR.skin.loadPart("editor",function(){B(b)})}function B(b){CKEDITOR.lang.load(b.config.language,b.config.defaultLanguage,function(e,g){var f=b.config.title;b.langCode=e;b.lang=CKEDITOR.tools.prototypedCopy(g);b.title="string"==typeof f||!1===f?f:[b.lang.editor,b.name].join(", ");b.config.contentsLangDirection||(b.config.contentsLangDirection=b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?b.element.getDirection(1):b.lang.dir);b.fire("langLoaded");p(b)})}function p(b){b.getStylesSet(function(c){b.once("loaded",function(){b.fire("stylesSet",{styles:c})},null,null,1);y(b)})}function y(l){function k(b){if(!b){return""}CKEDITOR.tools.isArray(b)&&(b=b.join(","));return b.replace(/\s/g,"")}var F=l.config,z=k(F.plugins),x=k(F.extraPlugins),v=k(F.removePlugins);if(x){var t=new RegExp("(?:^|,)(?:"+x.replace(/,/g,"|")+")(?\x3d,|$)","g"),z=z.replace(t,""),z=z+(","+x)}if(v){var u=new RegExp("(?:^|,)(?:"+v.replace(/,/g,"|")+")(?\x3d,|$)","g"),z=z.replace(u,"")}CKEDITOR.env.air&&(z+=",adobeair");CKEDITOR.plugins.load(z.split(","),function(O){var M=[],L=[],J=[];l.plugins=CKEDITOR.tools.extend({},l.plugins,O);for(var G in O){var I=O[G],H=I.lang,g=null,c=I.requires,K;CKEDITOR.tools.isArray(c)&&(c=c.join(","));if(c&&(K=c.match(u))){for(;c=K.pop();){CKEDITOR.error("editor-plugin-required",{plugin:c.replace(",",""),requiredBy:G})}}H&&!l.lang[G]&&(H.split&&(H=H.split(",")),0<=CKEDITOR.tools.indexOf(H,l.langCode)?g=l.langCode:(g=l.langCode.replace(/-.*/,""),g=g!=l.langCode&&0<=CKEDITOR.tools.indexOf(H,g)?g:0<=CKEDITOR.tools.indexOf(H,"en")?"en":H[0]),I.langEntries&&I.langEntries[g]?(l.lang[G]=I.langEntries[g],g=null):J.push(CKEDITOR.getUrl(I.path+"lang/"+g+".js")));L.push(g);M.push(I)}CKEDITOR.scriptLoader.load(J,function(){if(!l.isDestroyed()&&!l.isDetached()){for(var e=["beforeInit","init","afterInit"],h=0;h<e.length;h++){for(var d=0;d<M.length;d++){var N=M[d];0===h&&L[d]&&N.lang&&N.langEntries&&(l.lang[N.name]=N.langEntries[L[d]]);if(N[e[h]]){N[e[h]](l)}}}l.fireOnce("pluginsLoaded");F.keystrokes&&l.setKeystroke(l.config.keystrokes);for(d=0;d<l.config.blockedKeystrokes.length;d++){l.keystrokeHandler.blockedKeystrokes[l.config.blockedKeystrokes[d]]=1}l.status="loaded";l.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,l)}})})}function E(){var d=this.element;if(d&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var c=this.getData();this.config.htmlEncodeOutput&&(c=CKEDITOR.tools.htmlEncode(c));d.is("textarea")?d.setValue(c):d.setHtml(c);return !0}return !1}function r(K,J){function I(e){var c=e.startContainer,f=e.endContainer;return c.is&&(c.is("tr")||c.is("td")&&c.equals(f)&&e.endOffset===c.getChildCount())?!0:!1}function H(d){var c=d.startContainer;return c.is("tr")?d.cloneContents():c.clone(!0)}for(var G=new CKEDITOR.dom.documentFragment,F,x,z,v=0;v<K.length;v++){var u=K[v],t=u.startContainer.getAscendant("tr",!0);I(u)?(F||(F=t.getAscendant("table").clone(),F.append(t.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),G.append(F),F=F.findOne("thead, tbody, tfoot")),x&&x.equals(t)||(x=t,z=t.clone(),F.append(z)),z.append(H(u))):G.append(u.cloneContents())}return F?G:J.getHtmlFromRange(K[0])}A.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=A;var D=0,C={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(f,e){for(var h=0;h<e.length;h++){var g=e[h];if(this[g]){return CKEDITOR.warn("editor-plugin-conflict",{plugin:f,replacedWith:g}),!0}}return !1}},addCommand:function(e,d){d.name=e.toLowerCase();var f=d instanceof CKEDITOR.command?d:new CKEDITOR.command(this,d);this.mode&&o(this,f);return this.commands[e]=f},_attachToForm:function(){function g(c){l.updateElement();l._.required&&!k.getValue()&&!1===l.fire("required")&&c.data.preventDefault()}function f(b){return !!(b&&b.call&&b.apply)}var l=this,k=l.element,h=new CKEDITOR.dom.element(k.$.form);k.is("textarea")&&h&&(h.on("submit",g),f(h.$.submit)&&(h.$.submit=CKEDITOR.tools.override(h.$.submit,function(c){return function(){g();c.apply?c.apply(this):c()}})),l.on("destroy",function(){h.removeListener("submit",g)}))},destroy:function(e){var d=CKEDITOR.filter.instances,f=this;this.fire("beforeDestroy");!e&&E.call(this);this.editable(null);this.filter&&delete this.filter;CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(d),function(b){b=d[b];f===b.editor&&b.destroy()});delete this.activeFilter;this.status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(b){if(!b){b=this.getSelection();if(!b){return null}b=b.getStartElement()}return b?new CKEDITOR.dom.elementPath(b,this.editable()):null},createRange:function(){var b=this.editable();return b?new CKEDITOR.dom.range(b):null},execCommand:function(f,e){var h=this.getCommand(f),g={name:f,commandData:e||{},command:h};return h&&h.state!=CKEDITOR.TRISTATE_DISABLED&&!1!==this.fire("beforeCommandExec",g)&&(g.returnValue=h.exec(g.commandData),!h.async&&!1!==this.fire("afterCommandExec",g))?g.returnValue:!1},getCommand:function(b){return this.commands[b]},getData:function(d){!d&&this.fire("beforeGetData");var c=this._.data;"string"!=typeof c&&(c=(c=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?c.is("textarea")?c.getValue():c.getHtml():"");c={dataValue:c};!d&&this.fire("getData",c);return c.dataValue},getSnapshot:function(){var b=this.fire("getSnapshot");"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():"");return b},loadSnapshot:function(b){this.fire("loadSnapshot",b)},setData:function(g,f,l){var k=!0,h=f;f&&"object"==typeof f&&(l=f.internal,h=f.callback,k=!f.noSnapshot);!l&&k&&this.fire("saveSnapshot");if(h||!l){this.once("dataReady",function(b){!l&&k&&this.fire("saveSnapshot");h&&h.call(b.editor)})}g={dataValue:g};!l&&this.fire("setData",g);this._.data=g.dataValue;!l&&this.fire("afterSetData",g)},setReadOnly:function(b){b=null==b||b;this.readOnly!=b&&(this.readOnly=b,this.keystrokeHandler.blockedKeystrokes[8]=+b,this.editable().setReadOnly(b),this.fire("readOnly"))},insertHtml:function(e,d,f){this.fire("insertHtml",{dataValue:e,mode:d,range:f})},insertText:function(b){this.fire("insertText",b)},insertElement:function(b){this.fire("insertElement",b)},getSelectedHtml:function(e){var d=this.editable(),f=this.getSelection(),f=f&&f.getRanges();if(!d||!f||0===f.length){return null}d=r(f,d);return e?d.getHtml():d},extractSelectedHtml:function(h,g){var u=this.editable(),t=this.getSelection().getRanges(),l=new CKEDITOR.dom.documentFragment,k;if(!u||0===t.length){return null}for(k=0;k<t.length;k++){l.append(u.extractHtmlFromRange(t[k],g))}g||this.getSelection().selectRanges([t[0]]);return h?l.getHtml():l},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return E.call(this)},setKeystroke:function(){for(var g=this.keystrokeHandler.keystrokes,f=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],l,k,h=f.length;h--;){l=f[h],k=0,CKEDITOR.tools.isArray(l)&&(k=l[1],l=l[0]),k?g[l]=k:delete g[l]}},getCommandKeystroke:function(k,g){var x="string"===typeof k?this.getCommand(k):k,v=[];if(x){var u=CKEDITOR.tools.object.findKey(this.commands,x),t=this.keystrokeHandler.keystrokes;if(x.fakeKeystroke){v.push(x.fakeKeystroke)}else{for(var l in t){t[l]===u&&v.push(l)}}}return g?v:v[0]||null},addFeature:function(b){return this.filter.addFeature(b)},setActiveFilter:function(b){b||(b=this.filter);this.activeFilter!==b&&(this.activeFilter=b,this.fire("activeFilterChange"),b===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(b.getAllowedEnterMode(this.enterMode),b.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(d,c){d=d?this.blockless?CKEDITOR.ENTER_BR:d:this.enterMode;c=c?this.blockless?CKEDITOR.ENTER_BR:c:this.shiftEnterMode;if(this.activeEnterMode!=d||this.activeShiftEnterMode!=c){this.activeEnterMode=d,this.activeShiftEnterMode=c,this.fire("activeEnterModeChange")}},showNotification:function(b){alert(b)},isDetached:function(){return !!this.container&&this.container.isDetached()},isDestroyed:function(){return"destroyed"===this.status}});CKEDITOR.editor._getEditorElement=function(d){if(!CKEDITOR.env.isCompatible){return null}var c=CKEDITOR.dom.element.get(d);return c?c.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:c.getEditor().name}),null):c:(CKEDITOR.error("editor-incorrect-element",{element:d}),null)}})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};(function(){var b=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,c={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(q){for(var p,n,j=0,i;p=this._.htmlPartsRegex.exec(q);){n=p.index;if(n>j){if(j=q.substring(j,n),i){i.push(j)}else{this.onText(j)}}j=this._.htmlPartsRegex.lastIndex;if(n=p[1]){if(n=n.toLowerCase(),i&&CKEDITOR.dtd.$cdata[n]&&(this.onCDATA(i.join("")),i=null),!i){this.onTagClose(n);continue}}if(i){i.push(p[0])}else{if(n=p[3]){if(n=n.toLowerCase(),!/="/.test(n)){var m={},d,r=p[4];p=!!p[5];if(r){for(;d=b.exec(r);){var o=d[1].toLowerCase();d=d[2]||d[3]||d[4]||"";m[o]=!d&&c[o]?o:CKEDITOR.tools.htmlDecodeAttr(d)}}this.onTagOpen(n,m,p);!i&&CKEDITOR.dtd.$cdata[n]&&(i=[])}}else{if(n=p[2]){this.onComment(n)}}}}if(q.length>j){this.onText(q.substring(j,q.length))}}}})();CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(b){this._.output.push("\x3c",b)},openTagClose:function(b,c){c?this._.output.push(" /\x3e"):this._.output.push("\x3e")},attribute:function(b,c){"string"==typeof c&&(c=CKEDITOR.tools.htmlEncodeAttr(c));this._.output.push(" ",b,'\x3d"',c,'"')},closeTag:function(b){this._.output.push("\x3c/",b,"\x3e")},text:function(b){this._.output.push(b)},comment:function(b){this._.output.push("\x3c!--",b,"--\x3e")},write:function(b){this._.output.push(b)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(b){var c=this._.output.join("");b&&this.reset();return c}}});"use strict";(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var f=this.parent.children,g=CKEDITOR.tools.indexOf(f,this),e=this.previous,h=this.next;e&&(e.next=h);h&&(h.previous=e);f.splice(g,1);this.parent=null},replaceWith:function(g){var i=this.parent.children,e=CKEDITOR.tools.indexOf(i,this),j=g.previous=this.previous,h=g.next=this.next;j&&(j.next=g);h&&(h.previous=g);i[e]=g;g.parent=this.parent;this.parent=null},insertAfter:function(f){var g=f.parent.children,e=CKEDITOR.tools.indexOf(g,f),h=f.next;g.splice(e+1,0,this);this.next=f.next;this.previous=f;f.next=this;h&&(h.previous=this);this.parent=f.parent},insertBefore:function(e){var f=e.parent.children,c=CKEDITOR.tools.indexOf(f,e);f.splice(c,0,this);this.next=e;(this.previous=e.previous)&&(e.previous.next=this);e.previous=this;this.parent=e.parent},getAscendant:function(e){var f="function"==typeof e?e:"string"==typeof e?function(d){return d.name==e}:function(d){return d.name in e},c=this.parent;for(;c&&c.type==CKEDITOR.NODE_ELEMENT;){if(f(c)){return c}c=c.parent}return null},wrapWith:function(b){this.replaceWith(b);b.add(this);return b},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(b){return b||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(b){this.value=b;this._={isBlockLike:!1}};CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,f){var c=this.value;if(!(c=e.onComment(f,c,this))){return this.remove(),!1}if("string"!=typeof c){return this.replaceWith(c),!1}this.value=c;return !0},writeHtml:function(b,c){c&&this.filter(c);b.comment(this.value)}});"use strict";(function(){CKEDITOR.htmlParser.text=function(b){this.value=b;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(b,c){if(!(this.value=b.onText(c,this.value,this))){return this.remove(),!1}},writeHtml:function(b,c){c&&this.filter(c);b.text(this.value)}})})();"use strict";(function(){CKEDITOR.htmlParser.cdata=function(b){this.value=b};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(b){b.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};(function(){function g(b){return b.attributes["data-cke-survive"]?!1:"a"==b.name&&b.attributes.href||CKEDITOR.dtd.$removeEmpty[b.name]}var i=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),e={ol:1,ul:1},j=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),h={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(f,d,m){function c(l){var k;if(0<b.length){for(var x=0;x<b.length;x++){var v=b[x],u=v.name,t=CKEDITOR.dtd[u],n=r.name&&CKEDITOR.dtd[r.name];n&&!n[u]||l&&t&&!t[l]&&CKEDITOR.dtd[l]?u==r.name&&(s(r,r.parent,1),x--):(k||(B(),k=1),v=v.clone(),v.parent=r,r=v,b.splice(x,1),x--)}}}function B(){for(;p.length;){s(p.shift(),r)}}function o(l){if(l._.isBlockLike&&"pre"!=l.name&&"textarea"!=l.name){var k=l.children.length,t=l.children[k-1],n;t&&t.type==CKEDITOR.NODE_TEXT&&((n=CKEDITOR.tools.rtrim(t.value))?t.value=n:l.children.length=k-1)}}function s(k,t,n){t=t||r||C;var l=r;void 0===k.previous&&(E(t,k)&&(r=t,D.onTagOpen(m,{}),k.returnPoint=t=r),o(k),g(k)&&!k.children.length||t.add(k),"pre"==k.name&&(w=!1),"textarea"==k.name&&(A=!1));k.returnPoint?(r=k.returnPoint,delete k.returnPoint):r=n?t:l}function E(l,k){if((l==C||"body"==l.name)&&m&&(!l.name||CKEDITOR.dtd[l.name][m])){var t,n;return(t=k.attributes&&(n=k.attributes["data-cke-real-element-type"])?n:k.name)&&t in CKEDITOR.dtd.$inline&&!(t in CKEDITOR.dtd.head)&&!k.isOrphan||k.type==CKEDITOR.NODE_TEXT}}function q(l,k){return l in CKEDITOR.dtd.$listItem||l in CKEDITOR.dtd.$tableContent?l==k||"dt"==l&&"dd"==k||"dd"==l&&"dt"==k:!1}var D=new CKEDITOR.htmlParser,C=d instanceof CKEDITOR.htmlParser.element?d:"string"==typeof d?new CKEDITOR.htmlParser.element(d):new CKEDITOR.htmlParser.fragment,b=[],p=[],r=C,A="textarea"==C.name,w="pre"==C.name;D.onTagOpen=function(t,n,k,l){n=new CKEDITOR.htmlParser.element(t,n);n.isUnknown&&k&&(n.isEmpty=!0);n.isOptionalClose=l;if(g(n)){b.push(n)}else{if("pre"==t){w=!0}else{if("br"==t&&w){r.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==t&&(A=!0)}if("br"==t){p.push(n)}else{for(;!(l=(k=r.name)?CKEDITOR.dtd[k]||(r._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):j,n.isUnknown||r.isUnknown||l[t]);){if(r.isOptionalClose){D.onTagClose(k)}else{if(t in e&&k in e){k=r.children,(k=k[k.length-1])&&"li"==k.name||s(k=new CKEDITOR.htmlParser.element("li"),r),!n.returnPoint&&(n.returnPoint=r),r=k}else{if(t in CKEDITOR.dtd.$listItem&&!q(t,k)){D.onTagOpen("li"==t?"ul":"dl",{},0,1)}else{if(k in i&&!q(t,k)){!n.returnPoint&&(n.returnPoint=r),r=r.parent}else{if(k in CKEDITOR.dtd.$inline&&b.unshift(r),r.parent){s(r,r.parent,1)}else{n.isOrphan=1;break}}}}}}c(t);B();n.parent=r;n.isEmpty?s(n):r=n}}};D.onTagClose=function(l){for(var k=b.length-1;0<=k;k--){if(l==b[k].name){b.splice(k,1);return}}for(var v=[],u=[],t=r;t!=C&&t.name!=l;){t._.isBlockLike||u.unshift(t),v.push(t),t=t.returnPoint||t.parent}if(t!=C){for(k=0;k<v.length;k++){var n=v[k];s(n,n.parent)}r=t;t._.isBlockLike&&B();s(t,t.parent);t==r&&(r=r.parent);b=b.concat(u)}"body"==l&&(m=!1)};D.onText=function(l){if(!(r._.hasInlineStarted&&!p.length||w||A)&&(l=CKEDITOR.tools.ltrim(l),0===l.length)){return}var k=r.name,n=k?CKEDITOR.dtd[k]||(r._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):j;if(!A&&!n["#"]&&k in i){D.onTagOpen(h[k]||""),D.onText(l)}else{B();c();w||A||(l=l.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));l=new CKEDITOR.htmlParser.text(l);if(E(r,l)){this.onTagOpen(m,{},0,1)}r.add(l)}};D.onCDATA=function(k){r.add(new CKEDITOR.htmlParser.cdata(k))};D.onComment=function(k){B();c();r.add(new CKEDITOR.htmlParser.comment(k))};D.parse(f);for(B();r!=C;){s(r,r.parent,1)}o(C);return C};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(f,d){isNaN(d)&&(d=this.children.length);var k=0<d?this.children[d-1]:null;if(k){if(f._.isBlockLike&&k.type==CKEDITOR.NODE_TEXT&&(k.value=CKEDITOR.tools.rtrim(k.value),0===k.value.length)){this.children.pop();this.add(f);return}k.next=f}f.previous=k;f.parent=this;this.children.splice(d,0,f);this._.hasInlineStarted||(this._.hasInlineStarted=f.type==CKEDITOR.NODE_TEXT||f.type==CKEDITOR.NODE_ELEMENT&&!f._.isBlockLike)},filter:function(d,c){c=this.getFilterContext(c);d.onRoot(c,this);this.filterChildren(d,!1,c)},filterChildren:function(f,d,k){if(this.childrenFilteredBy!=f.id){k=this.getFilterContext(k);if(d&&!this.parent){f.onRoot(k,this)}this.childrenFilteredBy=f.id;for(d=0;d<this.children.length;d++){!1===this.children[d].filter(f,k)&&d--}}},writeHtml:function(d,c){c&&this.filter(c);this.writeChildrenHtml(d)},writeChildrenHtml:function(k,f,m){var l=this.getFilterContext();if(m&&!this.parent&&f){f.onRoot(l,this)}f&&this.filterChildren(f,!1,l);f=0;m=this.children;for(l=m.length;f<l;f++){m[f].writeHtml(k)}},forEach:function(l,k,o){if(!(o||k&&this.type!=k)){var n=l(this)}if(!1!==n){o=this.children;for(var m=0;m<o.length;m++){n=o[m],n.type==CKEDITOR.NODE_ELEMENT?n.forEach(l,k):k&&n.type!=k||l(n)}}},getFilterContext:function(b){return b||{}}}})();"use strict";(function(){function b(){this.rules=[]}function c(e,m,l,i){var f,j;for(f in m){(j=e[f])||(j=e[f]=new b),j.add(m[f],l,i)}}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(d){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new b;this.attributeNameRules=new b;this.elementsRules={};this.attributesRules={};this.textRules=new b;this.commentRules=new b;this.rootRules=new b;d&&this.addRules(d,10)},proto:{addRules:function(d,g){var e;"number"==typeof g?e=g:g&&"priority" in g&&(e=g.priority);"number"!=typeof e&&(e=10);"object"!=typeof g&&(g={});d.elementNames&&this.elementNameRules.addMany(d.elementNames,e,g);d.attributeNames&&this.attributeNameRules.addMany(d.attributeNames,e,g);d.elements&&c(this.elementsRules,d.elements,e,g);d.attributes&&c(this.attributesRules,d.attributes,e,g);d.text&&this.textRules.add(d.text,e,g);d.comment&&this.commentRules.add(d.comment,e,g);d.root&&this.rootRules.add(d.root,e,g)},applyTo:function(d){d.filter(this)},onElementName:function(d,e){return this.elementNameRules.execOnName(d,e)},onAttributeName:function(d,e){return this.attributeNameRules.execOnName(d,e)},onText:function(e,g,f){return this.textRules.exec(e,g,f)},onComment:function(e,g,f){return this.commentRules.exec(e,g,f)},onRoot:function(d,e){return this.rootRules.exec(d,e)},onElement:function(e,j){for(var i=[this.elementsRules["^"],this.elementsRules[j.name],this.elementsRules.$],g,f=0;3>f;f++){if(g=i[f]){g=g.exec(e,j,this);if(!1===g){return null}if(g&&g!=j){return this.onNode(e,g)}if(j.parent&&!j.name){break}}}return j},onNode:function(e,g){var f=g.type;return f==CKEDITOR.NODE_ELEMENT?this.onElement(e,g):f==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,g.value,g)):f==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,g.value,g)):null},onAttribute:function(e,i,g,f){return(g=this.attributesRules[g])?g.exec(e,f,i,this):f}}});CKEDITOR.htmlParser.filterRulesGroup=b;b.prototype={add:function(e,g,f){this.rules.splice(this.findIndex(g),0,{value:e,priority:g,options:f})},addMany:function(e,m,l){for(var i=[this.findIndex(m),0],f=0,j=e.length;f<j;f++){i.push({value:e[f],priority:m,options:l})}this.rules.splice.apply(this.rules,i)},findIndex:function(e){for(var g=this.rules,f=g.length-1;0<=f&&e<g[f].priority;){f--}return f+1},exec:function(r,p){var o=p instanceof CKEDITOR.htmlParser.node||p instanceof CKEDITOR.htmlParser.fragment,j=Array.prototype.slice.call(arguments,1),i=this.rules,m=i.length,f,s,n,q;for(q=0;q<m;q++){if(o&&(f=p.type,s=p.name),n=i[q],!(r.nonEditable&&!n.options.applyToAll||r.nestedEditable&&n.options.excludeNestedEditable)){n=n.value.apply(null,j);if(!1===n||o&&n&&(n.name!=s||n.type!=f)){return n}null!=n&&(j[0]=p=n)}}return p},execOnName:function(e,m){for(var l=0,i=this.rules,f=i.length,j;m&&l<f;l++){j=i[l],e.nonEditable&&!j.options.applyToAll||e.nestedEditable&&j.options.excludeNestedEditable||(m=m.replace(j.value[0],j.value[1]))}return m}}})();(function(){function ar(m,l){function k(d){return d||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function f(e,g){return function(v){if(v.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var u=[],w=aq(v),d,r;if(w){for(b(w,1)&&u.push(w);w;){ak(w)&&(d=ap(w))&&b(d)&&((r=ap(d))&&!ak(r)?u.push(d):(k(h).insertAfter(d),d.remove())),w=w.previous}}for(w=0;w<u.length;w++){u[w].remove()}if(u=!e||!1!==("function"==typeof g?g(v):g)){h||CKEDITOR.env.needsBrFiller||v.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?h||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||v.name in CKEDITOR.dtd.tr||v.name in CKEDITOR.dtd.$listItem)?(u=aq(v),u=!u||"form"==v.name&&"input"==u.name):u=!1:u=!1}u&&v.add(k(e))}}}function b(e,d){if((!h||CKEDITOR.env.needsBrFiller)&&e.type==CKEDITOR.NODE_ELEMENT&&"br"==e.name&&!e.attributes["data-cke-eol"]){return !0}var g;return e.type==CKEDITOR.NODE_TEXT&&(g=e.value.match(D))&&(g.index&&((new CKEDITOR.htmlParser.text(e.value.substring(0,g.index))).insertBefore(e),e.value=g[0]),!CKEDITOR.env.needsBrFiller&&h&&(!d||e.parent.name in n)||!h&&((g=e.previous)&&"br"==g.name||!g||ak(g)))?!0:!1}var t={elements:{}},h="html"==l,n=CKEDITOR.tools.extend({},ah),c;for(c in n){"#" in V[c]||delete n[c]}for(c in n){t.elements[c]=f(h,m.config.fillEmptyBlocks)}t.root=f(h,!1);t.elements.br=function(d){return function(e){if(e.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var p=e.attributes;if("data-cke-bogus" in p||"data-cke-eol" in p){delete p["data-cke-bogus"]}else{for(p=e.next;p&&am(p);){p=p.next}var g=ap(e);!p&&ak(e.parent)?aj(e.parent,k(d)):ak(p)&&g&&!ak(g)&&k(d).insertBefore(p)}}}}(h);return t}function ao(d,c){return d!=CKEDITOR.ENTER_BR&&!1!==c?d==CKEDITOR.ENTER_DIV?"div":"p":!1}function aq(b){for(b=b.children[b.children.length-1];b&&am(b);){b=b.previous}return b}function ap(b){for(b=b.previous;b&&am(b);){b=b.previous}return b}function am(b){return b.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(b.value)||b.type==CKEDITOR.NODE_ELEMENT&&b.attributes["data-cke-bookmark"]}function ak(b){return b&&(b.type==CKEDITOR.NODE_ELEMENT&&b.name in ah||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function aj(e,d){var f=e.children[e.children.length-1];e.children.push(d);d.parent=e;f&&(f.next=d,d.previous=f)}function al(b){b=b.attributes;"false"!=b.contenteditable&&(b["data-cke-editable"]=b.contenteditable?"true":1);b.contenteditable="false"}function ai(b){b=b.attributes;switch(b["data-cke-editable"]){case"true":b.contenteditable="true";break;case"1":delete b.contenteditable}}function X(b){return b.replace(ac,function(e,d,f){return"\x3c"+d+f.replace(ab,function(g,c){return Y.test(c)&&-1==f.indexOf("data-cke-saved-"+c)?" data-cke-saved-"+g+" data-cke-"+CKEDITOR.rnd+"-"+g:g})+"\x3e"})}function an(d,c){return d.replace(c,function(f,e,g){0===f.indexOf("\x3ctextarea")&&(f=e+J(g).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")+"\x3c/textarea\x3e");return"\x3ccke:encoded\x3e"+encodeURIComponent(f)+"\x3c/cke:encoded\x3e"})}function R(b){return b.replace(j,function(d,c){return decodeURIComponent(c)})}function aa(b){return b.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(c){return"\x3c!--"+P+"{C}"+encodeURIComponent(c).replace(/--/g,"%2D%2D")+"--\x3e"})}function J(b){return b.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(d,c){return decodeURIComponent(c)})}function W(e,d){var f=d._.dataStore;return e.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(g,c){return decodeURIComponent(c)}).replace(/\{cke_protected_(\d+)\}/g,function(g,c){return f&&f[c]||""})}function Z(h,g){var r=[],n=g.config.protectedSource,m=g._.dataStore||(g._.dataStore={id:1}),k=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,n=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(n);h=h.replace(/\x3c!--[\s\S]*?--\x3e/g,function(b){return"\x3c!--{cke_tempcomment}"+(r.push(b)-1)+"--\x3e"});for(var l=0;l<n.length;l++){h=h.replace(n[l],function(b){b=b.replace(k,function(e,c,f){return r[f]});return/cke_temp(comment)?/.test(b)?b:"\x3c!--{cke_temp}"+(r.push(b)-1)+"--\x3e"})}h=h.replace(k,function(e,c,f){return"\x3c!--"+P+(c?"{C}":"")+encodeURIComponent(r[f]).replace(/--/g,"%2D%2D")+"--\x3e"});h=h.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(b){return b.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(d,c){m[m.id]=decodeURIComponent(c);return"{cke_protected_"+m.id+++"}"})});return h=h.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(b,t,p,f){return"\x3c"+t+p+"\x3e"+W(J(f),g)+"\x3c/"+t+"\x3e"})}var ag;CKEDITOR.htmlDataProcessor=function(e){var h,g,d=this;this.editor=e;this.dataFilter=h=new CKEDITOR.htmlParser.filter;this.htmlFilter=g=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;h.addRules(ad);h.addRules(E,{applyToAll:!0});h.addRules(ar(e,"data"),{applyToAll:!0});g.addRules(af);g.addRules(s,{applyToAll:!0});g.addRules(ar(e,"html"),{applyToAll:!0});e.on("toHtml",function(k){k=k.data;var n=k.dataValue,l,n=ag(n),n=Z(n,e),n=an(n,i),n=X(n),n=an(n,U),n=n.replace(ae,"$1cke:$2"),n=n.replace(o,"\x3ccke:$1$2\x3e\x3c/cke:$1\x3e"),n=n.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),n=n.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");l=k.context||e.editable().getName();var b;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==l&&(l="div",n="\x3cpre\x3e"+n+"\x3c/pre\x3e",b=1);l=e.document.createElement(l);l.setHtml("a"+n);n=l.getHtml().substr(1);n=n.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");b&&(n=n.replace(/^<pre>|<\/pre>$/gi,""));n=n.replace(q,"$1$2");n=R(n);n=J(n);l=!1===k.fixForBody?!1:ao(k.enterMode,e.config.autoParagraph);n=CKEDITOR.htmlParser.fragment.fromHtml(n,k.context,l);l&&(b=n,!b.children.length&&CKEDITOR.dtd[b.name][l]&&(l=new CKEDITOR.htmlParser.element(l),b.add(l)));k.dataValue=n},null,null,5);e.on("toHtml",function(b){b.data.filter.applyTo(b.data.dataValue,!0,b.data.dontFilter,b.data.enterMode)&&e.fire("dataFiltered")},null,null,6);e.on("toHtml",function(b){b.data.dataValue.filterChildren(d.dataFilter,!0)},null,null,10);e.on("toHtml",function(k){k=k.data;var f=k.dataValue,l=new CKEDITOR.htmlParser.basicWriter;f.writeChildrenHtml(l);f=l.getHtml(!0);k.dataValue=aa(f)},null,null,15);e.on("toDataFormat",function(b){var f=b.data.dataValue;b.data.enterMode!=CKEDITOR.ENTER_BR&&(f=f.replace(/^<br *\/?>/i,""));b.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(f,b.data.context,ao(b.data.enterMode,e.config.autoParagraph))},null,null,5);e.on("toDataFormat",function(b){b.data.dataValue.filterChildren(d.htmlFilter,!0)},null,null,10);e.on("toDataFormat",function(b){b.data.filter.applyTo(b.data.dataValue,!1,!0)},null,null,11);e.on("toDataFormat",function(b){var k=b.data.dataValue,f=d.writer;f.reset();k.writeChildrenHtml(f);k=f.getHtml(!0);k=J(k);k=W(k,e);b.data.dataValue=k},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(w,v,u,t){var r=this.editor,n,g,k,l;v&&"object"==typeof v?(n=v.context,u=v.fixForBody,t=v.dontFilter,g=v.filter,k=v.enterMode,l=v.protectedWhitespaces):n=v;n||null===n||(n=r.editable().getName());return r.fire("toHtml",{dataValue:w,context:n,fixForBody:u,dontFilter:t,filter:g||r.filter,enterMode:k||r.enterMode,protectedWhitespaces:l}).dataValue},toDataFormat:function(g,f){var l,k,h;f&&(l=f.context,k=f.filter,h=f.enterMode);l||null===l||(l=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:g,filter:k||this.editor.filter,context:l,enterMode:h||this.editor.enterMode}).dataValue}};var D=/(?:&nbsp;|\xa0)$/,P="{cke_protected}",V=CKEDITOR.dtd,Q="caption colgroup col thead tfoot tbody".split(" "),ah=CKEDITOR.tools.extend({},V.$blockLimit,V.$block),ad={elements:{input:al,textarea:al}},E={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(d){if(d.attributes&&d.attributes.src){var c=d.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");if(0===c.indexOf("javascript")||0===c.indexOf("data")){d.attributes["data-cke-pa-src"]=d.attributes.src,delete d.attributes.src}}}}},af={elements:{embed:function(e){var d=e.parent;if(d&&"object"==d.name){var f=d.attributes.width,d=d.attributes.height;f&&(e.attributes.width=f);d&&(e.attributes.height=d)}},a:function(d){var c=d.attributes;if(!(d.children.length||c.name||c.id||d.attributes["data-cke-saved-name"])){return !1}}}},s={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(g){var f=g.attributes;if(f){if(f["data-cke-temp"]){return !1}for(var l=["name","href","src"],k,h=0;h<l.length;h++){k="data-cke-saved-"+l[h],k in f&&delete f[l[h]]}}return g},table:function(b){b.children.slice(0).sort(function(f,e){var h,g;f.type==CKEDITOR.NODE_ELEMENT&&e.type==f.type&&(h=CKEDITOR.tools.indexOf(Q,f.name),g=CKEDITOR.tools.indexOf(Q,e.name));-1<h&&-1<g&&h!=g||(h=f.parent?f.getIndex():-1,g=e.parent?e.getIndex():-1);return h>g?1:-1})},param:function(b){b.children=[];b.isEmpty=!0;return b},span:function(b){"Apple-style-span"==b.attributes["class"]&&delete b.name},html:function(b){delete b.attributes.contenteditable;delete b.attributes["class"]},body:function(b){delete b.attributes.spellcheck;delete b.attributes.contenteditable},style:function(d){var c=d.children[0];c&&c.value&&(c.value=CKEDITOR.tools.trim(c.value));d.attributes.type||(d.attributes.type="text/css")},title:function(d){var c=d.children[0];!c&&aj(d,c=new CKEDITOR.htmlParser.text);c.value=d.attributes["data-cke-title"]||""},input:ai,textarea:ai},attributes:{"class":function(b){return CKEDITOR.tools.ltrim(b.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(s.attributes.style=function(b){return b.replace(/(^|;)([^\:]+)/g,function(c){return c.toLowerCase()})});var ac=/<(a|area|img|input|source)\b([^>]*)>/gi,ab=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,Y=/^(href|src|name)$/i,U=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,i=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,j=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,ae=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,q=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,o=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;ag=function(){function f(b){return CKEDITOR.tools.array.reduce(b.split(""),function(k,p){var n=p.toLowerCase(),m=p.toUpperCase(),l=e(n);n!==m&&(l+="|"+e(m));return k+("("+l+")")},"")}function e(b){var m;m=b.charCodeAt(0);var l=m.toString(16);m={htmlCode:"\x26#"+m+";?",hex:"\x26#x0*"+l+";?",entity:{"\x3c":"\x26lt;","\x3e":"\x26gt;",":":"\x26colon;"}[b]};for(var k in m){m[k]&&(b+="|"+m[k])}return b}var h=new RegExp("("+f("\x3ccke:encoded\x3e")+"(.*?)"+f("\x3c/cke:encoded\x3e")+")|("+f("\x3c")+f("/")+"?"+f("cke:encoded\x3e")+")","gi"),g=new RegExp("(("+f("{cke_protected")+")(_[0-9]*)?"+f("}")+")","gi");return function(b){return b.replace(h,"").replace(g,"")}}()})();"use strict";CKEDITOR.htmlParser.element=function(f,g){this.name=f;this.attributes=g||{};this.children=[];var e=f||"",h=e.match(/^cke:(.*)/);h&&(e=h[1]);e=!!(CKEDITOR.dtd.$nonBodyContent[e]||CKEDITOR.dtd.$block[e]||CKEDITOR.dtd.$listItem[e]||CKEDITOR.dtd.$tableContent[e]||CKEDITOR.dtd.$nonEditable[e]||"br"==e);this.isEmpty=!!CKEDITOR.dtd.$empty[f];this.isUnknown=!CKEDITOR.dtd[f];this._={isBlockLike:e,hasInlineStarted:this.isEmpty||!e}};CKEDITOR.htmlParser.cssStyle=function(b){var c={};((b instanceof CKEDITOR.htmlParser.element?b.attributes.style:b)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(d,g,e){"font-family"==g&&(e=e.replace(/["']/g,""));c[g.toLowerCase()]=e});return{rules:c,populate:function(d){var e=this.toString();e&&(d instanceof CKEDITOR.dom.element?d.setAttribute("style",e):d instanceof CKEDITOR.htmlParser.element?d.attributes.style=e:d.style=e)},toString:function(){var d=[],e;for(e in c){c[e]&&d.push(e,":",c[e],";")}return d.join("")}}};(function(){function e(b){return function(d){return d.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof b?d.name==b:d.name in b)}}var f=function(g,d){g=g[0];d=d[0];return g<d?-1:g>d?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(j,h){var p=this,n,o;h=p.getFilterContext(h);if(!p.parent){j.onRoot(h,p)}for(;;){n=p.name;if(!(o=j.onElementName(h,n))){return this.remove(),!1}p.name=o;if(!(p=j.onElement(h,p))){return this.remove(),!1}if(p!==this){return this.replaceWith(p),!1}if(p.name==n){break}if(p.type!=CKEDITOR.NODE_ELEMENT){return this.replaceWith(p),!1}if(!p.name){return this.replaceWithChildren(),!1}}n=p.attributes;var i,m;for(i in n){for(o=n[i];;){if(m=j.onAttributeName(h,i)){if(m!=i){delete n[i],i=m}else{break}}else{delete n[i];break}}m&&(!1===(o=j.onAttribute(h,p,m,o))?delete n[m]:n[m]=o)}p.isEmpty||this.filterChildren(j,!1,h);return !0},filterChildren:c.filterChildren,writeHtml:function(j,d){d&&this.filter(d);var o=this.name,n=[],p=this.attributes,i,m;j.openTag(o,p);for(i in p){n.push([i,p[i]])}j.sortAttributes&&n.sort(f);i=0;for(m=n.length;i<m;i++){p=n[i],j.attribute(p[0],p[1])}j.openTagClose(o,this.isEmpty);this.writeChildrenHtml(j);this.isEmpty||j.closeTag(o)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var g=this.children,d=g.length;d;){g[--d].insertAfter(this)}this.remove()},forEach:c.forEach,getFirst:function(g){if(!g){return this.children.length?this.children[0]:null}"function"!=typeof g&&(g=e(g));for(var j=0,i=this.children.length;j<i;++j){if(g(this.children[j])){return this.children[j]}}return null},getHtml:function(){var b=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(b);return b.getHtml()},setHtml:function(h){h=this.children=CKEDITOR.htmlParser.fragment.fromHtml(h).children;for(var g=0,i=h.length;g<i;++g){h[g].parent=this}},getOuterHtml:function(){var b=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(b);return b.getHtml()},split:function(h){for(var g=this.children.splice(h,this.children.length-h),j=this.clone(),i=0;i<g.length;++i){g[i].parent=j}j.children=g;g[0]&&(g[0].previous=null);0<h&&(this.children[h-1].next=null);this.parent.add(j,this.getIndex()+1);return j},find:function(i,h){void 0===h&&(h=!1);var m=[],j;for(j=0;j<this.children.length;j++){var l=this.children[j];"function"==typeof i&&i(l)?m.push(l):"string"==typeof i&&l.name===i&&m.push(l);h&&l.find&&(m=m.concat(l.find(i,h)))}return m},findOne:function(h,g){var j=null,i=CKEDITOR.tools.array.find(this.children,function(d){var b="function"===typeof h?h(d):d.name===h;if(b||!g){return b}d.children&&d.findOne&&(j=d.findOne(h,!0));return !!j});return j||i||null},addClass:function(g){if(!this.hasClass(g)){var d=this.attributes["class"]||"";this.attributes["class"]=d+(d?" ":"")+g}},removeClass:function(g){var d=this.attributes["class"];d&&((d=CKEDITOR.tools.trim(d.replace(new RegExp("(?:\\s+|^)"+g+"(?:\\s+|$)")," ")))?this.attributes["class"]=d:delete this.attributes["class"])},hasClass:function(g){var d=this.attributes["class"];return d?(new RegExp("(?:^|\\s)"+g+"(?\x3d\\s|$)")).test(d):!1},getFilterContext:function(h){var g=[];h||(h={nonEditable:!1,nestedEditable:!1});h.nonEditable||"false"!=this.attributes.contenteditable?h.nonEditable&&!h.nestedEditable&&"true"==this.attributes.contenteditable&&g.push("nestedEditable",!0):g.push("nonEditable",!0);if(g.length){h=CKEDITOR.tools.copy(h);for(var i=0;i<g.length;i+=2){h[g[i]]=g[i+1]}}return h}},!0)})();(function(){var b=/{([^}]+)}/g;CKEDITOR.template=function(c){this.source="function"===typeof c?c:String(c)};CKEDITOR.template.prototype.output=function(f,e){var g=("function"===typeof this.source?this.source(f):this.source).replace(b,function(d,c){return void 0!==f[c]?f[c]:d});return e?e.push(g):g}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(b){function c(){CKEDITOR.currentInstance==b&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[b.name]=b;b.on("focus",function(){CKEDITOR.currentInstance!=b&&(CKEDITOR.currentInstance=b,CKEDITOR.fire("currentInstance"))});b.on("blur",c);b.on("destroy",c);CKEDITOR.fire("instance",null,b)};CKEDITOR.remove=function(b){delete CKEDITOR.instances[b.name]};(function(){var b={};CKEDITOR.addTemplate=function(f,e){var g=b[f];if(g){return g}g={name:f,source:e};CKEDITOR.fire("template",g);return b[f]=new CKEDITOR.template(g.source)};CKEDITOR.getTemplate=function(c){return b[c]}})();(function(){var b=[];CKEDITOR.addCss=function(c){b.push(c)};CKEDITOR.getCss=function(){return b.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;(function(){CKEDITOR.inline=function(f,g){f=CKEDITOR.editor._getEditorElement(f);if(!f){return null}var e=new CKEDITOR.editor(g,f,CKEDITOR.ELEMENT_MODE_INLINE),h=f.is("textarea")?f:null;h?(e.setData(h.getValue(),null,!0),f=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!e.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+h.getValue()+"\x3c/div\x3e",CKEDITOR.document),f.insertAfter(h),h.hide(),h.$.form&&e._attachToForm()):e.setData(f.getHtml(),null,!0);e.on("loaded",function(){e.fire("uiReady");e.editable(f);e.container=f;e.ui.contentsElement=f;e.setData(e.getData(1));e.resetDirty();e.fire("contentDom");e.mode="wysiwyg";e.fire("mode");e.status="ready";e.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,e)},null,null,10000);e.on("destroy",function(){var b=e.container;h&&b&&(b.clearCustomData(),b.remove());h&&h.show();e.element.clearCustomData();delete e.element});return e};CKEDITOR.inlineAll=function(){var g,k,e;for(e in CKEDITOR.dtd.$editable){for(var l=CKEDITOR.document.getElementsByTag(e),j=0,i=l.count();j<i;j++){g=l.getItem(j),"true"==g.getAttribute("contenteditable")&&(k={element:g,config:{}},!1!==CKEDITOR.fire("inline",k)&&CKEDITOR.inline(g,k.config))}}};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";(function(){function e(b,l,i,d){b=CKEDITOR.editor._getEditorElement(b);if(!b){return null}var j=new CKEDITOR.editor(l,b,d);d==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.setStyle("visibility","hidden"),j._.required=b.hasAttribute("required"),b.removeAttribute("required"));i&&j.setData(i,null,!0);j.on("loaded",function(){j.isDestroyed()||j.isDetached()||(c(j),d==CKEDITOR.ELEMENT_MODE_REPLACE&&j.config.autoUpdateElement&&b.$.form&&j._attachToForm(),j.setMode(j.config.startupMode,function(){j.resetDirty();j.status="ready";j.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,j)}))});j.on("destroy",f);return j}function f(){var g=this.container,d=this.element;g&&(g.clearCustomData(),g.remove());d&&(d.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(d.show(),this._.required&&d.setAttribute("required","required")),delete this.element)}function c(j){var h=j.name,p=j.element,n=j.elementMode,o=j.fire("uiSpace",{space:"top",html:""}).html,i=j.fire("uiSpace",{space:"bottom",html:""}).html,m=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(j.title?' aria-labelledby\x3d"cke_{name}_arialbl"':"")+"\x3e"+(j.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':"")+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),h=CKEDITOR.dom.element.createFromHtml(m.output({id:j.id,name:h,langDir:j.lang.dir,langCode:j.langCode,voiceLabel:j.title,topHtml:o?'\x3cspan id\x3d"'+j.ui.spaceId("top")+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+o+"\x3c/span\x3e":"",contentId:j.ui.spaceId("contents"),bottomHtml:i?'\x3cspan id\x3d"'+j.ui.spaceId("bottom")+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+i+"\x3c/span\x3e":"",outerEl:CKEDITOR.env.ie?"span":"div"}));n==CKEDITOR.ELEMENT_MODE_REPLACE?(p.hide(),h.insertAfter(p)):p.append(h);j.container=h;j.ui.contentsElement=j.ui.space("contents");o&&j.ui.space("top").unselectable();i&&j.ui.space("bottom").unselectable();p=j.config.width;n=j.config.height;p&&h.setStyle("width",CKEDITOR.tools.cssLength(p));n&&j.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(n));h.disableContextMenu();CKEDITOR.env.webkit&&h.on("focus",function(){j.focus()});j.fireOnce("uiReady")}CKEDITOR.replace=function(g,h){return e(g,h,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(g,j,i){return e(g,j,i,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var h=document.getElementsByTagName("textarea"),g=0;g<h.length;g++){var j=null,i=h[g];if(i.name||i.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)")).test(i.className)){continue}}else{if("function"==typeof arguments[0]&&(j={},!1===arguments[0](i,j))){continue}}this.replace(i,j)}}};CKEDITOR.editor.prototype.addMode=function(g,d){(this._.modes||(this._.modes={}))[g]=d};CKEDITOR.editor.prototype.setMode=function(j,h){var p=this,n=this._.modes;if(j!=p.mode&&n&&n[j]){p.fire("beforeSetMode",j);if(p.mode){var o=p.checkDirty(),n=p._.previousModeData,i,m=0;p.fire("beforeModeUnload");p.editable(0);p._.previousMode=p.mode;p._.previousModeData=i=p.getData(1);"source"==p.mode&&n==i&&(p.fire("lockSnapshot",{forceUpdate:!0}),m=1);p.ui.space("contents").setHtml("");p.mode=""}else{p._.previousModeData=p.getData(1)}this._.modes[j](function(){p.mode=j;void 0!==o&&!o&&p.resetDirty();m?p.fire("unlockSnapshot"):"wysiwyg"==j&&p.fire("saveSnapshot");setTimeout(function(){p.isDestroyed()||p.isDetached()||(p.fire("mode"),h&&h.call(p))},0)})}};CKEDITOR.editor.prototype.resize=function(j,h,q,n){var o=this.container,i=this.ui.space("contents"),m=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;n=n?this.container.getFirst(function(b){return b.type==CKEDITOR.NODE_ELEMENT&&b.hasClass("cke_inner")}):o;n.setSize("width",j,!0);m&&(m.style.width="1%");var p=(n.$.offsetHeight||0)-(i.$.clientHeight||0),o=Math.max(h-(q?0:p),0);h=q?h+p:h;i.setStyle("height",o+"px");m&&(m.style.width="100%");this.fire("resize",{outerHeight:h,contentsHeight:o,outerWidth:j||n.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(b){return b?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";(function(){function P(d){var c=d.editor,u=d.data.path,t=u.blockLimit,n=d.data.selection,l=n.getRanges()[0],k;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller){if(n=M(n,u)){n.appendBogus(),k=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.edge&&c._.previousActive}}D(c,u.block,t)&&l.collapsed&&!l.getCommonAncestor().isReadOnly()&&(u=l.clone(),u.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),t=new CKEDITOR.dom.walker(u),t.guard=function(b){return !N(b)||b.type==CKEDITOR.NODE_COMMENT||b.isReadOnly()},!t.checkForward()||u.checkStartOfBlock()&&u.checkEndOfBlock())&&(c=l.fixBlock(!0,c.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(c=c.getFirst(N))&&c.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(c.getText()).match(/^(?:&nbsp;|\xa0)$/)&&c.remove(),k=1,d.cancel());k&&l.select()}function M(f,c){if(f.isFake){return 0}var h=c.block||c.blockLimit,g=h&&h.getLast(N);if(!(!h||!h.isBlockBoundary()||g&&g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary()||h.is("pre")||h.getBogus())){return h}}function O(d){var c=d.data.getTarget();c.is("input")&&(c=c.getAttribute("type"),"submit"!=c&&"reset"!=c||d.data.preventDefault())}function N(b){return p(b)&&A(b)}function J(d,c){return function(e){var b=e.data.$.toElement||e.data.$.fromElement||e.data.$.relatedTarget;(b=b&&b.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(b):null)&&(c.equals(b)||c.contains(b))||d.call(this,e)}}function E(g){function c(b){return function(d,f){f&&d.type==CKEDITOR.NODE_ELEMENT&&d.is(k)&&(n=d);if(!(f||!N(d)||b&&r(d))){return !1}}}var n,l=g.getRanges()[0];g=g.root;var k={table:1,ul:1,ol:1,dl:1};if(l.startPath().contains(k)){var h=l.clone();h.collapse(1);h.setStartAt(g,CKEDITOR.POSITION_AFTER_START);g=new CKEDITOR.dom.walker(h);g.guard=c();g.checkBackward();if(n){return h=l.clone(),h.collapse(),h.setEndAt(n,CKEDITOR.POSITION_AFTER_END),g=new CKEDITOR.dom.walker(h),g.guard=c(!0),n=!1,g.checkForward(),n}}return null}function D(e,d,f){return !1!==e.config.autoParagraph&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&(e.editable().equals(f)&&!d||d&&"true"==d.getAttribute("contenteditable"))}function F(b){return b.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==b.config.autoParagraph?b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function C(b){b&&b.isEmptyInlineRemoveable()&&b.remove()}function s(d){var c=d.editor;c.getSelection().scrollIntoView();setTimeout(function(){c.fire("saveSnapshot")},0)}function K(f,e,h){var g=f.getCommonAncestor(e);for(e=f=h?e:f;(f=f.getParent())&&!g.equals(f)&&1==f.getChildCount();){e=f}e.remove()}var p,A,j,r,w,B,i,m,q,o;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(d,c){this.base(c.$||c);this.editor=d;this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e))){e.focus();return}CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document)){if(CKEDITOR.env.chrome){var d=this.$.scrollTop;this.$.focus();this.$.scrollTop=d}else{this.$.focus()}}else{this.$.setActive()}}catch(f){if(!CKEDITOR.env.ie){throw f}}CKEDITOR.env.safari&&!this.isInline()&&(e=CKEDITOR.document.getActive(),e.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(e,d){var f=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",d=J(d,this),f[0]=e,f[1]=d);return CKEDITOR.dom.element.prototype.on.apply(this,f)},attachListener:function(d){!this._.listeners&&(this._.listeners=[]);var c=Array.prototype.slice.call(arguments,1),c=d.on.apply(d,c);this._.listeners.push(c);return c},clearListeners:function(){var d=this._.listeners;try{for(;d.length;){d.pop().removeListener()}}catch(c){}},restoreAttrs:function(){var e=this._.attrChanges,d,f;for(f in e){e.hasOwnProperty(f)&&(d=e[f],null!==d?this.setAttribute(f,d):this.removeAttribute(f))}},attachClass:function(d){var c=this.getCustomData("classes");this.hasClass(d)||(!c&&(c=[]),c.push(d),this.setCustomData("classes",c),this.addClass(d))},changeAttr:function(e,d){var f=this.getAttribute(e);d!==f&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=f),this.setAttribute(e,d))},insertText:function(b){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(b),"text")},transformPlainTextToHtml:function(d){var c=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(d,c)},insertHtml:function(f,e,h){var g=this.editor;g.focus();g.fire("saveSnapshot");h||(h=g.getSelection().getRanges()[0]);B(this,e||"html",f,h);h.select();s(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(e,d,f){B(this,f||"html",e,d);this.editor.fire("afterInsertHtml",{intoRange:d})},insertElement:function(g,c){var l=this.editor;l.focus();l.fire("saveSnapshot");var k=l.activeEnterMode,l=l.getSelection(),h=g.getName(),h=CKEDITOR.dtd.$block[h];c||(c=l.getRanges()[0]);this.insertElementIntoRange(g,c)&&(c.moveToPosition(g,CKEDITOR.POSITION_AFTER_END),h&&((h=g.getNext(function(b){return N(b)&&!r(b)}))&&h.type==CKEDITOR.NODE_ELEMENT&&h.is(CKEDITOR.dtd.$block)?h.getDtd()["#"]?c.moveToElementEditStart(h):c.moveToElementEditEnd(g):h||k==CKEDITOR.ENTER_BR||(h=c.fixBlock(!0,k==CKEDITOR.ENTER_DIV?"div":"p"),c.moveToElementEditStart(h))));l.selectRanges([c]);s(this)},insertElementIntoSelection:function(b){this.insertElement(b)},insertElementIntoRange:function(y,x){var v=this.editor,u=v.config.enterMode,t=y.getName(),n=CKEDITOR.dtd.$block[t];if(x.checkReadOnly()){return !1}x.deleteContents(1);x.startContainer.type==CKEDITOR.NODE_ELEMENT&&(x.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?i(x):x.startContainer.is(CKEDITOR.dtd.$list)&&m(x));var l,z;if(n){for(;(l=x.getCommonAncestor(0,1))&&(z=CKEDITOR.dtd[l.getName()])&&(!z||!z[t]);){if(l.getName() in CKEDITOR.dtd.span){var n=x.splitElement(l),k=x.createBookmark();C(l);C(n);x.moveToBookmark(k)}else{x.checkStartOfBlock()&&x.checkEndOfBlock()?(x.setStartBefore(l),x.collapse(!0),l.remove()):x.splitBlock(u==CKEDITOR.ENTER_DIV?"div":"p",v.editable())}}}x.insertNode(y);return !0},setData:function(d,c){c||(d=this.editor.dataProcessor.toHtml(d));this.setHtml(d);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(d){var c=this.getHtml();d||(c=this.editor.dataProcessor.toDataFormat(c));return c},setReadOnly:function(b){this.setAttribute("contenteditable",!b)},detach:function(){this.status="detached";this.editor.setData(this.editor.getData(),{internal:!0});this.clearListeners();try{this._.cleanCustomData()}catch(b){if(!CKEDITOR.env.ie||-2146828218!==b.number){throw b}}this.editor.fire("contentDomUnload");delete this.editor.document;delete this.editor.window;delete this.editor},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function e(){var c=f.getDocument().$,h=c.getSelection(),g;e:if(h.anchorNode&&h.anchorNode==f.$){g=!0}else{if(CKEDITOR.env.webkit&&(g=f.getDocument().getActive())&&g.equals(f)&&!h.anchorNode){g=!0;break e}g=void 0}g&&(g=new CKEDITOR.dom.range(f),g.moveToElementEditStart(f),c=c.createRange(),c.setStart(g.startContainer.$,g.startOffset),c.collapse(!0),h.removeAllRanges(),h.addRange(c))}function d(){var b=f.getDocument().$,g=b.selection,c=f.getDocument().getActive();"None"==g.type&&c.equals(f)&&(g=new CKEDITOR.dom.range(f),b=b.body.createTextRange(),g.moveToElementEditStart(f),g=g.startContainer,g.type!=CKEDITOR.NODE_ELEMENT&&(g=g.getParent()),b.moveToElementText(g.$),b.collapse(!0),b.select())}var f=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)){this.hasFocus&&(this.focus(),d())}else{if(this.hasFocus){this.focus(),e()}else{this.once("focus",function(){e()},null,null,-999)}}},getHtmlFromRange:function(b){if(b.collapsed){return new CKEDITOR.dom.documentFragment(b.document)}b={doc:this.getDocument(),range:b.clone()};q.eol.detect(b,this);q.bogus.exclude(b);q.cell.shrink(b);b.fragment=b.range.cloneContents();q.tree.rebuild(b,this);q.eol.fix(b,this);return new CKEDITOR.dom.documentFragment(b.fragment.$)},extractHtmlFromRange:function(k,h){var v=o,u={range:k,doc:k.document},t=this.getHtmlFromRange(k);if(k.collapsed){return k.optimize(),t}k.enlarge(CKEDITOR.ENLARGE_INLINE,1);v.table.detectPurge(u);u.bookmark=k.createBookmark();delete u.range;var n=this.editor.createRange();n.moveToPosition(u.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);u.targetBookmark=n.createBookmark();v.list.detectMerge(u,this);v.table.detectRanges(u,this);v.block.detectMerge(u,this);u.tableContentsRanges?(v.table.deleteRanges(u),k.moveToBookmark(u.bookmark),u.range=k):(k.moveToBookmark(u.bookmark),u.range=k,k.extractContents(v.detectExtractMerge(u)));k.moveToBookmark(u.targetBookmark);k.optimize();v.fixUneditableRangePosition(k);v.list.merge(u,this);v.table.purge(u,this);v.block.merge(u,this);if(h){v=k.startPath();if(u=k.checkStartOfBlock()&&k.checkEndOfBlock()&&v.block&&!k.root.equals(v.block)){k:{var u=v.block.getElementsByTag("span"),n=0,l;if(u){for(;l=u.getItem(n++);){if(!A(l)){u=!0;break k}}}u=!1}u=!u}u&&(k.moveToPosition(v.block,CKEDITOR.POSITION_BEFORE_START),v.block.remove())}else{v.autoParagraph(this.editor,k),j(k.startContainer)&&k.startContainer.appendBogus()}k.startContainer.mergeSiblings();return t},setup:function(){var b=this.editor;this.attachListener(b,"beforeGetData",function(){var d=this.getData();this.is("textarea")||!1!==b.config.ignoreEmptyParagraph&&(d=d.replace(w,function(g,f){return f}));b.setData(d,null,1)},this);this.attachListener(b,"getSnapshot",function(d){d.data=this.getData(1)},this);this.attachListener(b,"afterSetData",function(){this.setData(b.getData(1))},this);this.attachListener(b,"loadSnapshot",function(d){this.setData(d.data,1)},this);this.attachListener(b,"beforeFocus",function(){var d=b.getSelection();(d=d&&d.getNative())&&"Control"==d.type||this.focus()},this);this.attachListener(b,"insertHtml",function(d){this.insertHtml(d.data.dataValue,d.data.mode,d.data.range)},this);this.attachListener(b,"insertElement",function(d){this.insertElement(d.data)},this);this.attachListener(b,"insertText",function(d){this.insertText(d.data)},this);this.setReadOnly(b.readOnly);this.attachClass("cke_editable");b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):b.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&b.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+b.config.contentsLangDirection);b.keystrokeHandler.blockedKeystrokes[8]=+b.readOnly;b.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);if(CKEDITOR.env.webkit){this.on("scroll",function(){b._.previousScrollTop=b.editable().$.scrollTop},null,null,-1)}if(CKEDITOR.env.edge&&14<CKEDITOR.env.version){var t=function(){var d=b.editable();null!=b._.previousScrollTop&&d.getDocument().equals(CKEDITOR.document)&&(d.$.scrollTop=b._.previousScrollTop,b._.previousScrollTop=null,this.removeListener("scroll",t))};this.on("scroll",t)}b.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,b.once("contentDom",function(){b.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",b.tabIndex);if(!this.is("textarea")){b.document=this.getDocument();b.window=this.getWindow();var l=b.document;this.changeAttr("spellcheck",!b.config.disableNativeSpellChecker);var h=b.config.contentsLangDirection;this.getDirection(1)!=h&&this.changeAttr("dir",h);var c=CKEDITOR.getCss();if(c){var h=l.getHead(),e=h.getCustomData("stylesheet");e?c!=e.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?e.$.styleSheet.cssText=c:e.setText(c)):(c=l.appendStyleText(c),c=new CKEDITOR.dom.element(c.ownerNode||c.owningElement),h.setCustomData("stylesheet",c),c.data("cke-temp",1))}h=l.getCustomData("stylesheet_ref")||0;l.setCustomData("stylesheet_ref",h+1);this.setCustomData("cke_includeReadonly",!b.config.disableReadonlyStyling);this.attachListener(this,"click",function(f){f=f.data;var d=(new CKEDITOR.dom.elementPath(f.getTarget(),this)).contains("a");d&&2!=f.$.button&&d.isReadOnly()&&f.preventDefault()});var n={8:1,46:1};this.attachListener(b,"key",function(L){if(b.readOnly){return !0}var I=L.data.domEvent.getKey(),H;L=b.getSelection();if(0!==L.getRanges().length){if(I in n){var G,z=L.getRanges()[0],u=z.startPath(),y,v,x,I=8==I;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(G=L.getSelectedElement())||(G=E(L))?(b.fire("saveSnapshot"),z.moveToPosition(G,CKEDITOR.POSITION_BEFORE_START),G.remove(),z.select(),b.fire("saveSnapshot"),H=1):z.collapsed&&((y=u.block)&&(x=y[I?"getPrevious":"getNext"](p))&&x.type==CKEDITOR.NODE_ELEMENT&&x.is("table")&&z[I?"checkStartOfBlock":"checkEndOfBlock"]()?(b.fire("saveSnapshot"),z[I?"checkEndOfBlock":"checkStartOfBlock"]()&&y.remove(),z["moveToElementEdit"+(I?"End":"Start")](x),z.select(),b.fire("saveSnapshot"),H=1):u.blockLimit&&u.blockLimit.is("td")&&(v=u.blockLimit.getAscendant("table"))&&z.checkBoundaryOfElement(v,I?CKEDITOR.START:CKEDITOR.END)&&(x=v[I?"getPrevious":"getNext"](p))?(b.fire("saveSnapshot"),z["moveToElementEdit"+(I?"End":"Start")](x),z.checkStartOfBlock()&&z.checkEndOfBlock()?x.remove():z.select(),b.fire("saveSnapshot"),H=1):(v=u.contains(["td","th","caption"]))&&z.checkBoundaryOfElement(v,I?CKEDITOR.START:CKEDITOR.END)&&(H=1))}return !H}});b.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(d){d.data.getKeystroke() in n&&!this.getFirst(N)&&(this.appendBogus(),d=b.createRange(),d.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),d.select())});this.attachListener(this,"dblclick",function(d){if(b.readOnly){return !1}d={element:d.data.getTarget()};b.fire("doubleclick",d)});CKEDITOR.env.ie&&this.attachListener(this,"click",O);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(d){var f=d.data.getTarget();f.is("img","hr","input","textarea","select")&&!f.isReadOnly()&&(b.getSelection().selectElement(f),f.is("input","textarea","select")&&d.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(d){(d=d.data.getTarget())&&d.is("img")&&!d.isReadOnly()&&b.getSelection().selectElement(d)});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(d){if(2==d.data.$.button&&(d=d.data.getTarget(),!d.getAscendant("table")&&!d.getOuterHtml().replace(w,""))){var f=b.createRange();f.moveToElementEditStart(d);f.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(d){d.data.getTarget().is("input","select")&&d.data.preventDefault()}),this.attachListener(this,"mouseup",function(d){d.data.getTarget().is("input","textarea")&&d.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(b,"key",function(g){if(b.readOnly){return !0}var y=g.data.domEvent.getKey();if(y in n&&(g=b.getSelection(),0!==g.getRanges().length)){var y=8==y,x=g.getRanges()[0];g=x.startPath();if(x.collapsed){b:{var u=g.block;if(u&&x[y?"checkStartOfBlock":"checkEndOfBlock"]()&&x.moveToClosestEditablePosition(u,!y)&&x.collapsed){if(x.startContainer.type==CKEDITOR.NODE_ELEMENT){var v=x.startContainer.getChild(x.startOffset-(y?1:0));if(v&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("hr")){b.fire("saveSnapshot");v.remove();g=!0;break b}}x=x.startPath().block;if(!x||x&&x.contains(u)){g=void 0}else{b.fire("saveSnapshot");var k;(k=(y?x:u).getBogus())&&k.remove();k=b.getSelection();v=k.createBookmarks();(y?u:x).moveChildren(y?x:u,!1);g.lastElement.mergeSiblings();K(u,x,!y);k.selectBookmarks(v);g=!0}}else{g=!1}}}else{y=x,k=g.block,x=y.endPath().block,k&&x&&!k.equals(x)?(b.fire("saveSnapshot"),(u=k.getBogus())&&u.remove(),y.enlarge(CKEDITOR.ENLARGE_INLINE),y.deleteContents(),x.getParent()&&(x.moveChildren(k,!1),g.lastElement.mergeSiblings(),K(k,x,!0)),y=b.getSelection().getRanges()[0],y.collapse(1),y.optimize(),""===y.startContainer.getHtml()&&y.startContainer.appendBogus(),y.select(),g=!0):g=!1}if(!g){return}b.getSelection().scrollIntoView();b.fire("saveSnapshot");return !1}},this,null,100)}},getUniqueId:function(){var d;try{this._.expandoNumber=d=CKEDITOR.dom.domObject.prototype.getUniqueId.call(this)}catch(c){d=this._&&this._.expandoNumber}return d}},_:{cleanCustomData:function(){this.removeClass("cke_editable");this.restoreAttrs();for(var e=this.removeCustomData("classes");e&&e.length;){this.removeClass(e.pop())}if(!this.is("textarea")){var e=this.getDocument(),d=e.getHead();if(d.getCustomData("stylesheet")){var f=e.getCustomData("stylesheet_ref");--f?e.setCustomData("stylesheet_ref",f):(e.removeCustomData("stylesheet_ref"),d.removeCustomData("stylesheet").remove())}}}}});CKEDITOR.editor.prototype.editable=function(d){var c=this._.editable;if(c&&d){return 0}if(!arguments.length){return c}d?c=d instanceof CKEDITOR.editable?d:new CKEDITOR.editable(this,d):(c&&c.detach(),c=null);return this._.editable=c};CKEDITOR.on("instanceLoaded",function(d){var e=d.editor;e.on("insertElement",function(b){b=b.data;b.type==CKEDITOR.NODE_ELEMENT&&(b.is("input")||b.is("textarea"))&&("false"!=b.getAttribute("contentEditable")&&b.data("cke-editable",b.hasAttribute("contenteditable")?"true":"1"),b.setAttribute("contentEditable",!1))});e.on("selectionChange",function(c){if(!e.readOnly){var f=e.getSelection();f&&!f.isLocked&&(f=e.checkDirty(),e.fire("lockSnapshot"),P(c),e.fire("unlockSnapshot"),!f&&e.resetDirty())}})});CKEDITOR.on("instanceCreated",function(d){var c=d.editor;c.on("mode",function(){var b=c.editable();if(b&&b.isInline()){var h=c.title;b.changeAttr("role","textbox");b.changeAttr("aria-multiline","true");b.changeAttr("aria-label",h);h&&b.changeAttr("title",h);var g=c.fire("ariaEditorHelpLabel",{}).label;if(g&&(h=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var f=CKEDITOR.tools.getNextId(),g=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+f+'" class\x3d"cke_voice_label"\x3e'+g+"\x3c/span\x3e");h.append(g);b.changeAttr("aria-describedby",f)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");p=CKEDITOR.dom.walker.whitespaces(!0);A=CKEDITOR.dom.walker.bookmark(!1,!0);j=CKEDITOR.dom.walker.empty();r=CKEDITOR.dom.walker.bogus();w=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi;B=function(){function y(d){return d.type==CKEDITOR.NODE_ELEMENT}function x(aa,Z){var Y,X,b,W,V=[],U=Z.range.startContainer;Y=Z.range.startPath();for(var U=H[U.getName()],I=0,ab=aa.getChildren(),R=ab.count(),Q=-1,L=-1,ac=0,S=Y.contains(H.$list);I<R;++I){Y=ab.getItem(I),y(Y)?(b=Y.getName(),S&&b in CKEDITOR.dtd.$list?V=V.concat(x(Y,Z)):(W=!!U[b],"br"!=b||!Y.data("cke-eol")||I&&I!=R-1||(ac=(X=I?V[I-1].node:ab.getItem(I+1))&&(!y(X)||!X.is("br")),X=X&&y(X)&&H.$block[X.getName()]),-1!=Q||W||(Q=I),W||(L=I),V.push({isElement:1,isLineBreak:ac,isBlock:Y.isBlockBoundary(),hasBlockSibling:X,node:Y,name:b,allowed:W}),X=ac=0)):V.push({isElement:0,node:Y,allowed:1})}-1<Q&&(V[Q].firstNotAllowed=1);-1<L&&(V[L].lastNotAllowed=1);return V}function u(T,S){var R=[],Q=T.getChildren(),d=Q.count(),L,I=0,v=H[S],n=!T.is(H.$inline)||T.is("br");for(n&&R.push(" ");I<d;I++){L=Q.getItem(I),y(L)&&!L.is(v)?R=R.concat(u(L,S)):R.push(L)}n&&R.push(" ");return R}function t(d){return y(d.startContainer)&&d.startContainer.getChild(d.startOffset-1)}function l(d){return d&&y(d)&&(d.is(H.$removeEmpty)||d.is("a")&&!d.isBlockBoundary())}function c(n,S,R,Q){var L=n.clone(),I,v;L.setEndAt(S,CKEDITOR.POSITION_BEFORE_END);(I=(new CKEDITOR.dom.walker(L)).next())&&y(I)&&z[I.getName()]&&(v=I.getPrevious())&&y(v)&&!v.getParent().equals(n.startContainer)&&R.contains(v)&&Q.contains(I)&&I.isIdentical(v)&&(I.moveChildren(v),I.remove(),c(n,S,R,Q))}function k(h,L){function I(d,e){if(e.isBlock&&e.isElement&&!e.node.is("br")&&y(d)&&d.is("br")){return d.remove(),1}}var v=L.endContainer.getChild(L.endOffset),n=L.endContainer.getChild(L.endOffset-1);v&&I(v,h[h.length-1]);n&&I(n,h[0])&&(L.setEnd(L.endContainer,L.endOffset-1),L.collapse())}var H=CKEDITOR.dtd,z={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},g={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},G=CKEDITOR.tools.extend({},H.$inline);delete G.br;return function(ao,ah,T,an){var ak=ao.editor,am=!1;"unfiltered_html"==ah&&(ah="html",am=!0);if(!an.checkReadOnly()){var al=(new CKEDITOR.dom.elementPath(an.startContainer,an.root)).blockLimit||an.root;ah={type:ah,dontFilter:am,editable:ao,editor:ak,range:an,blockLimit:al,mergeCandidates:[],zombies:[]};var am=ah.range,al=ah.mergeCandidates,ac="html"===ah.type,af,aj,ab,ad,ai,h;"text"==ah.type&&am.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(aj=CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",am.document),am.insertNode(aj),am.setStartAfter(aj));ab=new CKEDITOR.dom.elementPath(am.startContainer);ah.endPath=ad=new CKEDITOR.dom.elementPath(am.endContainer);if(!am.collapsed){af=ad.block||ad.blockLimit;var aq=am.getCommonAncestor();af&&!af.equals(aq)&&!af.contains(aq)&&am.checkEndOfBlock()&&ah.zombies.push(af);am.deleteContents()}for(;(ai=t(am))&&y(ai)&&ai.isBlockBoundary()&&ab.contains(ai);){am.moveToPosition(ai,CKEDITOR.POSITION_BEFORE_END)}c(am,ah.blockLimit,ab,ad);aj&&(am.setEndBefore(aj),am.collapse(),aj.remove());aj=am.startPath();if(af=aj.contains(l,!1,1)){h=am.splitElement(af),ah.inlineStylesRoot=af,ah.inlineStylesPeak=aj.lastElement}aj=am.createBookmark();ac&&(C(af),C(h));(af=aj.startNode.getPrevious(N))&&y(af)&&l(af)&&al.push(af);(af=aj.startNode.getNext(N))&&y(af)&&l(af)&&al.push(af);for(af=aj.startNode;(af=af.getParent())&&l(af);){al.push(af)}am.moveToBookmark(aj);ak.enterMode===CKEDITOR.ENTER_DIV&&""===ak.getData(!0)&&((ak=ao.getFirst())&&ak.remove(),an.setStartAt(ao,CKEDITOR.POSITION_AFTER_START),an.collapse(!0));if(ao=T){ao=ah.range;if("text"==ah.type&&ah.inlineStylesRoot){an=ah.inlineStylesPeak;ak=an.getDocument().createText("{cke-peak}");for(h=ah.inlineStylesRoot.getParent();!an.equals(h);){ak=ak.appendTo(an.clone()),an=an.getParent()}T=ak.getOuterHtml().split("{cke-peak}").join(T)}an=ah.blockLimit.getName();if(/^\s+|\s+$/.test(T)&&"span" in CKEDITOR.dtd[an]){var ag='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';T=ag+T+ag}T=ah.editor.dataProcessor.toHtml(T,{context:null,fixForBody:!1,protectedWhitespaces:!!ag,dontFilter:ah.dontFilter,filter:ah.editor.activeFilter,enterMode:ah.editor.activeEnterMode});an=ao.document.createElement("body");an.setHtml(T);ag&&(an.getFirst().remove(),an.getLast().remove());if((ag=ao.startPath().block)&&(1!=ag.getChildCount()||!ag.getBogus())){y:{var S;if(1==an.getChildCount()&&y(S=an.getFirst())&&S.is(g)&&!S.hasAttribute("contenteditable")){ag=S.getElementsByTag("*");ao=0;for(h=ag.count();ao<h;ao++){if(ak=ag.getItem(ao),!ak.is(G)){break y}}S.moveChildren(S.getParent(1));S.remove()}}}ah.dataWrapper=an;ao=T}if(ao){S=ah.range;ao=S.document;an=ah.blockLimit;h=0;var n,ag=[],v,ae;T=aj=0;var U,ak=S.startContainer;ai=ah.endPath.elements[0];var b,am=ai.getPosition(ak),al=!!ai.getCommonAncestor(ak)&&am!=CKEDITOR.POSITION_IDENTICAL&&!(am&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),ak=x(ah.dataWrapper,ah);for(k(ak,S);h<ak.length;h++){am=ak[h];if(ac=am.isLineBreak){ac=S,af=an,ad=ab=void 0,am.hasBlockSibling?ac=1:(ab=ac.startContainer.getAscendant(H.$block,1))&&ab.is({div:1,p:1})?(ad=ab.getPosition(af),ad==CKEDITOR.POSITION_IDENTICAL||ad==CKEDITOR.POSITION_CONTAINS?ac=0:(af=ac.splitElement(ab),ac.moveToPosition(af,CKEDITOR.POSITION_AFTER_START),ac=1)):ac=0}if(ac){T=0<h}else{ac=S.startPath();!am.isBlock&&D(ah.editor,ac.block,ac.blockLimit)&&(ae=F(ah.editor))&&(ae=ao.createElement(ae),ae.appendBogus(),S.insertNode(ae),CKEDITOR.env.needsBrFiller&&(n=ae.getBogus())&&n.remove(),S.moveToPosition(ae,CKEDITOR.POSITION_BEFORE_END));if((ac=S.startPath().block)&&!ac.equals(v)){if(n=ac.getBogus()){n.remove(),ag.push(ac)}v=ac}am.firstNotAllowed&&(aj=1);if(aj&&am.isElement){ac=S.startContainer;for(af=null;ac&&!H[ac.getName()][am.name];){if(ac.equals(an)){ac=null;break}af=ac;ac=ac.getParent()}if(ac){af&&(U=S.splitElement(af),ah.zombies.push(U),ah.zombies.push(af))}else{af=an.getName();b=!h;ac=h==ak.length-1;af=u(am.node,af);ab=[];ad=af.length;for(var aq=0,ap=void 0,e=0,f=-1;aq<ad;aq++){ap=af[aq]," "==ap?(e||b&&!aq||(ab.push(new CKEDITOR.dom.text(" ")),f=ab.length),e=1):(ab.push(ap),e=0)}ac&&f==ab.length&&ab.pop();b=ab}}if(b){for(;ac=b.pop();){S.insertNode(ac)}b=0}else{S.insertNode(am.node)}am.lastNotAllowed&&h<ak.length-1&&((U=al?ai:U)&&S.setEndAt(U,CKEDITOR.POSITION_AFTER_START),aj=0);S.collapse()}}1!=ak.length?n=!1:(n=ak[0],n=n.isElement&&"false"==n.node.getAttribute("contenteditable"));n&&(T=!0,ac=ak[0].node,S.setStartAt(ac,CKEDITOR.POSITION_BEFORE_START),S.setEndAt(ac,CKEDITOR.POSITION_AFTER_END));ah.dontMoveCaret=T;ah.bogusNeededBlocks=ag}n=ah.range;var d;U=ah.bogusNeededBlocks;for(b=n.createBookmark();v=ah.zombies.pop();){v.getParent()&&(ae=n.clone(),ae.moveToElementEditStart(v),ae.removeEmptyBlocksAtEnd())}if(U){for(;v=U.pop();){CKEDITOR.env.needsBrFiller?v.appendBogus():v.append(n.document.createText(" "))}}for(;v=ah.mergeCandidates.pop();){v.mergeSiblings()}n.moveToBookmark(b);if(!ah.dontMoveCaret){for(v=t(n);v&&y(v)&&!v.is(H.$empty);){if(v.isBlockBoundary()){n.moveToPosition(v,CKEDITOR.POSITION_BEFORE_END)}else{if(l(v)&&v.getHtml().match(/(\s|&nbsp;)$/g)){d=null;break}d=n.clone();d.moveToPosition(v,CKEDITOR.POSITION_BEFORE_END)}v=v.getLast(N)}d&&n.moveToRange(d)}}}}();i=function(){function e(c){c=new CKEDITOR.dom.walker(c);c.guard=function(h,g){if(g){return !1}if(h.type==CKEDITOR.NODE_ELEMENT){return h.is(CKEDITOR.dtd.$tableContent)}};c.evaluator=function(b){return b.type==CKEDITOR.NODE_ELEMENT};return c}function d(b,h,g){h=b.getDocument().createElement(h);b.append(h,g);return h}function f(g){var c=g.count(),h;for(c;0<c--;){h=g.getItem(c),CKEDITOR.tools.trim(h.getHtml())||(h.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&h.getChildCount()&&h.getFirst().remove())}}return function(k){var h=k.startContainer,c=h.getAscendant("table",1),b=!1;f(c.getElementsByTag("td"));f(c.getElementsByTag("th"));c=k.clone();c.setStart(h,0);c=e(c).lastBackward();c||(c=k.clone(),c.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),c=e(c).lastForward(),b=!0);c||(c=h);c.is("table")?(k.setStartAt(c,CKEDITOR.POSITION_BEFORE_START),k.collapse(!0),c.remove()):(c.is({tbody:1,thead:1,tfoot:1})&&(c=d(c,"tr",b)),c.is("tr")&&(c=d(c,c.getParent().is("thead")?"th":"td",b)),(h=c.getBogus())&&h.remove(),k.moveToPosition(c,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}();m=function(){function b(c){c=new CKEDITOR.dom.walker(c);c.guard=function(e,d){if(d){return !1}if(e.type==CKEDITOR.NODE_ELEMENT){return e.is(CKEDITOR.dtd.$list)||e.is(CKEDITOR.dtd.$listItem)}};c.evaluator=function(d){return d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$listItem)};return c}return function(f){var k=f.startContainer,h=!1,g;g=f.clone();g.setStart(k,0);g=b(g).lastBackward();g||(g=f.clone(),g.setEndAt(k,CKEDITOR.POSITION_BEFORE_END),g=b(g).lastForward(),h=!0);g||(g=k);g.is(CKEDITOR.dtd.$list)?(f.setStartAt(g,CKEDITOR.POSITION_BEFORE_START),f.collapse(!0),g.remove()):((k=g.getBogus())&&k.remove(),f.moveToPosition(g,h?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),f.select())}}();q={eol:{detect:function(k,h){var v=k.range,u=v.clone(),t=v.clone(),n=new CKEDITOR.dom.elementPath(v.startContainer,h),l=new CKEDITOR.dom.elementPath(v.endContainer,h);u.collapse(1);t.collapse();n.block&&u.checkBoundaryOfElement(n.block,CKEDITOR.END)&&(v.setStartAfter(n.block),k.prependEolBr=1);l.block&&t.checkBoundaryOfElement(l.block,CKEDITOR.START)&&(v.setEndBefore(l.block),k.appendEolBr=1)},fix:function(f,e){var h=e.getDocument(),g;f.appendEolBr&&(g=this.createEolBr(h),f.fragment.append(g));!f.prependEolBr||g&&!g.getPrevious()||f.fragment.append(this.createEolBr(h),1)},createEolBr:function(b){return b.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(e){var d=e.range.getBoundaryNodes(),f=d.startNode,d=d.endNode;!d||!r(d)||f&&f.equals(d)||e.range.setEndBefore(d)}},tree:{rebuild:function(G,z){var y=G.range,x=y.getCommonAncestor(),v=new CKEDITOR.dom.elementPath(x,z),u=new CKEDITOR.dom.elementPath(y.startContainer,z),y=new CKEDITOR.dom.elementPath(y.endContainer,z),t;x.type==CKEDITOR.NODE_TEXT&&(x=x.getParent());if(v.blockLimit.is({tr:1,table:1})){var n=v.contains("table").getParent();t=function(b){return !b.equals(n)}}else{if(v.block&&v.block.is(CKEDITOR.dtd.$listItem)&&(u=u.contains(CKEDITOR.dtd.$list),y=y.contains(CKEDITOR.dtd.$list),!u.equals(y))){var l=v.contains(CKEDITOR.dtd.$list).getParent();t=function(b){return !b.equals(l)}}}t||(t=function(b){return !b.equals(v.block)&&!b.equals(v.blockLimit)});this.rebuildFragment(G,z,x,t)},rebuildFragment:function(g,f,l,k){for(var h;l&&!l.equals(f)&&k(l);){h=l.clone(0,1),g.fragment.appendTo(h),g.fragment=h,l=l.getParent()}}},cell:{shrink:function(g){g=g.range;var f=g.startContainer,l=g.endContainer,k=g.startOffset,h=g.endOffset;f.type==CKEDITOR.NODE_ELEMENT&&f.equals(l)&&f.is("tr")&&++k==h&&g.shrink(CKEDITOR.SHRINK_TEXT)}}};o=function(){function e(g,k){var h=g.getParent();if(h.is(CKEDITOR.dtd.$inline)){g[k?"insertBefore":"insertAfter"](h)}}function d(k,h,g){e(h);e(g,1);for(var b;b=g.getNext();){b.insertAfter(h),h=b}j(k)&&k.remove()}function f(g,c){var h=new CKEDITOR.dom.range(g);h.setStartAfter(c.startNode);h.setEndBefore(c.endNode);return h}return{list:{detectMerge:function(k,c){var v=f(c,k.bookmark),u=v.startPath(),t=v.endPath(),n=u.contains(CKEDITOR.dtd.$list),l=t.contains(CKEDITOR.dtd.$list);k.mergeList=n&&l&&n.getParent().equals(l.getParent())&&!n.equals(l);k.mergeListItems=u.block&&t.block&&u.block.is(CKEDITOR.dtd.$listItem)&&t.block.is(CKEDITOR.dtd.$listItem);if(k.mergeList||k.mergeListItems){v=v.clone(),v.setStartBefore(k.bookmark.startNode),v.setEndAfter(k.bookmark.endNode),k.mergeListBookmark=v.createBookmark()}},merge:function(b,y){if(b.mergeListBookmark){var x=b.mergeListBookmark.startNode,v=b.mergeListBookmark.endNode,u=new CKEDITOR.dom.elementPath(x,y),t=new CKEDITOR.dom.elementPath(v,y);if(b.mergeList){var n=u.contains(CKEDITOR.dtd.$list),l=t.contains(CKEDITOR.dtd.$list);n.equals(l)||(l.moveChildren(n),l.remove())}b.mergeListItems&&(u=u.contains(CKEDITOR.dtd.$listItem),t=t.contains(CKEDITOR.dtd.$listItem),u.equals(t)||d(t,x,v));x.remove();v.remove()}}},block:{detectMerge:function(h,g){if(!h.tableContentsRanges&&!h.mergeListBookmark){var k=new CKEDITOR.dom.range(g);k.setStartBefore(h.bookmark.startNode);k.setEndAfter(h.bookmark.endNode);h.mergeBlockBookmark=k.createBookmark()}},merge:function(b,t){if(b.mergeBlockBookmark&&!b.purgeTableBookmark){var n=b.mergeBlockBookmark.startNode,l=b.mergeBlockBookmark.endNode,k=new CKEDITOR.dom.elementPath(n,t),h=new CKEDITOR.dom.elementPath(l,t),k=k.block,h=h.block;k&&h&&!k.equals(h)&&d(h,n,l);n.remove();l.remove()}}},table:function(){function g(x){var v=[],t,n=new CKEDITOR.dom.walker(x),l=x.startPath().contains(h),u=x.endPath().contains(h),b={};n.guard=function(z,G){if(z.type==CKEDITOR.NODE_ELEMENT){var y="visited_"+(G?"out":"in");if(z.getCustomData(y)){return}CKEDITOR.dom.element.setMarker(b,z,y,1)}if(G&&l&&z.equals(l)){t=x.clone(),t.setEndAt(l,CKEDITOR.POSITION_BEFORE_END),v.push(t)}else{if(!G&&u&&z.equals(u)){t=x.clone(),t.setStartAt(u,CKEDITOR.POSITION_AFTER_START),v.push(t)}else{if(y=!G){y=z.type==CKEDITOR.NODE_ELEMENT&&z.is(h)&&(!l||c(z,l))&&(!u||c(z,u))}if(!y&&(y=G)){if(z.is(h)){var y=l&&l.getAscendant("table",!0),H=u&&u.getAscendant("table",!0),k=z.getAscendant("table",!0),y=y&&y.contains(k)||H&&H.contains(k)}else{y=void 0}}y&&(t=x.clone(),t.selectNodeContents(z),v.push(t))}}};n.lastForward();CKEDITOR.dom.element.clearAllMarkers(b);return v}function c(b,n){var l=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,k=b.getPosition(n);return k===CKEDITOR.POSITION_IDENTICAL?!1:0===(k&l)}var h={td:1,th:1,caption:1};return{detectPurge:function(l){var k=l.range,u=k.clone();u.enlarge(CKEDITOR.ENLARGE_ELEMENT);var u=new CKEDITOR.dom.walker(u),t=0;u.evaluator=function(b){b.type==CKEDITOR.NODE_ELEMENT&&b.is(h)&&++t};u.checkForward();if(1<t){var u=k.startPath().contains("table"),n=k.endPath().contains("table");u&&n&&k.checkBoundaryOfElement(u,CKEDITOR.START)&&k.checkBoundaryOfElement(n,CKEDITOR.END)&&(k=l.range.clone(),k.setStartBefore(u),k.setEndAfter(n),l.purgeTableBookmark=k.createBookmark())}},detectRanges:function(y,v){var u=f(v,y.bookmark),t=u.clone(),n,x,b=u.getCommonAncestor();b.is(CKEDITOR.dtd.$tableContent)&&!b.is(h)&&(b=b.getAscendant("table",!0));x=b;b=new CKEDITOR.dom.elementPath(u.startContainer,x);x=new CKEDITOR.dom.elementPath(u.endContainer,x);b=b.contains("table");x=x.contains("table");if(b||x){b&&x&&c(b,x)?(y.tableSurroundingRange=t,t.setStartAt(b,CKEDITOR.POSITION_AFTER_END),t.setEndAt(x,CKEDITOR.POSITION_BEFORE_START),t=u.clone(),t.setEndAt(b,CKEDITOR.POSITION_AFTER_END),n=u.clone(),n.setStartAt(x,CKEDITOR.POSITION_BEFORE_START),n=g(t).concat(g(n))):b?x||(y.tableSurroundingRange=t,t.setStartAt(b,CKEDITOR.POSITION_AFTER_END),u.setEndAt(b,CKEDITOR.POSITION_AFTER_END)):(y.tableSurroundingRange=t,t.setEndAt(x,CKEDITOR.POSITION_BEFORE_START),u.setStartAt(x,CKEDITOR.POSITION_AFTER_START)),y.tableContentsRanges=n?n:g(u)}},deleteRanges:function(l){for(var k;k=l.tableContentsRanges.pop();){k.extractContents(),j(k.startContainer)&&k.startContainer.appendBogus()}l.tableSurroundingRange&&l.tableSurroundingRange.extractContents()},purge:function(l){if(l.purgeTableBookmark){var k=l.doc,n=l.range.clone(),k=k.createElement("p");k.insertBefore(l.purgeTableBookmark.startNode);n.moveToBookmark(l.purgeTableBookmark);n.deleteContents();l.range.moveToPosition(k,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(b){return !(b.range.startPath().contains(CKEDITOR.dtd.$listItem)&&b.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(b){b.startContainer.getDtd()["#"]||b.moveToClosestEditablePosition(null,!0)},autoParagraph:function(h,g){var l=g.startPath(),k;D(h,l.block,l.blockLimit)&&(k=F(h))&&(k=g.document.createElement(k),k.appendBogus(),g.insertNode(k),g.moveToPosition(k,CKEDITOR.POSITION_AFTER_START))}}}()})();(function(){function Z(b){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(b)}function W(h,t){if(0===h.length||Z(h[0].getEnclosedNode())){return !1}var n,m;if((n=!t&&1===h.length)&&!(n=h[0].collapsed)){var l=h[0];n=l.startContainer.getAscendant({td:1,th:1},!0);var k=l.endContainer.getAscendant({td:1,th:1},!0);m=CKEDITOR.tools.trim;n&&n.equals(k)&&!n.findOne("td, th, tr, tbody, table")?(l=l.cloneContents(),n=l.getFirst()?m(l.getFirst().getText())!==m(n.getText()):!0):n=!1}if(n){return !1}for(m=0;m<h.length;m++){if(n=h[m]._getTableElement(),!n){return !1}}return !0}function Y(g){function f(b){b=b.find("td, th");var m=[],e;for(e=0;e<b.count();e++){m.push(b.getItem(e))}return m}var l=[],k,h;for(h=0;h<g.length;h++){k=g[h]._getTableElement(),k.is&&k.is({td:1,th:1})?l.push(k):l=l.concat(f(k))}return l}function X(b){b=Y(b);var l="",k=[],h,g;for(g=0;g<b.length;g++){h&&!h.equals(b[g].getAscendant("tr"))?(l+=k.join("\t")+"\n",h=b[g].getAscendant("tr"),k=[]):0===g&&(h=b[g].getAscendant("tr")),k.push(b[g].getText())}return l+=k.join("\t")}function U(e){var c=this.root.editor,f=c.getSelection(1);this.reset();r=!0;f.root.once("selectionchange",function(b){b.cancel()},null,null,0);f.selectRanges([e[0]]);f=this._.cache;f.ranges=new CKEDITOR.dom.rangeList(e);f.type=CKEDITOR.SELECTION_TEXT;f.selectedElement=e[0]._getTableElement();f.selectedText=X(e);f.nativeSel=null;this.isFake=1;this.rev=j++;c._.fakeSelection=this;r=!1;this.root.fire("selectionchange")}function S(){var A=this._.fakeSelection,z;if(A){z=this.getSelection(1);var y;if(!(y=!z)&&(y=!z.isHidden())){y=A;var x=z.getRanges(),v=y.getRanges(),u=x.length&&x[0]._getTableElement()&&x[0]._getTableElement().getAscendant("table",!0),m=v.length&&v[0]._getTableElement()&&v[0]._getTableElement().getAscendant("table",!0),t=1===x.length&&x[0]._getTableElement()&&x[0]._getTableElement().is("table"),n=1===v.length&&v[0]._getTableElement()&&v[0]._getTableElement().is("table");if(Z(y.getSelectedElement())){y=!1}else{var d=1===x.length&&x[0].collapsed,v=W(x,!!CKEDITOR.env.webkit)&&W(v);u=u&&m?u.equals(m)||m.contains(u):!1;u&&(d||v)?(t&&!n&&y.selectRanges(x),y=!0):y=!1}y=!y}y&&(A.reset(),A=0)}if(!A&&(A=z||this.getSelection(1),!A||A.getType()==CKEDITOR.SELECTION_NONE)){return}this.fire("selectionCheck",A);z=this.elementPath();z.compare(this._.selectionPreviousPath)||(y=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(z.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||y||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=z,this.fire("selectionChange",{selection:A,path:z}))}function R(){J=!0;P||(T.call(this),P=CKEDITOR.tools.setTimeout(T,200,this))}function T(){P=null;J&&(CKEDITOR.tools.setTimeout(S,0,this),J=!1)}function Q(b){return o(b)||b.type==CKEDITOR.NODE_ELEMENT&&!b.is(CKEDITOR.dtd.$empty)?!0:!1}function D(g){function f(e,b){return e&&e.type!=CKEDITOR.NODE_TEXT?g.clone()["moveToElementEdit"+(b?"End":"Start")](e):!1}if(!(g.root instanceof CKEDITOR.editable)){return !1}var l=g.startContainer,k=g.getPreviousNode(Q,null,l),h=g.getNextNode(Q,null,l);return f(k)||f(h,1)||!(k||h||l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()&&l.getBogus())?!0:!1}function V(d){s(d,!1);var c=d.getDocument().createText(q);d.setCustomData("cke-fillingChar",c);return c}function s(k,h){var u=k&&k.removeCustomData("cke-fillingChar");if(u){if(!1!==h){var t=k.getDocument().getSelection().getNative(),n=t&&"None"!=t.type&&t.getRangeAt(0),m=q.length;if(u.getLength()>m&&n&&n.intersectsNode(u.$)){var l=[{node:t.anchorNode,offset:t.anchorOffset},{node:t.focusNode,offset:t.focusOffset}];t.anchorNode==u.$&&t.anchorOffset>m&&(l[0].offset-=m);t.focusNode==u.$&&t.focusOffset>m&&(l[1].offset-=m)}}u.setText(F(u.getText(),1));l&&(u=k.getDocument().$,t=u.getSelection(),u=u.createRange(),u.setStart(l[0].node,l[0].offset),u.collapse(!0),t.removeAllRanges(),t.addRange(u),t.extend(l[1].node,l[1].offset))}}function F(d,c){return c?d.replace(w,function(f,e){return e?" ":""}):d.replace(q,"")}function p(h,g){var n=g&&CKEDITOR.tools.htmlEncode(g)||"\x26nbsp;",n=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'"\x3e'+n+"\x3c/div\x3e",h.document);h.fire("lockSnapshot");h.editable().append(n);var m=h.getSelection(1),l=h.createRange(),k=m.root.on("selectionchange",function(b){b.cancel()},null,null,0);l.setStartAt(n,CKEDITOR.POSITION_AFTER_START);l.setEndAt(n,CKEDITOR.POSITION_BEFORE_END);m.selectRanges([l]);k.removeListener();h.fire("unlockSnapshot");h._.hiddenSelectionContainer=n}function C(d){var c={37:1,39:1,8:1,46:1};return function(k){var h=k.data.getKeystroke();if(c[h]){var g=d.getSelection().getRanges(),b=g[0];1==g.length&&b.collapsed&&(h=b[38>h?"getPreviousEditableNode":"getNextEditableNode"]())&&h.type==CKEDITOR.NODE_ELEMENT&&"false"==h.getAttribute("contenteditable")&&(d.getSelection().fake(h),k.data.preventDefault(),k.cancel())}}}function E(l){for(var k=0;k<l.length;k++){var x=l[k];x.getCommonAncestor().isReadOnly()&&l.splice(k,1);if(!x.collapsed){if(x.startContainer.isReadOnly()){for(var v=x.startContainer,u;v&&!((u=v.type==CKEDITOR.NODE_ELEMENT)&&v.is("body")||!v.isReadOnly());){u&&"false"==v.getAttribute("contentEditable")&&x.setStartAfter(v),v=v.getParent()}}v=x.startContainer;u=x.endContainer;var t=x.startOffset,n=x.endOffset,m=x.clone();v&&v.type==CKEDITOR.NODE_TEXT&&(t>=v.getLength()?m.setStartAfter(v):m.setStartBefore(v));u&&u.type==CKEDITOR.NODE_TEXT&&(n?m.setEndAfter(u):m.setEndBefore(u));v=new CKEDITOR.dom.walker(m);v.evaluator=function(c){if(c.type==CKEDITOR.NODE_ELEMENT&&c.isReadOnly()){var b=x.clone();x.setEndBefore(c);x.collapsed&&l.splice(k--,1);c.getPosition(m.endContainer)&CKEDITOR.POSITION_CONTAINS||(b.setStartAfter(c),b.collapsed||l.splice(k+1,0,b));return !0}return !1};v.next()}}return l}var O="function"!=typeof window.getSelection,j=1,q=CKEDITOR.tools.repeat("",7),w=new RegExp(q+"( )?","g"),r,P,J,o=CKEDITOR.dom.walker.invisible(1),N=function(){function f(c){return function(b){var d=b.editor.createRange();d.moveToClosestEditablePosition(b.selected,c)&&b.editor.getSelection().selectRanges([d]);return !1}}function e(b){return function(k){var n=k.editor,m=n.createRange(),l;if(!n.readOnly){return(l=m.moveToClosestEditablePosition(k.selected,b))||(l=m.moveToClosestEditablePosition(k.selected,!b)),l&&n.getSelection().selectRanges([m]),n.fire("saveSnapshot"),k.selected.remove(),l||(m.moveToElementEditablePosition(n.editable()),n.getSelection().selectRanges([m])),n.fire("saveSnapshot"),!1}}}var h=f(),g=f(1);return{37:h,38:h,39:g,40:g,8:e(),46:e(1)}}();CKEDITOR.on("instanceCreated",function(e){function d(){var b=f.getSelection();b&&b.removeAllRanges()}var f=e.editor;f.on("contentDom",function(){function M(){aa=new CKEDITOR.dom.selection(f.getSelection());aa.lock()}function L(){A.removeListener("mouseup",L);x.removeListener("mouseup",L);var b=CKEDITOR.document.$.selection,g=b.createRange();"None"!=b.type&&g.parentElement()&&g.parentElement().ownerDocument==B.$&&g.select()}function H(l){var g,m;g=(g=this.document.getActive())?"input"===g.getName()||"textarea"===g.getName():!1;g||(g=this.getSelection(1),(m=G(g))&&!m.equals(k)&&(g.selectElement(m),l.data.preventDefault()))}function G(b){b=b.getRanges()[0];return b?(b=b.startContainer.getAscendant(function(g){return g.type==CKEDITOR.NODE_ELEMENT&&g.hasAttribute("contenteditable")},!0))&&"false"===b.getAttribute("contenteditable")?b:null:null}var B=f.document,A=CKEDITOR.document,k=f.editable(),c=B.getBody(),x=B.getDocumentElement(),h=k.isInline(),n,aa;CKEDITOR.env.gecko&&k.attachListener(k,"focus",function(b){b.removeListener();0!==n&&(b=f.getSelection().getNative())&&b.isCollapsed&&b.anchorNode==k.$&&(b=f.createRange(),b.moveToElementEditStart(k),b.select())},null,null,-2);k.attachListener(k,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){if(n&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){n=f._.previousActive&&f._.previousActive.equals(B.getActive());var b=null!=f._.previousScrollTop&&f._.previousScrollTop!=k.$.scrollTop;CKEDITOR.env.webkit&&n&&b&&(k.$.scrollTop=f._.previousScrollTop)}f.unlockSelection(n);n=0},null,null,-1);k.attachListener(k,"mousedown",function(){n=0});if(CKEDITOR.env.ie||CKEDITOR.env.gecko||h){O?k.attachListener(k,"beforedeactivate",M,null,null,-1):k.attachListener(f,"selectionCheck",M,null,null,-1),k.attachListener(k,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",function(){var b=aa&&(aa.isFake||2>aa.getRanges().length);CKEDITOR.env.gecko&&!h&&b||(f.lockSelection(aa),n=1)},null,null,-1),k.attachListener(k,"mousedown",function(){n=0})}if(CKEDITOR.env.ie&&!h){var ac;k.attachListener(k,"mousedown",function(b){2==b.data.$.button&&((b=f.document.getSelection())&&b.getType()!=CKEDITOR.SELECTION_NONE||(ac=f.window.getScrollPosition()))});k.attachListener(k,"mouseup",function(b){2==b.data.$.button&&ac&&(f.document.$.documentElement.scrollLeft=ac.x,f.document.$.documentElement.scrollTop=ac.y);ac=null});if("BackCompat"!=B.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var ab,I;x.on("mousedown",function(l){function g(b){b=b.data.$;if(ab){var v=c.$.createTextRange();try{v.moveToPoint(b.clientX,b.clientY)}catch(u){}ab.setEndPoint(0>I.compareEndPoints("StartToStart",v)?"EndToEnd":"StartToStart",v);ab.select()}}function t(){x.removeListener("mousemove",g);A.removeListener("mouseup",t);x.removeListener("mouseup",t);ab.select()}l=l.data;if(l.getTarget().is("html")&&l.$.y<x.$.clientHeight&&l.$.x<x.$.clientWidth){ab=c.$.createTextRange();try{ab.moveToPoint(l.$.clientX,l.$.clientY)}catch(m){}I=ab.duplicate();x.on("mousemove",g);A.on("mouseup",t);x.on("mouseup",t)}})}if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version){x.on("mousedown",function(b){b.data.getTarget().is("html")&&(A.on("mouseup",L),x.on("mouseup",L))})}}}k.attachListener(k,"selectionchange",S,f);k.attachListener(k,"keyup",R,f);k.attachListener(k,"touchstart",R,f);k.attachListener(k,"touchend",R,f);CKEDITOR.env.ie&&k.attachListener(k,"keydown",H,f);k.attachListener(k,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){f.forceNextSelectionCheck();f.selectionChange(1)});if(h&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var K;k.attachListener(k,"mousedown",function(){K=1});k.attachListener(B.getDocumentElement(),"mouseup",function(){K&&R.call(f);K=0})}else{k.attachListener(CKEDITOR.env.ie?k:B.getDocumentElement(),"mouseup",R,f)}CKEDITOR.env.webkit&&k.attachListener(B,"keydown",function(b){switch(b.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:k.hasFocus&&s(k)}},null,null,-1);k.attachListener(k,"keydown",C(f),null,null,-1)});f.on("setData",function(){f.unlockSelection();CKEDITOR.env.webkit&&d()});f.on("contentDomUnload",function(){f.unlockSelection()});if(CKEDITOR.env.ie9Compat){f.on("beforeDestroy",d,null,null,9)}f.on("dataReady",function(){delete f._.fakeSelection;delete f._.hiddenSelectionContainer;f.selectionChange(1)});f.on("loadSnapshot",function(){var g=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),c=f.editable().getLast(g);c&&c.hasAttribute("data-cke-hidden-sel")&&(c.remove(),CKEDITOR.env.gecko&&(g=f.editable().getFirst(g))&&g.is("br")&&g.getAttribute("_moz_editor_bogus_node")&&g.remove())},null,null,100);f.on("key",function(g){if("wysiwyg"==f.mode){var c=f.getSelection();if(c.isFake){var h=N[g.data.keyCode];if(h){return h({editor:f,selected:c.getSelectedElement(),selection:c,keyEvent:g})}}}})});if(CKEDITOR.env.webkit){CKEDITOR.on("instanceReady",function(d){var c=d.editor;c.on("selectionChange",function(){var b=c.editable(),e=b.getCustomData("cke-fillingChar");e&&(e.getCustomData("ready")?(s(b),b.editor.fire("selectionCheck")):e.setCustomData("ready",1))},null,null,-1);c.on("beforeSetMode",function(){s(c.editable())},null,null,-1);c.on("getSnapshot",function(b){b.data&&(b.data=F(b.data))},c,null,20);c.on("toDataFormat",function(b){b.data.dataValue=F(b.data.dataValue)},null,null,0)})}CKEDITOR.editor.prototype.selectionChange=function(b){(b?S:R).call(this)};CKEDITOR.editor.prototype.getSelection=function(b){return !this._.savedSelection&&!this._.fakeSelection||b?(b=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(b):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.getSelectedRanges=function(d){var c=this.getSelection();return c&&c.getRanges(d)||[]};CKEDITOR.editor.prototype.lockSelection=function(b){b=b||this.getSelection(1);return b.getType()!=CKEDITOR.SELECTION_NONE?(!b.isLocked&&b.lock(),this._.savedSelection=b,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(d){var c=this._.savedSelection;return c?(c.unlock(d),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var b=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);b.selectRanges([this]);return b};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;CKEDITOR.dom.selection=function(h){if(h instanceof CKEDITOR.dom.selection){var g=h;h=h.root}var n=h instanceof CKEDITOR.dom.element;this.rev=g?g.rev:j++;this.document=h instanceof CKEDITOR.dom.document?h:h.getDocument();this.root=n?h:this.document.getBody();this.isLocked=0;this._={cache:{}};if(g){return CKEDITOR.tools.extend(this._.cache,g._.cache),this.isFake=g.isFake,this.isLocked=g.isLocked,this}h=this.getNative();var m,l;if(h){if(h.getRangeAt){m=(l=h.rangeCount&&h.getRangeAt(0))&&new CKEDITOR.dom.node(l.commonAncestorContainer)}else{try{l=h.createRange()}catch(k){}m=l&&CKEDITOR.dom.element.get(l.item&&l.item(0)||l.parentElement())}}if(!m||m.type!=CKEDITOR.NODE_ELEMENT&&m.type!=CKEDITOR.NODE_TEXT||!this.root.equals(m)&&!this.root.contains(m)){this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList}return this};var i={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:F,_createFillingCharSequenceNode:V,FILLING_CHAR_SEQUENCE:q});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=O?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:O?function(){var g=this._.cache;if(g.type){return g.type}var f=CKEDITOR.SELECTION_NONE;try{var l=this.getNative(),k=l.type;"Text"==k&&(f=CKEDITOR.SELECTION_TEXT);"Control"==k&&(f=CKEDITOR.SELECTION_ELEMENT);l.createRange().parentElement()&&(f=CKEDITOR.SELECTION_TEXT)}catch(h){}return g.type=f}:function(){var f=this._.cache;if(f.type){return f.type}var e=CKEDITOR.SELECTION_TEXT,h=this.getNative();if(!h||!h.rangeCount){e=CKEDITOR.SELECTION_NONE}else{if(1==h.rangeCount){var h=h.getRangeAt(0),g=h.startContainer;g==h.endContainer&&1==g.nodeType&&1==h.endOffset-h.startOffset&&i[g.childNodes[h.startOffset].nodeName.toLowerCase()]&&(e=CKEDITOR.SELECTION_ELEMENT)}}return f.type=e},getRanges:function(){var b=O?function(){function d(e){return(new CKEDITOR.dom.node(e)).getIndex()}var c=function(L,K){L=L.duplicate();L.collapse(K);var I=L.parentElement();if(!I.hasChildNodes()){return{container:I,offset:0}}for(var H=I.children,G,B,A=L.duplicate(),z=0,y=H.length-1,t=-1,u,x;z<=y;){if(t=Math.floor((z+y)/2),G=H[t],A.moveToElementText(G),u=A.compareEndPoints("StartToStart",L),0<u){y=t-1}else{if(0>u){z=t+1}else{return{container:I,offset:d(G)}}}}if(-1==t||t==H.length-1&&0>u){A.moveToElementText(I);A.setEndPoint("StartToStart",L);A=A.text.replace(/(\r\n|\r)/g,"\n").length;H=I.childNodes;if(!A){return G=H[H.length-1],G.nodeType!=CKEDITOR.NODE_TEXT?{container:I,offset:H.length}:{container:G,offset:G.nodeValue.length}}for(I=H.length;0<A&&0<I;){B=H[--I],B.nodeType==CKEDITOR.NODE_TEXT&&(x=B,A-=B.nodeValue.length)}return{container:x,offset:-A}}A.collapse(0<u?!0:!1);A.setEndPoint(0<u?"StartToStart":"EndToStart",L);A=A.text.replace(/(\r\n|\r)/g,"\n").length;if(!A){return{container:I,offset:d(G)+(0<u?0:1)}}for(;0<A;){try{B=G[0<u?"previousSibling":"nextSibling"],B.nodeType==CKEDITOR.NODE_TEXT&&(A-=B.nodeValue.length,x=B),G=B}catch(M){return{container:I,offset:d(G)}}}return{container:x,offset:0<u?-A:x.nodeValue.length+A}};return function(){var k=this.getNative(),v=k&&k.createRange(),u=this.getType();if(!k){return[]}if(u==CKEDITOR.SELECTION_TEXT){return k=new CKEDITOR.dom.range(this.root),u=c(v,!0),k.setStart(new CKEDITOR.dom.node(u.container),u.offset),u=c(v),k.setEnd(new CKEDITOR.dom.node(u.container),u.offset),k.endContainer.getPosition(k.startContainer)&CKEDITOR.POSITION_PRECEDING&&k.endOffset<=k.startContainer.getIndex()&&k.collapse(),[k]}if(u==CKEDITOR.SELECTION_ELEMENT){for(var u=[],t=0;t<v.length;t++){for(var n=v.item(t),m=n.parentNode,l=0,k=new CKEDITOR.dom.range(this.root);l<m.childNodes.length&&m.childNodes[l]!=n;l++){}k.setStart(new CKEDITOR.dom.node(m),l);k.setEnd(new CKEDITOR.dom.node(m),l+1);u.push(k)}return u}return[]}}():function(){var g=[],f,l=this.getNative();if(!l){return g}for(var k=0;k<l.rangeCount;k++){var h=l.getRangeAt(k);f=new CKEDITOR.dom.range(this.root);f.setStart(new CKEDITOR.dom.node(h.startContainer),h.startOffset);f.setEnd(new CKEDITOR.dom.node(h.endContainer),h.endOffset);g.push(f)}return g};return function(e){var g=this._.cache,f=g.ranges;f||(g.ranges=f=new CKEDITOR.dom.rangeList(b.call(this)));return e?E(new CKEDITOR.dom.rangeList(f.slice())):f}}(),getStartElement:function(){var e=this._.cache;if(void 0!==e.startElement){return e.startElement}var d;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var f=this.getRanges()[0];if(f){if(f.collapsed){d=f.startContainer,d.type!=CKEDITOR.NODE_ELEMENT&&(d=d.getParent())}else{for(f.optimize();d=f.startContainer,f.startOffset==(d.getChildCount?d.getChildCount():d.getLength())&&!d.isBlockBoundary();){f.setStartAfter(d)}d=f.startContainer;if(d.type!=CKEDITOR.NODE_ELEMENT){return d.getParent()}if((d=d.getChild(f.startOffset))&&d.type==CKEDITOR.NODE_ELEMENT){for(f=d.getFirst();f&&f.type==CKEDITOR.NODE_ELEMENT;){d=f,f=f.getFirst()}}else{d=f.startContainer}}d=d.$}}return e.startElement=d?new CKEDITOR.dom.element(d):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement){return e.selectedElement}var d=this,f=CKEDITOR.tools.tryThese(function(){return d.getNative().createRange().item(0)},function(){for(var b=d.getRanges()[0].clone(),k,h,g=2;g&&!((k=b.getEnclosedNode())&&k.type==CKEDITOR.NODE_ELEMENT&&i[k.getName()]&&(h=k));g--){b.shrink(CKEDITOR.SHRINK_ELEMENT)}return h&&h.$});return e.selectedElement=f?new CKEDITOR.dom.element(f):null},getSelectedText:function(){var d=this._.cache;if(void 0!==d.selectedText){return d.selectedText}var c=this.getNative(),c=O?"Control"==c.type?"":c.createRange().text:c.toString();return d.selectedText=c},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(f){if(this.isLocked){if(f){var d=this.getSelectedElement(),h=this.getRanges(),g=this.isFake}this.isLocked=0;this.reset();f&&(f=d||h[0]&&h[0].getCommonAncestor())&&f.getAscendant("body",1)&&(this.root.editor.plugins.tableselection&&W(h)?U.call(this,h):g?this.fake(d):d&&2>h.length?this.selectElement(d):this.selectRanges(h))}},reset:function(){this._.cache={};this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection){if(this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var d=e._.hiddenSelectionContainer;if(d){var f=e.checkDirty();e.fire("lockSnapshot");d.remove();e.fire("unlockSnapshot");!f&&e.resetDirty()}delete e._.hiddenSelectionContainer}else{CKEDITOR.warn("selection-fake-reset")}}this.rev=j++},selectElement:function(d){var c=new CKEDITOR.dom.range(this.root);c.setStartBefore(d);c.setEndAfter(d);this.selectRanges([c])},selectRanges:function(G){var B=this.root.editor,A=B&&B._.hiddenSelectionContainer;this.reset();if(A){for(var A=this.root,z,y=0;y<G.length;++y){z=G[y],z.endContainer.equals(A)&&(z.endOffset=Math.min(z.endOffset,A.getChildCount()))}}if(G.length){if(this.isLocked){var x=CKEDITOR.document.getActive();this.unlock();this.selectRanges(G);this.lock();x&&!x.equals(this.root)&&x.focus()}else{var f;G:{var v,n;if(1==G.length&&!(n=G[0]).collapsed&&(f=n.getEnclosedNode())&&f.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(v=n.getEnclosedNode())&&v.type==CKEDITOR.NODE_ELEMENT&&(f=v),"false"==f.getAttribute("contenteditable"))){break G}f=void 0}if(f){this.fake(f)}else{if(B&&B.plugins.tableselection&&B.plugins.tableselection.isSupportedEnvironment()&&W(G)&&!r&&!G[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")){U.call(this,G)}else{if(O){v=CKEDITOR.dom.walker.whitespaces(!0);f=/\ufeff|\u00a0/;n={table:1,tbody:1,tr:1};1<G.length&&(B=G[G.length-1],G[0].setEnd(B.endContainer,B.endOffset));B=G[0];G=B.collapsed;var e,K,d;if((A=B.getEnclosedNode())&&A.type==CKEDITOR.NODE_ELEMENT&&A.getName() in i&&(!A.is("a")||!A.getText())){try{d=A.$.createControlRange();d.addElement(A.$);d.select();return}catch(I){}}if(B.startContainer.type==CKEDITOR.NODE_ELEMENT&&B.startContainer.getName() in n||B.endContainer.type==CKEDITOR.NODE_ELEMENT&&B.endContainer.getName() in n){B.shrink(CKEDITOR.NODE_ELEMENT,!0),G=B.collapsed}d=B.createBookmark();n=d.startNode;G||(x=d.endNode);d=B.document.$.body.createTextRange();d.moveToElementText(n.$);d.moveStart("character",1);x?(f=B.document.$.body.createTextRange(),f.moveToElementText(x.$),d.setEndPoint("EndToEnd",f),d.moveEnd("character",-1)):(e=n.getNext(v),K=n.hasAscendant("pre"),e=!(e&&e.getText&&e.getText().match(f))&&(K||!n.hasPrevious()||n.getPrevious().is&&n.getPrevious().is("br")),K=B.document.createElement("span"),K.setHtml("\x26#65279;"),K.insertBefore(n),e&&B.document.createText("").insertBefore(n));B.setStartBefore(n);n.remove();G?(e?(d.moveStart("character",-1),d.select(),B.document.$.selection.clear()):d.select(),B.moveToPosition(K,CKEDITOR.POSITION_BEFORE_START),K.remove()):(B.setEndBefore(x),x.remove(),d.select())}else{x=this.getNative();if(!x){return}this.removeAllRanges();for(d=0;d<G.length;d++){if(d<G.length-1&&(e=G[d],K=G[d+1],f=e.clone(),f.setStart(e.endContainer,e.endOffset),f.setEnd(K.startContainer,K.startOffset),!f.collapsed&&(f.shrink(CKEDITOR.NODE_ELEMENT,!0),B=f.getCommonAncestor(),f=f.getEnclosedNode(),B.isReadOnly()||f&&f.isReadOnly()))){K.setStart(e.startContainer,e.startOffset);G.splice(d--,1);continue}B=G[d];K=this.document.$.createRange();B.collapsed&&CKEDITOR.env.webkit&&D(B)&&(f=V(this.root),B.insertNode(f),(e=f.getNext())&&!f.getPrevious()&&e.type==CKEDITOR.NODE_ELEMENT&&"br"==e.getName()?(s(this.root),B.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START)):B.moveToPosition(f,CKEDITOR.POSITION_AFTER_END));K.setStart(B.startContainer.$,B.startOffset);try{K.setEnd(B.endContainer.$,B.endOffset)}catch(H){if(0<=H.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")){B.collapse(1),K.setEnd(B.endContainer.$,B.endOffset)}else{throw H}}x.addRange(K)}}this.reset();this.root.fire("selectionchange")}}}}},fake:function(g,f){var l=this.root.editor;void 0===f&&g.hasAttribute("aria-label")&&(f=g.getAttribute("aria-label"));this.reset();p(l,f);var k=this._.cache,h=new CKEDITOR.dom.range(this.root);h.setStartBefore(g);h.setEndAfter(g);k.ranges=new CKEDITOR.dom.rangeList(h);k.selectedElement=k.startElement=g;k.type=CKEDITOR.SELECTION_ELEMENT;k.selectedText=k.nativeSel=null;this.isFake=1;this.rev=j++;l._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var b=this.getCommonAncestor();b&&b.type==CKEDITOR.NODE_TEXT&&(b=b.getParent());return !(!b||!b.data("cke-hidden-sel"))},isInTable:function(b){return W(this.getRanges(),b)},isCollapsed:function(){var b=this.getRanges();return 1===b.length&&b[0].collapsed},createBookmarks:function(b){b=this.getRanges().createBookmarks(b);this.isFake&&(b.isFake=1);return b},createBookmarks2:function(b){b=this.getRanges().createBookmarks2(b);this.isFake&&(b.isFake=1);return b},selectBookmarks:function(g){for(var d=[],l,k=0;k<g.length;k++){var h=new CKEDITOR.dom.range(this.root);h.moveToBookmark(g[k]);d.push(h)}g.isFake&&(l=W(d)?d[0]._getTableElement():d[0].getEnclosedNode(),l&&l.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),g.isFake=0));g.isFake&&!W(d)?this.fake(l):this.selectRanges(d);return this},getCommonAncestor:function(){var b=this.getRanges();return b.length?b[0].startContainer.getCommonAncestor(b[b.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var d=this.getNative();try{d&&d[O?"empty":"removeAllRanges"]()}catch(c){}this.reset()}}}})();"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){function al(g,f){for(var l,k;(g=g.getParent())&&!g.equals(f);){if(g.getAttribute("data-nostyle")){l=g}else{if(!k){var h=g.getAttribute("contentEditable");"false"==h?l=g:"true"==h&&(k=1)}}}return l}function ai(f,e,h,g){return(f.getPosition(e)|g)==g&&(!h.childRule||h.childRule(f))}function ak(aE){var aD=aE.document;if(aE.collapsed){aD=p(this,aD),aE.insertNode(aD),aE.moveToPosition(aD,CKEDITOR.POSITION_BEFORE_END)}else{var aC=this.element,aB=this._.definition,aA,az=aB.ignoreReadonly,ay=az||aB.includeReadonly;null==ay&&(ay=aE.root.getCustomData("cke_includeReadonly"));var ax=CKEDITOR.dtd[aC];ax||(aA=!0,ax=CKEDITOR.dtd.span);aE.enlarge(CKEDITOR.ENLARGE_INLINE,1);aE.trim();var ap=aE.createBookmark(),au=ap.startNode,am=ap.endNode,ar=au,aq;if(!az){var ao=aE.getCommonAncestor(),az=al(au,ao),ao=al(am,ao);az&&(ar=az.getNextSourceNode(!0));ao&&(am=ao)}for(ar.getPosition(am)==CKEDITOR.POSITION_FOLLOWING&&(ar=0);ar;){az=!1;if(ar.equals(am)){ar=null,az=!0}else{var L=ar.type==CKEDITOR.NODE_ELEMENT?ar.getName():null,ao=L&&"false"==ar.getAttribute("contentEditable"),S=L&&ar.getAttribute("data-nostyle");if(L&&ar.data("cke-bookmark")||ar.type===CKEDITOR.NODE_COMMENT){ar=ar.getNextSourceNode(!0);continue}if(ao&&ay&&CKEDITOR.dtd.$block[L]){for(var aw=ar,av=ag(aw),at=void 0,an=av.length,T=0,aw=an&&new CKEDITOR.dom.range(aw.getDocument());T<an;++T){var at=av[T],G=CKEDITOR.filter.instances[at.data("cke-filter")];if(G?G.check(this):1){aw.selectNodeContents(at),ak.call(this,aw)}}}av=L?!ax[L]||S?0:ao&&!ay?0:ai(ar,am,aB,i):1;if(av){if(at=ar.getParent(),av=aB,an=aC,T=aA,!at||!(at.getDtd()||CKEDITOR.dtd.span)[an]&&!T||av.parentRule&&!av.parentRule(at)){az=!0}else{if(aq||L&&CKEDITOR.dtd.$removeEmpty[L]&&(ar.getPosition(am)|i)!=i||(aq=aE.clone(),aq.setStartBefore(ar)),L=ar.type,L==CKEDITOR.NODE_TEXT||ao||L==CKEDITOR.NODE_ELEMENT&&!ar.getChildCount()){for(var L=ar,F;(az=!L.getNext(R))&&(F=L.getParent(),ax[F.getName()])&&ai(F,au,aB,j);){L=F}aq.setEndAfter(L)}}}else{az=!0}ar=ar.getNextSourceNode(S||ao)}if(az&&aq&&!aq.collapsed){for(var az=p(this,aD),ao=az.hasAttributes(),S=aq.getCommonAncestor(),L={},av={},at={},an={},d,f,b;az&&S;){if(S.getName()==aC){for(d in aB.attributes){!an[d]&&(b=S.getAttribute(f))&&(az.getAttribute(d)==b?av[d]=1:an[d]=1)}for(f in aB.styles){!at[f]&&(b=S.getStyle(f))&&(az.getStyle(f)==b?L[f]=1:at[f]=1)}}S=S.getParent()}for(d in av){az.removeAttribute(d)}for(f in L){az.removeStyle(f)}ao&&!az.hasAttributes()&&(az=null);az?(aq.extractContents().appendTo(az),aq.insertNode(az),P.call(this,az),az.mergeSiblings(),CKEDITOR.env.ie||az.$.normalize()):(az=new CKEDITOR.dom.element("span"),aq.extractContents().appendTo(az),aq.insertNode(az),P.call(this,az),az.remove(!0));aq=null}}aE.moveToBookmark(ap);aE.shrink(CKEDITOR.SHRINK_TEXT);aE.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function aj(F){function C(){for(var b=new CKEDITOR.dom.elementPath(A.getParent()),n=new CKEDITOR.dom.elementPath(t.getParent()),m=null,l=null,k=0;k<b.elements.length;k++){var d=b.elements[k];if(d==b.block||d==b.blockLimit){break}r.checkElementRemovable(d,!0)&&(m=d)}for(k=0;k<n.elements.length;k++){d=n.elements[k];if(d==n.block||d==n.blockLimit){break}r.checkElementRemovable(d,!0)&&(l=d)}l&&t.breakParent(l);m&&A.breakParent(m)}F.enlarge(CKEDITOR.ENLARGE_INLINE,1);var B=F.createBookmark(),A=B.startNode,z=this._.definition.alwaysRemoveElement;if(F.collapsed){for(var y=new CKEDITOR.dom.elementPath(A.getParent(),F.root),x,w=0,v;w<y.elements.length&&(v=y.elements[w])&&v!=y.block&&v!=y.blockLimit;w++){if(this.checkElementRemovable(v)){var u;!z&&F.collapsed&&(F.checkBoundaryOfElement(v,CKEDITOR.END)||(u=F.checkBoundaryOfElement(v,CKEDITOR.START)))?(x=v,x.match=u?"start":"end"):(v.mergeSiblings(),v.is(this.element)?s.call(this,v):U(v,E(this)[v.getName()]))}}if(x){z=A;for(w=0;;w++){v=y.elements[w];if(v.equals(x)){break}else{if(v.match){continue}else{v=v.clone()}}v.append(z);z=v}z["start"==x.match?"insertBefore":"insertAfter"](x)}}else{var t=B.endNode,r=this;C();for(y=A;!y.equals(t);){x=y.getNextSourceNode(),y.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(y)&&(y.getName()==this.element?s.call(this,y):U(y,E(this)[y.getName()]),x.type==CKEDITOR.NODE_ELEMENT&&x.contains(A)&&(C(),x=A.getNext())),y=x}}F.moveToBookmark(B);F.shrink(CKEDITOR.NODE_ELEMENT,!0)}function ag(d){var c=[];d.forEach(function(b){if("true"==b.getAttribute("contenteditable")){return c.push(b),!1}},CKEDITOR.NODE_ELEMENT,!0);return c}function ae(d){var c=d.getEnclosedNode()||d.getCommonAncestor(!1,!0);(d=(new CKEDITOR.dom.elementPath(c,d.root)).contains(this.element,1))&&!d.isReadOnly()&&D(d,this)}function ad(g){var f=g.getCommonAncestor(!0,!0);if(g=(new CKEDITOR.dom.elementPath(f,g.root)).contains(this.element,1)){var f=this._.definition,l=f.attributes;if(l){for(var k in l){g.removeAttribute(k,l[k])}}if(f.styles){for(var h in f.styles){f.styles.hasOwnProperty(h)&&g.removeStyle(h)}}}}function af(h){var g=h.createBookmark(!0),n=h.createIterator();n.enforceRealBlocks=!0;this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var m,l=h.document,k;m=n.getNextParagraph();){!m.isReadOnly()&&(n.activeFilter?n.activeFilter.check(this):1)&&(k=p(this,l,m),Q(m,k))}h.moveToBookmark(g)}function ac(g){var f=g.createBookmark(1),l=g.createIterator();l.enforceRealBlocks=!0;l.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var k,h;k=l.getNextParagraph();){this.checkElementRemovable(k)&&(k.is("pre")?((h=this._.enterMode==CKEDITOR.ENTER_BR?null:g.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&k.copyAttributes(h),Q(k,h)):s.call(this,k))}g.moveToBookmark(f)}function Q(l,e){var v=!e;v&&(e=l.getDocument().createElement("div"),l.copyAttributes(e));var u=e&&e.is("pre"),t=l.is("pre"),r=!u&&t;if(u&&!t){t=e;(r=l.getBogus())&&r.remove();r=l.getHtml();r=J(r,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");r=r.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");r=r.replace(/([ \t\n\r]+|&nbsp;)/g," ");r=r.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var n=l.getDocument().createElement("div");n.append(t);t.$.outerHTML="\x3cpre\x3e"+r+"\x3c/pre\x3e";t.copyAttributes(n.getFirst());t=n.getFirst().remove()}else{t.setHtml(r)}e=t}else{r?e=V(v?[l.getHtml()]:ah(l),e):l.moveChildren(e)}e.replace(l);if(u){var v=e,m;(m=v.getPrevious(N))&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("pre")&&(u=J(m.getHtml(),/\n$/,"")+"\n\n"+J(v.getHtml(),/^\n/,""),CKEDITOR.env.ie?v.$.outerHTML="\x3cpre\x3e"+u+"\x3c/pre\x3e":v.setHtml(u),m.remove())}else{v&&aa(e)}}function ah(d){var c=[];J(d.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(f,e,g){return e+"\x3c/pre\x3e"+g+"\x3cpre\x3e"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(b,e){c.push(e)});return c}function J(g,f,l){var k="",h="";g=g.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(e,d,m){d&&(k=d);m&&(h=m);return""});return k+g.replace(f,l)+h}function V(h,g){var n;1<h.length&&(n=new CKEDITOR.dom.documentFragment(g.getDocument()));for(var m=0;m<h.length;m++){var l=h[m],l=l.replace(/(\r\n|\r)/g,"\n"),l=J(l,/^[ \t]*\n/,""),l=J(l,/\n$/,""),l=J(l,/^[ \t]+|[ \t]+$/g,function(d,c){return 1==d.length?"\x26nbsp;":c?" "+CKEDITOR.tools.repeat("\x26nbsp;",d.length-1):CKEDITOR.tools.repeat("\x26nbsp;",d.length-1)+" "}),l=l.replace(/\n/g,"\x3cbr\x3e"),l=l.replace(/[ \t]{2,}/g,function(b){return CKEDITOR.tools.repeat("\x26nbsp;",b.length-1)+" "});if(n){var k=g.clone();k.setHtml(l);n.append(k)}else{g.setHtml(l)}}return n||g}function s(l,k){var v=this._.definition,u=v.attributes,v=v.styles,t=E(this)[l.getName()],r=CKEDITOR.tools.isEmpty(u)&&CKEDITOR.tools.isEmpty(v),n;for(n in u){if("class"!=n&&!this._.definition.fullMatch||l.getAttribute(n)==ab(n,u[n])){k&&"data-"==n.slice(0,5)||(r=l.hasAttribute(n),l.removeAttribute(n))}}for(var m in v){this._.definition.fullMatch&&l.getStyle(m)!=ab(m,v[m],!0)||(r=r||!!l.getStyle(m),l.removeStyle(m))}U(l,t,Z[l.getName()]);r&&(this._.definition.alwaysRemoveElement?aa(l,1):!CKEDITOR.dtd.$block[l.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!l.hasAttributes()?aa(l):l.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function P(h){for(var g=E(this),n=h.getElementsByTag(this.element),m,l=n.count();0<=--l;){m=n.getItem(l),m.isReadOnly()||s.call(this,m,!0)}for(var k in g){if(k!=this.element){for(n=h.getElementsByTag(k),l=n.count()-1;0<=l;l--){m=n.getItem(l),m.isReadOnly()||U(m,g[k])}}}}function U(k,h,t){if(h=h&&h.attributes){for(var r=0;r<h.length;r++){var n=h[r][0],m;if(m=k.getAttribute(n)){var l=h[r][1];(null===l||l.test&&l.test(m)||"string"==typeof l&&m==l)&&k.removeAttribute(n)}}}t||aa(k)}function aa(f,e){if(!f.hasAttributes()||e){if(CKEDITOR.dtd.$block[f.getName()]){var h=f.getPrevious(N),g=f.getNext(N);!h||h.type!=CKEDITOR.NODE_TEXT&&h.isBlockBoundary({br:1})||f.append("br",1);!g||g.type!=CKEDITOR.NODE_TEXT&&g.isBlockBoundary({br:1})||f.append("br");f.remove(!0)}else{h=f.getFirst(),g=f.getLast(),f.remove(!0),h&&(h.type==CKEDITOR.NODE_ELEMENT&&h.mergeSiblings(),g&&!h.equals(g)&&g.type==CKEDITOR.NODE_ELEMENT&&g.mergeSiblings())}}}function p(f,e,h){var g;g=f.element;"*"==g&&(g="span");g=new CKEDITOR.dom.element(g,e);h&&h.copyAttributes(g);g=D(g,f);e.getCustomData("doc_processing_style")&&g.hasAttribute("id")?g.removeAttribute("id"):e.setCustomData("doc_processing_style",1);return g}function D(g,f){var l=f._.definition,k=l.attributes,l=CKEDITOR.style.getStyleText(l);if(k){for(var h in k){g.setAttribute(h,k[h])}}l&&g.setAttribute("style",l);g.getDocument().removeCustomData("doc_processing_style");return g}function O(e,d){for(var f in e){e[f]=e[f].replace(W,function(b,g){return d[g]})}}function E(l){if(l._.overrides){return l._.overrides}var k=l._.overrides={},v=l._.definition.overrides;if(v){CKEDITOR.tools.isArray(v)||(v=[v]);for(var u=0;u<v.length;u++){var t=v[u],r,n;"string"==typeof t?r=t.toLowerCase():(r=t.element?t.element.toLowerCase():l.element,n=t.attributes);t=k[r]||(k[r]={});if(n){var t=t.attributes=t.attributes||[],m;for(m in n){t.push([m.toLowerCase(),n[m]])}}}}return k}function ab(f,e,h){var g=new CKEDITOR.dom.element("span");g[h?"setStyle":"setAttribute"](f,e);return g[h?"getStyle":"getAttribute"](f)}function Y(f,e){function h(d,c){return"font-family"==c.toLowerCase()?d.replace(/["']/g,""):d}"string"==typeof f&&(f=CKEDITOR.tools.parseCssText(f));"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0));for(var g in f){if(!(g in e)||h(e[g],g)!=h(f[g],g)&&"inherit"!=f[g]&&"inherit"!=e[g]){return !1}}return !0}function q(h,g,n){var m=h.getRanges();g=g?this.removeFromRange:this.applyToRange;for(var l,k=m.createIterator();l=k.getNextRange();){g.call(this,l,n)}h.selectRanges(m)}var Z={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},o={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},X=/\s*(?:;\s*|$)/,W=/#\((.+?)\)/g,R=CKEDITOR.dom.walker.bookmark(0,1),N=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,d){if("string"==typeof e.type){return new CKEDITOR.style.customHandlers[e.type](e)}var f=e.attributes;f&&f.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(f.style)),delete f.style);d&&(e=CKEDITOR.tools.clone(e),O(e.attributes,d),O(e.styles,d));f=this.element=e.element?"string"==typeof e.element?e.element.toLowerCase():e.element:"*";this.type=e.type||(Z[f]?CKEDITOR.STYLE_BLOCK:o[f]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:e}};CKEDITOR.style.prototype={apply:function(d){if(d instanceof CKEDITOR.dom.document){return q.call(this,d.getSelection())}if(this.checkApplicable(d.elementPath(),d)){var c=this._.enterMode;c||(this._.enterMode=d.activeEnterMode);q.call(this,d.getSelection(),0,d);this._.enterMode=c}},remove:function(d){if(d instanceof CKEDITOR.dom.document){return q.call(this,d.getSelection(),1)}if(this.checkApplicable(d.elementPath(),d)){var c=this._.enterMode;c||(this._.enterMode=d.activeEnterMode);q.call(this,d.getSelection(),1,d);this._.enterMode=c}},applyToRange:function(b){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?ak:this.type==CKEDITOR.STYLE_BLOCK?af:this.type==CKEDITOR.STYLE_OBJECT?ae:null;return this.applyToRange(b)},removeFromRange:function(b){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?aj:this.type==CKEDITOR.STYLE_BLOCK?ac:this.type==CKEDITOR.STYLE_OBJECT?ad:null;return this.removeFromRange(b)},applyToObject:function(b){D(b,this)},checkActive:function(h,g){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(h.block||h.blockLimit,!0,g);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var n=h.elements,m=0,l;m<n.length;m++){if(l=n[m],this.type!=CKEDITOR.STYLE_INLINE||l!=h.block&&l!=h.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var k=l.getName();if(!("string"==typeof this.element?k==this.element:k in this.element)){continue}}if(this.checkElementRemovable(l,!0,g)){return !0}}}}return !1},checkApplicable:function(e,d,f){d&&d instanceof CKEDITOR.filter&&(f=d);if(f&&!f.check(this)){return !1}switch(this.type){case CKEDITOR.STYLE_OBJECT:return !!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return !!e.blockLimit.getDtd()[this.element]}return !0},checkElementMatch:function(l,k){var v=this._.definition;if(!l||!v.ignoreReadonly&&l.isReadOnly()){return !1}var u=l.getName();if("string"==typeof this.element?u==this.element:u in this.element){if(!k&&!l.hasAttributes()){return !0}if(u=v._AC){v=u}else{var u={},t=0,r=v.attributes;if(r){for(var n in r){t++,u[n]=r[n]}}if(n=CKEDITOR.style.getStyleText(v)){u.style||t++,u.style=n}u._length=t;v=v._AC=u}if(v._length){for(var m in v){if("_length"!=m){if(u=l.getAttribute(m)||"","style"==m?Y(v[m],u):v[m]==u){if(!k){return !0}}else{if(k){return !1}}}}if(k){return !0}}else{return !0}}return !1},checkElementRemovable:function(g,f,l){if(this.checkElementMatch(g,f,l)){return !0}if(f=E(this)[g.getName()]){var k;if(!(f=f.attributes)){return !0}for(l=0;l<f.length;l++){if(k=f[l][0],k=g.getAttribute(k)){var h=f[l][1];if(null===h){return !0}if("string"==typeof h){if(k==h){return !0}}else{if(h.test(k)){return !0}}}}}return !1},buildPreview:function(h){var g=this._.definition,n=[],m=g.element;"bdo"==m&&(m="span");var n=["\x3c",m],l=g.attributes;if(l){for(var k in l){n.push(" ",k,'\x3d"',l[k],'"')}}(l=CKEDITOR.style.getStyleText(g))&&n.push(' style\x3d"',l,'"');n.push("\x3e",h||g.name,"\x3c/",m,"\x3e");return n.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(k){var h=k._ST;if(h){return h}var h=k.styles,t=k.attributes&&k.attributes.style||"",r="";t.length&&(t=t.replace(X,";"));for(var n in h){var m=h[n],l=(n+":"+m).replace(X,";");"inherit"==m?r+=l:t+=l}t.length&&(t=CKEDITOR.tools.normalizeCssText(t,!0));return k._ST=t+r};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(d){var c=function(b){this._={definition:b};this.setup&&this.setup(b)};c.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},d,!0);return this.customHandlers[d.type]=c};var i=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,j=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(b,c){this.requiredContent=this.allowedContent=this.style=b;CKEDITOR.tools.extend(this,c,!0)};CKEDITOR.styleCommand.prototype.exec=function(b){b.focus();this.state==CKEDITOR.TRISTATE_OFF?b.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&b.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(e,f,c){CKEDITOR.stylesSet.addExternal(e,f,"");CKEDITOR.stylesSet.load(e,c)};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,f){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(b){for(var j=0;j<c.length;j++){var i=c[j],g=i.style.checkActive(b.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;i.fn.call(this,g)}}));c.push({style:e,fn:f})},applyStyle:function(b){b.apply(this)},removeStyle:function(b){b.remove(this)},getStylesSet:function(f){if(this._.stylesDefinitions){f(this._.stylesDefinitions)}else{var g=this,e=g.config.stylesCombo_stylesSet||g.config.stylesSet;if(!1===e){f(null)}else{if(e instanceof Array){g._.stylesDefinitions=e,f(e)}else{e||(e="default");var e=e.split(":"),h=e[0];CKEDITOR.stylesSet.addExternal(h,e[1]?e.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(h,function(c){g._.stylesDefinitions=c[h];f(g._.stylesDefinitions)})}}}}});(function(){if(window.Promise){CKEDITOR.tools.promise=Promise}else{var b=CKEDITOR.getUrl("vendor/promise.js");if("function"===typeof window.define&&window.define.amd&&"function"===typeof window.require){return window.require([b],function(c){CKEDITOR.tools.promise=c})}CKEDITOR.scriptLoader.load(b,function(c){if(!c){return CKEDITOR.error("no-vendor-lib",{path:b})}if("undefined"!==typeof window.ES6Promise){return CKEDITOR.tools.promise=ES6Promise}})}})();(function(){function e(b,g,d){b.once("selectionCheck",function(h){if(!f){var i=h.data.getRanges()[0];d.equals(i)?h.cancel():g.equals(i)&&(c=!0)}},null,null,-1)}var f=!0,c=!1;CKEDITOR.dom.selection.setupEditorOptimization=function(b){b.on("selectionCheck",function(d){d.data&&!c&&d.data.optimizeInElementEnds();c=!1});b.on("contentDom",function(){var d=b.editable();d&&(d.attachListener(d,"keydown",function(g){this._.shiftPressed=g.data.$.shiftKey},this),d.attachListener(d,"keyup",function(g){this._.shiftPressed=g.data.$.shiftKey},this))})};CKEDITOR.dom.selection.prototype.optimizeInElementEnds=function(){var d=this.getRanges()[0],m=this.root.editor,j;if(this.root.editor._.shiftPressed||this.isFake||d.isCollapsed||d.startContainer.equals(d.endContainer)){j=!1}else{if(0===d.endOffset){j=!0}else{j=d.startContainer.type===CKEDITOR.NODE_TEXT;var i=d.endContainer.type===CKEDITOR.NODE_TEXT,l=j?d.startContainer.getLength():d.startContainer.getChildCount();j=d.startOffset===l||j^i}}j&&(j=d.clone(),d.shrink(CKEDITOR.SHRINK_TEXT,!1,{skipBogus:!CKEDITOR.env.webkit}),f=!1,e(m,d,j),d.select(),f=!0)}})();CKEDITOR.dom.comment=function(b,c){"string"==typeof b&&(b=(c?c.$:document).createComment(b));CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";(function(){var e={},f={},c;for(c in CKEDITOR.dtd.$blockLimit){c in CKEDITOR.dtd.$list||(e[c]=1)}for(c in CKEDITOR.dtd.$block){c in CKEDITOR.dtd.$blockLimit||c in CKEDITOR.dtd.$empty||(f[c]=1)}CKEDITOR.dom.elementPath=function(p,n){var j=null,i=null,m=[],d=p,r;n=n||p.getDocument().getBody();d||(d=n);do{if(d.type==CKEDITOR.NODE_ELEMENT){m.push(d);if(!this.lastElement&&(this.lastElement=d,d.is(CKEDITOR.dtd.$object)||"false"==d.getAttribute("contenteditable"))){continue}if(d.equals(n)){break}if(!i&&(r=d.getName(),"true"==d.getAttribute("contenteditable")?i=d:!j&&f[r]&&(j=d),e[r])){if(r=!j&&"div"==r){e:{r=d.getChildren();for(var o=0,q=r.count();o<q;o++){var s=r.getItem(o);if(s.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[s.getName()]){r=!0;break e}}r=!1}r=!r}r?j=d:i=d}}}while(d=d.getParent());i||(i=n);this.block=j;this.blockLimit=i;this.root=n;this.elements=m}})();CKEDITOR.dom.elementPath.prototype={compare:function(e){var f=this.elements;e=e&&e.elements;if(!e||f.length!=e.length){return !1}for(var c=0;c<f.length;c++){if(!f[c].equals(e[c])){return !1}}return !0},contains:function(g,m,e){var n=0,l;"string"==typeof g&&(l=function(c){return c.getName()==g});g instanceof CKEDITOR.dom.element?l=function(c){return c.equals(g)}:CKEDITOR.tools.isArray(g)?l=function(c){return -1<CKEDITOR.tools.indexOf(g,c.getName())}:"function"==typeof g?l=g:"object"==typeof g&&(l=function(c){return c.getName() in g});var j=this.elements,i=j.length;m&&(e?n+=1:--i);e&&(j=Array.prototype.slice.call(j,0),j.reverse());for(;n<i;n++){if(l(j[n])){return j[n]}}return null},isContextFor:function(b){var c;return b in CKEDITOR.dtd.$block?(c=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!c.getDtd()[b]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};CKEDITOR.dom.text=function(b,c){"string"==typeof b&&(b=(c?c.$:document).createTextNode(b));this.$=b};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(b){this.$.nodeValue=b},isEmpty:function(b){var c=this.getText();b&&(c=CKEDITOR.tools.trim(c));return !c||c===CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE},split:function(g){var k=this.$.parentNode,e=k.childNodes.length,l=this.getLength(),j=this.getDocument(),i=new CKEDITOR.dom.text(this.$.splitText(g),j);k.childNodes.length==e&&(g>=l?(i=j.createText(""),i.insertAfter(this)):(g=j.createText(""),g.insertAfter(i),g.remove()));return i},substring:function(b,c){return"number"!=typeof c?this.$.nodeValue.substr(b):this.$.nodeValue.substring(b,c)}});(function(){function b(f,o,n){var j=f.serializable,i=o[n?"endContainer":"startContainer"],m=n?"endOffset":"startOffset",e=j?o.document.getById(f.startNode):f.startNode;f=j?o.document.getById(f.endNode):f.endNode;i.equals(e.getPrevious())?(o.startOffset=o.startOffset-i.getLength()-f.getPrevious().getLength(),i=f.getNext()):i.equals(f.getPrevious())&&(o.startOffset-=i.getLength(),i=f.getNext());i.equals(e.getParent())&&o[m]++;i.equals(f.getParent())&&o[m]++;o[n?"endContainer":"startContainer"]=i;return o}CKEDITOR.dom.rangeList=function(d){if(d instanceof CKEDITOR.dom.rangeList){return d}d?d instanceof CKEDITOR.dom.range&&(d=[d]):d=[];return CKEDITOR.tools.extend(d,c)};var c={createIterator:function(){var e=this,i=CKEDITOR.dom.walker.bookmark(),g=[],f;return{getNextRange:function(j){f=void 0===f?0:f+1;var m=e[f];if(m&&1<e.length){if(!f){for(var d=e.length-1;0<=d;d--){g.unshift(e[d].createBookmark(!0))}}if(j){for(var h=0;e[f+h+1];){var n=m.document;j=0;d=n.getById(g[h].endNode);for(n=n.getById(g[h+1].startNode);;){d=d.getNextSourceNode(!1);if(n.equals(d)){j=1}else{if(i(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){continue}}break}if(!j){break}h++}}for(m.moveToBookmark(g.shift());h--;){d=e[++f],d.moveToBookmark(g.shift()),m.setEnd(d.endContainer,d.endOffset)}}return m}}},createBookmarks:function(e){for(var j=[],i,g=0;g<this.length;g++){j.push(i=this[g].createBookmark(e,!0));for(var f=g+1;f<this.length;f++){this[f]=b(i,this[f]),this[f]=b(i,this[f],!0)}}return j},createBookmarks2:function(e){for(var g=[],f=0;f<this.length;f++){g.push(this[f].createBookmark2(e))}return g},moveToBookmarks:function(d){for(var e=0;e<this.length;e++){this[e].moveToBookmark(d[e])}}}})();(function(){function r(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function o(h){var t=CKEDITOR.skin["ua_"+h],s=CKEDITOR.env;if(t){for(var t=t.split(",").sort(function(d,c){return d>c?-1:1}),l=0,k;l<t.length;l++){if(k=t[l],s.ie&&(k.replace(/^ie/,"")==s.version||s.quirks&&"iequirks"==k)&&(k="ie"),s[k]){h+="_"+t[l];break}}}return CKEDITOR.getUrl(r()+h+".css")}function q(d,c){j[d]||(CKEDITOR.document.appendStyleSheet(o(d)),j[d]=1);c&&c()}function p(d){var c=d.getById(i);c||(c=d.getHead().append("style"),c.setAttribute("id",i),c.setAttribute("type","text/css"));return c}function n(l,k,w){var v,u,t;if(CKEDITOR.env.webkit){for(k=k.split("}").slice(0,-1),u=0;u<k.length;u++){k[u]=k[u].split("{")}}for(var s=0;s<l.length;s++){if(CKEDITOR.env.webkit){for(u=0;u<k.length;u++){t=k[u][1];for(v=0;v<w.length;v++){t=t.replace(w[v][0],w[v][1])}l[s].$.sheet.addRule(k[u][0],t)}}else{t=k;for(v=0;v<w.length;v++){t=t.replace(w[v][0],w[v][1])}CKEDITOR.env.ie&&11>CKEDITOR.env.version?l[s].$.styleSheet.cssText+=t:l[s].$.innerHTML+=t}}}var j={};CKEDITOR.skin={path:r,loadPart:function(f,b){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(r()+"skin.js"),function(){q(f,b)}):q(f,b)},getPath:function(b){return CKEDITOR.getUrl(o(b))},icons:{},addIcon:function(g,f,k,h){g=g.toLowerCase();this.icons[g]||(this.icons[g]={path:f,offset:k||0,bgsize:h||"16px"})},getIconStyle:function(k,h,u,t,s){var l;k&&(k=k.toLowerCase(),h&&(l=this.icons[k+"-rtl"]),l||(l=this.icons[k]));k=u||l&&l.path||"";t=t||l&&l.offset;s=s||l&&l.bgsize||"16px";k&&(k=k.replace(/'/g,"\\'"));return k&&"background-image:url('"+CKEDITOR.getUrl(k)+"');background-position:0 "+t+"px;background-size:"+s+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(d){var c=p(CKEDITOR.document);return(this.setUiColor=function(b){this.uiColor=b;var k=CKEDITOR.skin.chameleon,g="",f="";"function"==typeof k&&(g=k(this,"editor"),f=k(this,"panel"));b=[[e,b]];n([c],g,b);n(m,f,b)}).call(this,d)}});var i="cke_ui_color",m=[],e=/\$color/g;CKEDITOR.on("instanceLoaded",function(d){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var c=d.editor;d=function(b){b=(b.data[0]||b.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!b.getById("cke_ui_color")){var f=p(b);m.push(f);c.on("destroy",function(){m=CKEDITOR.tools.array.filter(m,function(g){return f!==g})});(b=c.getUiColor())&&n([f],CKEDITOR.skin.chameleon(c,"panel"),[[e,b]])}};c.on("panelShow",d);c.on("menuShow",d);c.config.uiColor&&c.setUiColor(c.config.uiColor)}})})();(function(){if(CKEDITOR.env.webkit){CKEDITOR.env.hc=!1}else{var f=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);f.appendTo(CKEDITOR.document.getHead());try{var g=f.getComputedStyle("border-top-color"),e=f.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!g||g!=e)}catch(h){CKEDITOR.env.hc=!1}f.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(f=CKEDITOR._.pending){for(delete CKEDITOR._.pending,g=0;g<f.length;g++){CKEDITOR.editor.prototype.constructor.apply(f[g][0],f[g][1]),CKEDITOR.add(f[g][0])}}})();CKEDITOR.skin.name="moono-lisa";CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie8";CKEDITOR.skin.chameleon=function(){var c=function(){return function(g,k){for(var h=g.match(/[^#]./g),j=0;3>j;j++){var i=j,l;l=parseInt(h[j],16);l=("0"+(0>k?0|l*(1+k):0|l+(255-l)*k).toString(16)).slice(-2);h[i]=l}return"#"+h.join("")}}(),d={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(e,f){var b=c(e.uiColor,0.4),b={id:"."+e.id,defaultBorder:c(b,-0.2),toolbarElementsBorder:c(b,-0.25),defaultBackground:b,lightBackground:c(b,0.8),darkBackground:c(b,-0.15),ckeButtonOn:c(b,0.4),ckeResizer:c(b,-0.4),ckeColorauto:c(b,0.8),dialogBody:c(b,0.7),dialogTab:c(b,0.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:c(b,-0.6),menubuttonHover:c(b,0.1),menubuttonIcon:c(b,0.5),menubuttonIconHover:c(b,0.3)};return d[f].output(b).replace(/\[/g,"{").replace(/\]/g,"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var f=function(h){this._||(this._={});this._["default"]=this._.initValue=h["default"]||"";this._.required=h.required||!1;for(var k=[this._],l=1;l<arguments.length;l++){k.push(arguments[l])}k.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,k);return this._},g={build:function(h,k,l){return new CKEDITOR.ui.dialog.textInput(h,k,l)}},j={build:function(h,k,l){return new CKEDITOR.ui.dialog[k.type](h,k,l)}},i={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(h){this.setValue(this.getInitValue(),h)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},d=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(h,k){this._.domOnChangeRegistered||(h.on("load",function(){this.getInputElement().on("change",function(){h.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",k)}},!0),b=/^on([A-Z]\w+)/,e=function(h){for(var k in h){(b.test(k)||"title"==k||"type"==k)&&delete h[k]}return h},c=function(h){h=h.data.getKeystroke();h==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):h==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(h,k,n,l){if(!(4>arguments.length)){var o=f.call(this,k);o.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];var m={role:k.role||"presentation"};k.includeLabel&&(m["aria-labelledby"]=o.labelId);CKEDITOR.ui.dialog.uiElement.call(this,h,k,n,"div",null,m,function(){var q=[],p=k.required?" cke_required":"";"horizontal"!=k.labelLayout?q.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+p+'" ',' id\x3d"'+o.labelId+'"',o.inputId?' for\x3d"'+o.inputId+'"':"",(k.labelStyle?' style\x3d"'+k.labelStyle+'"':"")+"\x3e",k.label,"\x3c/label\x3e",'\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',k.controlStyle?' style\x3d"'+k.controlStyle+'"':"",' role\x3d"presentation"\x3e',l.call(this,h,k),"\x3c/div\x3e"):(p={type:"hbox",widths:k.widths,padding:0,children:[{type:"html",html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+p+'" id\x3d"'+o.labelId+'" for\x3d"'+o.inputId+'"'+(k.labelStyle?' style\x3d"'+k.labelStyle+'"':"")+"\x3e"+CKEDITOR.tools.htmlEncode(k.label)+"\x3c/label\x3e"},{type:"html",html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(k.controlStyle?' style\x3d"'+k.controlStyle+'"':"")+"\x3e"+l.call(this,h,k)+"\x3c/span\x3e"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(h,p,q));return q.join("")})}},textInput:function(k,l,p){if(!(3>arguments.length)){f.call(this,l);var n=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",q={"class":"cke_dialog_ui_input_"+l.type,id:n,type:l.type};l.validate&&(this.validate=l.validate);l.maxLength&&(q.maxlength=l.maxLength);l.size&&(q.size=l.size);l.inputStyle&&(q.style=l.inputStyle);var o=this,h=!1;k.on("load",function(){o.getInputElement().on("keydown",function(m){13==m.data.getKeystroke()&&(h=!0)});o.getInputElement().on("keyup",function(m){13==m.data.getKeystroke()&&h&&(k.getButton("ok")&&setTimeout(function(){k.getButton("ok").click()},0),h=!1);o.bidi&&c.call(o,m)},null,null,1000)});CKEDITOR.ui.dialog.labeledElement.call(this,k,l,p,function(){var m=['\x3cdiv class\x3d"cke_dialog_ui_input_',l.type,'" role\x3d"presentation"'];l.width&&m.push('style\x3d"width:'+l.width+'" ');m.push("\x3e\x3cinput ");q["aria-labelledby"]=this._.labelId;this._.required&&(q["aria-required"]=this._.required);for(var r in q){m.push(r+'\x3d"'+q[r]+'" ')}m.push(" /\x3e\x3c/div\x3e");return m.join("")})}},textarea:function(h,k,n){if(!(3>arguments.length)){f.call(this,k);var l=this,o=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",m={};k.validate&&(this.validate=k.validate);m.rows=k.rows||5;m.cols=k.cols||20;m["class"]="cke_dialog_ui_input_textarea "+(k["class"]||"");"undefined"!=typeof k.inputStyle&&(m.style=k.inputStyle);k.dir&&(m.dir=k.dir);if(l.bidi){h.on("load",function(){l.getInputElement().on("keyup",c)},l)}CKEDITOR.ui.dialog.labeledElement.call(this,h,k,n,function(){m["aria-labelledby"]=this._.labelId;this._.required&&(m["aria-required"]=this._.required);var q=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',o,'" '],p;for(p in m){q.push(p+'\x3d"'+CKEDITOR.tools.htmlEncode(m[p])+'" ')}q.push("\x3e",CKEDITOR.tools.htmlEncode(l._["default"]),"\x3c/textarea\x3e\x3c/div\x3e");return q.join("")})}},checkbox:function(h,k,m){if(!(3>arguments.length)){var l=f.call(this,k,{"default":!!k["default"]});k.validate&&(this.validate=k.validate);CKEDITOR.ui.dialog.uiElement.call(this,h,k,m,"span",null,null,function(){var q=CKEDITOR.tools.extend({},k,{id:k.id?k.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),o=[],p=CKEDITOR.tools.getNextId()+"_label",n={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":p};e(q);k["default"]&&(n.checked="checked");"undefined"!=typeof q.inputStyle&&(q.style=q.inputStyle);l.checkbox=new CKEDITOR.ui.dialog.uiElement(h,q,o,"input",null,n);o.push(' \x3clabel id\x3d"',p,'" for\x3d"',n.id,'"'+(k.labelStyle?' style\x3d"'+k.labelStyle+'"':"")+"\x3e",CKEDITOR.tools.htmlEncode(k.label),"\x3c/label\x3e");return o.join("")})}},radio:function(h,k,m){if(!(3>arguments.length)){f.call(this,k);this._["default"]||(this._["default"]=this._.initValue=k.items[0][1]);k.validate&&(this.validate=k.validate);var l=[],n=this;k.role="radiogroup";k.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,h,k,m,function(){for(var A=[],B=[],z=(k.id?k.id:CKEDITOR.tools.getNextId())+"_radio",x=0;x<k.items.length;x++){var w=k.items[x],y=void 0!==w[2]?w[2]:w[0],v=void 0!==w[1]?w[1]:w[0],t=CKEDITOR.tools.getNextId()+"_radio_input",s=t+"_label",t=CKEDITOR.tools.extend({},k,{id:t,title:null,type:null},!0),y=CKEDITOR.tools.extend({},t,{title:y},!0),o={type:"radio","class":"cke_dialog_ui_radio_input",name:z,value:v,"aria-labelledby":s},C=[];n._["default"]==v&&(o.checked="checked");e(t);e(y);"undefined"!=typeof t.inputStyle&&(t.style=t.inputStyle);t.keyboardFocusable=!0;l.push(new CKEDITOR.ui.dialog.uiElement(h,t,C,"input",null,o));C.push(" ");new CKEDITOR.ui.dialog.uiElement(h,y,C,"label",null,{id:s,"for":o.id},w[0]);A.push(C.join(""))}new CKEDITOR.ui.dialog.hbox(h,l,A,B);return B.join("")});this._.children=l}},button:function(h,k,n){if(arguments.length){"function"==typeof k&&(k=k(h.getParentEditor()));f.call(this,k,{disabled:k.disabled||!1});CKEDITOR.event.implementOn(this);var l=this;h.on("load",function(){var p=this.getElement();(function(){p.on("click",function(q){l.click();q.data.preventDefault()});p.on("keydown",function(q){q.data.getKeystroke() in {32:1}&&(l.click(),q.data.preventDefault())})})();p.unselectable()},this);var o=CKEDITOR.tools.extend({},k);delete o.style;var m=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,h,o,n,"a",null,{style:k.style,href:"javascript:void(0)",title:k.label,hidefocus:"true","class":k["class"],role:"button","aria-labelledby":m},'\x3cspan id\x3d"'+m+'" class\x3d"cke_dialog_ui_button"\x3e'+CKEDITOR.tools.htmlEncode(k.label)+"\x3c/span\x3e")}},select:function(h,k,m){if(!(3>arguments.length)){var l=f.call(this,k);k.validate&&(this.validate=k.validate);l.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,h,k,m,function(){var s=CKEDITOR.tools.extend({},k,{id:k.id?k.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),q=[],r=[],p={id:l.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};q.push('\x3cdiv class\x3d"cke_dialog_ui_input_',k.type,'" role\x3d"presentation"');k.width&&q.push('style\x3d"width:'+k.width+'" ');q.push("\x3e");void 0!==k.size&&(p.size=k.size);void 0!==k.multiple&&(p.multiple=k.multiple);e(s);for(var o=0,n;o<k.items.length&&(n=k.items[o]);o++){r.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==n[1]?n[1]:n[0]).replace(/"/g,"\x26quot;"),'" /\x3e ',CKEDITOR.tools.htmlEncode(n[0]))}"undefined"!=typeof s.inputStyle&&(s.style=s.inputStyle);l.select=new CKEDITOR.ui.dialog.uiElement(h,s,q,"select",null,p,r.join(""));q.push("\x3c/div\x3e");return q.join("")})}},file:function(h,k,m){if(!(3>arguments.length)){void 0===k["default"]&&(k["default"]="");var l=CKEDITOR.tools.extend(f.call(this,k),{definition:k,buttons:[]});k.validate&&(this.validate=k.validate);h.on("load",function(){CKEDITOR.document.getById(l.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,h,k,m,function(){l.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var n=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',l.frameId,'" title\x3d"',k.label,'" src\x3d"javascript:void('];n.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");n.push(')"\x3e\x3c/iframe\x3e');return n.join("")})}},fileButton:function(h,k,n){var l=this;if(!(3>arguments.length)){f.call(this,k);k.validate&&(this.validate=k.validate);var o=CKEDITOR.tools.extend({},k),m=o.onClick;o.className=(o.className?o.className+" ":"")+"cke_dialog_ui_button";o.onClick=function(q){var p=k["for"];q=m?m.call(this,q):!1;!1!==q&&("xhr"!==q&&h.getContentElement(p[0],p[1]).submit(),this.disable())};h.on("load",function(){h.getContentElement(k["for"][0],k["for"][1])._.buttons.push(l)});CKEDITOR.ui.dialog.button.call(this,h,o,n)}},html:function(){var h=/^\s*<[\w:]+\s+([^>]*)?>/,k=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,l=/\/$/;return function(r,t,s){if(!(3>arguments.length)){var n=[],q=t.html;"\x3c"!=q.charAt(0)&&(q="\x3cspan\x3e"+q+"\x3c/span\x3e");var p=t.focus;if(p){var o=this.focus;this.focus=function(){("function"==typeof p?p:o).call(this);this.fire("focus")};t.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,r,t,n,"span",null,null,"");n=n.join("").match(h);q=q.match(k)||["","",""];l.test(q[1])&&(q[1]=q[1].slice(0,-1),q[2]="/"+q[2]);s.push([q[1]," ",n[1]||"",q[2]].join(""))}}}(),fieldset:function(h,k,n,l,o){var m=o.label;this._={children:k};CKEDITOR.ui.dialog.uiElement.call(this,h,o,l,"fieldset",null,null,function(){var q=[];m&&q.push("\x3clegend"+(o.labelStyle?' style\x3d"'+o.labelStyle+'"':"")+"\x3e"+m+"\x3c/legend\x3e");for(var p=0;p<n.length;p++){q.push(n[p])}return q.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(h){var k=CKEDITOR.document.getById(this._.labelId);1>k.getChildCount()?(new CKEDITOR.dom.text(h,CKEDITOR.document)).appendTo(k):k.getChild(0).$.nodeValue=h;return this},getLabel:function(){var h=CKEDITOR.document.getById(this._.labelId);return !h||1>h.getChildCount()?"":h.getChild(0).getText()},eventProcessors:d},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var h=this.getElement();h&&h.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return !this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(h,k){this.on("click",function(){k.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var h=this.selectParentTab();setTimeout(function(){var k=h.getInputElement();k&&k.$.focus()},0)},select:function(){var h=this.selectParentTab();setTimeout(function(){var k=h.getInputElement();k&&(k.$.focus(),k.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(h){if(this.bidi){var k=h&&h.charAt(0);(k=""==k?"ltr":""==k?"rtl":null)&&(h=h.slice(1));this.setDirectionMarker(k)}h||(h="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var h=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&h){var k=this.getDirectionMarker();k&&(h=("ltr"==k?"":"")+h)}return h},setDirectionMarker:function(h){var k=this.getInputElement();h?k.setAttributes({dir:h,"data-cke-dir-marker":h}):this.getDirectionMarker()&&k.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},i,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(h,k,m){var l=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),n=this.getInputElement().$;l.$.text=h;l.$.value=void 0===k||null===k?h:k;void 0===m||null===m?CKEDITOR.env.ie?n.add(l.$):n.add(l.$,null):n.add(l.$,m);return this},remove:function(h){this.getInputElement().$.remove(h);return this},clear:function(){for(var h=this.getInputElement().$;0<h.length;){h.remove(0)}return this},keyboardFocusable:!0},i,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(h,k){this.getInputElement().$.checked=h;!k&&this.fire("change",{value:h})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(h,k){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version){return d.onChange.apply(this,arguments)}h.on("load",function(){var l=this._.checkbox.getElement();l.on("propertychange",function(m){m=m.data.$;"checked"==m.propertyName&&this.fire("change",{value:l.$.checked})},this)},this);this.on("change",k);return null}},keyboardFocusable:!0},i,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(h,k){for(var m=this._.children,l,n=0;n<m.length&&(l=m[n]);n++){l.getElement().$.checked=l.getValue()==h}!k&&this.fire("change",{value:h})},getValue:function(){for(var h=this._.children,k=0;k<h.length;k++){if(h[k].getElement().$.checked){return h[k].getValue()}}return null},accessKeyUp:function(){var h=this._.children,k;for(k=0;k<h.length;k++){if(h[k].getElement().$.checked){h[k].getElement().focus();return}}h[0].getElement().focus()},eventProcessors:{onChange:function(h,k){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version){return d.onChange.apply(this,arguments)}h.on("load",function(){for(var m=this._.children,l=this,n=0;n<m.length;n++){m[n].getElement().on("propertychange",function(o){o=o.data.$;"checked"==o.propertyName&&this.$.checked&&l.fire("change",{value:this.getAttribute("value")})})}},this);this.on("change",k);return null}}},i,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,i,{getInputElement:function(){var h=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<h.$.forms.length?new CKEDITOR.dom.element(h.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(h){var k=/^on([A-Z]\w+)/,m,l=function(p,o,r,q){p.on("formLoaded",function(){p.getInputElement().on(r,q,p)})},n;for(n in h){if(m=n.match(k)){this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,h[n]):l(this,this._.dialog,m[1].toLowerCase(),h[n])}}return this},reset:function(){function s(){q.$.open();var k="";o.size&&(k=o.size-(CKEDITOR.env.ie?7:0));var m=t.frameId+"_input";q.$.write(['\x3chtml dir\x3d"'+n+'" lang\x3d"'+l+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+n+'" lang\x3d"'+l+'" action\x3d"',CKEDITOR.tools.htmlEncode(o.action),'"\x3e\x3clabel id\x3d"',t.labelId,'" for\x3d"',m,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(o.label),'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',m,'" aria-labelledby\x3d"',t.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(o.id||"cke_upload"),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<k?k:""),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+p+");","window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction("+h+")}","\x3c/script\x3e"].join(""));q.$.close();for(k=0;k<r.length;k++){r[k].enable()}}var t=this._,q=CKEDITOR.document.getById(t.frameId).getFrameDocument(),o=t.definition,r=t.buttons,p=this.formLoadedNumber,h=this.formUnloadNumber,n=t.dialog._.editor.lang.dir,l=t.dialog._.editor.langCode;p||(p=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),h=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(p);CKEDITOR.tools.removeFunction(h)}));CKEDITOR.env.gecko?setTimeout(s,500):s()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(h,k){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",k)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",g);CKEDITOR.dialog.addUIElement("password",g);CKEDITOR.dialog.addUIElement("tel",g);CKEDITOR.dialog.addUIElement("textarea",j);CKEDITOR.dialog.addUIElement("checkbox",j);CKEDITOR.dialog.addUIElement("radio",j);CKEDITOR.dialog.addUIElement("button",j);CKEDITOR.dialog.addUIElement("select",j);CKEDITOR.dialog.addUIElement("file",j);CKEDITOR.dialog.addUIElement("fileButton",j);CKEDITOR.dialog.addUIElement("html",j);CKEDITOR.dialog.addUIElement("fieldset",{build:function(s,t,q){for(var o=t.children,r,p=[],m=[],n=0;n<o.length&&(r=o[n]);n++){var l=[];p.push(l);m.push(CKEDITOR.dialog._.uiElementBuilders[r.type].build(s,r,l))}return new CKEDITOR.ui.dialog[t.type](s,m,p,q,t)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;(function(){function t(u){u._.tabBarMode=!0;u._.tabs[u._.currentTabId][0].focus();u._.currentFocusIndex=-1}function af(){for(var x=this._.tabIdList.length,u=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+x,y=u-1;y>u-x;y--){if(this._.tabs[this._.tabIdList[y%x]][0].$.offsetHeight){return this._.tabIdList[y%x]}}return null}function f(){for(var x=this._.tabIdList.length,u=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),y=u+1;y<u+x;y++){if(this._.tabs[this._.tabIdList[y%x]][0].$.offsetHeight){return this._.tabIdList[y%x]}}return null}function s(x,u){for(var D=x.$.getElementsByTagName("input"),z=0,A=D.length;z<A;z++){var y=new CKEDITOR.dom.element(D[z]);"text"==y.getAttribute("type").toLowerCase()&&(u?(y.setAttribute("value",y.getCustomData("fake_value")||""),y.removeCustomData("fake_value")):(y.setCustomData("fake_value",y.getAttribute("value")),y.setAttribute("value","")))}}function e(x,u){var y=this.getInputElement();y&&(x?y.removeAttribute("aria-invalid"):y.setAttribute("aria-invalid",!0));x||(this.select?this.select():this.focus());u&&alert(u);this.fire("validated",{valid:x,msg:u})}function d(){var u=this.getInputElement();u&&u.removeAttribute("aria-invalid")}function c(x){var u=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",b).output({id:CKEDITOR.tools.getNextNumber(),editorId:x.id,langDir:x.lang.dir,langCode:x.langCode,editorDialogClass:"cke_editor_"+x.name.replace(/\./g,"\\.")+"_dialog",closeTitle:x.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),A=u.getChild([0,0,0,0,0]),y=A.getChild(0),z=A.getChild(1);x.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(A);!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(x="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+x+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(A.getParent()));y.unselectable();z.unselectable();return{element:u,parts:{dialog:u.getChild(0),title:y,close:z,tabs:A.getChild(2),contents:A.getChild([3,0,0,0]),footer:A.getChild([3,0,1,0])}}}function r(x,u,y){this.element=u;this.focusIndex=y;this.tabIndex=0;this.isFocusable=function(){return !u.getAttribute("disabled")&&u.isVisible()};this.focus=function(){x._.currentFocusIndex=this.focusIndex;this.element.focus()};u.on("keydown",function(z){z.data.getKeystroke() in {32:1,13:1}&&this.fire("click")});u.on("focus",function(){this.fire("mouseover")});u.on("blur",function(){this.fire("mouseout")})}function ai(x){function u(){x.layout()}var y=CKEDITOR.document.getWindow();y.on("resize",u);x.on("hide",function(){y.removeListener("resize",u)})}function q(x,u){this.dialog=x;for(var A=u.contents,y=0,z;z=A[y];y++){A[y]=z&&new p(x,z)}CKEDITOR.tools.extend(this,u)}function p(x,u){this._={dialog:x};CKEDITOR.tools.extend(this,u)}function l(x){function u(H){var N=x.getSize(),J=x.parts.dialog.getParent().getClientSize(),L=H.data.$.screenX,I=H.data.$.screenY,K=L-D.x,M=I-D.y;D={x:L,y:I};F.x+=K;F.y+=M;L=F.x+y[3]<z?-y[3]:F.x-y[1]>J.width-N.width-z?J.width-N.width+("rtl"==A.lang.dir?0:y[1]):F.x;N=F.y+y[0]<z?-y[0]:F.y-y[2]>J.height-N.height-z?J.height-N.height+y[2]:F.y;L=Math.floor(L);N=Math.floor(N);x.move(L,N,1);H.data.preventDefault()}function G(){CKEDITOR.document.removeListener("mousemove",u);CKEDITOR.document.removeListener("mouseup",G);if(CKEDITOR.env.ie6Compat){var H=ad.getChild(0).getFrameDocument();H.removeListener("mousemove",u);H.removeListener("mouseup",G)}}var D=null,F=null,A=x.getParentEditor(),z=A.config.dialog_magnetDistance,y=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof z&&(z=20);x.parts.title.on("mousedown",function(H){if(!x._.moved){var I=x._.element;I.getFirst().setStyle("position","absolute");I.removeStyle("display");x._.moved=!0;x.layout()}D={x:H.data.$.screenX,y:H.data.$.screenY};CKEDITOR.document.on("mousemove",u);CKEDITOR.document.on("mouseup",G);F=x.getPosition();CKEDITOR.env.ie6Compat&&(I=ad.getChild(0).getFrameDocument(),I.on("mousemove",u),I.on("mouseup",G));H.data.preventDefault()},x)}function ag(L){function K(M){var T="rtl"==G.lang.dir,R=A.width,O=A.height,N=R+(M.data.$.screenX-y.x)*(T?-1:1)*(L._.moved?1:2),S=O+(M.data.$.screenY-y.y)*(L._.moved?1:2),Q=L._.element.getFirst(),Q=T&&parseInt(Q.getComputedStyle("right"),10),P=L.getPosition();P.x=P.x||0;P.y=P.y||0;P.y+S>x.height&&(S=x.height-P.y);(T?Q:P.x)+N>x.width&&(N=x.width-(T?Q:P.x));S=Math.floor(S);N=Math.floor(N);if(I==CKEDITOR.DIALOG_RESIZE_WIDTH||I==CKEDITOR.DIALOG_RESIZE_BOTH){R=Math.max(H.minWidth||0,N-F)}if(I==CKEDITOR.DIALOG_RESIZE_HEIGHT||I==CKEDITOR.DIALOG_RESIZE_BOTH){O=Math.max(H.minHeight||0,S-D)}L.resize(R,O);L._.moved&&o(L,L._.position.x,L._.position.y);L._.moved||L.layout();M.data.preventDefault()}function J(){CKEDITOR.document.removeListener("mouseup",J);CKEDITOR.document.removeListener("mousemove",K);u&&(u.remove(),u=null);if(CKEDITOR.env.ie6Compat){var M=ad.getChild(0).getFrameDocument();M.removeListener("mouseup",J);M.removeListener("mousemove",K)}}var H=L.definition,I=H.resizable;if(I!=CKEDITOR.DIALOG_RESIZE_NONE){var G=L.getParentEditor(),F,D,x,y,A,u,z=CKEDITOR.tools.addFunction(function(Q){function P(R){return R.isVisible()}A=L.getSize();var O=L.parts.contents,N=O.$.getElementsByTagName("iframe").length,M=!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks);N&&(u=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%; left:0; top:0;"\x3e\x3c/div\x3e'),O.append(u));D=A.height-L.parts.contents.getFirst(P).getSize("height",M);F=A.width-L.parts.contents.getFirst(P).getSize("width",1);y={x:Q.screenX,y:Q.screenY};x=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",K);CKEDITOR.document.on("mouseup",J);CKEDITOR.env.ie6Compat&&(O=ad.getChild(0).getFrameDocument(),O.on("mousemove",K),O.on("mouseup",J));Q.preventDefault&&Q.preventDefault()});L.on("load",function(){var M="";I==CKEDITOR.DIALOG_RESIZE_WIDTH?M=" cke_resizer_horizontal":I==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(M=" cke_resizer_vertical");M=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+M+" cke_resizer_"+G.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(G.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+z+', event )"\x3e'+("ltr"==G.lang.dir?"◢":"◣")+"\x3c/div\x3e");L.parts.footer.append(M,1)});G.on("destroy",function(){CKEDITOR.tools.removeFunction(z)})}}function o(x,u,F){var A=x.parts.dialog.getParent().getClientSize(),D=x.getSize(),z=x._.viewportRatio,y=Math.max(A.width-D.width,0),A=Math.max(A.height-D.height,0);z.width=y?u/y:z.width;z.height=A?F/A:z.height;x._.viewportRatio=z}function w(u){u.data.preventDefault(1)}function m(x){var u=x.config,D=CKEDITOR.skinName||x.config.skin,z=u.dialog_backgroundCoverColor||("moono-lisa"==D?"black":"white"),D=u.dialog_backgroundCoverOpacity,A=u.baseFloatZIndex,u=CKEDITOR.tools.genKey(z,D,A),y=ae[u];CKEDITOR.document.getBody().addClass("cke_dialog_open");y?y.show():(A=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",A,"; top: 0px; left: 0px; ","; width: 100%; height: 100%;",CKEDITOR.env.ie6Compat?"":"background-color: "+z,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(z="\x3chtml\x3e\x3cbody style\x3d\\'background-color:"+z+";\\'\x3e\x3c/body\x3e\x3c/html\x3e",A.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),A.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+z+"' );document.close();")+"})())"),A.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),A.push("\x3c/div\x3e"),y=CKEDITOR.dom.element.createFromHtml(A.join("")),y.setOpacity(void 0!==D?D:0.5),y.on("keydown",w),y.on("keypress",w),y.on("keyup",w),y.appendTo(CKEDITOR.document.getBody()),ae[u]=y);x.focusManager.add(y);ad=y;CKEDITOR.env.mac&&CKEDITOR.env.webkit||y.focus()}function k(u){CKEDITOR.document.getBody().removeClass("cke_dialog_open");ad&&(u.focusManager.remove(ad),ad.hide())}function j(x){var u=x.data.$.ctrlKey||x.data.$.metaKey,A=x.data.$.altKey,y=x.data.$.shiftKey,z=String.fromCharCode(x.data.$.keyCode);(u=B[(u?"CTRL+":"")+(A?"ALT+":"")+(y?"SHIFT+":"")+z])&&u.length&&(u=u[u.length-1],u.keydown&&u.keydown.call(u.uiElement,u.dialog,u.key),x.data.preventDefault())}function i(x){var u=x.data.$.ctrlKey||x.data.$.metaKey,A=x.data.$.altKey,y=x.data.$.shiftKey,z=String.fromCharCode(x.data.$.keyCode);(u=B[(u?"CTRL+":"")+(A?"ALT+":"")+(y?"SHIFT+":"")+z])&&u.length&&(u=u[u.length-1],u.keyup&&(u.keyup.call(u.uiElement,u.dialog,u.key),x.data.preventDefault()))}function h(x,u,A,y,z){(B[A]||(B[A]=[])).push({uiElement:x,dialog:u,key:A,keyup:z||x.accessKeyUp,keydown:y||x.accessKeyDown})}function aj(x){for(var u in B){for(var z=B[u],y=z.length-1;0<=y;y--){z[y].dialog!=x&&z[y].uiElement!=x||z.splice(y,1)}0===z.length&&delete B[u]}}function n(x,u){x._.accessKeyMap[u]&&x.selectPage(x._.accessKeyMap[u])}function ah(){}var v=CKEDITOR.tools.cssLength,g,ad,ac=!CKEDITOR.env.ie||CKEDITOR.env.edge,b='\x3cdiv class\x3d"cke_reset_all cke_dialog_container {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" style\x3d"'+(ac?"display:flex":"")+'" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"'+(ac?"margin:auto":"position:absolute")+'" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';CKEDITOR.dialog=function(O,N){function M(){var R=A._.focusList;R.sort(function(U,T){return U.tabIndex!=T.tabIndex?T.tabIndex-U.tabIndex:U.focusIndex-T.focusIndex});for(var Q=R.length,S=0;S<Q;S++){R[S].focusIndex=S}}function K(R){var Q=A._.focusList;R=R||0;if(!(1>Q.length)){var V=A._.currentFocusIndex;A._.tabBarMode&&0>R&&(V=0);try{Q[V].getInputElement().$.blur()}catch(U){}var T=V,S=1<A._.pageCount;do{T+=R;if(S&&!A._.tabBarMode&&(T==Q.length||-1==T)){A._.tabBarMode=!0;A._.tabs[A._.currentTabId][0].focus();A._.currentFocusIndex=-1;return}T=(T+Q.length)%Q.length;if(T==V){break}}while(R&&!Q[T].isFocusable());Q[T].focus();"text"==Q[T].type&&Q[T].select()}}function L(Q){if(A==CKEDITOR.dialog._.currentTop){var T=Q.data.getKeystroke(),S="rtl"==O.lang.dir,R=[37,38,39,40];x=F=0;if(9==T||T==CKEDITOR.SHIFT+9){K(T==CKEDITOR.SHIFT+9?-1:1),x=1}else{if(T==CKEDITOR.ALT+121&&!A._.tabBarMode&&1<A.getPageCount()){t(A),x=1}else{if(-1!=CKEDITOR.tools.indexOf(R,T)&&A._.tabBarMode){T=-1!=CKEDITOR.tools.indexOf([S?39:37,38],T)?af.call(A):f.call(A),A.selectPage(T),A._.tabs[T][0].focus(),x=1}else{if(13!=T&&32!=T||!A._.tabBarMode){if(13==T){T=Q.data.getTarget(),T.is("a","button","select","textarea")||T.is("input")&&"button"==T.$.type||((T=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(T.click,0,T),x=1),F=1}else{if(27==T){(T=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(T.click,0,T):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),F=1}else{return}}}else{this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,K(1),x=1}}}}J(Q)}}function J(Q){x?Q.data.preventDefault(1):F&&Q.data.stopPropagation()}var I=CKEDITOR.dialog._.dialogDefinitions[N],H=CKEDITOR.tools.clone(g),z=O.config.dialog_buttonsOrder||"OS",D=O.lang.dir,G={},x,F;("OS"==z&&CKEDITOR.env.mac||"rtl"==z&&"ltr"==D||"ltr"==z&&"rtl"==D)&&H.buttons.reverse();I=CKEDITOR.tools.extend(I(O),H);I=CKEDITOR.tools.clone(I);I=new q(this,I);H=c(O);this._={editor:O,element:H.element,name:N,model:null,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},viewportRatio:{width:0.5,height:0.5},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=H.parts;CKEDITOR.tools.setTimeout(function(){O.fire("ariaWidget",this.parts.contents)},0,this);H={top:0,visibility:"hidden"};CKEDITOR.env.ie6Compat&&(H.position="absolute");H["rtl"==D?"right":"left"]=0;this.parts.dialog.setStyles(H);CKEDITOR.event.call(this);this.definition=I=CKEDITOR.fire("dialogDefinition",{name:N,definition:I,dialog:this},O).definition;if(!("removeDialogTabs" in O._)&&O.config.removeDialogTabs){H=O.config.removeDialogTabs.split(";");for(D=0;D<H.length;D++){if(z=H[D].split(":"),2==z.length){var u=z[0];G[u]||(G[u]=[]);G[u].push(z[1])}}O._.removeDialogTabs=G}if(O._.removeDialogTabs&&(G=O._.removeDialogTabs[N])){for(D=0;D<G.length;D++){I.removeContents(G[D])}}if(I.onLoad){this.on("load",I.onLoad)}if(I.onShow){this.on("show",I.onShow)}if(I.onHide){this.on("hide",I.onHide)}if(I.onOk){this.on("ok",function(Q){O.fire("saveSnapshot");setTimeout(function(){O.fire("saveSnapshot")},0);!1===I.onOk.call(this,Q)&&(Q.data.hide=!1)})}this.state=CKEDITOR.DIALOG_STATE_IDLE;if(I.onCancel){this.on("cancel",function(Q){!1===I.onCancel.call(this,Q)&&(Q.data.hide=!1)})}var A=this,P=function(R){var Q=A._.contents,U=!1,T;for(T in Q){for(var S in Q[T]){if(U=R.call(this,Q[T][S])){return}}}};this.on("ok",function(Q){P(function(R){if(R.validate){var T=R.validate(this),S="string"==typeof T||!1===T;S&&(Q.data.hide=!1,Q.stop());e.call(R,!S,"string"==typeof T?T:void 0);return S}})},this,null,0);this.on("cancel",function(Q){P(function(R){if(R.isChanged()){return O.config.dialog_noConfirmCancel||confirm(O.lang.common.confirmCancel)||(Q.data.hide=!1),!0}})},this,null,0);this.parts.close.on("click",function(Q){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();Q.data.preventDefault()},this);this.changeFocus=K;var y=this._.element;O.focusManager.add(y,1);this.on("show",function(){y.on("keydown",L,this);if(CKEDITOR.env.gecko){y.on("keypress",J,this)}});this.on("hide",function(){y.removeListener("keydown",L);CKEDITOR.env.gecko&&y.removeListener("keypress",J);P(function(Q){d.apply(Q)})});this.on("iframeAdded",function(Q){(new CKEDITOR.dom.document(Q.data.iframe.$.contentWindow.document)).on("keydown",L,this,null,0)});this.on("show",function(){M();var Q=1<A._.pageCount;O.config.dialog_startupFocusTab&&Q?(A._.tabBarMode=!0,A._.tabs[A._.currentTabId][0].focus(),A._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=Q?-1:this._.focusList.length-1,I.onFocus?(Q=I.onFocus.call(this))&&Q.focus():K(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat){this.on("load",function(){var R=this.getElement(),Q=R.getFirst();Q.remove();Q.appendTo(R)},this)}l(this);ag(this);(new CKEDITOR.dom.text(I.title,CKEDITOR.document)).appendTo(this.parts.title);for(D=0;D<I.contents.length;D++){(G=I.contents[D])&&this.addPage(G)}this.parts.tabs.on("click",function(R){var Q=R.data.getTarget();Q.hasClass("cke_dialog_tab")&&(Q=Q.$.id,this.selectPage(Q.substring(4,Q.lastIndexOf("_"))),t(this),R.data.preventDefault())},this);D=[];G=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:I.buttons},D).getChild();this.parts.footer.setHtml(D.join(""));for(D=0;D<G.length;D++){this._.buttons[G[D].id]=G[D]}};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(x,u){if(!this._.contentSize||this._.contentSize.width!=x||this._.contentSize.height!=u){CKEDITOR.dialog.fire("resize",{dialog:this,width:x,height:u},this._.editor);this.fire("resize",{width:x,height:u},this._.editor);this.parts.contents.setStyles({width:x+"px",height:u+"px"});if("rtl"==this._.editor.lang.dir&&this._.position){var y=this.parts.dialog.getParent().getClientSize().width;this._.position.x=y-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)}this._.contentSize={width:x,height:u}}},getSize:function(){var u=this._.element.getFirst();return{width:u.$.offsetWidth||0,height:u.$.offsetHeight||0}},move:function(H,G,F){var A=this._.element.getFirst(),D="rtl"==this._.editor.lang.dir;CKEDITOR.env.ie&&A.setStyle("zoom","100%");var z=this.parts.dialog.getParent().getClientSize(),y=this.getSize(),x=this._.viewportRatio,u=Math.max(z.width-y.width,0),z=Math.max(z.height-y.height,0);this._.position&&this._.position.x==H&&this._.position.y==G?(H=Math.floor(u*x.width),G=Math.floor(z*x.height)):o(this,H,G);this._.position={x:H,y:G};D&&(H=u-H);G={top:(0<G?G:0)+"px"};G[D?"right":"left"]=(0<H?H:0)+"px";A.setStyles(G);F&&(this._.moved=1)},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var x=this._.element,u=this.definition,G=CKEDITOR.document.getBody(),D=this._.editor.config.baseFloatZIndex;x.getParent()&&x.getParent().equals(G)?x.setStyle("display",ac?"flex":"block"):x.appendTo(G);this.resize(this._.contentSize&&this._.contentSize.width||u.width||u.minWidth,this._.contentSize&&this._.contentSize.height||u.height||u.minHeight);this.reset();null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=D);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);this.getElement().setStyle("z-index",CKEDITOR.dialog._.currentZIndex);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,m(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,G=this._.parentDialog.getElement().getFirst(),G.$.style.zIndex-=Math.floor(D/2),this._.parentDialog.getElement().setStyle("z-index",G.$.style.zIndex),CKEDITOR.dialog._.currentTop=this);x.on("keydown",j);x.on("keyup",i);this._.hasFocus=!1;for(var F in u.contents){if(u.contents[F]){var x=u.contents[F],D=this._.tabs[x.id],G=x.requiredContent,A=0;if(D){for(var z in this._.contents[x.id]){var y=this._.contents[x.id][z];"hbox"!=y.type&&"vbox"!=y.type&&y.getInputElement()&&(y.requiredContent&&!this._.editor.activeFilter.check(y.requiredContent)?y.disable():(y.enable(),A++))}!A||G&&!this._.editor.activeFilter.check(G)?D[0].addClass("cke_dialog_tab_disabled"):D[0].removeClass("cke_dialog_tab_disabled")}}}CKEDITOR.tools.setTimeout(function(){this.layout();ai(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(H){H.setInitValue&&H.setInitValue()})},100,this)},layout:function(){var x=this.parts.dialog;if(this._.moved||!ac){var u=this.getSize(),z=CKEDITOR.document.getWindow().getViewPaneSize(),y;this._.moved&&this._.position?(y=this._.position.x,u=this._.position.y):(y=(z.width-u.width)/2,u=(z.height-u.height)/2);CKEDITOR.env.ie6Compat||(x.setStyle("position","absolute"),x.removeStyle("margin"));y=Math.floor(y);u=Math.floor(u);this.move(y,u)}},foreach:function(x){for(var u in this._.contents){for(var y in this._.contents[u]){x.call(this,this._.contents[u][y])}}return this},reset:function(){var u=function(x){x.reset&&x.reset(1)};return function(){this.foreach(u);return this}}(),setupContent:function(){var u=arguments;this.foreach(function(x){x.setup&&x.setup.apply(x,u)})},commitContent:function(){var u=arguments;this.foreach(function(x){CKEDITOR.env.ie&&this._.currentFocusIndex==x.focusIndex&&x.getInputElement().$.blur();x.commit&&x.commit.apply(x,u)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var x=this._.element;x.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(aj(this);CKEDITOR.dialog._.currentTop!=this;){CKEDITOR.dialog._.currentTop.hide()}if(this._.parentDialog){var u=this._.parentDialog.getElement().getFirst();this._.parentDialog.getElement().removeStyle("z-index");u.setStyle("z-index",parseInt(u.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else{k(this._.editor)}if(CKEDITOR.dialog._.currentTop=this._.parentDialog){CKEDITOR.dialog._.currentZIndex-=10}else{CKEDITOR.dialog._.currentZIndex=null;x.removeListener("keydown",j);x.removeListener("keyup",i);var y=this._.editor;y.focus();setTimeout(function(){y.focusManager.unlock();CKEDITOR.env.iOS&&y.window.focus()},0)}delete this._.parentDialog;this.foreach(function(z){z.resetInitValue&&z.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(x){if(!x.requiredContent||this._.editor.filter.check(x.requiredContent)){for(var u=[],F=x.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(x.label)+'"':"",A=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:x.elements,expand:!!x.expand,padding:x.padding,style:x.style||"width: 100%;"},u),D=this._.contents[x.id]={},z=A.getChild(),y=0;A=z.shift();){A.notAllowed||"hbox"==A.type||"vbox"==A.type||y++,D[A.id]=A,"function"==typeof A.getChild&&z.push.apply(z,A.getChild())}y||(x.hidden=!0);u=CKEDITOR.dom.element.createFromHtml(u.join(""));u.setAttribute("role","tabpanel");u.setStyle("min-height","100%");A=CKEDITOR.env;D="cke_"+x.id+"_"+CKEDITOR.tools.getNextNumber();F=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",F,x.hidden?' style\x3d"display:none"':"",' id\x3d"',D,'"',A.gecko&&!A.hc?"":' href\x3d"javascript:void(0)"',' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',x.label,"\x3c/a\x3e"].join(""));u.setAttribute("aria-labelledby",D);this._.tabs[x.id]=[F,u];this._.tabIdList.push(x.id);!x.hidden&&this._.pageCount++;this._.lastTab=F;this.updateStyle();u.setAttribute("name",x.id);u.appendTo(this.parts.contents);F.unselectable();this.parts.tabs.append(F);x.accessKey&&(h(this,this,"CTRL+"+x.accessKey,ah,n),this._.accessKeyMap["CTRL+"+x.accessKey]=x.id)}},selectPage:function(x){if(this._.currentTabId!=x&&!this._.tabs[x][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:x,currentPage:this._.currentTabId})){for(var u in this._.tabs){var A=this._.tabs[u][0],y=this._.tabs[u][1];u!=x&&(A.removeClass("cke_dialog_tab_selected"),A.removeAttribute("aria-selected"),y.hide());y.setAttribute("aria-hidden",u!=x)}var z=this._.tabs[x];z[0].addClass("cke_dialog_tab_selected");z[0].setAttribute("aria-selected",!0);CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(s(z[1]),z[1].show(),setTimeout(function(){s(z[1],1)},0)):z[1].show();this._.currentTabId=x;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,x)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(x){var u=this._.tabs[x]&&this._.tabs[x][0];u&&1!=this._.pageCount&&u.isVisible()&&(x==this._.currentTabId&&this.selectPage(af.call(this)),u.hide(),this._.pageCount--,this.updateStyle())},showPage:function(u){if(u=this._.tabs[u]&&this._.tabs[u][0]){u.show(),this._.pageCount++,this.updateStyle()}},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(x,u){var y=this._.contents[x];return y&&y[u]},getValueOf:function(x,u){return this.getContentElement(x,u).getValue()},setValueOf:function(x,u,y){return this.getContentElement(x,u).setValue(y)},getButton:function(u){return this._.buttons[u]},click:function(u){return this._.buttons[u].click()},disableButton:function(u){return this._.buttons[u].disable()},enableButton:function(u){return this._.buttons[u].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(x,u){if("undefined"==typeof u){u=this._.focusList.length,this._.focusList.push(new r(this,x,u))}else{this._.focusList.splice(u,0,new r(this,x,u));for(var y=u+1;y<this._.focusList.length;y++){this._.focusList[y].focusIndex++}}},setState:function(x){if(this.state!=x){this.state=x;if(x==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var u=this.getParentEditor().lang.dir,y={attributes:{"class":"cke_dialog_spinner"},styles:{"float":"rtl"==u?"right":"left"}};y.styles["margin-"+("rtl"==u?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",y);this.parts.spinner.setHtml("\x26#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else{x==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable())}this.fire("state",x)}},getModel:function(u){return this._.model?this._.model:this.definition.getModel?this.definition.getModel(u):null},setModel:function(u){this._.model=u},getMode:function(u){if(this.definition.getMode){return this.definition.getMode(u)}u=this.getModel(u);return !u||u instanceof CKEDITOR.dom.element&&!u.getParent()?CKEDITOR.dialog.CREATION_MODE:CKEDITOR.dialog.EDITING_MODE}};CKEDITOR.tools.extend(CKEDITOR.dialog,{CREATION_MODE:0,EDITING_MODE:1,add:function(x,u){this._.dialogDefinitions[x]&&"function"!=typeof u||(this._.dialogDefinitions[x]=u)},exists:function(u){return !!this._.dialogDefinitions[u]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(x,u,y){x=x.config.removeDialogTabs;return !(x&&x.match(new RegExp("(?:^|;)"+u+":"+y+"(?:$|;)","i")))},okButton:function(){var u=function(x,y){y=y||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:x.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(z){z=z.data.dialog;!1!==z.fire("ok",{hide:!0}).hide&&z.hide()}},y,!0)};u.type="button";u.override=function(x){return CKEDITOR.tools.extend(function(y){return u(y,x)},{type:"button"},!0)};return u}(),cancelButton:function(){var u=function(x,y){y=y||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:x.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(z){z=z.data.dialog;!1!==z.fire("cancel",{hide:!0}).hide&&z.hide()}},y,!0)};u.type="button";u.override=function(x){return CKEDITOR.tools.extend(function(y){return u(y,x)},{type:"button"},!0)};return u}(),addUIElement:function(x,u){this._.uiElementBuilders[x]=u}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);g={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]};var ab=function(x,u,A){for(var y=0,z;z=x[y];y++){if(z.id==u||A&&z[A]&&(z=ab(z[A],u,A))){return z}}return null},E=function(x,u,F,A,D){if(F){for(var z=0,y;y=x[z];z++){if(y.id==F){return x.splice(z,0,u),u}if(A&&y[A]&&(y=E(y[A],u,F,A,!0))){return y}}if(D){return null}}x.push(u);return u},C=function(x,u,A){for(var y=0,z;z=x[y];y++){if(z.id==u){return x.splice(y,1)}if(A&&z[A]&&(z=C(z[A],u,A))){return z}}return null};q.prototype={getContents:function(u){return ab(this.contents,u)},getButton:function(u){return ab(this.buttons,u)},addContents:function(x,u){return E(this.contents,x,u)},addButton:function(x,u){return E(this.buttons,x,u)},removeContents:function(u){C(this.contents,u)},removeButton:function(u){C(this.buttons,u)}};p.prototype={get:function(u){return ab(this.elements,u,"children")},add:function(x,u){return E(this.elements,x,u,"children")},remove:function(u){C(this.elements,u,"children")}};var ae={},B={};(function(){CKEDITOR.ui.dialog={uiElement:function(N,M,L,J,K,I,H){if(!(4>arguments.length)){var G=(J.call?J(M):J)||"div",y=["\x3c",G," "],A=(K&&K.call?K(M):K)||{},F=(I&&I.call?I(M):I)||{},x=(H&&H.call?H.call(this,N,M):H)||"",D=this.domId=F.id||CKEDITOR.tools.getNextId()+"_uiElement";M.requiredContent&&!N.getParentEditor().filter.check(M.requiredContent)&&(A.display="none",this.notAllowed=!0);F.id=D;var u={};M.type&&(u["cke_dialog_ui_"+M.type]=1);M.className&&(u[M.className]=1);M.disabled&&(u.cke_disabled=1);for(var z=F["class"]&&F["class"].split?F["class"].split(" "):[],D=0;D<z.length;D++){z[D]&&(u[z[D]]=1)}z=[];for(D in u){z.push(D)}F["class"]=z.join(" ");M.title&&(F.title=M.title);u=(M.style||"").split(";");M.align&&(z=M.align,A["margin-left"]="left"==z?0:"auto",A["margin-right"]="right"==z?0:"auto");for(D in A){u.push(D+":"+A[D])}M.hidden&&u.push("display:none");for(D=u.length-1;0<=D;D--){""===u[D]&&u.splice(D,1)}0<u.length&&(F.style=(F.style?F.style+"; ":"")+u.join("; "));for(D in F){y.push(D+'\x3d"'+CKEDITOR.tools.htmlEncode(F[D])+'" ')}y.push("\x3e",x,"\x3c/",G,"\x3e");L.push(y.join(""));(this._||(this._={})).dialog=N;"boolean"==typeof M.isChanged&&(this.isChanged=function(){return M.isChanged});"function"==typeof M.isChanged&&(this.isChanged=M.isChanged);"function"==typeof M.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(P){return function(Q){P.call(this,M.setValue.call(this,Q))}}));"function"==typeof M.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(P){return function(){return M.getValue.call(this,P.call(this))}}));CKEDITOR.event.implementOn(this);this.registerEvents(M);this.accessKeyUp&&this.accessKeyDown&&M.accessKey&&h(this,N,"CTRL+"+M.accessKey);var O=this;N.on("load",function(){var P=O.getInputElement();if(P){var Q=O.type in {checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";P.on("focus",function(){N._.tabBarMode=!1;N._.hasFocus=!0;O.fire("focus");Q&&this.addClass(Q)});P.on("blur",function(){O.fire("blur");Q&&this.removeClass(Q)})}});CKEDITOR.tools.extend(this,M);this.keyboardFocusable&&(this.tabIndex=M.tabIndex||0,this.focusIndex=N._.focusList.push(this)-1,this.on("focus",function(){N._.currentFocusIndex=O.focusIndex}))}},hbox:function(I,H,G,D,F){if(!(4>arguments.length)){this._||(this._={});var A=this._.children=H,z=F&&F.widths||null,y=F&&F.height||null,u,x={role:"presentation"};F&&F.align&&(x.align=F.align);CKEDITOR.ui.dialog.uiElement.call(this,I,F||{type:"hbox"},D,"table",{},x,function(){var K=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(u=0;u<G.length;u++){var J="cke_dialog_ui_hbox_child",L=[];0===u&&(J="cke_dialog_ui_hbox_first");u==G.length-1&&(J="cke_dialog_ui_hbox_last");K.push('\x3ctd class\x3d"',J,'" role\x3d"presentation" ');z?z[u]&&L.push("width:"+v(z[u])):L.push("width:"+Math.floor(100/G.length)+"%");y&&L.push("height:"+v(y));F&&void 0!==F.padding&&L.push("padding:"+v(F.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&A[u].align&&L.push("text-align:"+A[u].align);0<L.length&&K.push('style\x3d"'+L.join("; ")+'" ');K.push("\x3e",G[u],"\x3c/td\x3e")}K.push("\x3c/tr\x3e\x3c/tbody\x3e");return K.join("")})}},vbox:function(x,u,G,D,F){if(!(3>arguments.length)){this._||(this._={});var A=this._.children=u,z=F&&F.width||null,y=F&&F.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,x,F||{type:"vbox"},D,"div",null,{role:"presentation"},function(){var H=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];H.push('style\x3d"');F&&F.expand&&H.push("height:100%;");H.push("width:"+v(z||"100%"),";");CKEDITOR.env.webkit&&H.push("float:none;");H.push('"');H.push('align\x3d"',CKEDITOR.tools.htmlEncode(F&&F.align||("ltr"==x.getParentEditor().lang.dir?"left":"right")),'" ');H.push("\x3e\x3ctbody\x3e");for(var J=0;J<G.length;J++){var I=[];H.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');z&&I.push("width:"+v(z||"100%"));y?I.push("height:"+v(y[J])):F&&F.expand&&I.push("height:"+Math.floor(100/G.length)+"%");F&&void 0!==F.padding&&I.push("padding:"+v(F.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&A[J].align&&I.push("text-align:"+A[J].align);0<I.length&&H.push('style\x3d"',I.join("; "),'" ');H.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',G[J],"\x3c/td\x3e\x3c/tr\x3e")}H.push("\x3c/tbody\x3e\x3c/table\x3e");return H.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(x,u){this.getInputElement().setValue(x);!u&&this.fire("change",{value:x});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return !1},selectParentTab:function(){for(var u=this.getInputElement();(u=u.getParent())&&-1==u.$.className.search("cke_dialog_page_contents");){}if(!u){return this}u=u.getAttribute("name");this._.dialog._.currentTabId!=u&&this._.dialog.selectPage(u);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(x){var u=/^on([A-Z]\w+)/,A,y=function(F,D,H,G){D.on("load",function(){F.getInputElement().on(H,G,F)})},z;for(z in x){if(A=z.match(u)){this.eventProcessors[z]?this.eventProcessors[z].call(this,this._.dialog,x[z]):y(this,this._.dialog,A[1].toLowerCase(),x[z])}}return this},eventProcessors:{onLoad:function(x,u){x.on("load",u,this)},onShow:function(x,u){x.on("show",u,this)},onHide:function(x,u){x.on("hide",u,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var u=this.getElement();this.getInputElement().setAttribute("disabled","true");u.addClass("cke_disabled")},enable:function(){var u=this.getElement();this.getInputElement().removeAttribute("disabled");u.removeClass("cke_disabled")},isEnabled:function(){return !this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(u){if(1>arguments.length){return this._.children.concat()}u.splice||(u=[u]);return 2>u.length?this._.children[u[0]]:this._.children[u[0]]&&this._.children[u[0]].getChild?this._.children[u[0]].getChild(u.slice(1,u.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var u={build:function(I,H,F){for(var G=H.children,D,A=[],z=[],x=0;x<G.length&&(D=G[x]);x++){var y=[];A.push(y);z.push(CKEDITOR.dialog._.uiElementBuilders[D.type].build(I,D,y))}return new CKEDITOR.ui.dialog[H.type](I,z,A,F,H)}};CKEDITOR.dialog.addUIElement("hbox",u);CKEDITOR.dialog.addUIElement("vbox",u)})();CKEDITOR.dialogCommand=function(x,u){this.dialogName=x;CKEDITOR.tools.extend(this,u,!0)};CKEDITOR.dialogCommand.prototype={exec:function(x){var u=this.tabId;x.openDialog(this.dialogName,function(y){u&&y.selectPage(u)})},canUndo:!1,editorFocus:1};(function(){var x=/^([a]|[^a])+$/,u=/^\d*$/,D=/^\d*(?:\.\d+)?$/,z=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,A=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,y=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var F=arguments;return function(){var G=this&&this.getValue?this.getValue():F[0],L,K=CKEDITOR.VALIDATE_AND,J=[],I;for(I=0;I<F.length;I++){if("function"==typeof F[I]){J.push(F[I])}else{break}}I<F.length&&"string"==typeof F[I]&&(L=F[I],I++);I<F.length&&"number"==typeof F[I]&&(K=F[I]);var H=K==CKEDITOR.VALIDATE_AND?!0:!1;for(I=0;I<J.length;I++){H=K==CKEDITOR.VALIDATE_AND?H&&J[I](G):H||J[I](G)}return H?!0:L}},regex:function(G,F){return function(H){H=this&&this.getValue?this.getValue():H;return G.test(H)?!0:F}},notEmpty:function(F){return this.regex(x,F)},integer:function(F){return this.regex(u,F)},number:function(F){return this.regex(D,F)},cssLength:function(F){return this.functions(function(G){return A.test(CKEDITOR.tools.trim(G))},F)},htmlLength:function(F){return this.functions(function(G){return z.test(CKEDITOR.tools.trim(G))},F)},inlineStyle:function(F){return this.functions(function(G){return y.test(CKEDITOR.tools.trim(G))},F)},equals:function(G,F){return this.functions(function(H){return H==G},F)},notEqual:function(G,F){return this.functions(function(H){return H!=G},F)}};CKEDITOR.on("instanceDestroyed",function(G){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var F;F=CKEDITOR.dialog._.currentTop;){F.hide()}for(var I in ae){ae[I].remove()}ae={}}G=G.editor._.storedDialogs;for(var H in G){G[H].destroy()}})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(x,u,A){var y=null,z=CKEDITOR.dialog._.dialogDefinitions[x];null===CKEDITOR.dialog._.currentTop&&m(this);if("function"==typeof z){z=this._.storedDialogs||(this._.storedDialogs={}),y=z[x]||(z[x]=new CKEDITOR.dialog(this,x)),y.setModel(A),u&&u.call(y,y),y.show()}else{if("failed"==z){throw k(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+x+'" failed when loading definition.')}"string"==typeof z&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(z),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[x]&&(CKEDITOR.dialog._.dialogDefinitions[x]="failed");this.openDialog(x,u,A)},this,0,1)}CKEDITOR.skin.loadPart("dialog");if(y){y.once("hide",function(){y.setModel(null)},null,null,999)}return y}})})();var a=!1;CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(b){a||(CKEDITOR.document.appendStyleSheet(this.path+"styles/dialog.css"),a=!0);b.on("doubleclick",function(c){c.data.dialog&&b.openDialog(c.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(d){var c=d.addCommand("about",new CKEDITOR.dialogCommand("about"));c.modes={wysiwyg:1,source:1};c.canUndo=!1;c.readOnly=1;d.ui.addButton&&d.ui.addButton("About",{label:d.lang.about.dlgTitle,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});CKEDITOR.plugins.add("basicstyles",{init:function(l){var j=0,k=function(h,n,c,e){if(e){e=new CKEDITOR.style(e);var m=i[c];m.unshift(e);l.attachStyleStateChange(e,function(b){!l.readOnly&&l.getCommand(c).setState(b)});l.addCommand(c,new CKEDITOR.styleCommand(e,{contentForms:m}));l.ui.addButton&&l.ui.addButton(h,{label:n,command:c,toolbar:"basicstyles,"+(j+=10)})}},i={bold:["strong","b",["span",function(b){b=b.styles["font-weight"];return"bold"==b||700<=+b}]],italic:["em","i",["span",function(b){return"italic"==b.styles["font-style"]}]],underline:["u",["span",function(b){return"underline"==b.styles["text-decoration"]}]],strike:["s","strike",["span",function(b){return"line-through"==b.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},f=l.config,g=l.lang.basicstyles;k("Bold",g.bold,"bold",f.coreStyles_bold);k("Italic",g.italic,"italic",f.coreStyles_italic);k("Underline",g.underline,"underline",f.coreStyles_underline);k("Strike",g.strike,"strike",f.coreStyles_strike);k("Subscript",g.subscript,"subscript",f.coreStyles_subscript);k("Superscript",g.superscript,"superscript",f.coreStyles_superscript);l.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function c(d,e){CKEDITOR.tools.extend(this,e,{editor:d,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:d._.notificationArea});e.type||(this.type="info");this.element=this._createElement();d.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function b(d){var e=this;this.editor=d;this.notifications=[];this.element=this._createElement();this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this);this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this);d.on("destroy",function(){e._removeListeners();e.element.remove()})}CKEDITOR.plugins.add("notification",{init:function(d){function e(f){var g=new CKEDITOR.dom.element("div");g.setStyles({position:"fixed","margin-left":"-9999px"});g.setAttributes({"aria-live":"assertive","aria-atomic":"true"});g.setText(f);CKEDITOR.document.getBody().append(g);setTimeout(function(){g.remove()},100)}d._.notificationArea=new b(d);d.showNotification=function(h,k,j){var i,g;"progress"==k?i=j:g=j;h=new CKEDITOR.plugins.notification(d,{message:h,type:k,progress:i,duration:g});h.show();return h};d.on("key",function(g){if(27==g.data.keyCode){var f=d._.notificationArea.notifications;f.length&&(e(d.lang.notification.closed),f[f.length-1].hide(),g.cancel())}})}});c.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(g){var h=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:g})&&(h=!1);var l=this.element,k=l.findOne(".cke_notification_message"),j=l.findOne(".cke_notification_progress"),i=g.type;l.removeAttribute("role");g.progress&&"progress"!=this.type&&(i="progress");i&&(l.removeClass(this._getClass()),l.removeAttribute("aria-label"),this.type=i,l.addClass(this._getClass()),l.setAttribute("aria-label",this.type),"progress"!=this.type||j?"progress"!=this.type&&j&&j.remove():(j=this._createProgressElement(),j.insertBefore(k)));void 0!==g.message&&(this.message=g.message,k.setHtml(this.message));void 0!==g.progress&&(this.progress=g.progress,j&&j.setStyle("width",this._getPercentageProgress()));h&&g.important&&(l.setAttribute("role","alert"),this.isVisible()||this.area.add(this));this.duration=g.duration;this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var e=this,f,h,g=this.editor.lang.common.close;f=new CKEDITOR.dom.element("div");f.addClass("cke_notification");f.addClass(this._getClass());f.setAttributes({id:this.id,role:"alert","aria-label":this.type});"progress"==this.type&&f.append(this._createProgressElement());h=new CKEDITOR.dom.element("p");h.addClass("cke_notification_message");h.setHtml(this.message);f.append(h);h=CKEDITOR.dom.element.createFromHtml('\x3ca class\x3d"cke_notification_close" href\x3d"javascript:void(0)" title\x3d"'+g+'" role\x3d"button" tabindex\x3d"-1"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e');f.append(h);h.on("click",function(){e.editor.focus();e.hide()});return f},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var d=new CKEDITOR.dom.element("span");d.addClass("cke_notification_progress");d.setStyle("width",this._getPercentageProgress());return d},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var d=this,e;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId);if("number"==typeof this.duration){e=this.duration}else{if("info"==this.type||"success"==this.type){e="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5000}}e&&(d._hideTimeoutId=setTimeout(function(){d.hide()},e))}};b.prototype={add:function(d){this.notifications.push(d);this.element.append(d.element);1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners());this._layout()},remove:function(d){var e=CKEDITOR.tools.indexOf(this.notifications,d);0>e||(this.notifications.splice(e,1),d.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var d=this.editor,e=d.config,f=new CKEDITOR.dom.element("div");f.addClass("cke_notifications_area");f.setAttribute("id","cke_notifications_area_"+d.name);f.setStyle("z-index",e.baseFloatZIndex-2);return f},_attachListeners:function(){var d=CKEDITOR.document.getWindow(),e=this.editor;d.on("scroll",this._uiBuffer.input);d.on("resize",this._uiBuffer.input);e.on("change",this._changeBuffer.input);e.on("floatingSpaceLayout",this._layout,this,null,20);e.on("blur",this._layout,this,null,20)},_removeListeners:function(){var d=CKEDITOR.document.getWindow(),e=this.editor;d.removeListener("scroll",this._uiBuffer.input);d.removeListener("resize",this._uiBuffer.input);e.removeListener("change",this._changeBuffer.input);e.removeListener("floatingSpaceLayout",this._layout);e.removeListener("blur",this._layout)},_layout:function(){function E(){F.setStyle("left",x(s+C.width-z-y))}var F=this.element,D=this.editor,C=D.ui.contentsElement.getClientRect(),B=D.ui.contentsElement.getDocumentPosition(),A,w,G=F.getClientRect(),v,z=this._notificationWidth,y=this._notificationMargin;v=CKEDITOR.document.getWindow();var o=v.getScrollPosition(),H=v.getViewPaneSize(),j=CKEDITOR.document.getBody(),i=j.getDocumentPosition(),x=CKEDITOR.tools.cssLength;z&&y||(v=this.element.getChild(0),z=this._notificationWidth=v.getClientRect().width,y=this._notificationMargin=parseInt(v.getComputedStyle("margin-left"),10)+parseInt(v.getComputedStyle("margin-right"),10));D.toolbar&&(A=D.ui.space("top"),w=A.getClientRect());A&&A.isVisible()&&w.bottom>C.top&&w.bottom<C.bottom-G.height?F.setStyles({position:"fixed",top:x(w.bottom)}):0<C.top?F.setStyles({position:"absolute",top:x(B.y)}):B.y+C.height-G.height>o.y?F.setStyles({position:"fixed",top:0}):F.setStyles({position:"absolute",top:x(B.y+C.height-G.height)});var s="fixed"==F.getStyle("position")?C.left:"static"!=j.getComputedStyle("position")?B.x-i.x:B.x;C.width<z+y?B.x+z+y>o.x+H.width?E():F.setStyle("left",x(s)):B.x+z+y>o.x+H.width?F.setStyle("left",x(s)):B.x+C.width/2+z/2+y>o.x+H.width?F.setStyle("left",x(s-B.x+o.x+H.width-z-y)):0>C.left+C.width-z-y?E():0>C.left+C.width/2-z/2?F.setStyle("left",x(s-B.x+o.x)):F.setStyle("left",x(s+C.width/2-z/2-y/2))}};CKEDITOR.plugins.notification=c})();(function(){var f='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-describedby\x3d"{id}_description" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(f+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(f+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var e="";CKEDITOR.env.ie&&(e='return false;" onmouseup\x3d"CKEDITOR.tools.getMouseButton(event)\x3d\x3dCKEDITOR.MOUSE_BUTTON_LEFT\x26\x26');var f=f+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" onclick\x3d"'+e+'CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"')+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e\x3cspan id\x3d"{id}_description" class\x3d"cke_button_label" aria-hidden\x3d"false"\x3e{ariaShortcut}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',d=CKEDITOR.addTemplate("buttonArrow",'\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":"")+"\x3c/span\x3e"),b=CKEDITOR.addTemplate("button",f);CKEDITOR.plugins.add("button",{beforeInit:function(c){c.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(c){CKEDITOR.tools.extend(this,c,{title:c.label,click:c.click||function(g){g.execCommand(c.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(c){return new CKEDITOR.ui.button(c)}};CKEDITOR.ui.button.prototype={render:function(K,J){function I(){var c=K.mode;c&&(c=this.modes[c]?void 0!==z[c]?z[c]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,c=K.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:c,this.setState(c),this.refresh&&this.refresh())}var z=null,w=CKEDITOR.env,v=this._.id=CKEDITOR.tools.getNextId(),F="",H=this.command,D,C,B;this._.editor=K;var G={id:v,button:this,editor:K,focus:function(){CKEDITOR.document.getById(v).focus()},execute:function(){this.button.click(K)},attach:function(c){this.button.attach(c)}},j=CKEDITOR.tools.addFunction(function(c){if(G.onkey){return c=new CKEDITOR.dom.event(c),!1!==G.onkey(G,c.getKeystroke())}}),i=CKEDITOR.tools.addFunction(function(g){var c;G.onfocus&&(c=!1!==G.onfocus(G,new CKEDITOR.dom.event(g)));return c}),o=0;G.clickFn=D=CKEDITOR.tools.addFunction(function(){o&&(K.unlockSelection(1),o=0);G.execute();w.iOS&&K.focus()});this.modes?(z={},K.on("beforeModeUnload",function(){K.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(z[K.mode]=this._.state)},this),K.on("activeFilterChange",I,this),K.on("mode",I,this),!this.readOnly&&K.on("readOnly",I,this)):H&&(H=K.getCommand(H))&&(H.on("state",function(){this.setState(H.state)},this),F+=H.state==CKEDITOR.TRISTATE_ON?"on":H.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");var A;if(this.directional){K.on("contentDirChanged",function(g){var k=CKEDITOR.document.getById(this._.id),h=k.getFirst();g=g.data;g!=K.lang.dir?k.addClass("cke_"+g):k.removeClass("cke_ltr").removeClass("cke_rtl");h.setAttribute("style",CKEDITOR.skin.getIconStyle(A,"rtl"==g,this.icon,this.iconOffset))},this)}H?(C=K.getCommandKeystroke(H))&&(B=CKEDITOR.tools.keystrokeToString(K.lang.common.keyboard,C)):F+="off";C=this.name||this.command;var E=null,s=this.icon;A=C;this.icon&&!/\./.test(this.icon)?(A=this.icon,s=null):(this.icon&&(E=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(E=this.iconHiDpi));E?(CKEDITOR.skin.addIcon(E,E),s=null):E=A;F={id:v,name:C,iconName:A,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:F,ariaDisabled:"disabled"==F?"true":"false",title:this.title+(B?" ("+B.display+")":""),ariaShortcut:B?K.lang.common.keyboardShortcut+" "+B.aria:"",titleJs:w.gecko&&!w.hc?"":(this.title||"").replace("'",""),hasArrow:"string"===typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:j,focusFn:i,clickFn:D,style:CKEDITOR.skin.getIconStyle(E,"rtl"==K.lang.dir,s,this.iconOffset),arrowHtml:this.hasArrow?d.output():""};b.output(F,J);if(this.onRender){this.onRender()}return G},setState:function(g){if(this._.state==g){return !1}this._.state=g;var c=CKEDITOR.document.getById(this._.id);return c?(c.setState(g,"cke_button"),c.setAttribute("aria-disabled",g==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?c.setAttribute("aria-expanded",g==CKEDITOR.TRISTATE_ON):g===CKEDITOR.TRISTATE_ON?c.setAttribute("aria-pressed",!0):c.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(g){if(this._.feature){return this._.feature}var c=this;this.allowedContent||this.requiredContent||!this.command||(c=g.getCommand(this.command)||c);return this._.feature=c}};CKEDITOR.ui.prototype.addButton=function(g,c){this.add(g,CKEDITOR.UI_BUTTON,c)}})();(function(){function d(i){function m(){for(var f=k(),r=CKEDITOR.tools.clone(i.config.toolbarGroups)||b(i),t=0;t<r.length;t++){var q=r[t];if("/"!=q){"string"==typeof q&&(q=r[t]={name:q});var o,s=q.groups;if(s){for(var p=0;p<s.length;p++){o=s[p],(o=f[o])&&n(q,o)}}(o=f[q.name])&&n(q,o)}}return r}function k(){var f={},p,o,h;for(p in i.ui.items){o=i.ui.items[p],h=o.toolbar||"others",h=h.split(","),o=h[0],h=parseInt(h[1]||-1,10),f[o]||(f[o]=[]),f[o].push({name:p,order:h})}for(o in f){f[o]=f[o].sort(function(q,r){return q.order==r.order?0:0>r.order?-1:0>q.order?1:q.order<r.order?-1:1})}return f}function n(o,f){if(f.length){o.items?o.items.push(i.ui.create("-")):o.items=[];for(var h;h=f.shift();){h="string"==typeof h?h:h.name,g&&-1!=CKEDITOR.tools.indexOf(g,h)||(h=i.ui.create(h))&&i.addFeature(h)&&o.items.push(h)}}}function j(f){var o=[],q,r,p;for(q=0;q<f.length;++q){r=f[q],p={},"/"==r?o.push(r):CKEDITOR.tools.isArray(r)?(n(p,CKEDITOR.tools.clone(r)),o.push(p)):r.items&&(n(p,CKEDITOR.tools.clone(r.items)),p.name=r.name,o.push(p))}return o}var g=i.config.removeButtons,g=g&&g.split(","),l=i.config.toolbar;"string"==typeof l&&(l=i.config["toolbar_"+l]);return i.toolbar=l?j(l):m()}function b(f){return f._.toolbarGroups||(f._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var e=function(){this.toolbars=[];this.focusCommandExecuted=!1};e.prototype.focus=function(){for(var g=0,i;i=this.toolbars[g++];){for(var h=0,j;j=i.items[h++];){if(j.focus){j.focus();return}}}};var c={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(f){f.toolbox&&(f.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){f.toolbox.focus()},100):f.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(g){var i,h=function(o,l){var f,n="rtl"==g.lang.dir,j=g.config.toolbarGroupCycling,m=n?37:39,n=n?39:37,j=void 0===j||j;switch(l){case 9:case CKEDITOR.SHIFT+9:for(;!f||!f.items.length;){if(f=9==l?(f?f.next:o.toolbar.next)||g.toolbox.toolbars[0]:(f?f.previous:o.toolbar.previous)||g.toolbox.toolbars[g.toolbox.toolbars.length-1],f.items.length){for(o=f.items[i?f.items.length-1:0];o&&!o.focus;){(o=i?o.previous:o.next)||(f=0)}}}o&&o.focus();return !1;case m:f=o;do{f=f.next,!f&&j&&(f=o.toolbar.items[0])}while(f&&!f.focus);f?f.focus():h(o,9);return !1;case 40:return o.button&&o.button.hasArrow?o.execute():h(o,40==l?m:n),!1;case n:case 38:f=o;do{f=f.previous,!f&&j&&(f=o.toolbar.items[o.toolbar.items.length-1])}while(f&&!f.focus);f?f.focus():(i=1,h(o,CKEDITOR.SHIFT+9),i=0);return !1;case 27:return g.focus(),!1;case 13:case 32:return o.execute(),!1}return !0};g.on("uiSpace",function(R){if(R.data.space==g.config.toolbarLocation){R.removeListener();g.toolbox=new e;var Q=CKEDITOR.tools.getNextId(),S=['\x3cspan id\x3d"',Q,'" class\x3d"cke_voice_label"\x3e',g.lang.toolbar.toolbars,"\x3c/span\x3e",'\x3cspan id\x3d"'+g.ui.spaceId("toolbox")+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',Q,'" onmousedown\x3d"return false;"\x3e'],Q=!1!==g.config.toolbarStartupExpanded,P,N;g.config.toolbarCanCollapse&&g.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&S.push('\x3cspan class\x3d"cke_toolbox_main"'+(Q?"\x3e":' style\x3d"display:none"\x3e'));for(var H=g.toolbox.toolbars,K=d(g),O=K.length,M=0;M<O;M++){var F,L=0,o,J=K[M],s="/"!==J&&("/"===K[M+1]||M==O-1),j;if(J){if(P&&(S.push("\x3c/span\x3e"),N=P=0),"/"===J){S.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e')}else{j=J.items||J;for(var f=0;f<j.length;f++){var D=j[f],I;if(D){var G=function(k){k=k.render(g,S);z=L.items.push(k)-1;0<z&&(k.previous=L.items[z-1],k.previous.next=k);k.toolbar=L;k.onkey=h;k.onfocus=function(){g.toolbox.focusCommandExecuted||g.focus()}};if(D.type==CKEDITOR.UI_SEPARATOR){N=P&&D}else{I=!1!==D.canGroup;if(!L){F=CKEDITOR.tools.getNextId();L={id:F,items:[]};o=J.name&&(g.lang.toolbar.toolbarGroups[J.name]||J.name);S.push('\x3cspan id\x3d"',F,'" class\x3d"cke_toolbar'+(s?' cke_toolbar_last"':'"'),o?' aria-labelledby\x3d"'+F+'_label"':"",' role\x3d"toolbar"\x3e');o&&S.push('\x3cspan id\x3d"',F,'_label" class\x3d"cke_voice_label"\x3e',o,"\x3c/span\x3e");S.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var z=H.push(L)-1;0<z&&(L.previous=H[z-1],L.previous.next=L)}I?P||(S.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),P=1):P&&(S.push("\x3c/span\x3e"),P=0);N&&(G(N),N=0);G(D)}}}P&&(S.push("\x3c/span\x3e"),N=P=0);L&&S.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}}}g.config.toolbarCanCollapse&&S.push("\x3c/span\x3e");if(g.config.toolbarCanCollapse&&g.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var E=CKEDITOR.tools.addFunction(function(){g.execCommand("toolbarCollapse")});g.on("destroy",function(){CKEDITOR.tools.removeFunction(E)});g.addCommand("toolbarCollapse",{readOnly:1,exec:function(k){var l=k.ui.space("toolbar_collapser"),t=l.getPrevious(),r=k.ui.space("contents"),q=t.getParent(),m=parseInt(r.$.style.height,10),n=q.$.offsetHeight,p=l.hasClass("cke_toolbox_collapser_min");p?(t.show(),l.removeClass("cke_toolbox_collapser_min"),l.setAttribute("title",k.lang.toolbar.toolbarCollapse)):(t.hide(),l.addClass("cke_toolbox_collapser_min"),l.setAttribute("title",k.lang.toolbar.toolbarExpand));l.getFirst().setText(p?"▲":"◀");r.setStyle("height",m-(q.$.offsetHeight-n)+"px");k.fire("resize",{outerHeight:k.container.$.offsetHeight,contentsHeight:r.$.offsetHeight,outerWidth:k.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});g.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");S.push('\x3ca title\x3d"'+(Q?g.lang.toolbar.toolbarCollapse:g.lang.toolbar.toolbarExpand)+'" id\x3d"'+g.ui.spaceId("toolbar_collapser")+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');Q||S.push(" cke_toolbox_collapser_min");S.push('" onclick\x3d"CKEDITOR.tools.callFunction('+E+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e',"\x3c/a\x3e")}S.push("\x3c/span\x3e");R.data.html+=S.join("")}});g.on("destroy",function(){if(this.toolbox){var k,n=0,j,m,l;for(k=this.toolbox.toolbars;n<k.length;n++){for(m=k[n].items,j=0;j<m.length;j++){l=m[j],l.clickFn&&CKEDITOR.tools.removeFunction(l.clickFn),l.keyDownFn&&CKEDITOR.tools.removeFunction(l.keyDownFn)}}}});g.on("uiReady",function(){var f=g.ui.space("toolbox");f&&g.focusManager.add(f,1)});g.addCommand("toolbarFocus",c);g.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");g.ui.add("-",CKEDITOR.UI_SEPARATOR,{});g.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(f,j){j.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(i,l,k){var m=b(this.editor),j=0===l,g={name:i};if(k){if(k=CKEDITOR.tools.search(m,function(f){return f.name==k})){!k.groups&&(k.groups=[]);if(l&&(l=CKEDITOR.tools.indexOf(k.groups,l),0<=l)){k.groups.splice(l+1,0,i);return}j?k.groups.splice(0,0,i):k.groups.push(i);return}l=null}l&&(l=CKEDITOR.tools.indexOf(m,function(f){return f.name==l}));j?m.splice(0,0,i):"number"==typeof l?m.splice(l+1,0,g):m.push(i)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){function c(m,l,n){l.type||(l.type="auto");if(n&&!1===m.fire("beforePaste",l)||!l.dataValue&&l.dataTransfer.isEmpty()){return !1}l.dataValue||(l.dataValue="");if(CKEDITOR.env.gecko&&"drop"==l.method&&m.toolbox){m.once("afterPaste",function(){m.toolbox.focus()})}return m.fire("paste",l)}function j(G){function F(){var l=G.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var n=function(p){G.getSelection().isCollapsed()||(G.readOnly&&"cut"==p.name||r.initPasteDataTransfer(p,G),p.data.preventDefault())};l.on("copy",n);l.on("cut",n);l.on("cut",function(){G.readOnly||G.extractSelectedHtml()},null,null,999)}l.on(r.mainPasteEvent,function(p){"beforepaste"==r.mainPasteEvent&&s||y(p)});"beforepaste"==r.mainPasteEvent&&(l.on("paste",function(p){H||(B(),p.data.preventDefault(),y(p),C("paste"))}),l.on("contextmenu",z,null,null,0),l.on("beforepaste",function(p){!p.data||p.data.$.ctrlKey||p.data.$.shiftKey||z()},null,null,0));l.on("beforecut",function(){!s&&A(G)});var m;l.attachListener(CKEDITOR.env.ie?l:G.document.getDocumentElement(),"mouseup",function(){m=setTimeout(I,0)});G.on("destroy",function(){clearTimeout(m)});l.on("keyup",I)}function E(l){return{type:l,canUndo:"cut"==l,startDisabled:!0,fakeKeystroke:"cut"==l?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&A();var m;var p=this.type;if(CKEDITOR.env.ie){m=C(p)}else{try{m=G.document.$.execCommand(p,!1,null)}catch(n){m=!1}}m||G.showNotification(G.lang.clipboard[this.type+"Error"]);return m}}}function D(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(p,n){function K(m,L){L="undefined"!==typeof L?L:!0;m?(m.method="paste",m.dataTransfer||(m.dataTransfer=r.initPasteDataTransfer()),c(p,m,L)):u&&!p._.forcePasteDialog&&p.showNotification(t,"info",p.config.clipboard_notificationDuration);p._.forcePasteDialog=!1;p.fire("afterCommandExec",{name:"paste",command:v,returnValue:!!m})}n="undefined"!==typeof n&&null!==n?n:{};var v=this,u="undefined"!==typeof n.notification?n.notification:!0,q=n.type,l=CKEDITOR.tools.keystrokeToString(p.lang.common.keyboard,p.getCommandKeystroke(this)),t="string"===typeof u?u:p.lang.clipboard.pasteNotification.replace(/%1/,'\x3ckbd aria-label\x3d"'+l.aria+'"\x3e'+l.display+"\x3c/kbd\x3e"),l="string"===typeof n?n:n.dataValue;q&&!0!==p.config.forcePasteAsPlainText&&"allow-word"!==p.config.forcePasteAsPlainText?p._.nextPasteType=q:delete p._.nextPasteType;"string"===typeof l?K({dataValue:l}):p.getClipboardData(K)}}}function B(){H=1;setTimeout(function(){H=0},100)}function z(){s=1;setTimeout(function(){s=0},10)}function C(l){var q=G.document,p=q.getBody(),n=!1,m=function(){n=!0};p.on(l,m);7<CKEDITOR.env.version?q.$.execCommand(l):q.$.selection.createRange().execCommand(l);p.removeListener(l,m);return n}function A(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var l=G.getSelection(),p,n,m;l.getType()==CKEDITOR.SELECTION_ELEMENT&&(p=l.getSelectedElement())&&(n=l.getRanges()[0],m=G.document.createText(""),m.insertBefore(p),n.setStartBefore(m),n.setEndAfter(p),l.selectRanges([n]),setTimeout(function(){p.getParent()&&(m.remove(),l.selectElement(p))},0))}}function x(Q,P){var O=G.document,N=G.editable(),L=function(l){l.cancel()},p;if(!O.getById("cke_pastebin")){var M=G.getSelection(),t=M.createBookmarks();CKEDITOR.env.ie&&M.root.fire("selectionchange");var v=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!N.is("body")||CKEDITOR.env.ie?"div":"body",O);v.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var K=0,O=O.getWindow();CKEDITOR.env.webkit?(N.append(v),v.addClass("cke_editable"),N.is("body")||(K="static"!=N.getComputedStyle("position")?N:CKEDITOR.dom.element.get(N.$.offsetParent),K=K.getDocumentPosition().y)):N.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(v);v.setStyles({position:"absolute",top:O.getScrollPosition().y-K+10+"px",width:"1px",height:Math.max(1,O.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&v.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(K=v.getParent().isReadOnly())?(v.setOpacity(0),v.setAttribute("contenteditable",!0)):v.setStyle("ltr"==G.config.contentsLangDirection?"left":"right","-10000px");G.on("selectionChange",L,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko){p=N.once("blur",L,null,null,-100)}K&&v.focus();K=new CKEDITOR.dom.range(v);K.selectNodeContents(v);var R=K.select();CKEDITOR.env.ie&&(p=N.once("blur",function(){G.lockSelection(R)}));var n=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=n);p&&p.removeListener();CKEDITOR.env.ie&&N.focus();M.selectBookmarks(t);v.remove();var l;CKEDITOR.env.webkit&&(l=v.getFirst())&&l.is&&l.hasClass("Apple-style-span")&&(v=l);G.removeListener("selectionChange",L);P(v.getHtml())},0)}}function J(){if("paste"==r.mainPasteEvent){return G.fire("beforePaste",{type:"auto",method:"paste"}),!1}G.focus();B();var l=G.focusManager;l.lock();if(G.editable().fire(r.mainPasteEvent)&&!C("paste")){return l.unlock(),!1}l.unlock();return !0}function w(l){if("wysiwyg"==G.mode){switch(l.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:l=G.editable();B();"paste"==r.mainPasteEvent&&l.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:G.fire("saveSnapshot"),setTimeout(function(){G.fire("saveSnapshot")},50)}}}function y(l){var n={type:"auto",method:"paste",dataTransfer:r.initPasteDataTransfer(l)};n.dataTransfer.cacheData();var m=!1!==G.fire("beforePaste",n);m&&r.canClipboardApiBeTrusted(n.dataTransfer,G)?(l.data.preventDefault(),setTimeout(function(){c(G,n)},0)):x(l,function(p){n.dataValue=p.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");m&&c(G,n)})}function I(){if("wysiwyg"==G.mode){var l=o("paste");G.getCommand("cut").setState(o("cut"));G.getCommand("copy").setState(o("copy"));G.getCommand("paste").setState(l);G.fire("pasteState",l)}}function o(l){var m=G.getSelection(),m=m&&m.getRanges()[0];if((G.readOnly||m&&m.checkReadOnly())&&l in {paste:1,cut:1}){return CKEDITOR.TRISTATE_DISABLED}if("paste"==l){return CKEDITOR.TRISTATE_OFF}l=G.getSelection();m=l.getRanges();return l.getType()==CKEDITOR.SELECTION_NONE||1==m.length&&m[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var r=CKEDITOR.plugins.clipboard,s=0,H=0;(function(){G.on("key",w);G.on("contentDom",F);G.on("selectionChange",I);if(G.contextMenu){G.contextMenu.addListener(function(){return{cut:o("cut"),copy:o("copy"),paste:o("paste")}});var l=null;G.on("menuShow",function(){l&&(l.removeListener(),l=null);var m=G.contextMenu.findItemByCommandName("paste");m&&m.element&&(l=m.element.on("touchend",function(){G._.forcePasteDialog=!0}))})}if(G.ui.addButton){G.once("instanceReady",function(){G._.pasteButtons&&CKEDITOR.tools.array.forEach(G._.pasteButtons,function(m){if(m=G.ui.get(m)){if(m=CKEDITOR.document.getById(m._.id)){m.on("touchend",function(){G._.forcePasteDialog=!0})}}})})}})();(function(){function l(v,t,u,q,n){var p=G.lang.clipboard[t];G.addCommand(t,u);G.ui.addButton&&G.ui.addButton(v,{label:p,command:t,toolbar:"clipboard,"+q});G.addMenuItems&&G.addMenuItem(t,{label:p,command:t,group:"clipboard",order:n})}l("Cut","cut",E("cut"),10,1);l("Copy","copy",E("copy"),20,4);l("Paste","paste",D(),30,8);G._.pasteButtons||(G._.pasteButtons=[]);G._.pasteButtons.push("Paste")})();G.getClipboardData=function(n,u){function q(m){m.removeListener();m.cancel();u(m.data)}function t(m){m.removeListener();m.cancel();u({type:l,dataValue:m.data.dataValue,dataTransfer:m.data.dataTransfer,method:"paste"})}var p=!1,l="auto";u||(u=n,n=null);G.on("beforePaste",function(m){m.removeListener();p=!0;l=m.data.type},null,null,1000);G.on("paste",q,null,null,0);!1===J()&&(G.removeListener("paste",q),G._.forcePasteDialog&&p&&G.fire("pasteDialog")?(G.on("pasteDialogCommit",t),G.on("dialogHide",function(m){m.removeListener();m.data.removeListener("pasteDialogCommit",t);m.data._.committed||u(null)})):u(null))}}function i(l){if(CKEDITOR.env.webkit){if(!l.match(/^[^<]*$/g)&&!l.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi)){return"html"}}else{if(CKEDITOR.env.ie){if(!l.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!l.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi)){return"html"}}else{if(CKEDITOR.env.gecko){if(!l.match(/^([^<]|<br( ?\/)?>)*$/gi)){return"html"}}else{return"html"}}}return"htmlifiedtext"}function h(m,l){function n(o){return CKEDITOR.tools.repeat("\x3c/p\x3e\x3cp\x3e",~~(o/2))+(1==o%2?"\x3cbr\x3e":"")}l=l.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"\x3e\x3c").replace(/<br ?\/>/gi,"\x3cbr\x3e");l=l.replace(/<\/?[A-Z]+>/g,function(o){return o.toLowerCase()});if(l.match(/^[^<]$/)){return l}CKEDITOR.env.webkit&&-1<l.indexOf("\x3cdiv\x3e")&&(l=l.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"\x3cbr\x3e").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"\x3cdiv\x3e\x3c/div\x3e"),l.match(/<div>(<br>|)<\/div>/)&&(l="\x3cp\x3e"+l.replace(/(<div>(<br>|)<\/div>)+/g,function(o){return n(o.split("\x3c/div\x3e\x3cdiv\x3e").length+1)})+"\x3c/p\x3e"),l=l.replace(/<\/div><div>/g,"\x3cbr\x3e"),l=l.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&m.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(l=l.replace(/^<br><br>$/,"\x3cbr\x3e")),-1<l.indexOf("\x3cbr\x3e\x3cbr\x3e")&&(l="\x3cp\x3e"+l.replace(/(<br>){2,}/g,function(o){return n(o.length/4)})+"\x3c/p\x3e"));return f(m,l)}function e(m){function l(){var p={},o;for(o in CKEDITOR.dtd){"$"!=o.charAt(0)&&"div"!=o&&"span"!=o&&(p[o]=1)}return p}var n={};return{get:function(o){return"plain-text"==o?n.plainText||(n.plainText=new CKEDITOR.filter(m,"br")):"semantic-content"==o?((o=n.semanticContent)||(o=new CKEDITOR.filter(m,{}),o.allow({$1:{elements:l(),attributes:!0,styles:!1,classes:!1}}),o=n.semanticContent=o),o):o?new CKEDITOR.filter(m,o):null}}}function k(m,l,o){l=CKEDITOR.htmlParser.fragment.fromHtml(l);var n=new CKEDITOR.htmlParser.basicWriter;o.applyTo(l,!0,!1,m.activeEnterMode);l.writeHtml(n);return n.getHtml()}function f(m,l){m.enterMode==CKEDITOR.ENTER_BR?l=l.replace(/(<\/p><p>)+/g,function(n){return CKEDITOR.tools.repeat("\x3cbr\x3e",n.length/7*2)}).replace(/<\/?p>/g,""):m.enterMode==CKEDITOR.ENTER_DIV&&(l=l.replace(/<(\/)?p>/g,"\x3c$1div\x3e"));return l}function d(l){l.data.preventDefault();l.data.$.dataTransfer.dropEffect="none"}function b(m){var l=CKEDITOR.plugins.clipboard;m.on("contentDom",function(){function v(t,x,w){x.select();c(m,{dataTransfer:w,method:"drop"},1);w.sourceEditor.fire("saveSnapshot");w.sourceEditor.editable().extractHtmlFromRange(t);w.sourceEditor.getSelection().selectRanges([t]);w.sourceEditor.fire("saveSnapshot")}function u(w,t){w.select();c(m,{dataTransfer:t,method:"drop"},1);l.resetDragDataTransfer()}function r(t,y,w){var x={$:t.data.$,target:t.data.getTarget()};y&&(x.dragRange=y);w&&(x.dropRange=w);!1===m.fire(t.name,x)&&t.data.preventDefault()}function p(t){t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());return t.getChildCount()}var s=m.editable(),q=CKEDITOR.plugins.clipboard.getDropTarget(m),n=m.ui.space("top"),o=m.ui.space("bottom");l.preventDefaultDropOnElement(n);l.preventDefaultDropOnElement(o);s.attachListener(q,"dragstart",r);s.attachListener(m,"dragstart",l.resetDragDataTransfer,l,null,1);s.attachListener(m,"dragstart",function(t){l.initDragDataTransfer(t,m)},null,null,2);s.attachListener(m,"dragstart",function(){var t=l.dragRange=m.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(l.dragStartContainerChildCount=t?p(t.startContainer):null,l.dragEndContainerChildCount=t?p(t.endContainer):null)},null,null,100);s.attachListener(q,"dragend",r);s.attachListener(m,"dragend",l.initDragDataTransfer,l,null,1);s.attachListener(m,"dragend",l.resetDragDataTransfer,l,null,100);s.attachListener(q,"dragover",function(w){if(CKEDITOR.env.edge){w.data.preventDefault()}else{var t=w.data.getTarget();t&&t.is&&t.is("html")?w.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&w.data.$.dataTransfer.types.contains("Files")&&w.data.preventDefault()}});s.attachListener(q,"drop",function(x){if(!x.data.$.defaultPrevented&&(x.data.preventDefault(),!m.readOnly)){var t=x.data.getTarget();if(!t.isReadOnly()||t.type==CKEDITOR.NODE_ELEMENT&&t.is("html")){var t=l.getRangeAtDropPosition(x,m),w=l.dragRange;t&&r(x,w,t)}}},null,null,9999);s.attachListener(m,"drop",l.initDragDataTransfer,l,null,1);s.attachListener(m,"drop",function(y){if(y=y.data){var w=y.dropRange,x=y.dragRange,t=y.dataTransfer;t.getTransferType(m)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){l.internalDrop(x,w,t,m)},0):t.getTransferType(m)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?v(x,w,t):u(w,t)}},null,null,9999)})}var g;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(m){function l(s){if(!s||n===s.id){return !1}var r=s.getTypes(),r=1===r.length&&"Files"===r[0];s=1===s.getFilesCount();return r&&s}var q,p=e(m);m.config.forcePasteAsPlainText?q="plain-text":m.config.pasteFilter?q=m.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter" in m.config||(q="semantic-content");m.pasteFilter=p.get(q);j(m);b(m);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));if(CKEDITOR.env.gecko){var o=["image/png","image/jpeg","image/gif"],n;m.on("paste",function(v){var u=v.data,r=u.dataTransfer;if(!u.dataValue&&"paste"==u.method&&l(r)&&(r=r.getFile(0),-1!=CKEDITOR.tools.indexOf(o,r.type))){var s=new FileReader;s.addEventListener("load",function(){v.data.dataValue='\x3cimg src\x3d"'+s.result+'" /\x3e';m.fire("paste",v.data)},!1);s.addEventListener("abort",function(){m.fire("paste",v.data)},!1);s.addEventListener("error",function(){m.fire("paste",v.data)},!1);s.readAsDataURL(r);n=u.dataTransfer.id;v.stop()}},null,null,1)}m.on("paste",function(r){r.data.dataTransfer||(r.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!r.data.dataValue){var t=r.data.dataTransfer,s=t.getData("text/html");if(s){r.data.dataValue=s,r.data.type="html"}else{if(s=t.getData("text/plain")){r.data.dataValue=m.editable().transformPlainTextToHtml(s),r.data.type="text"}}}},null,null,1);m.on("paste",function(s){var r=s.data.dataValue,w=CKEDITOR.dtd.$block;-1<r.indexOf("Apple-")&&(r=r.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=s.data.type&&(r=r.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(y,x){return x.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;")})),-1<r.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&(s.data.startsWithEOL=1,s.data.preSniffing="html",r=r.replace(/<br class="Apple-interchange-newline">/,"")),r=r.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(r.match(/^<[^<]+cke_(editable|contents)/i)){var v,u,t=new CKEDITOR.dom.element("div");for(t.setHtml(r);1==t.getChildCount()&&(v=t.getFirst())&&v.type==CKEDITOR.NODE_ELEMENT&&(v.hasClass("cke_editable")||v.hasClass("cke_contents"));){t=u=v}u&&(r=u.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?r=r.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(x,y){return y.toLowerCase() in w?(s.data.preSniffing="html","\x3c"+y):x}):CKEDITOR.env.webkit?r=r.replace(/<\/(\w+)><div><br><\/div>$/,function(x,y){return y in w?(s.data.endsWithEOL=1,"\x3c/"+y+"\x3e"):x}):CKEDITOR.env.gecko&&(r=r.replace(/(\s)<br>$/,"$1"));s.data.dataValue=r},null,null,3);m.on("paste",function(s){s=s.data;var x=m._.nextPasteType||s.type,v=s.dataValue,u,r=m.config.clipboard_defaultContentType||"html",t=s.dataTransfer.getTransferType(m)==CKEDITOR.DATA_TRANSFER_EXTERNAL,w=!0===m.config.forcePasteAsPlainText;u="html"==x||"html"==s.preSniffing?"html":i(v);delete m._.nextPasteType;"htmlifiedtext"==u&&(v=h(m.config,v));if("text"==x&&"html"==u){v=k(m,v,p.get("plain-text"))}else{if(t&&m.pasteFilter&&!s.dontFilter||w){v=k(m,v,m.pasteFilter)}}s.startsWithEOL&&(v='\x3cbr data-cke-eol\x3d"1"\x3e'+v);s.endsWithEOL&&(v+='\x3cbr data-cke-eol\x3d"1"\x3e');"auto"==x&&(x="html"==u||"html"==r?"html":"text");s.type=x;s.dataValue=v;delete s.preSniffing;delete s.startsWithEOL;delete s.endsWithEOL},null,null,6);m.on("paste",function(r){r=r.data;r.dataValue&&(m.insertHtml(r.dataValue,r.type,r.range),setTimeout(function(){m.fire("afterPaste")},0))},null,null,1000);m.on("pasteDialog",function(r){setTimeout(function(){m.openDialog("paste",r.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:CKEDITOR.env.ie&&16>CKEDITOR.env.version||CKEDITOR.env.iOS&&605>CKEDITOR.env.version?!1:!0,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(m,l,n){m.ui.addButton&&(m.ui.addButton(l,n),m._.pasteButtons||(m._.pasteButtons=[]),m._.pasteButtons.push(l))},canClipboardApiBeTrusted:function(m,l){return m.getTransferType(l)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!m.isEmpty()||CKEDITOR.env.gecko&&(m.getData("text/html")||m.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.iOS&&605<=CKEDITOR.env.version||CKEDITOR.env.edge&&16<=CKEDITOR.env.version?!0:!1},getDropTarget:function(m){var l=m.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||l.isInline()?l:m.document},fixSplitNodesAfterDrop:function(m,l,q,p){function o(r,u,t){var s=r;s.type==CKEDITOR.NODE_TEXT&&(s=r.getParent());if(s.equals(u)&&t!=u.getChildCount()){return r=l.startContainer.getChild(l.startOffset-1),u=l.startContainer.getChild(l.startOffset),r&&r.type==CKEDITOR.NODE_TEXT&&u&&u.type==CKEDITOR.NODE_TEXT&&(t=r.getLength(),r.setText(r.getText()+u.getText()),u.remove(),l.setStart(r,t),l.collapse(!0)),!0}}var n=l.startContainer;"number"==typeof p&&"number"==typeof q&&n.type==CKEDITOR.NODE_ELEMENT&&(o(m.startContainer,n,q)||o(m.endContainer,n,p))},isDropRangeAffectedByDragRange:function(m,l){var o=l.startContainer,n=l.endOffset;return m.endContainer.equals(o)&&m.endOffset<=n||m.startContainer.getParent().equals(o)&&m.startContainer.getIndex()<n||m.endContainer.getParent().equals(o)&&m.endContainer.getIndex()<n?!0:!1},internalDrop:function(m,l,s,r){var p=CKEDITOR.plugins.clipboard,n=r.editable(),q,o;r.fire("saveSnapshot");r.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(m,l,p.dragStartContainerChildCount,p.dragEndContainerChildCount);(o=this.isDropRangeAffectedByDragRange(m,l))||(q=m.createBookmark(!1));p=l.clone().createBookmark(!1);o&&(q=m.createBookmark(!1));m=q.startNode;l=q.endNode;o=p.startNode;l&&m.getPosition(o)&CKEDITOR.POSITION_PRECEDING&&l.getPosition(o)&CKEDITOR.POSITION_FOLLOWING&&o.insertBefore(m);m=r.createRange();m.moveToBookmark(q);n.extractHtmlFromRange(m,1);l=r.createRange();p.startNode.getCommonAncestor(n)||(p=r.getSelection().createBookmarks()[0]);l.moveToBookmark(p);c(r,{dataTransfer:s,method:"drop",range:l},1);r.fire("unlockSnapshot")},getRangeAtDropPosition:function(H,G){var F=H.data.$,E=F.clientX,C=F.clientY,A=G.getSelection(!0).getRanges()[0],D=G.createRange();if(H.data.testRange){return H.data.testRange}if(document.caretRangeFromPoint&&G.document.$.caretRangeFromPoint(E,C)){F=G.document.$.caretRangeFromPoint(E,C),D.setStart(CKEDITOR.dom.node(F.startContainer),F.startOffset),D.collapse(!0)}else{if(F.rangeParent){D.setStart(CKEDITOR.dom.node(F.rangeParent),F.rangeOffset),D.collapse(!0)}else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&A&&G.editable().hasFocus){return A}if(document.body.createTextRange){G.focus();F=G.document.getBody().$.createTextRange();try{for(var B=!1,y=0;20>y&&!B;y++){if(!B){try{F.moveToPoint(E,C-y),B=!0}catch(w){}}if(!B){try{F.moveToPoint(E,C+y),B=!0}catch(x){}}}if(B){var z="cke-temp-"+(new Date).getTime();F.pasteHTML('\x3cspan id\x3d"'+z+'"\x3e\x3c/span\x3e');var J=G.document.getById(z);D.moveToPosition(J,CKEDITOR.POSITION_BEFORE_START);J.remove()}else{var s=G.document.$.elementFromPoint(E,C),t=new CKEDITOR.dom.element(s),o;if(t.equals(G.editable())||"html"==t.getName()){return A&&A.startContainer&&!A.startContainer.equals(G.editable())?A:null}o=t.getClientRect();E<o.left?D.setStartAt(t,CKEDITOR.POSITION_AFTER_START):D.setStartAt(t,CKEDITOR.POSITION_BEFORE_END);D.collapse(!0)}}catch(I){return null}}else{return null}}}return D},initDragDataTransfer:function(m,l){var o=m.data.$?m.data.$.dataTransfer:null,n=new this.dataTransfer(o,l);"dragstart"===m.name&&n.storeId();o?this.dragData&&n.id==this.dragData.id?n=this.dragData:this.dragData=n:this.dragData?n=this.dragData:this.dragData=n;m.data.dataTransfer=n},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(m,l){if(this.isCustomCopyCutSupported){if(m&&m.data&&m.data.$){var o=m.data.$.clipboardData,n=new this.dataTransfer(o,l);"copy"!==m.name&&"cut"!==m.name||n.storeId();this.copyCutData&&n.id==this.copyCutData.id?(n=this.copyCutData,n.$=o):this.copyCutData=n;return n}return new this.dataTransfer(null,l)}return new this.dataTransfer(CKEDITOR.env.edge&&m&&m.data.$&&m.data.$.clipboardData||null,l)},preventDefaultDropOnElement:function(l){l&&l.on("dragover",d)}};g=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(m,l){m&&(this.$=m);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\s*\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e\s*/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(n){n=n.toLowerCase();return"text"==n||"text/plain"==n?"Text":"url"==n?"URL":n}};this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this);this.id=this.getData(g);this.id||(this.id="Text"==g?"":"cke-"+CKEDITOR.tools.getUniqueId());l&&(this.sourceEditor=l,this.setData("text/html",l.getSelectedHtml(1)),"Text"==g||this.getData("text/plain")||this.setData("text/plain",l.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(m,l){m=this._.normalizeType(m);var p="text/html"==m&&l?this._.nativeHtmlCache:this._.data[m];if(void 0===p||null===p||""===p){if(this._.fallbackDataTransfer.isRequired()){p=this._.fallbackDataTransfer.getData(m,l)}else{try{p=this.$.getData(m)||""}catch(o){p=""}}"text/html"!=m||l||(p=this._stripHtml(p))}"Text"==m&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==p.substring(0,7)&&(p="");if("string"===typeof p){var n=p.indexOf("\x3c/html\x3e"),p=-1!==n?p.substring(0,n+7):p}return p},setData:function(m,l){m=this._.normalizeType(m);"text/html"==m?(this._.data[m]=this._stripHtml(l),this._.nativeHtmlCache=l):this._.data[m]=l;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==m||"Text"==m){if("Text"==g&&"Text"==m&&(this.id=l),this._.fallbackDataTransfer.isRequired()){this._.fallbackDataTransfer.setData(m,l)}else{try{this.$.setData(m,l)}catch(n){}}}},storeId:function(){"Text"!==g&&this.setData(g,this.id)},getTransferType:function(l){return this.sourceEditor?this.sourceEditor==l?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function m(p){p=l._.normalizeType(p);var q=l.getData(p);"text/html"==p&&(l._.nativeHtmlCache=l.getData(p,!0),q=l._stripHtml(q));q&&(l._.data[p]=q)}if(this.$){var l=this,o,n;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types){for(o=0;o<this.$.types.length;o++){m(this.$.types[o])}}}else{m("Text"),m("URL")}n=this._getImageFromClipboard();if(this.$&&this.$.files||n){this._.files=[];if(this.$.files&&this.$.files.length){for(o=0;o<this.$.files.length;o++){this._.files.push(this.$.files[o])}}0===this._.files.length&&n&&this._.files.push(n)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(l){return this._.files.length?this._.files[l]:this.$&&this.$.files&&this.$.files.length?this.$.files[l]:0===l?this._getImageFromClipboard():void 0},isEmpty:function(){var m={},l;if(this.getFilesCount()){return !1}CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(this._.data),function(o){m[o]=1});if(this.$){if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types){for(var n=0;n<this.$.types.length;n++){m[this.$.types[n]]=1}}}else{m.Text=1,m.URL=1}}"Text"!=g&&(m[g]=0);for(l in m){if(m[l]&&""!==this.getData(l)){return !1}}return !0},getTypes:function(){return this.$&&this.$.types?[].slice.call(this.$.types):[]},_getImageFromClipboard:function(){var m;try{if(this.$&&this.$.items&&this.$.items[0]&&(m=this.$.items[0].getAsFile())&&m.type){return m}}catch(l){}},_stripHtml:function(m){if(m&&m.length){m=m.replace(this._.metaRegExp,"");var l=this._.bodyRegExp.exec(m);l&&l.length&&(m=l[1],m=m.replace(this._.fragmentRegExp,""))}return m}};CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(l){this._dataTransfer=l;this._customDataFallbackType="text/html"};CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null;CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[];CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var m=CKEDITOR.plugins.clipboard.fallbackDataTransfer,l=this._dataTransfer.$;if(null===m._isCustomMimeTypeSupported){if(l){m._isCustomMimeTypeSupported=!1;if(CKEDITOR.env.edge&&17<=CKEDITOR.env.version){return !0}try{l.setData("cke/mimetypetest","cke test value"),m._isCustomMimeTypeSupported="cke test value"===l.getData("cke/mimetypetest"),l.clearData("cke/mimetypetest")}catch(n){}}else{return !1}}return !m._isCustomMimeTypeSupported},getData:function(m,l){var o=this._getData(this._customDataFallbackType,!0);if(l){return o}var o=this._extractDataComment(o),n=null,n=m===this._customDataFallbackType?o.content:o.data&&o.data[m]?o.data[m]:this._getData(m,!0);return null!==n?n:""},setData:function(m,l){var s=m===this._customDataFallbackType;s&&(l=this._applyDataComment(l,this._getFallbackTypeData()));var r=l,p=this._dataTransfer.$;try{p.setData(m,r),s&&(this._dataTransfer._.nativeHtmlCache=r)}catch(n){if(this._isUnsupportedMimeTypeError(n)){s=CKEDITOR.plugins.clipboard.fallbackDataTransfer;-1===CKEDITOR.tools.indexOf(s._customTypes,m)&&s._customTypes.push(m);var s=this._getFallbackTypeContent(),q=this._getFallbackTypeData();q[m]=r;try{r=this._applyDataComment(s,q),p.setData(this._customDataFallbackType,r),this._dataTransfer._.nativeHtmlCache=r}catch(o){r=""}}}return r},_getData:function(m,l){var o=this._dataTransfer._.data;if(!l&&o[m]){return o[m]}try{return this._dataTransfer.$.getData(m)}catch(n){return null}},_getFallbackTypeContent:function(){var l=this._dataTransfer._.data[this._customDataFallbackType];l||(l=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content);return l},_getFallbackTypeData:function(){var m=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,l=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},n=this._dataTransfer._.data;CKEDITOR.tools.array.forEach(m,function(o){void 0!==n[o]?l[o]=n[o]:void 0!==l[o]&&(l[o]=l[o])},this);return l},_isUnsupportedMimeTypeError:function(l){return l.message&&-1!==l.message.search(/element not found/gi)},_extractDataComment:function(m){var l={data:null,content:m||""};if(m&&16<m.length){var n;(n=/\x3c!--cke-data:(.*?)--\x3e/g.exec(m))&&n[1]&&(l.data=JSON.parse(decodeURIComponent(n[1])),l.content=m.replace(n[0],""))}return l},_applyDataComment:function(m,l){var n="";l&&CKEDITOR.tools.object.keys(l).length&&(n="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(l))+"--\x3e");return n+(m&&m.length?m:"")}}})();CKEDITOR.config.clipboard_notificationDuration=10000;(function(){function g(n,o,k){k=n.config.forceEnterMode||k;if("wysiwyg"==n.mode){o||(o=n.activeEnterMode);var m=n.elementPath();m&&!m.isContextFor("p")&&(o=CKEDITOR.ENTER_BR,k=1);n.fire("saveSnapshot");o==CKEDITOR.ENTER_BR?j(n,o,null,k):b(n,o,null,k);n.fire("saveSnapshot")}}function f(k){k=k.getSelection().getRanges(!0);for(var l=k.length-1;0<l;l--){k[l].deleteContents()}return k[0]}function e(k){var l=k.startContainer.getAscendant(function(m){return m.type==CKEDITOR.NODE_ELEMENT&&"true"==m.getAttribute("contenteditable")},!0);if(k.root.equals(l)){return k}l=new CKEDITOR.dom.range(l);l.moveToRange(k);return l}CKEDITOR.plugins.add("enterkey",{init:function(k){k.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(l){g(l)}});k.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(l){g(l,l.activeShiftEnterMode,1)}});k.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var d=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(),i,j,b,h;CKEDITOR.plugins.enterkey={enterBlock:function(G,C,F,x){function v(l){var k;if(l===CKEDITOR.ENTER_BR||-1===CKEDITOR.tools.indexOf(["td","th"],u.lastElement.getName())||1!==u.lastElement.getChildCount()){return !1}l=u.lastElement.getChild(0).clone(!0);(k=l.getBogus())&&k.remove();return l.getText().length?!1:!0}if(F=F||f(G)){F=e(F);var A=F.document,B=F.checkStartOfBlock(),y=F.checkEndOfBlock(),u=G.elementPath(F.startContainer),E=u.block,w=C==CKEDITOR.ENTER_DIV?"div":"p",D;if(E&&B&&y){B=E.getParent();if(B.is("li")&&1<B.getChildCount()){A=new CKEDITOR.dom.element("li");D=G.createRange();A.insertAfter(B);E.remove();D.setStart(A,0);G.getSelection().selectRanges([D]);return}if(E.is("li")||E.getParent().is("li")){E.is("li")||(E=E.getParent(),B=E.getParent());D=B.getParent();F=!E.hasPrevious();var z=!E.hasNext();x=G.getSelection();var w=x.createBookmarks(),H=E.getDirection(1),y=E.getAttribute("class"),s=E.getAttribute("style"),o=D.getDirection(1)!=H;G=G.enterMode!=CKEDITOR.ENTER_BR||o||s||y;if(D.is("li")){F||z?(F&&z&&B.remove(),E[z?"insertAfter":"insertBefore"](D)):E.breakParent(D)}else{if(G){if(u.block.is("li")?(D=A.createElement(C==CKEDITOR.ENTER_P?"p":"div"),o&&D.setAttribute("dir",H),s&&D.setAttribute("style",s),y&&D.setAttribute("class",y),E.moveChildren(D)):D=u.block,F||z){D[F?"insertBefore":"insertAfter"](B)}else{E.breakParent(B),D.insertAfter(B)}}else{if(E.appendBogus(!0),F||z){for(;A=E[F?"getFirst":"getLast"]();){A[F?"insertBefore":"insertAfter"](B)}}else{for(E.breakParent(B);A=E.getLast();){A.insertAfter(B)}}}E.remove()}x.selectBookmarks(w);return}if(E&&E.getParent().is("blockquote")){E.breakParent(E.getParent());E.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||E.getPrevious().remove();E.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||E.getNext().remove();F.moveToElementEditStart(E);F.select();return}}else{if(E&&E.is("pre")&&!y){j(G,C,F,x);return}}if(s=F.splitBlock(w)){G=s.previousBlock;E=s.nextBlock;B=s.wasStartOfBlock;y=s.wasEndOfBlock;E?(z=E.getParent(),z.is("li")&&(E.breakParent(z),E.move(E.getNext(),1))):G&&(z=G.getParent())&&z.is("li")&&(G.breakParent(z),z=G.getNext(),F.moveToElementEditStart(z),G.move(G.getPrevious()));if(B||y){if(v(C)){F.moveToElementEditStart(F.getTouchedStartNode())}else{if(G){if(G.is("li")||!h.test(G.getName())&&!G.is("pre")){D=G.clone()}}else{E&&(D=E.clone())}D?x&&!D.is("li")&&D.renameNode(w):z&&z.is("li")?D=z:(D=A.createElement(w),G&&(H=G.getDirection())&&D.setAttribute("dir",H));if(A=s.elementPath){for(C=0,x=A.elements.length;C<x;C++){w=A.elements[C];if(w.equals(A.block)||w.equals(A.blockLimit)){break}CKEDITOR.dtd.$removeEmpty[w.getName()]&&(w=w.clone(),D.moveChildren(w),D.append(w))}}D.appendBogus();D.getParent()||F.insertNode(D);D.is("li")&&D.removeAttribute("value");!CKEDITOR.env.ie||!B||y&&G.getChildCount()||(F.moveToElementEditStart(y?G:D),F.select());F.moveToElementEditStart(B&&!y?E:D)}}else{E.is("li")&&(D=F.clone(),D.selectNodeContents(E),D=new CKEDITOR.dom.walker(D),D.evaluator=function(k){return !(c(k)||d(k)||k.type==CKEDITOR.NODE_ELEMENT&&k.getName() in CKEDITOR.dtd.$inline&&!(k.getName() in CKEDITOR.dtd.$empty))},(z=D.next())&&z.type==CKEDITOR.NODE_ELEMENT&&z.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?A.createElement("br"):A.createText(" ")).insertBefore(z)),E&&F.moveToElementEditStart(E)}F.select();F.scrollIntoView()}}},enterBr:function(w,u,v,q){if(v=v||f(w)){var o=v.document,s=v.checkEndOfBlock(),t=new CKEDITOR.dom.elementPath(w.getSelection().getStartElement()),r=t.block,m=r&&t.block.getName();q||"li"!=m?(!q&&s&&h.test(m)?(s=r.getDirection())?(o=o.createElement("div"),o.setAttribute("dir",s),o.insertAfter(r),v.setStart(o,0)):(o.createElement("br").insertAfter(r),CKEDITOR.env.gecko&&o.createText("").insertAfter(r),v.setStartAt(r.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(w="pre"==m&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?o.createText("\r"):o.createElement("br"),v.deleteContents(),v.insertNode(w),CKEDITOR.env.needsBrFiller?(o.createText("").insertAfter(w),s&&(r||t.blockLimit).appendBogus(),w.getNext().$.nodeValue="",v.setStartAt(w.getNext(),CKEDITOR.POSITION_AFTER_START)):v.setStartAt(w,CKEDITOR.POSITION_AFTER_END)),v.collapse(!0),v.select(),v.scrollIntoView()):b(w,u,v,q)}}};i=CKEDITOR.plugins.enterkey;j=i.enterBr;b=i.enterBlock;h=/^h[1-6]$/})();(function(){function b(j,m){var l={},p=[],n={nbsp:" ",shy:"",gt:"\x3e",lt:"\x3c",amp:"\x26",apos:"'",quot:'"'};j=j.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(e,c){var f=m?"\x26"+c+";":n[c];l[f]=m?n[c]:"\x26"+c+";";p.push(f);return""});j=j.replace(/,$/,"");if(!m&&j){j=j.split(",");var i=document.createElement("div"),o;i.innerHTML="\x26"+j.join(";\x26")+";";o=i.innerHTML;i=null;for(i=0;i<o.length;i++){var k=o.charAt(i);l[k]="\x26"+j[i]+";";p.push(k)}}l.regex=p.join(m?"|":"");return l}CKEDITOR.plugins.add("entities",{afterInit:function(r){function m(c){return j[c]}function k(c){return"force"!=p.entities_processNumerical&&q[c]?q[c]:"\x26#"+c.charCodeAt(0)+";"}var p=r.config;if(r=(r=r.dataProcessor)&&r.htmlFilter){var n=[];!1!==p.basicEntities&&n.push("nbsp,gt,lt,amp");p.entities&&(n.length&&n.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),p.entities_latin&&n.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),p.entities_greek&&n.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),p.entities_additional&&n.push(p.entities_additional));var q=b(n.join(",")),o=q.regex?"["+q.regex+"]":"a^";delete q.regex;p.entities&&p.entities_processNumerical&&(o="[^ -~]|"+o);var o=new RegExp(o,"g"),j=b("nbsp,gt,lt,amp,shy",!0),i=new RegExp(j.regex,"g");r.addRules({text:function(c){return c.replace(i,m).replace(o,k)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;CKEDITOR.config.entities_additional="#39";(function(){function c(h){var g=h.config,o=h.fire("uiSpace",{space:"top",html:""}).html,m=function(){function B(k,q,p){f.setStyle(q,b(p));f.setStyle("position",k)}function C(k){var e=z.getDocumentPosition();switch(k){case"top":B("absolute","top",e.y-s-l);break;case"pin":B("fixed","top",E);break;case"bottom":B("absolute","top",e.y+(D.height||D.bottom-D.top)+l)}y=k}var y,z,w,D,A,s,F,t=g.floatSpaceDockedOffsetX||0,l=g.floatSpaceDockedOffsetY||0,G=g.floatSpacePinnedOffsetX||0,E=g.floatSpacePinnedOffsetY||0;return function(k){if(z=h.editable()){var e=k&&"focus"==k.name;e&&f.show();h.fire("floatingSpaceLayout",{show:e});f.removeStyle("left");f.removeStyle("right");w=f.getClientRect();D=z.getClientRect();A=d.getViewPaneSize();s=w.height;F="pageXOffset" in d.$?d.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;y?(s+l<=D.top?C("top"):s+l>A.height-D.bottom?C("pin"):C("bottom"),k=A.width/2,k=g.floatSpacePreferRight?"right":0<D.left&&D.right<A.width&&D.width>w.width?"rtl"==g.contentsLangDirection?"right":"left":k-D.left>D.right-k?"left":"right",w.width>A.width?(k="left",e=0):(e="left"==k?0<D.left?D.left:0:D.right<A.width?A.width-D.right:0,e+w.width>A.width&&(k="left"==k?"right":"left",e=0)),f.setStyle(k,b(("pin"==y?G:t)+e+("pin"==y?0:"left"==k?F:-F)))):(y="pin",C("pin"),m(k))}}}();if(o){var i=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?" ":"")+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(h.title?' aria-labelledby\x3d"cke_{name}_arialbl"':" ")+"\x3e"+(h.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':" ")+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),f=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(i.output({content:o,id:h.id,langDir:h.lang.dir,langCode:h.langCode,name:h.name,style:"display:none;z-index:"+(g.baseFloatZIndex-1),topId:h.ui.spaceId("top"),voiceLabel:h.title}))),j=CKEDITOR.tools.eventsBuffer(500,m),n=CKEDITOR.tools.eventsBuffer(100,m);f.unselectable();f.on("mousedown",function(e){e=e.data;e.getTarget().hasAscendant("a",1)||e.preventDefault()});h.on("focus",function(e){m(e);h.on("change",j.input);d.on("scroll",n.input);d.on("resize",n.input)});h.on("blur",function(){f.hide();h.removeListener("change",j.input);d.removeListener("scroll",n.input);d.removeListener("resize",n.input)});h.on("destroy",function(){d.removeListener("scroll",n.input);d.removeListener("resize",n.input);f.clearCustomData();f.remove()});h.focusManager.hasFocus&&f.show();h.focusManager.add(f,1)}}var d=CKEDITOR.document.getWindow(),b=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(e){e.on("loaded",function(){c(this)},null,null,20)}})})();(function(){function b(j){function n(g){var f=!1;l.attachListener(l,"keydown",function(){var q=p.getBody().getElementsByTag(g);if(!f){for(var h=0;h<q.count();h++){q.getItem(h).setCustomData("retain",!0)}f=!0}},null,null,1);l.attachListener(l,"keyup",function(){var h=p.getElementsByTag(g);f&&(1==h.count()&&!h.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(h.getItem(0).getAttributes())&&h.getItem(0).remove(1),f=!1)})}var i=this.editor;if(i&&!i.isDetached()){var p=j.document,o=p.body,m=p.getElementById("cke_actscrpt");m&&m.parentNode.removeChild(m);(m=p.getElementById("cke_shimscrpt"))&&m.parentNode.removeChild(m);(m=p.getElementById("cke_basetagscrpt"))&&m.parentNode.removeChild(m);o.contentEditable=!0;CKEDITOR.env.ie&&(o.hideFocus=!0,o.disabled=!0,o.removeAttribute("disabled"));delete this._.isLoadingData;this.$=o;p=new CKEDITOR.dom.document(p);this.setup();this.fixInitialSelection();var l=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&p.getDocumentElement().addClass(p.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&i.enterMode!=CKEDITOR.ENTER_P?n("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&i.enterMode!=CKEDITOR.ENTER_DIV&&n("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version){p.getDocumentElement().on("mousedown",function(f){f.data.getTarget().is("html")&&setTimeout(function(){i.editable().focus()})})}e(i);try{i.document.$.execCommand("2D-position",!1,!0)}catch(k){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==i.document.$.compatMode)&&this.attachListener(this,"keydown",function(f){var h=f.data.getKeystroke();if(33==h||34==h){if(CKEDITOR.env.ie){setTimeout(function(){i.getSelection().scrollIntoView()},0)}else{if(i.window.$.innerHeight>this.$.offsetHeight){var g=i.createRange();g[33==h?"moveToElementEditStart":"moveToElementEditEnd"](this);g.select();f.data.preventDefault()}}}});CKEDITOR.env.ie&&this.attachListener(p,"blur",function(){try{p.$.selection.empty()}catch(f){}});CKEDITOR.env.iOS&&this.attachListener(p,"touchend",function(){j.focus()});o=i.document.getElementsByTag("title").getItem(0);o.data("cke-title",o.getText());CKEDITOR.env.ie&&(i.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready");i.fire("contentDom");this._.isPendingFocus&&(i.focus(),this._.isPendingFocus=!1);setTimeout(function(){i.fire("dataReady")},0)},0,this)}}function e(g){function h(){var k;g.editable().attachListener(g,"selectionChange",function(){var l=g.getSelection().getSelectedElement();l&&(k&&(k.detachEvent("onresizestart",f),k=null),l.$.attachEvent("onresizestart",f),k=l.$)})}function f(k){k.returnValue=!1}if(CKEDITOR.env.gecko){try{var j=g.document.$;j.execCommand("enableObjectResizing",!1,!g.config.disableObjectResizing);j.execCommand("enableInlineTableEditing",!1,!g.config.disableNativeTableHandles)}catch(i){}}else{CKEDITOR.env.ie&&11>CKEDITOR.env.version&&g.config.disableObjectResizing&&h(g)}}function d(){var g=[];if(8<=CKEDITOR.document.$.documentMode){g.push("html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}");var h=[],f;for(f in CKEDITOR.dtd.$removeEmpty){h.push("html.CSS1Compat "+f+"[contenteditable\x3dfalse]")}g.push(h.join(",")+"{display:inline-block}")}else{CKEDITOR.env.gecko&&(g.push("html{height:100% !important}"),g.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"))}g.push("html{cursor:text;*cursor:auto}");g.push("img,input,textarea{cursor:default}");return g.join("\n")}var c;CKEDITOR.plugins.add("wysiwygarea",{init:function(f){f.config.fullPage&&f.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});f.addMode("wysiwyg",function(o){function i(g){g&&g.removeListener();f.isDestroyed()||f.isDetached()||(f.editable(new c(f,p.$.contentWindow.document.body)),f.setData(f.getData(1),o))}var q="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",q=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(q)+"}())":"",p=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+q+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');p.setStyles({width:"100%",height:"100%"});p.addClass("cke_wysiwyg_frame").addClass("cke_reset");q=f.ui.space("contents");q.append(p);var n=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(n){p.on("load",i)}var m=f.title,l=f.fire("ariaEditorHelpLabel",{}).label;m&&(CKEDITOR.env.ie&&l&&(m+=", "+l),p.setAttribute("title",m));if(l){var m=CKEDITOR.tools.getNextId(),j=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+m+'" class\x3d"cke_voice_label"\x3e'+l+"\x3c/span\x3e");q.append(j,1);p.setAttribute("aria-describedby",m)}f.on("beforeModeUnload",function(g){g.removeListener();j&&j.remove()});p.setAttributes({tabIndex:f.tabIndex,allowTransparency:"true"});!n&&i();f.fire("ariaWidget",p)})}});CKEDITOR.editor.prototype.addContentsCss=function(g){var h=this.config,f=h.contentsCss;CKEDITOR.tools.isArray(f)||(h.contentsCss=f?[f]:[]);h.contentsCss.push(g)};c=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(f){CKEDITOR.tools.setTimeout(b,0,this,f)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(t,p){var s=this.editor;if(p){this.setHtml(t),this.fixInitialSelection(),s.fire("dataReady")}else{this._.isLoadingData=!0;s._.dataStore={id:1};var r=s.config,q=r.fullPage,o=r.docType,n=CKEDITOR.tools.buildStyleHtml(d()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');q||(n+=CKEDITOR.tools.buildStyleHtml(s.config.contentsCss));var m=r.baseHref?'\x3cbase href\x3d"'+r.baseHref+'" data-cke-temp\x3d"1" /\x3e':"";q&&(t=t.replace(/<!DOCTYPE[^>]*>/i,function(f){s.docType=o=f;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(f){s.xmlDeclaration=f;return""}));t=s.dataProcessor.toHtml(t);q?(/<body[\s|>]/.test(t)||(t="\x3cbody\x3e"+t),/<html[\s|>]/.test(t)||(t="\x3chtml\x3e"+t+"\x3c/html\x3e"),/<head[\s|>]/.test(t)?/<title[\s|>]/.test(t)||(t=t.replace(/<head[^>]*>/,"$\x26\x3ctitle\x3e\x3c/title\x3e")):t=t.replace(/<html[^>]*>/,"$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e"),m&&(t=t.replace(/<head[^>]*?>/,"$\x26"+m)),t=t.replace(/<\/head\s*>/,n+"$\x26"),t=o+t):t=r.docType+'\x3chtml dir\x3d"'+r.contentsLangDirection+'" lang\x3d"'+(r.contentsLanguage||s.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+this._.docTitle+"\x3c/title\x3e"+m+n+"\x3c/head\x3e\x3cbody"+(r.bodyId?' id\x3d"'+r.bodyId+'"':"")+(r.bodyClass?' class\x3d"'+r.bodyClass+'"':"")+"\x3e"+t+"\x3c/body\x3e\x3c/html\x3e";CKEDITOR.env.gecko&&(t=t.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),20000>CKEDITOR.env.version&&(t=t.replace(/<body[^>]*>/,"$\x26\x3c!-- cke-content-start --\x3e")));r='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':"")+"\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded\x3d1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script\x3e";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(r+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');m&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(r+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');t=t.replace(/(?=\s*<\/(:?head)>)/,r);this.clearCustomData();this.clearListeners();s.fire("contentDomUnload");var j=this.getDocument();try{j.write(t)}catch(i){setTimeout(function(){j.write(t)},0)}}},getData:function(h){if(h){return this.getHtml()}h=this.editor;var j=h.config,g=j.fullPage,l=g&&h.docType,k=g&&h.xmlDeclaration,i=this.getDocument(),g=g?i.getDocumentElement().getOuterHtml():i.getBody().getHtml();CKEDITOR.env.gecko&&j.enterMode!=CKEDITOR.ENTER_BR&&(g=g.replace(/<br>(?=\s*(:?$|<\/body>))/,""));g=h.dataProcessor.toDataFormat(g);k&&(g=k+"\n"+g);l&&(g=l+"\n"+g);return g},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:c.baseProto.focus.call(this)},detach:function(){var f=this.editor,g=f.document,f=f.container.findOne("iframe.cke_wysiwyg_frame");c.baseProto.detach.call(this);this.clearCustomData(this._.expandoNumber);g.getDocumentElement().clearCustomData();CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);f&&(f.clearCustomData(),(g=f.removeCustomData("onResize"))&&g.removeListener(),f.isDetached()||f.remove())}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function b(h,g){var j,i;g.on("refresh",function(f){var e=[c],k;for(k in f.data.states){e.push(f.data.states[k])}this.setState(CKEDITOR.tools.search(e,d)?d:c)},g,null,100);g.on("exec",function(e){j=h.getSelection();i=j.createBookmarks(1);e.data||(e.data={});e.data.done=!1},g,null,0);g.on("exec",function(){h.forceNextSelectionCheck();j.selectBookmarks(i)},g,null,100)}var c=CKEDITOR.TRISTATE_DISABLED,d=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(f){var e=CKEDITOR.plugins.indent.genericDefinition;b(f,f.addCommand("indent",new e(!0)));b(f,f.addCommand("outdent",new e));f.ui.addButton&&(f.ui.addButton("Indent",{label:f.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),f.ui.addButton("Outdent",{label:f.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));f.on("dirChanged",function(i){var o=f.createRange(),j=i.data.node;o.setStartBefore(j);o.setEndAfter(j);for(var r=new CKEDITOR.dom.walker(o),q;q=r.next();){if(q.type==CKEDITOR.NODE_ELEMENT){if(!q.equals(j)&&q.getDirection()){o.setStartAfter(q),r=new CKEDITOR.dom.walker(o)}else{var p=f.config.indentClasses;if(p){for(var m="ltr"==i.data.dir?["_rtl",""]:["","_rtl"],k=0;k<p.length;k++){q.hasClass(p[k]+m[0])&&(q.removeClass(p[k]+m[0]),q.addClass(p[k]+m[1]))}}p=q.getStyle("margin-right");m=q.getStyle("margin-left");p?q.setStyle("margin-left",p):q.removeStyle("margin-left");m?q.setStyle("margin-right",m):q.removeStyle("margin-right")}}}})}});CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e;this.startDisabled=!this.isIndent},specificDefinition:function(g,f,h){this.name=f;this.editor=g;this.jobs={};this.enterBr=g.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!h;this.relatedGlobal=h?"indent":"outdent";this.indentKey=h?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(f,e){f.on("pluginsLoaded",function(){for(var g in e){(function(i,h){var j=i.getCommand(h.relatedGlobal),k;for(k in h.jobs){j.on("exec",function(l){l.data.done||(i.fire("lockSnapshot"),h.execJob(i,k)&&(l.data.done=!0),i.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(h.database))},this,null,k),j.on("refresh",function(l){l.data.states||(l.data.states={});l.data.states[h.name+"@"+k]=h.refreshJob(i,k,l.data.path)},this,null,k)}i.addFeature(h)})(this,e[g])}})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(g,f){var h=this.jobs[f];if(h.state!=c){return h.exec.call(this,g)}},refreshJob:function(g,f,h){f=this.jobs[f];g.activeFilter.checkFeature(this)?f.state=f.refresh.call(this,g,h):f.state=c;return f.state},getContext:function(e){return e.contains(this.context)}}})();(function(){function c(r){function o(A){for(var y=t.startContainer,B=t.endContainer;y&&!y.getParent().equals(A);){y=y.getParent()}for(;B&&!B.getParent().equals(A);){B=B.getParent()}if(!y||!B){return !1}for(var z=[],w=!1;!w;){y.equals(B)&&(w=!0),z.push(y),y=y.getNext()}if(1>z.length){return !1}y=A.getParents(!0);for(B=0;B<y.length;B++){if(y[B].getName&&j[y[B].getName()]){A=y[B];break}}for(var y=n.isIndent?1:-1,B=z[0],z=z[z.length-1],w=CKEDITOR.plugins.list.listToArray(A,i),q=w[z.getCustomData("listarray_index")].indent,B=B.getCustomData("listarray_index");B<=z.getCustomData("listarray_index");B++){if(w[B].indent+=y,0<y){for(var x=w[B].parent,p=B-1;0<=p;p--){if(w[p].indent===y){x=w[p].parent;break}}w[B].parent=new CKEDITOR.dom.element(x.getName(),x.getDocument())}}for(B=z.getCustomData("listarray_index")+1;B<w.length&&w[B].indent>q;B++){w[B].indent+=y}y=CKEDITOR.plugins.list.arrayToList(w,i,null,r.config.enterMode,A.getDirection());if(!n.isIndent){var C;if((C=A.getParent())&&C.is("li")){for(var z=y.listNode.getChildren(),k=[],v,B=z.count()-1;0<=B;B--){(v=z.getItem(B))&&v.is&&v.is("li")&&k.push(v)}}}y&&y.listNode.replace(A);if(k&&k.length){for(B=0;B<k.length;B++){for(v=A=k[B];(v=v.getNext())&&v.is&&v.getName() in j;){CKEDITOR.env.needsNbspFiller&&!A.getFirst(b)&&A.append(t.document.createText(" ")),A.append(v)}A.insertAfter(C)}}y&&r.fire("contentDomInvalidated");return !0}for(var n=this,i=this.database,j=this.context,t,l=r.getSelection(),l=(l&&l.getRanges()).createIterator();t=l.getNextRange();){for(var u=t.getCommonAncestor();u&&(u.type!=CKEDITOR.NODE_ELEMENT||!j[u.getName()]);){if(r.editable().equals(u)){u=!1;break}u=u.getParent()}u||(u=t.startPath().contains(j))&&t.setEndAt(u,CKEDITOR.POSITION_BEFORE_END);if(!u){var s=t.getEnclosedNode();s&&s.type==CKEDITOR.NODE_ELEMENT&&s.getName() in j&&(t.setStartAt(s,CKEDITOR.POSITION_AFTER_START),t.setEndAt(s,CKEDITOR.POSITION_BEFORE_END),u=s)}u&&t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.getName() in j&&(s=new CKEDITOR.dom.walker(t),s.evaluator=h,t.startContainer=s.next());u&&t.endContainer.type==CKEDITOR.NODE_ELEMENT&&t.endContainer.getName() in j&&(s=new CKEDITOR.dom.walker(t),s.evaluator=h,t.endContainer=s.previous());if(u){return o(u)}}return 0}function h(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.is("li")}function b(i){return g(i)&&f(i)}var g=CKEDITOR.dom.walker.whitespaces(!0),f=CKEDITOR.dom.walker.bookmark(!1,!0),e=CKEDITOR.TRISTATE_DISABLED,d=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(l){function j(k){i.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];k.on("key",function(o){var p=k.elementPath();if("wysiwyg"==k.mode&&o.data.keyCode==this.indentKey&&p){var n=this.getContext(p);!n||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,p,n)||(k.execCommand(this.relatedGlobal),o.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(o,p){var n=this.getContext(p),m=CKEDITOR.plugins.indentList.firstItemInPath(this.context,p,n);return n&&this.isIndent&&!m?d:e}:function(m,n){return !this.getContext(n)||this.isIndent?e:d},exec:CKEDITOR.tools.bind(c,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(l,{indentlist:new j(l,"indentlist",!0),outdentlist:new j(l,"outdentlist")});CKEDITOR.tools.extend(j.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(m,j,i){var l=j.contains(h);i||(i=j.contains(m));return i&&l&&l.equals(i.getFirst(h))}})();(function(){function f(h,g){var j=c.exec(h),i=c.exec(g);if(j){if(!j[2]&&"px"==i[2]){return i[1]}if("px"==j[2]&&!i[2]){return i[1]+"px"}}return g}var d=CKEDITOR.htmlParser.cssStyle,e=CKEDITOR.tools.cssLength,c=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,b={elements:{$:function(h){var g=h.attributes;if((g=(g=(g=g&&g["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(g)))&&g.children[0])&&h.attributes["data-cke-resizable"]){var j=(new d(h)).rules;h=g.attributes;var i=j.width,j=j.height;i&&(h.width=f(h.width,i));j&&(h.height=f(h.height,j))}return g}}};CKEDITOR.plugins.add("fakeobjects",{init:function(g){g.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(g){(g=(g=g.dataProcessor)&&g.htmlFilter)&&g.addRules(b,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(h,g,k,j){var i=this.lang.fakeobjects,i=i[k]||i.unknown;g={"class":g,"data-cke-realelement":encodeURIComponent(h.getOuterHtml()),"data-cke-real-node-type":h.type,alt:i,title:i,align:h.getAttribute("align")||""};CKEDITOR.env.hc||(g.src=CKEDITOR.tools.transparentImageData);k&&(g["data-cke-real-element-type"]=k);j&&(g["data-cke-resizable"]=j,k=new d,j=h.getAttribute("width"),h=h.getAttribute("height"),j&&(k.rules.width=e(j)),h&&(k.rules.height=e(h)),k.populate(g));return this.document.createElement("img",{attributes:g})};CKEDITOR.editor.prototype.createFakeParserElement=function(h,g,l,k){var j=this.lang.fakeobjects,j=j[l]||j.unknown,i;i=new CKEDITOR.htmlParser.basicWriter;h.writeHtml(i);i=i.getHtml();g={"class":g,"data-cke-realelement":encodeURIComponent(i),"data-cke-real-node-type":h.type,alt:j,title:j,align:h.attributes.align||""};CKEDITOR.env.hc||(g.src=CKEDITOR.tools.transparentImageData);l&&(g["data-cke-real-element-type"]=l);k&&(g["data-cke-resizable"]=k,k=h.attributes,h=new d,l=k.width,k=k.height,void 0!==l&&(h.rules.width=e(l)),void 0!==k&&(h.rules.height=e(k)),h.populate(g));return new CKEDITOR.htmlParser.element("img",g)};CKEDITOR.editor.prototype.restoreRealElement=function(h){if(h.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT){return null}var g=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(h.data("cke-realelement")),this.document);if(h.data("cke-resizable")){var i=h.getStyle("width");h=h.getStyle("height");i&&g.setAttribute("width",f(g.getAttribute("width"),i));h&&g.setAttribute("height",f(g.getAttribute("height"),h))}return g}})();(function(){function g(m){return m.replace(/'/g,"\\$\x26")}function e(r){for(var m=r.length,n=[],q,p=0;p<m;p++){q=r.charCodeAt(p),n.push(q)}return"String.fromCharCode("+n.join(",")+")"}function c(u,m){for(var n=u.plugins.link,r=n.compiledProtectionFunction.params,n=[n.compiledProtectionFunction.name,"("],q,t,p=0;p<r.length;p++){q=r[p].toLowerCase(),t=m[q],0<p&&n.push(","),n.push("'",t?g(encodeURIComponent(m[q])):"","'")}n.push(")");return n.join("")}function i(n){n=n.config.emailProtection||"";var m;n&&"encode"!=n&&(m={},n.replace(/^([^(]+)\(([^)]+)\)$/,function(p,r,q){m.name=r;m.params=[];q.replace(/[^,\s]+/g,function(t){m.params.push(t)})}));return m}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function p(q){return n.replace(/%1/g,"rtl"==q?"right":"left").replace(/%2/g,"cke_contents_"+q)}var m="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+m+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+m+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(p("ltr")+p("rtl"))},init:function(n){var m="a[!href]";CKEDITOR.dialog.isTabEnabled(n,"link","advanced")&&(m=m.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)"));CKEDITOR.dialog.isTabEnabled(n,"link","target")&&(m=m.replace("]",",target,onclick]"));n.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:m,requiredContent:"a[href]"}));n.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));n.addCommand("unlink",new CKEDITOR.unlinkCommand);n.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);n.setKeystroke(CKEDITOR.CTRL+76,"link");n.setKeystroke(CKEDITOR.CTRL+75,"link");n.ui.addButton&&(n.ui.addButton("Link",{label:n.lang.link.toolbar,command:"link",toolbar:"links,10"}),n.ui.addButton("Unlink",{label:n.lang.link.unlink,command:"unlink",toolbar:"links,20"}),n.ui.addButton("Anchor",{label:n.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");n.on("doubleclick",function(q){var p=q.data.element.getAscendant({a:1,img:1},!0);p&&!p.isReadOnly()&&(p.is("a")?(q.data.dialog=!p.getAttribute("name")||p.getAttribute("href")&&p.getChildCount()?"link":"anchor",q.data.link=p):CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,p)&&(q.data.dialog="anchor"))},null,null,0);n.on("doubleclick",function(p){p.data.dialog in {link:1,anchor:1}&&p.data.link&&n.getSelection().selectElement(p.data.link)},null,null,20);n.addMenuItems&&n.addMenuItems({anchor:{label:n.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:n.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:n.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:n.lang.link.unlink,command:"unlink",group:"link",order:5}});n.contextMenu&&n.contextMenu.addListener(function(q){if(!q||q.isReadOnly()){return null}q=CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,q);if(!q&&!(q=CKEDITOR.plugins.link.getSelectedLink(n))){return null}var p={};q.getAttribute("href")&&q.getChildCount()&&(p={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});q&&q.hasAttribute("name")&&(p.anchor=p.removeAnchor=CKEDITOR.TRISTATE_OFF);return p});this.compiledProtectionFunction=i(n)},afterInit:function(n){n.dataProcessor.dataFilter.addRules({elements:{a:function(p){return p.attributes.name?p.children.length?null:n.createFakeParserElement(p,"cke_anchor","anchor"):null}}});var m=n._.elementsPath&&n._.elementsPath.filters;m&&m.push(function(q,p){if("a"==p&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,q)||q.getAttribute("name")&&(!q.getAttribute("href")||!q.getChildCount()))){return"anchor"}})}});var H=/^javascript:/,G=/^(?:mailto)(?:(?!\?(subject|body)=).)+/i,F=/subject=([^;?:@&=$,\/]*)/i,s=/body=([^;?:@&=$,\/]*)/i,o=/^#(.*)$/,l=/^((?:http|https|ftp|news):\/\/)?(.*)$/,k=/^(_(?:self|top|parent|blank))$/,h=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,f=/^javascript:([^(]+)\(([^)]+)\)$/,d=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,b=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,I=/^tel:(.*)$/,j={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(u,m){var n=u.getSelection(),r=n.getSelectedElement(),q=n.getRanges(),t=[],p;if(!m&&r&&r.is("a")){return r}for(r=0;r<q.length;r++){if(p=n.getRanges()[r],p.shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(p=u.elementPath(p.getCommonAncestor()).contains("a",1))&&m){t.push(p)}else{if(p){return p}}}return m?t:null},getEditorAnchors:function(t){for(var m=t.editable(),n=m.isInline()&&!t.plugins.divarea?t.document:m,m=n.getElementsByTag("a"),n=n.getElementsByTag("img"),q=[],p=0,r;r=m.getItem(p++);){(r.data("cke-saved-name")||r.hasAttribute("name"))&&q.push({name:r.data("cke-saved-name")||r.getAttribute("name"),id:r.getAttribute("id")})}for(p=0;r=n.getItem(p++);){(r=this.tryRestoreFakeAnchor(t,r))&&q.push({name:r.getAttribute("name"),id:r.getAttribute("id")})}return q},fakeAnchor:!0,tryRestoreFakeAnchor:function(p,m){if(m&&m.data("cke-real-element-type")&&"anchor"==m.data("cke-real-element-type")){var n=p.restoreRealElement(m);if(n.data("cke-saved-name")){return n}}},parseLinkAttributes:function(u,v){var w=v&&(v.data("cke-saved-href")||v.getAttribute("href"))||"",r=u.plugins.link.compiledProtectionFunction,q=u.config.emailProtection,t={},p;w.match(H)&&("encode"==q?w=w.replace(h,function(y,x,z){z=z||"";return"mailto:"+String.fromCharCode.apply(String,x.split(","))+z.replace(/\\'/g,"'")}):q&&w.replace(f,function(y,x,D){if(x==r.name){t.type="email";y=t.email={};x=/(^')|('$)/g;D=D.match(/[^,\s]+/g);for(var C=D.length,B,A,z=0;z<C;z++){B=decodeURIComponent,A=D[z].replace(x,"").replace(/\\'/g,"'"),A=B(A),B=r.params[z].toLowerCase(),y[B]=A}y.address=[y.name,y.domain].join("@")}}));if(!t.type){if(q=w.match(o)){t.type="anchor",t.anchor={},t.anchor.name=t.anchor.id=q[1]}else{if(q=w.match(I)){t.type="tel",t.tel=q[1]}else{if(q=w.match(G)){p=w.match(F);var w=w.match(s),m=t.email={};t.type="email";m.address=q[0].replace("mailto:","");p&&(m.subject=decodeURIComponent(p[1]));w&&(m.body=decodeURIComponent(w[1]))}else{w&&(p=w.match(l))&&(t.type="url",t.url={},t.url.protocol=p[1],t.url.url=p[2])}}}}if(v){if(w=v.getAttribute("target")){t.target={type:w.match(k)?w:"frame",name:w}}else{if(w=(w=v.data("cke-pa-onclick")||v.getAttribute("onclick"))&&w.match(d)){for(t.target={type:"popup",name:w[1]};q=b.exec(w[2]);){"yes"!=q[2]&&"1"!=q[2]||q[1] in {height:1,width:1,top:1,left:1}?isFinite(q[2])&&(t.target[q[1]]=q[2]):t.target[q[1]]=!0}}}null!==v.getAttribute("download")&&(t.download=!0);var w={},n;for(n in j){(q=v.getAttribute(n))&&(w[j[n]]=q)}if(n=v.data("cke-saved-name")||w.advName){w.advName=n}CKEDITOR.tools.isEmpty(w)||(t.advanced=w)}return t},getLinkAttributes:function(x,y){var z=x.config.emailProtection||"",v={};switch(y.type){case"url":var z=y.url&&void 0!==y.url.protocol?y.url.protocol:"http://",u=y.url&&CKEDITOR.tools.trim(y.url.url)||"";v["data-cke-saved-href"]=0===u.indexOf("/")?u:z+u;break;case"anchor":z=y.anchor&&y.anchor.id;v["data-cke-saved-href"]="#"+(y.anchor&&y.anchor.name||z||"");break;case"email":var w=y.email,u=w.address;switch(z){case"":case"encode":var t=encodeURIComponent(w.subject||""),q=encodeURIComponent(w.body||""),w=[];t&&w.push("subject\x3d"+t);q&&w.push("body\x3d"+q);w=w.length?"?"+w.join("\x26"):"";"encode"==z?(z=["javascript:void(location.href\x3d'mailto:'+",e(u)],w&&z.push("+'",g(w),"'"),z.push(")")):z=["mailto:",u,w];break;default:z=u.split("@",2),w.name=z[0],w.domain=z[1],z=["javascript:",c(x,w)]}v["data-cke-saved-href"]=z.join("");break;case"tel":v["data-cke-saved-href"]="tel:"+y.tel}if(y.target){if("popup"==y.target.type){for(var z=["window.open(this.href, '",y.target.name||"","', '"],r="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),u=r.length,t=function(n){y.target[n]&&r.push(n+"\x3d"+y.target[n])},w=0;w<u;w++){r[w]+=y.target[r[w]]?"\x3dyes":"\x3dno"}t("width");t("left");t("height");t("top");z.push(r.join(","),"'); return false;");v["data-cke-pa-onclick"]=z.join("")}else{"notSet"!=y.target.type&&y.target.name&&(v.target=y.target.name)}}y.download&&(v.download="");if(y.advanced){for(var p in j){(z=y.advanced[j[p]])&&(v[p]=z)}v.name&&(v["data-cke-saved-name"]=v.name)}v["data-cke-saved-href"]&&(v.href=v["data-cke-saved-href"]);p={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1};y.advanced&&CKEDITOR.tools.extend(p,j);for(var m in v){delete p[m]}return{set:v,removed:CKEDITOR.tools.object.keys(p)}},showDisplayTextForElement:function(q,m){var n={img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1},p=m.getSelection();return m.widgets&&m.widgets.focused||p&&1<p.getRanges().length?!1:!q||!q.getName||!q.is(n)}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(q){if(CKEDITOR.env.ie){var m=q.getSelection().getRanges()[0],n=m.getPreviousEditableNode()&&m.getPreviousEditableNode().getAscendant("a",!0)||m.getNextEditableNode()&&m.getNextEditableNode().getAscendant("a",!0),p;m.collapsed&&n&&(p=m.createBookmark(),m.selectNodeContents(n),m.select())}n=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});q.removeStyle(n);p&&(m.moveToBookmark(p),m.select())},refresh:function(p,m){var n=m.lastElement&&m.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(q){var m=q.getSelection(),n=m.createBookmarks(),p;if(m&&(p=m.getSelectedElement())&&(p.getChildCount()?p.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(q,p))){p.remove(1)}else{if(p=CKEDITOR.plugins.link.getSelectedLink(q)){p.hasAttribute("href")?(p.removeAttributes({name:1,"data-cke-saved-name":1}),p.removeClass("cke_anchor")):p.remove(1)}}m.selectBookmarks(n)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0,linkDefaultProtocol:"http://"})})();(function(){function k(C,t,z,x){for(var y=CKEDITOR.plugins.list.listToArray(t.root,z),w=[],B=0;B<t.contents.length;B++){var v=t.contents[B];(v=v.getAscendant("li",!0))&&!v.getCustomData("list_item_processed")&&(w.push(v),CKEDITOR.dom.element.setMarker(z,v,"list_item_processed",!0))}for(var v=t.root.getDocument(),u,A,B=0;B<w.length;B++){var r=w[B].getCustomData("listarray_index");u=y[r].parent;u.is(this.type)||(A=v.createElement(this.type),u.copyAttributes(A,{start:1,type:1}),A.removeStyle("list-style-type"),y[r].parent=A)}z=CKEDITOR.plugins.list.arrayToList(y,z,null,C.config.enterMode);for(var s,y=z.listNode.getChildCount(),B=0;B<y&&(s=z.listNode.getChild(B));B++){s.getName()==this.type&&x.push(s)}z.listNode.replace(t.root);C.fire("contentDomInvalidated")}function j(B,s,y){var w=s.contents,x=s.root.getDocument(),v=[];if(1==w.length&&w[0].equals(s.root)){var A=x.createElement("div");w[0].moveChildren&&w[0].moveChildren(A);w[0].append(A);w[0]=A}s=s.contents[0].getParent();for(A=0;A<w.length;A++){s=s.getCommonAncestor(w[A].getParent())}B=B.config.useComputedState;var u,t;B=void 0===B||B;for(A=0;A<w.length;A++){for(var z=w[A],r;r=z.getParent();){if(r.equals(s)){v.push(z);!t&&z.getDirection()&&(t=1);z=z.getDirection(B);null!==u&&(u=u&&u!=z?null:z);break}z=r}}if(!(1>v.length)){w=v[v.length-1].getNext();A=x.createElement(this.type);for(y.push(A);v.length;){y=v.shift(),B=x.createElement("li"),z=y,z.is("pre")||h.test(z.getName())||"false"==z.getAttribute("contenteditable")?y.appendTo(B):(y.copyAttributes(B),u&&y.getDirection()&&(B.removeStyle("direction"),B.removeAttribute("dir")),y.moveChildren(B),y.remove()),B.appendTo(A)}u&&t&&A.setAttribute("dir",u);w?A.insertBefore(w):A.appendTo(s)}}function g(B,s,y){function w(C){if(!(!(z=t[C?"getFirst":"getLast"]())||z.is&&z.isBlockBoundary()||!(r=s.root[C?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||r.is&&r.isBlockBoundary({br:1}))){B.document.createElement("br")[C?"insertBefore":"insertAfter"](z)}}for(var x=CKEDITOR.plugins.list.listToArray(s.root,y),v=[],A=0;A<s.contents.length;A++){var u=s.contents[A];(u=u.getAscendant("li",!0))&&!u.getCustomData("list_item_processed")&&(v.push(u),CKEDITOR.dom.element.setMarker(y,u,"list_item_processed",!0))}u=null;for(A=0;A<v.length;A++){u=v[A].getCustomData("listarray_index"),x[u].indent=-1}for(A=u+1;A<x.length;A++){if(x[A].indent>x[A-1].indent+1){v=x[A-1].indent+1-x[A].indent;for(u=x[A].indent;x[A]&&x[A].indent>=u;){x[A].indent+=v,A++}A--}}var t=CKEDITOR.plugins.list.arrayToList(x,y,null,B.config.enterMode,s.root.getAttribute("dir")).listNode,z,r;w(!0);w();t.replace(s.root);B.fire("contentDomInvalidated")}function c(s,r){this.name=s;this.context=this.type=r;this.allowedContent=r+" li";this.requiredContent=r}function q(s,r,w,u){for(var v,t;v=s[u?"getLast":"getFirst"](f);){(t=v.getDirection(1))!==r.getDirection(1)&&v.setAttribute("dir",t),v.remove(),w?v[u?"insertBefore":"insertAfter"](w):r.append(v,u),w=v}}function o(s){function r(u){var t=s[u?"getPrevious":"getNext"](p);t&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(s.getName())&&(q(s,t,null,!u),s.remove(),s=t)}r();r(1)}function m(r){return r.type==CKEDITOR.NODE_ELEMENT&&(r.getName() in CKEDITOR.dtd.$block||r.getName() in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[r.getName()]["#"]}function b(z,r,x){z.fire("saveSnapshot");x.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var v=x.extractContents();r.trim(!1,!0);var w=r.createBookmark(),u=new CKEDITOR.dom.elementPath(r.startContainer),y=u.block,u=u.lastElement.getAscendant("li",1)||y,t=new CKEDITOR.dom.elementPath(x.startContainer),s=t.contains(CKEDITOR.dtd.$listItem),t=t.contains(CKEDITOR.dtd.$list);y?(y=y.getBogus())&&y.remove():t&&(y=t.getPrevious(p))&&i(y)&&y.remove();(y=v.getLast())&&y.type==CKEDITOR.NODE_ELEMENT&&y.is("br")&&y.remove();(y=r.startContainer.getChild(r.startOffset))?v.insertBefore(y):r.startContainer.append(v);s&&(v=d(s))&&(u.contains(s)?(q(v,s.getParent(),s),v.remove()):u.append(v));for(;x.checkStartOfBlock()&&x.checkEndOfBlock();){t=x.startPath();v=t.block;if(!v){break}v.is("li")&&(u=v.getParent(),v.equals(u.getLast(p))&&v.equals(u.getFirst(p))&&(v=u));x.moveToPosition(v,CKEDITOR.POSITION_BEFORE_START);v.remove()}x=x.clone();v=z.editable();x.setEndAt(v,CKEDITOR.POSITION_BEFORE_END);x=new CKEDITOR.dom.walker(x);x.evaluator=function(A){return p(A)&&!i(A)};(x=x.next())&&x.type==CKEDITOR.NODE_ELEMENT&&x.getName() in CKEDITOR.dtd.$list&&o(x);r.moveToBookmark(w);r.select();z.fire("saveSnapshot")}function d(r){return(r=r.getLast(p))&&r.type==CKEDITOR.NODE_ELEMENT&&r.getName() in n?r:null}var n={ol:1,ul:1},e=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark(),p=function(r){return !(e(r)||l(r))},i=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(C,t,z,x,y){if(!n[C.getName()]){return[]}x||(x=0);z||(z=[]);for(var w=0,B=C.getChildCount();w<B;w++){var v=C.getChild(w);v.type==CKEDITOR.NODE_ELEMENT&&v.getName() in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(v,t,z,x+1);if("li"==v.$.nodeName.toLowerCase()){var u={parent:C,indent:x,element:v,contents:[]};y?u.grandparent=y:(u.grandparent=C.getParent(),u.grandparent&&"li"==u.grandparent.$.nodeName.toLowerCase()&&(u.grandparent=u.grandparent.getParent()));t&&CKEDITOR.dom.element.setMarker(t,v,"listarray_index",z.length);z.push(u);for(var A=0,r=v.getChildCount(),s;A<r;A++){s=v.getChild(A),s.type==CKEDITOR.NODE_ELEMENT&&n[s.getName()]?CKEDITOR.plugins.list.listToArray(s,t,z,x+1,u.grandparent):u.contents.push(s)}}}return z},arrayToList:function(Y,P,V,T,U){V||(V=0);if(!Y||Y.length<V+1){return null}for(var S,X=Y[V].parent.getDocument(),R=new CKEDITOR.dom.documentFragment(X),Q=null,W=V,M=Math.max(Y[V].indent,0),O=null,N,H,u=T==CKEDITOR.ENTER_P?"p":"div";;){var K=Y[W];S=K.grandparent;N=K.element.getDirection(1);if(K.indent==M){Q&&Y[W].parent.getName()==Q.getName()||(Q=Y[W].parent.clone(!1,1),U&&Q.setAttribute("dir",U),R.append(Q));O=Q.append(K.element.clone(0,1));N!=Q.getDirection(1)&&O.setAttribute("dir",N);for(S=0;S<K.contents.length;S++){O.append(K.contents[S].clone(1,1))}W++}else{if(K.indent==Math.max(M,0)+1){K=Y[W-1].element.getDirection(1),W=CKEDITOR.plugins.list.arrayToList(Y,null,W,T,K!=N?N:null),!O.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=X.$.documentMode&&O.append(X.createText(" ")),O.append(W.listNode),W=W.nextIndex}else{if(-1==K.indent&&!V&&S){n[S.getName()]?(O=K.element.clone(!1,!0),N!=S.getDirection(1)&&O.setAttribute("dir",N)):O=new CKEDITOR.dom.documentFragment(X);var Q=S.getDirection(1)!=N,D=K.element,I=D.getAttribute("class"),G=D.getAttribute("style"),t=O.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(T!=CKEDITOR.ENTER_BR||Q||G||I),F,s=K.contents.length,C;for(S=0;S<s;S++){if(F=K.contents[S],l(F)&&1<s){t?C=F.clone(1,1):O.append(F.clone(1,1))}else{if(F.type==CKEDITOR.NODE_ELEMENT&&F.isBlockBoundary()){Q&&!F.getDirection()&&F.setAttribute("dir",N);H=F;var L=D.getAttribute("style");L&&H.setAttribute("style",L.replace(/([^;])$/,"$1;")+(H.getAttribute("style")||""));I&&F.addClass(I);H=null;C&&(O.append(C),C=null);O.append(F.clone(1,1))}else{t?(H||(H=X.createElement(u),O.append(H),Q&&H.setAttribute("dir",N)),G&&H.setAttribute("style",G),I&&H.setAttribute("class",I),C&&(H.append(C),C=null),H.append(F.clone(1,1))):O.append(F.clone(1,1))}}}C&&((H||O).append(C),C=null);O.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&W!=Y.length-1&&(CKEDITOR.env.needsBrFiller&&(N=O.getLast())&&N.type==CKEDITOR.NODE_ELEMENT&&N.is("br")&&N.remove(),(N=O.getLast(p))&&N.type==CKEDITOR.NODE_ELEMENT&&N.is(CKEDITOR.dtd.$block)||O.append(X.createElement("br")));N=O.$.nodeName.toLowerCase();"div"!=N&&"p"!=N||O.appendBogus();R.append(O);Q=null;W++}else{return null}}}H=null;if(Y.length<=W||Math.max(Y[W].indent,0)<M){break}}if(P){for(Y=R.getFirst();Y;){if(Y.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(P,Y),Y.getName() in CKEDITOR.dtd.$listItem&&(V=Y,X=U=T=void 0,T=V.getDirection()))){for(U=V.getParent();U&&!(X=U.getDirection());){U=U.getParent()}T==X&&V.removeAttribute("dir")}Y=Y.getNextSourceNode()}}return{listNode:R,nextIndex:W}}};var h=/^h[1-6]$/,f=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);c.prototype={exec:function(J){function z(r){return n[r.root.getName()]&&!F(r.root,[CKEDITOR.NODE_COMMENT])}function F(w,r){return CKEDITOR.tools.array.filter(w.getChildren().toArray(),function(y){return -1===CKEDITOR.tools.array.indexOf(r,y.type)}).length}function D(w){var r=!0;if(0===w.getChildCount()){return !1}w.forEach(function(y){if(y.type!==CKEDITOR.NODE_COMMENT){return r=!1}},null,!0);return r}this.refresh(J,J.elementPath());var E=J.config,C=J.getSelection(),I=C&&C.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var B=J.editable();if(B.getFirst(p)){var A=1==I.length&&I[0];(E=A&&A.getEnclosedNode())&&E.is&&this.type==E.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else{E.enterMode==CKEDITOR.ENTER_BR?B.appendBogus():I[0].fixBlock(1,E.enterMode==CKEDITOR.ENTER_P?"p":"div"),C.selectRanges(I)}}for(var E=C.createBookmarks(!0),B=[],G={},I=I.createIterator(),u=0;(A=I.getNextRange())&&++u;){var x=A.getBoundaryNodes(),v=x.startNode,s=x.endNode;v.type==CKEDITOR.NODE_ELEMENT&&"td"==v.getName()&&A.setStartAt(x.startNode,CKEDITOR.POSITION_AFTER_START);s.type==CKEDITOR.NODE_ELEMENT&&"td"==s.getName()&&A.setEndAt(x.endNode,CKEDITOR.POSITION_BEFORE_END);A=A.createIterator();for(A.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;x=A.getNextParagraph();){if(!x.getCustomData("list_block")&&!D(x)){CKEDITOR.dom.element.setMarker(G,x,"list_block",1);for(var H=J.elementPath(x),v=H.elements,s=0,H=H.blockLimit,t,K=v.length-1;0<=K&&(t=v[K]);K--){if(n[t.getName()]&&H.contains(t)){H.removeCustomData("list_group_object_"+u);(v=t.getCustomData("list_group_object"))?v.contents.push(x):(v={root:t,contents:[x]},B.push(v),CKEDITOR.dom.element.setMarker(G,t,"list_group_object",v));s=1;break}}s||(s=H,s.getCustomData("list_group_object_"+u)?s.getCustomData("list_group_object_"+u).contents.push(x):(v={root:s,contents:[x]},CKEDITOR.dom.element.setMarker(G,s,"list_group_object_"+u,v),B.push(v)))}}}for(t=[];0<B.length;){v=B.shift(),this.state==CKEDITOR.TRISTATE_OFF?z(v)||(n[v.root.getName()]?k.call(this,J,v,G,t):j.call(this,J,v,t)):this.state==CKEDITOR.TRISTATE_ON&&n[v.root.getName()]&&!z(v)&&g.call(this,J,v,G)}for(K=0;K<t.length;K++){o(t[K])}CKEDITOR.dom.element.clearAllMarkers(G);C.selectBookmarks(E);J.focus()},refresh:function(s,r){var u=r.contains(n,1),t=r.blockLimit||r.root;u&&t.contains(u)?this.setState(u.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(r){r.blockless||(r.addCommand("numberedlist",new c("numberedlist","ol")),r.addCommand("bulletedlist",new c("bulletedlist","ul")),r.ui.addButton&&(r.ui.addButton("NumberedList",{label:r.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),r.ui.addButton("BulletedList",{label:r.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),r.on("key",function(t){var z=t.data.domEvent.getKey(),x;if("wysiwyg"==r.mode&&z in {8:1,46:1}){var y=r.getSelection().getRanges()[0],w=y&&y.startPath();if(y&&y.collapsed){var B=8==z,v=r.editable(),u=new CKEDITOR.dom.walker(y.clone());u.evaluator=function(C){return p(C)&&!i(C)};u.guard=function(D,C){return !(C&&D.type==CKEDITOR.NODE_ELEMENT&&D.is("table"))};z=y.clone();if(B){var A;(A=w.contains(n))&&y.checkBoundaryOfElement(A,CKEDITOR.START)&&(A=A.getParent())&&A.is("li")&&(A=d(A))?(x=A,A=A.getPrevious(p),z.moveToPosition(A&&i(A)?A:x,CKEDITOR.POSITION_BEFORE_START)):(u.range.setStartAt(v,CKEDITOR.POSITION_AFTER_START),u.range.setEnd(y.startContainer,y.startOffset),(A=u.previous())&&A.type==CKEDITOR.NODE_ELEMENT&&(A.getName() in n||A.is("li"))&&(A.is("li")||(u.range.selectNodeContents(A),u.reset(),u.evaluator=m,A=u.previous()),x=A,z.moveToElementEditEnd(x),z.moveToPosition(z.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(x){b(r,z,y),t.cancel()}else{var s=w.contains(n);s&&y.checkBoundaryOfElement(s,CKEDITOR.START)&&(x=s.getFirst(p),y.checkBoundaryOfElement(x,CKEDITOR.START)&&(A=s.getPrevious(p),d(x)?A&&(y.moveToElementEditEnd(A),y.select()):r.execCommand("outdent"),t.cancel()))}}else{if(x=w.contains("li")){if(u.range.setEndAt(v,CKEDITOR.POSITION_BEFORE_END),B=(v=x.getLast(p))&&m(v)?v:x,w=0,(A=u.next())&&A.type==CKEDITOR.NODE_ELEMENT&&A.getName() in n&&A.equals(v)?(w=1,A=u.next()):y.checkBoundaryOfElement(B,CKEDITOR.END)&&(w=2),w&&A){y=y.clone();y.moveToElementEditStart(A);if(1==w&&(z.optimize(),!z.startContainer.equals(x))){for(x=z.startContainer;x.is(CKEDITOR.dtd.$inline);){s=x,x=x.getParent()}s&&z.moveToPosition(s,CKEDITOR.POSITION_AFTER_END)}2==w&&(z.moveToPosition(z.endPath().block,CKEDITOR.POSITION_BEFORE_END),y.endPath().block&&y.moveToPosition(y.endPath().block,CKEDITOR.POSITION_AFTER_START));b(r,z,y);t.cancel()}}else{u.range.setEndAt(v,CKEDITOR.POSITION_BEFORE_END),(A=u.next())&&A.type==CKEDITOR.NODE_ELEMENT&&A.is(n)&&(A=A.getFirst(p),w.block&&y.checkStartOfBlock()&&y.checkEndOfBlock()?(w.block.remove(),y.moveToElementEditStart(A),y.select()):d(A)?(y.moveToElementEditStart(A),y.select()):(y=y.clone(),y.moveToElementEditStart(A),b(r,z,y)),t.cancel())}}setTimeout(function(){r.selectionChange(1)})}}}))}})})();(function(){function q(f,e){return CKEDITOR.tools.array.reduce(e,function(h,g){return g(h)},f)}var i=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],o={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(k){function e(f){p.enabled&&!1!==f.data.command.canUndo&&p.save()}function r(){p.enabled=k.readOnly?!1:"wysiwyg"==k.mode;p.onChange()}var p=k.undoManager=new l(k),g=p.editingHandler=new c(p),n=k.addCommand("undo",{exec:function(){p.undo()&&(k.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),m=k.addCommand("redo",{exec:function(){p.redo()&&(k.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});k.setKeystroke([[i[0],"undo"],[i[1],"redo"],[i[2],"redo"]]);p.onChange=function(){n.setState(p.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);m.setState(p.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};k.on("beforeCommandExec",e);k.on("afterCommandExec",e);k.on("saveSnapshot",function(f){p.save(f.data&&f.data.contentOnly)});k.on("contentDom",g.attachListeners,g);k.on("instanceReady",function(){k.fire("saveSnapshot")});k.on("beforeModeUnload",function(){"wysiwyg"==k.mode&&p.save(!0)});k.on("mode",r);k.on("readOnly",r);k.ui.addButton&&(k.ui.addButton("Undo",{label:k.lang.undo.undo,command:"undo",toolbar:"undo,10"}),k.ui.addButton("Redo",{label:k.lang.undo.redo,command:"redo",toolbar:"undo,20"}));k.resetUndo=function(){p.reset();k.fire("saveSnapshot")};k.on("updateSnapshot",function(){p.currentImage&&p.update()});k.on("lockSnapshot",function(f){f=f.data;p.lock(f&&f.dontUpdate,f&&f.forceUpdate)});k.on("unlockSnapshot",p.unlock,p)}});CKEDITOR.plugins.undo={};var l=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=e.config.undoStackSize||20;this.strokesLimit=25;this._filterRules=[];this.editor=e;this.reset();CKEDITOR.env.ie&&this.addFilterRule(function(f){return f.replace(/\s+data-cke-expando=".*?"/g,"")})};l.prototype={type:function(f,e){var h=l.getKeyGroup(f),g=this.strokesRecorded[h]+1;e=e||g>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());e?(g=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[h]=g;this.previousKeyGroup=h},keyGroupChanged:function(e){return l.getKeyGroup(e)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(g,f,m){var k=this.editor;if(this.locked||"ready"!=k.status||"wysiwyg"!=k.mode){return !1}var h=k.editable();if(!h||"ready"!=h.status){return !1}h=this.snapshots;f||(f=new j(k));if(!1===f.contents){return !1}if(this.currentImage){if(f.equalsContent(this.currentImage)){if(g||f.equalsSelection(this.currentImage)){return !1}}else{!1!==m&&k.fire("change")}}h.splice(this.index+1,h.length-this.index-1);h.length==this.limit&&h.shift();this.index=h.push(f)-1;this.currentImage=f;!1!==m&&this.refreshState();return !0},restoreImage:function(f){var e=this.editor,g;f.bookmarks&&(e.focus(),g=e.getSelection());this.locked={level:999};this.editor.loadSnapshot(f.contents);f.bookmarks?g.selectBookmarks(f.bookmarks):CKEDITOR.env.ie&&(g=this.editor.document.getBody().$.createTextRange(),g.collapse(!0),g.select());this.locked=null;this.index=f.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();e.fire("change")},getNextImage:function(f){var e=this.snapshots,h=this.currentImage,g;if(h){if(f){for(g=this.index-1;0<=g;g--){if(f=e[g],!h.equalsContent(f)){return f.index=g,f}}}else{for(g=this.index+1;g<e.length;g++){if(f=e[g],!h.equalsContent(f)){return f.index=g,f}}}}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e){return this.restoreImage(e),!0}}return !1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e){return this.restoreImage(e),!0}}return !1},update:function(f){if(!this.locked){f||(f=new j(this.editor));for(var e=this.index,g=this.snapshots;0<e&&this.currentImage.equalsContent(g[e-1]);){--e}g.splice(e,this.index-e+1,f);this.index=e;this.currentImage=f}},updateSelection:function(f){if(!this.snapshots.length){return !1}var e=this.snapshots,g=e[e.length-1];return g.equalsContent(f)&&!g.equalsSelection(f)?(this.currentImage=e[e.length-1]=f,!0):!1},lock:function(f,e){if(this.locked){this.locked.level++}else{if(f){this.locked={level:1}}else{var h=null;if(e){h=!0}else{var g=new j(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(g)&&(h=g)}this.locked={update:h,level:1}}}},unlock:function(){if(this.locked&&!--this.locked.level){var f=this.locked.update;this.locked=null;if(!0===f){this.update()}else{if(f){var e=new j(this.editor,!0);f.equalsContent(e)||this.update()}}}},addFilterRule:function(e){this._filterRules.push(e)}};l.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};l.keyGroups={PRINTABLE:0,FUNCTIONAL:1};l.isNavigationKey=function(e){return !!l.navigationKeyCodes[e]};l.getKeyGroup=function(f){var e=l.keyGroups;return o[f]?e.FUNCTIONAL:e.PRINTABLE};l.getOppositeKeyGroup=function(f){var e=l.keyGroups;return f==e.FUNCTIONAL?e.PRINTABLE:e.FUNCTIONAL};l.ieFunctionalKeysBug=function(e){return CKEDITOR.env.ie&&l.getKeyGroup(e)==l.keyGroups.FUNCTIONAL};var j=CKEDITOR.plugins.undo.Image=function(f,e){this.editor=f;f.fire("beforeUndoImage");var g=f.getSnapshot();g&&(this.contents=q(g,f.undoManager._filterRules));e||(this.bookmarks=(g=g&&f.getSelection())&&g.createBookmarks2(!0));f.fire("afterUndoImage")},d=/\b(?:href|src|name)="[^"]*?"/gi;j.prototype={equalsContent:function(f){var e=this.contents;f=f.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(e=e.replace(d,""),f=f.replace(d,""));return e!=f?!1:!0},equalsSelection:function(g){var f=this.bookmarks;g=g.bookmarks;if(f||g){if(!f||!g||f.length!=g.length){return !1}for(var m=0;m<f.length;m++){var k=f[m],h=g[m];if(k.startOffset!=h.startOffset||k.endOffset!=h.endOffset||!CKEDITOR.tools.arrayCompare(k.start,h.start)||!CKEDITOR.tools.arrayCompare(k.end,h.end)){return !1}}}return !0}};var c=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e;this.ignoreInputEvent=!1;this.keyEventsStack=new b;this.lastKeydownImage=null};c.prototype={onKeydown:function(f){var e=f.data.getKey();if(229!==e){if(-1<CKEDITOR.tools.indexOf(i,f.data.getKeystroke())){f.data.preventDefault()}else{if(this.keyEventsStack.cleanUp(f),f=this.undoManager,this.keyEventsStack.getLast(e)||this.keyEventsStack.push(e),this.lastKeydownImage=new j(f.editor),l.isNavigationKey(e)||this.undoManager.keyGroupChanged(e)){if(f.strokesRecorded[0]||f.strokesRecorded[1]){f.save(!1,this.lastKeydownImage,!1),f.resetType()}}}}},onInput:function(){if(this.ignoreInputEvent){this.ignoreInputEvent=!1}else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0));this.keyEventsStack.increment(e.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(f){var e=this.undoManager;f=f.data.getKey();var g=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(f);if(!(l.ieFunctionalKeysBug(f)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new j(e.editor,!0)))){if(0<g){e.type(f)}else{if(l.isNavigationKey(f)){this.onNavigationKey(!0)}}}},onNavigationKey:function(f){var e=this.undoManager;!f&&e.save(!0,null,!1)||e.updateSelection(new j(e.editor));e.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var f=this.undoManager.editor,e=f.editable(),g=this;e.attachListener(e,"keydown",function(h){g.onKeydown(h);if(l.ieFunctionalKeysBug(h.data.getKey())){g.onInput()}},null,null,999);e.attachListener(e,CKEDITOR.env.ie?"keypress":"input",g.onInput,g,null,999);e.attachListener(e,"keyup",g.onKeyup,g,null,999);e.attachListener(e,"paste",g.ignoreInputEventListener,g,null,999);e.attachListener(e,"drop",g.ignoreInputEventListener,g,null,999);f.on("afterPaste",g.activateInputEventListener,g,null,999);e.attachListener(e.isInline()?e:f.document.getDocumentElement(),"click",function(){g.onNavigationKey()},null,null,999);e.attachListener(this.undoManager.editor,"blur",function(){g.keyEventsStack.remove(9)},null,null,999)}};var b=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};b.prototype={push:function(e){e=this.stack.push({keyCode:e,inputs:0});return this.stack[e-1]},getLastIndex:function(f){if("number"!=typeof f){return this.stack.length-1}for(var e=this.stack.length;e--;){if(this.stack[e].keyCode==f){return e}}return -1},getLast:function(e){e=this.getLastIndex(e);return -1!=e?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){e=this.getLastIndex(e);-1!=e&&this.stack.splice(e,1)},resetInputs:function(e){if("number"==typeof e){this.getLast(e).inputs=0}else{for(e=this.stack.length;e--;){this.stack[e].inputs=0}}},getTotalInputs:function(){for(var f=this.stack.length,e=0;f--;){e+=this.stack[f].inputs}return e},cleanUp:function(e){e=e.data.$;e.ctrlKey||e.metaKey||this.remove(17);e.shiftKey||this.remove(16);e.altKey||this.remove(18)}}})();CKEDITOR.config.plugins="dialogui,dialog,about,basicstyles,notification,button,toolbar,clipboard,enterkey,entities,floatingspace,wysiwygarea,indent,indentlist,fakeobjects,link,list,undo";CKEDITOR.config.skin="moono-lisa";(function(){var b=function(d,e){var f=CKEDITOR.getUrl("plugins/"+e);d=d.split(",");for(var c=0;c<d.length;c++){CKEDITOR.skin.icons[d[c]]={path:f,offset:-d[++c],bgsize:d[++c]}}};if(CKEDITOR.env.hidpi){b("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,copy-rtl,168,,copy,192,,cut-rtl,216,,cut,240,,paste-rtl,264,,paste,288,,indent-rtl,312,,indent,336,,outdent-rtl,360,,outdent,384,,anchor-rtl,408,,anchor,432,,link,456,,unlink,480,,bulletedlist-rtl,504,,bulletedlist,528,,numberedlist-rtl,552,,numberedlist,576,,redo-rtl,600,,redo,624,,undo-rtl,648,,undo,672,","icons_hidpi.png")}else{b("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,copy-rtl,168,auto,copy,192,auto,cut-rtl,216,auto,cut,240,auto,paste-rtl,264,auto,paste,288,auto,indent-rtl,312,auto,indent,336,auto,outdent-rtl,360,auto,outdent,384,auto,anchor-rtl,408,auto,anchor,432,auto,link,456,auto,unlink,480,auto,bulletedlist-rtl,504,auto,bulletedlist,528,auto,numberedlist-rtl,552,auto,numberedlist,576,auto,redo-rtl,600,auto,redo,624,auto,undo-rtl,648,auto,undo,672,auto","icons.png")}})();CKEDITOR.lang.languages={af:1,sq:1,ar:1,az:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,"de-ch":1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,oc:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,"es-mx":1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}}());
jvm.NumericScale=function(d,a,b,c){this.scale=[];a=a||"linear";if(d){this.setScale(d)}if(a){this.setNormalizeFunction(a)}if(typeof b!=="undefined"){this.setMin(b)}if(typeof c!=="undefined"){this.setMax(c)}};jvm.NumericScale.prototype={setMin:function(a){this.clearMinValue=a;if(typeof this.normalize==="function"){this.minValue=this.normalize(a)}else{this.minValue=a}},setMax:function(a){this.clearMaxValue=a;if(typeof this.normalize==="function"){this.maxValue=this.normalize(a)}else{this.maxValue=a}},setScale:function(b){var a;this.scale=[];for(a=0;a<b.length;a++){this.scale[a]=[b[a]]}},setNormalizeFunction:function(a){if(a==="polynomial"){this.normalize=function(b){return Math.pow(b,0.2)}}else{if(a==="linear"){delete this.normalize}else{this.normalize=a}}this.setMin(this.clearMinValue);this.setMax(this.clearMaxValue)},getValue:function(d){var g=[],e=0,a,b=0,f;if(typeof this.normalize==="function"){d=this.normalize(d)}for(b=0;b<this.scale.length-1;b++){a=this.vectorLength(this.vectorSubtract(this.scale[b+1],this.scale[b]));g.push(a);e+=a}f=(this.maxValue-this.minValue)/e;for(b=0;b<g.length;b++){g[b]*=f}b=0;d-=this.minValue;while(d-g[b]>=0){d-=g[b];b++}if(b==this.scale.length-1){d=this.vectorToNum(this.scale[b])}else{d=(this.vectorToNum(this.vectorAdd(this.scale[b],this.vectorMult(this.vectorSubtract(this.scale[b+1],this.scale[b]),(d)/(g[b])))))}return d},vectorToNum:function(a){var b=0,c;for(c=0;c<a.length;c++){b+=Math.round(a[c])*Math.pow(256,a.length-c-1)}return b},vectorSubtract:function(d,c){var a=[],b;for(b=0;b<d.length;b++){a[b]=d[b]-c[b]}return a},vectorAdd:function(d,c){var a=[],b;for(b=0;b<d.length;b++){a[b]=d[b]+c[b]}return a},vectorMult:function(b,c){var a=[],d;for(d=0;d<b.length;d++){a[d]=b[d]*c}return a},vectorLength:function(b){var a=0,c;for(c=0;c<b.length;c++){a+=b[c]*b[c]}return Math.sqrt(a)},getTicks:function(){var a=5,e=[this.clearMinValue,this.clearMaxValue],d=e[1]-e[0],h=Math.pow(10,Math.floor(Math.log(d/a)/Math.LN10)),g=a/d*h,f=[],c,b;if(g<=0.15){h*=10}else{if(g<=0.35){h*=5}else{if(g<=0.75){h*=2}}}e[0]=Math.floor(e[0]/h)*h;e[1]=Math.ceil(e[1]/h)*h;c=e[0];while(c<=e[1]){if(c==e[0]){b=this.clearMinValue}else{if(c==e[1]){b=this.clearMaxValue}else{b=c}}f.push({label:c,value:this.getValue(b)});c+=h}return f}};
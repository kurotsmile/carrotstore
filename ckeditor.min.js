(function(){if(window.CKEDITOR&&window.CKEDITOR.dom){return}window.CKEDITOR||(window.CKEDITOR=function(){var j=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,k={timestamp:"FB9E",version:"4.5.6",revision:"91e81fe",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:j},status:"unloaded",basePath:function(){var m=window.CKEDITOR_BASEPATH||"";if(!m){for(var p=document.getElementsByTagName("script"),o=0;o<p.length;o++){var n=p[o].src.match(j);if(n){m=n[1];break}}}-1==m.indexOf(":/")&&"//"!=m.slice(0,2)&&(m=0===m.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+m:location.href.match(/^[^\?]*\/(?:)/)[0]+m);if(!m){throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.'}return m}(),getUrl:function(m){-1==m.indexOf(":/")&&0!==m.indexOf("/")&&(m=this.basePath+m);this.timestamp&&"/"!=m.charAt(m.length-1)&&!/[&?]t=/.test(m)&&(m+=(0<=m.indexOf("?")?"\x26":"?")+"t\x3d"+this.timestamp);return m},domReady:function(){function n(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",n,!1),m()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),m())}catch(p){}}function m(){for(var p;p=o.shift();){p()}}var o=[];return function(p){function r(){try{document.documentElement.doScroll("left")}catch(s){setTimeout(r,1);return}n()}o.push(p);"complete"===document.readyState&&setTimeout(n,1);if(1==o.length){if(document.addEventListener){document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",n);window.attachEvent("onload",n);p=!1;try{p=!window.frameElement}catch(q){}document.documentElement.doScroll&&p&&r()}}}}}()},i=window.CKEDITOR_GETURL;if(i){var l=k.getUrl;k.getUrl=function(m){return i.call(k,m)||l.call(k,m)}}return k}());CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(j){var k=CKEDITOR.event.prototype,i;for(i in k){null==j[i]&&(j[i]=k[i])}},CKEDITOR.event.prototype=function(){function j(l){var m=k(this);return m[l]||(m[l]=new i(l))}var k=function(l){l=l.getPrivate&&l.getPrivate()||l._||(l._={});return l.events||(l.events={})},i=function(l){this.name=l;this.listeners=[]};i.prototype={getListenerIndex:function(m){for(var l=0,n=this.listeners;l<n.length;l++){if(n[l].fn==m){return l}}return -1}};return{define:function(l,n){var m=j.call(this,l);CKEDITOR.tools.extend(m,n,!0)},on:function(w,u,r,p,o){function m(t,y,A,q){t={name:w,sender:this,editor:t,data:y,listenerData:p,stop:A,cancel:q,removeListener:x};return !1===u.call(r,t)?!1:t.data}function x(){v.removeListener(w,u)}var s=j.call(this,w);if(0>s.getListenerIndex(u)){s=s.listeners;r||(r=this);isNaN(o)&&(o=10);var v=this;m.fn=u;m.priority=o;for(var n=s.length-1;0<=n;n--){if(s[n].priority<=o){return s.splice(n+1,0,m),{removeListener:x}}}s.unshift(m)}return{removeListener:x}},once:function(){var m=Array.prototype.slice.call(arguments),l=m[1];m[1]=function(n){n.removeListener();return l.apply(this,arguments)};return this.on.apply(this,m)},capture:function(){CKEDITOR.event.useCapture=1;var l=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return l},fire:function(){var m=0,l=function(){m=1},o=0,n=function(){o=1};return function(w,r,D){var x=k(this)[w];w=m;var y=o;m=o=0;if(x){var s=x.listeners;if(s.length){for(var s=s.slice(0),B,p=0;p<s.length;p++){if(x.errorProof){try{B=s[p].call(this,D,r,l,n)}catch(v){}}else{B=s[p].call(this,D,r,l,n)}!1===B?o=1:"undefined"!=typeof B&&(r=B);if(m||o){break}}}}r=o?!1:"undefined"==typeof r?!0:r;m=w;o=y;return r}}(),fireOnce:function(m,l,n){l=this.fire(m,l,n);delete k(this)[m];return l},removeListener:function(m,l){var o=k(this)[m];if(o){var n=o.getListenerIndex(l);0<=n&&o.listeners.splice(n,1)}},removeAllListeners:function(){var m=k(this),l;for(l in m){delete m[l]}},hasListeners:function(l){return(l=k(this)[l])&&0<l.listeners.length}}}());CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(i,j){i in {instanceReady:1,loaded:1}&&(this[i]=!0);return CKEDITOR.event.prototype.fire.call(this,i,j,this)},CKEDITOR.editor.prototype.fireOnce=function(i,j){i in {instanceReady:1,loaded:1}&&(this[i]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,i,j,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));CKEDITOR.env||(CKEDITOR.env=function(){var j=navigator.userAgent.toLowerCase(),k=j.match(/edge[ \/](\d+.?\d*)/),i=-1<j.indexOf("trident/"),i=!(!k&&!i),i={ie:i,edge:!!k,webkit:!i&&-1<j.indexOf(" applewebkit/"),air:-1<j.indexOf(" adobeair/"),mac:-1<j.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<j.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(j),isCustomDomain:function(){if(!this.ie){return !1}var n=document.domain,m=window.location.hostname;return n!=m&&n!="["+m+"]"},secure:"https:"==location.protocol};i.gecko="Gecko"==navigator.product&&!i.webkit&&!i.ie;i.webkit&&(-1<j.indexOf("chrome")?i.chrome=!0:i.safari=!0);var l=0;i.ie&&(l=k?parseFloat(k[1]):i.quirks||!document.documentMode?parseFloat(j.match(/msie (\d+)/)[1]):document.documentMode,i.ie9Compat=9==l,i.ie8Compat=8==l,i.ie7Compat=7==l,i.ie6Compat=7>l||i.quirks);i.gecko&&(k=j.match(/rv:([\d\.]+)/))&&(k=k[1].split("."),l=10000*k[0]+100*(k[1]||0)+1*(k[2]||0));i.air&&(l=parseFloat(j.match(/ adobeair\/(\d+)/)[1]));i.webkit&&(l=parseFloat(j.match(/ applewebkit\/(\d+)/)[1]));i.version=l;i.isCompatible=!(i.ie&&7>l)&&!(i.gecko&&40000>l)&&!(i.webkit&&534>l);i.hidpi=2<=window.devicePixelRatio;i.needsBrFiller=i.gecko||i.webkit||i.ie&&10<l;i.needsNbspFiller=i.ie&&11>l;i.cssClass="cke_browser_"+(i.ie?"ie":i.gecko?"gecko":i.webkit?"webkit":"unknown");i.quirks&&(i.cssClass+=" cke_browser_quirks");i.ie&&(i.cssClass+=" cke_browser_ie"+(i.quirks?"6 cke_browser_iequirks":i.version));i.air&&(i.cssClass+=" cke_browser_air");i.iOS&&(i.cssClass+=" cke_browser_ios");i.hidpi&&(i.cssClass+=" cke_hidpi");return i}());"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status){CKEDITOR.loadFullCore._load=1}else{delete CKEDITOR.loadFullCore;var i=document.createElement("script");i.type="text/javascript";i.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(i)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(i){(this._.pending||(this._.pending=[])).push(i)};(function(){CKEDITOR.domReady(function(){var i=CKEDITOR.loadFullCore,j=CKEDITOR.loadFullCoreTimeout;i&&(CKEDITOR.status="basic_ready",i&&i._load?i():j&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1000*j))})})();CKEDITOR.status="basic_loaded"}();"use strict";CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(i,j){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:i,additionalData:j})};CKEDITOR.error=function(i,j){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:i,additionalData:j})};CKEDITOR.on("log",function(j){if(window.console&&window.console.log){var k=console[j.data.type]?j.data.type:"log",i=j.data.errorCode;if(j=j.data.additionalData){console[k]("[CKEDITOR] Error code: "+i+".",j)}else{console[k]("[CKEDITOR] Error code: "+i+".")}console[k]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+i)}},null,null,999);CKEDITOR.dom={};(function(){var s=[],o=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",r=/&/g,p=/>/g,n=/</g,m=/"/g,k=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,j={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',nbsp:"Â ",shy:""},i=function(l,q){return"#"==q[0]?String.fromCharCode(parseInt(q.slice(1),10)):j[q]};CKEDITOR.on("reset",function(){s=[]});CKEDITOR.tools={arrayCompare:function(q,t){if(!q&&!t){return !0}if(!q||!t||q.length!=t.length){return !1}for(var l=0;l<q.length;l++){if(q[l]!=t[l]){return !1}}return !0},getIndex:function(q,t){for(var l=0;l<q.length;++l){if(t(q[l])){return l}}return -1},clone:function(q){var t;if(q&&q instanceof Array){t=[];for(var l=0;l<q.length;l++){t[l]=CKEDITOR.tools.clone(q[l])}return t}if(null===q||"object"!=typeof q||q instanceof String||q instanceof Number||q instanceof Boolean||q instanceof Date||q instanceof RegExp||q.nodeType||q.window===q){return q}t=new q.constructor;for(l in q){t[l]=CKEDITOR.tools.clone(q[l])}return t},capitalize:function(l,q){return l.charAt(0).toUpperCase()+(q?l.slice(1):l.slice(1).toLowerCase())},extend:function(v){var w=arguments.length,t,y;"boolean"==typeof(t=arguments[w-1])?w--:"boolean"==typeof(t=arguments[w-2])&&(y=arguments[w-1],w-=2);for(var u=1;u<w;u++){var x=arguments[u],q;for(q in x){if(!0===t||null==v[q]){if(!y||q in y){v[q]=x[q]}}}}return v},prototypedCopy:function(l){var q=function(){};q.prototype=l;return new q},copy:function(q){var t={},l;for(l in q){t[l]=q[l]}return t},isArray:function(l){return"[object Array]"==Object.prototype.toString.call(l)},isEmpty:function(l){for(var q in l){if(l.hasOwnProperty(q)){return !1}}return !0},cssVendorPrefix:function(q,t,l){if(l){return o+q+":"+t+";"+q+":"+t}l={};l[q]=t;l[o+q]=t;return l},cssStyleToDomStyle:function(){var l=document.createElement("div").style,q="undefined"!=typeof l.cssFloat?"cssFloat":"undefined"!=typeof l.styleFloat?"styleFloat":"float";return function(t){return"float"==t?q:t.replace(/-./g,function(u){return u.substr(1).toUpperCase()})}}(),buildStyleHtml:function(q){q=[].concat(q);for(var t,l=[],u=0;u<q.length;u++){if(t=q[u]){/@import|[{}]/.test(t)?l.push("\x3cstyle\x3e"+t+"\x3c/style\x3e"):l.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+t+'"\x3e')}}return l.join("")},htmlEncode:function(l){return void 0===l||null===l?"":String(l).replace(r,"\x26amp;").replace(p,"\x26gt;").replace(n,"\x26lt;")},htmlDecode:function(l){return l.replace(k,i)},htmlEncodeAttr:function(l){return CKEDITOR.tools.htmlEncode(l).replace(m,"\x26quot;")},htmlDecodeAttr:function(l){return CKEDITOR.tools.htmlDecode(l)},transformPlainTextToHtml:function(w,y){var u=y==CKEDITOR.ENTER_BR,A=this.htmlEncode(w.replace(/\r\n/g,"\n")),A=A.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;"),v=y==CKEDITOR.ENTER_P?"p":"div";if(!u){var z=/\n{2}/g;if(z.test(A)){var t="\x3c"+v+"\x3e",x="\x3c/"+v+"\x3e",A=t+A.replace(z,function(){return x+t})+x}}A=A.replace(/\n/g,"\x3cbr\x3e");u||(A=A.replace(new RegExp("\x3cbr\x3e(?\x3d\x3c/"+v+"\x3e)"),function(l){return CKEDITOR.tools.repeat(l,2)}));A=A.replace(/^ | $/g,"\x26nbsp;");return A=A.replace(/(>|\s) /g,function(l,q){return q+"\x26nbsp;"}).replace(/ (?=<)/g,"\x26nbsp;")},getNextNumber:function(){var l=0;return function(){return ++l}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var l="e",q=0;8>q;q++){l+=Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return l},override:function(q,t){var l=t(q);l.prototype=q.prototype;return l},setTimeout:function(u,v,q,w,t){t||(t=window);q||(q=t);return t.setTimeout(function(){w?u.apply(q,[].concat(w)):u.apply(q)},v||0)},trim:function(){var l=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(q){return q.replace(l,"")}}(),ltrim:function(){var l=/^[ \t\n\r]+/g;return function(q){return q.replace(l,"")}}(),rtrim:function(){var l=/[ \t\n\r]+$/g;return function(q){return q.replace(l,"")}}(),indexOf:function(q,t){if("function"==typeof t){for(var l=0,u=q.length;l<u;l++){if(t(q[l])){return l}}}else{if(q.indexOf){return q.indexOf(t)}l=0;for(u=q.length;l<u;l++){if(q[l]===t){return l}}}return -1},search:function(q,l){var t=CKEDITOR.tools.indexOf(q,l);return 0<=t?q[t]:null},bind:function(q,l){return function(){return q.apply(l,arguments)}},createClass:function(v){var t=v.$,y=v.base,u=v.privates||v._,x=v.proto;v=v.statics;!t&&(t=function(){y&&this.base.apply(this,arguments)});if(u){var w=t,t=function(){var q=this._||(this._={}),l;for(l in u){var z=u[l];q[l]="function"==typeof z?CKEDITOR.tools.bind(z,this):z}w.apply(this,arguments)}}y&&(t.prototype=this.prototypedCopy(y.prototype),t.prototype.constructor=t,t.base=y,t.baseProto=y.prototype,t.prototype.base=function(){this.base=y.prototype.base;y.apply(this,arguments);this.base=arguments.callee});x&&this.extend(t.prototype,x,!0);v&&this.extend(t,v,!0);return t},addFunction:function(l,q){return s.push(function(){return l.apply(q||this,arguments)})-1},removeFunction:function(l){s[l]=null},callFunction:function(l){var q=s[l];return q&&q.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var q=/^-?\d+\.?\d*px$/,l;return function(t){l=CKEDITOR.tools.trim(t+"")+"px";return q.test(l)?l:t||""}}(),convertToPx:function(){var l;return function(q){l||(l=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(l));return/%$/.test(q)?q:(l.setStyle("width",q),l.$.clientWidth)}}(),repeat:function(q,l){return Array(l+1).join(q)},tryThese:function(){for(var u,q=0,w=arguments.length;q<w;q++){var t=arguments[q];try{u=t();break}catch(v){}}return u},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(l){return function(){var q=arguments,t=this;window.setTimeout(function(){l.apply(t,q)},0)}},normalizeCssText:function(u,q){var w=[],t,v=CKEDITOR.tools.parseCssText(u,!0,q);for(t in v){w.push(t+":"+v[t])}w.sort();return w.length?w.join(";")+";":""},convertRgbToHex:function(l){return l.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(u,q,v,t){u=[q,v,t];for(q=0;3>q;q++){u[q]=("0"+parseInt(u[q],10).toString(16)).slice(-2)}return"#"+u.join("")})},parseCssText:function(u,q,v){var t={};v&&(v=new CKEDITOR.dom.element("span"),v.setAttribute("style",u),u=CKEDITOR.tools.convertRgbToHex(v.getAttribute("style")||""));if(!u||";"==u){return t}u.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(l,x,w){q&&(x=x.toLowerCase(),"font-family"==x&&(w=w.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),w=CKEDITOR.tools.trim(w));t[x]=w});return t},writeCssText:function(u,q){var v,t=[];for(v in u){t.push(v+":"+u[v])}q&&t.sort();return t.join("; ")},objectCompare:function(u,q,v){var t;if(!u&&!q){return !0}if(!u||!q){return !1}for(t in u){if(u[t]!=q[t]){return !1}}if(!v){for(t in q){if(u[t]!=q[t]){return !1}}}return !0},objectKeys:function(q){var l=[],t;for(t in q){l.push(t)}return l},convertArrayToObject:function(u,q){var w={};1==arguments.length&&(q=!0);for(var t=0,v=u.length;t<v;++t){w[u[t]]=q}return w},fixDomain:function(){for(var q;;){try{q=window.parent.document.domain;break}catch(l){q=q?q.replace(/.+?(?:\.|$)/,""):document.domain;if(!q){break}document.domain=q}}return !!q},eventsBuffer:function(v,t,y){function u(){w=(new Date).getTime();x=!1;y?t.call(y):t()}var x,w=0;return{input:function(){if(!x){var l=(new Date).getTime()-w;l<v?x=setTimeout(u,v-l):u()}},reset:function(){x&&clearTimeout(x);x=w=0}}},enableHtml5Elements:function(u,q){for(var w="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),t=w.length,v;t--;){v=u.createElement(w[t]),q&&u.appendChild(v)}},checkIfAnyArrayItemMatches:function(u,q){for(var v=0,t=u.length;v<t;++v){if(u[v].match(q)){return !0}}return !1},checkIfAnyObjectPropertyMatches:function(q,l){for(var t in q){if(t.match(l)){return !0}}return !1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",getCookie:function(u){u=u.toLowerCase();for(var q=document.cookie.split(";"),w,t,v=0;v<q.length;v++){if(w=q[v].split("\x3d"),t=decodeURIComponent(CKEDITOR.tools.trim(w[0]).toLowerCase()),t===u){return decodeURIComponent(1<w.length?w[1]:"")}}return null},setCookie:function(q,l){document.cookie=encodeURIComponent(q)+"\x3d"+encodeURIComponent(l)+";path\x3d/"},getCsrfToken:function(){var u=CKEDITOR.tools.getCookie("ckCsrfToken");if(!u||40!=u.length){var u=[],q="";if(window.crypto&&window.crypto.getRandomValues){u=new Uint8Array(40),window.crypto.getRandomValues(u)}else{for(var v=0;40>v;v++){u.push(Math.floor(256*Math.random()))}}for(v=0;v<u.length;v++){var t="abcdefghijklmnopqrstuvwxyz0123456789".charAt(u[v]%36),q=q+(0.5<Math.random()?t.toUpperCase():t)}u=q;CKEDITOR.tools.setCookie("ckCsrfToken",u)}return u}}})();CKEDITOR.dtd=function(){var s=CKEDITOR.tools.extend,o=function(u,q){for(var w=CKEDITOR.tools.clone(u),t=1;t<arguments.length;t++){q=arguments[t];for(var v in q){delete w[v]}}return w},r={},p={},n={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},m={command:1,link:1,meta:1,noscript:1,script:1,style:1},k={},j={"#":1},i={center:1,dir:1,noframes:1};s(r,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},j,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});s(p,n,r,i);o={a:o(r,{a:1,button:1}),abbr:r,address:p,area:k,article:p,aside:p,audio:s({source:1,track:1},p),b:r,base:k,bdi:r,bdo:r,blockquote:p,body:p,br:k,button:o(r,{a:1,button:1}),canvas:r,caption:p,cite:r,code:r,col:k,colgroup:{col:1},command:k,datalist:s({option:1},r),dd:p,del:r,details:s({summary:1},p),dfn:r,div:p,dl:{dt:1,dd:1},dt:p,em:r,embed:k,fieldset:s({legend:1},p),figcaption:p,figure:s({figcaption:1},p),footer:p,form:p,h1:r,h2:r,h3:r,h4:r,h5:r,h6:r,head:s({title:1,base:1},m),header:p,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:k,html:s({head:1,body:1},p,m),i:r,iframe:j,img:k,input:k,ins:r,kbd:r,keygen:k,label:r,legend:r,li:p,link:k,main:p,map:p,mark:r,menu:s({li:1},p),meta:k,meter:o(r,{meter:1}),nav:p,noscript:s({link:1,meta:1,style:1},r),object:s({param:1},r),ol:{li:1},optgroup:{option:1},option:j,output:r,p:r,param:k,pre:r,progress:o(r,{progress:1}),q:r,rp:r,rt:r,ruby:s({rp:1,rt:1},r),s:r,samp:r,script:j,section:p,select:{optgroup:1,option:1},small:r,source:k,span:r,strong:r,style:j,sub:r,summary:s({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},r),sup:r,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:p,textarea:j,tfoot:{tr:1},th:p,thead:{tr:1},time:o(r,{time:1}),title:j,tr:{th:1,td:1},track:k,u:r,ul:{li:1},"var":r,video:s({source:1,track:1},p),wbr:k,acronym:r,applet:s({param:1},p),basefont:k,big:r,center:p,dialog:k,dir:{li:1},font:r,isindex:k,noframes:p,strike:r,tt:r};s(o,{$block:s({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},n,i),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:r,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:s({body:1,head:1,html:1},o.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return o}();CKEDITOR.dom.event=function(i){this.$=i};CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var i=this.getKey();if(this.$.ctrlKey||this.$.metaKey){i+=CKEDITOR.CTRL}this.$.shiftKey&&(i+=CKEDITOR.SHIFT);this.$.altKey&&(i+=CKEDITOR.ALT);return i},preventDefault:function(i){var j=this.$;j.preventDefault?j.preventDefault():j.returnValue=!1;i&&this.stopPropagation()},stopPropagation:function(){var i=this.$;i.stopPropagation?i.stopPropagation():i.cancelBubble=!0},getTarget:function(){var i=this.$.target||this.$.srcElement;return i?new CKEDITOR.dom.node(i):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var i=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(i.documentElement.scrollLeft||i.body.scrollLeft),y:this.$.pageY||this.$.clientY+(i.documentElement.scrollTop||i.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(i){i&&(this.$=i)};CKEDITOR.dom.domObject.prototype=function(){var i=function(k,j){return function(l){"undefined"!=typeof CKEDITOR&&k.fire(j,new CKEDITOR.dom.event(l))}};return{getPrivate:function(){var j;(j=this.getCustomData("_"))||this.setCustomData("_",j={});return j},on:function(k){var j=this.getCustomData("_cke_nativeListeners");j||(j={},this.setCustomData("_cke_nativeListeners",j));j[k]||(j=j[k]=i(this,k),this.$.addEventListener?this.$.addEventListener(k,j,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+k,j));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(k){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(k)){var j=this.getCustomData("_cke_nativeListeners"),l=j&&j[k];l&&(this.$.removeEventListener?this.$.removeEventListener(k,l,!1):this.$.detachEvent&&this.$.detachEvent("on"+k,l),delete j[k])}},removeAllListeners:function(){var k=this.getCustomData("_cke_nativeListeners"),j;for(j in k){var l=k[j];this.$.detachEvent?this.$.detachEvent("on"+j,l):this.$.removeEventListener&&this.$.removeEventListener(j,l,!1);delete k[j]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();(function(i){var j={};CKEDITOR.on("reset",function(){j={}});i.equals=function(k){try{return k&&k.$===this.$}catch(l){return !1}};i.setCustomData=function(k,m){var l=this.getUniqueId();(j[l]||(j[l]={}))[k]=m;return this};i.getCustomData=function(k){var l=this.$["data-cke-expando"];return(l=l&&j[l])&&k in l?l[k]:null};i.removeCustomData=function(k){var n=this.$["data-cke-expando"],n=n&&j[n],m,l;n&&(m=n[k],l=k in n,delete n[k]);return l?m:null};i.clearCustomData=function(){this.removeAllListeners();var k=this.$["data-cke-expando"];k&&delete j[k]};i.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(i)})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.node=function(i){return i?new CKEDITOR.dom[i.nodeType==CKEDITOR.NODE_DOCUMENT?"document":i.nodeType==CKEDITOR.NODE_ELEMENT?"element":i.nodeType==CKEDITOR.NODE_TEXT?"text":i.nodeType==CKEDITOR.NODE_COMMENT?"comment":i.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](i):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(i,j){i.append(this,j);return i},clone:function(j,l){function i(o){o["data-cke-expando"]&&(o["data-cke-expando"]=!1);if(o.nodeType==CKEDITOR.NODE_ELEMENT||o.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(l||o.nodeType!=CKEDITOR.NODE_ELEMENT||o.removeAttribute("id",!1),j){o=o.childNodes;for(var n=0;n<o.length;n++){i(o[n])}}}}function m(n){if(n.type==CKEDITOR.NODE_ELEMENT||n.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(n.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var o=n.getName();":"==o[0]&&n.renameNode(o.substring(1))}if(j){for(o=0;o<n.getChildCount();o++){m(n.getChild(o))}}}}var k=this.$.cloneNode(j);i(k);k=new CKEDITOR.dom.node(k);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&m(k);return k},hasPrevious:function(){return !!this.$.previousSibling},hasNext:function(){return !!this.$.nextSibling},insertAfter:function(i){i.$.parentNode.insertBefore(this.$,i.$.nextSibling);return i},insertBefore:function(i){i.$.parentNode.insertBefore(this.$,i.$);return i},insertBeforeMe:function(i){this.$.parentNode.insertBefore(i.$,this.$);return i},getAddress:function(j){for(var l=[],i=this.getDocument().$.documentElement,m=this.$;m&&m!=i;){var k=m.parentNode;k&&l.unshift(this.getIndex.call({$:m},j));m=k}return l},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(j){function l(o,n){var p=n?o.nextSibling:o.previousSibling;return p&&p.nodeType==CKEDITOR.NODE_TEXT?p.nodeValue?p:l(p,n):null}var i=this.$,m=-1,k;if(!this.$.parentNode||j&&i.nodeType==CKEDITOR.NODE_TEXT&&!i.nodeValue&&!l(i)&&!l(i,!0)){return -1}do{if(!j||i==this.$||i.nodeType!=CKEDITOR.NODE_TEXT||!k&&i.nodeValue){m++,k=i.nodeType==CKEDITOR.NODE_TEXT}}while(i=i.previousSibling);return m},getNextSourceNode:function(j,l,i){if(i&&!i.call){var m=i;i=function(n){return !n.equals(m)}}j=!j&&this.getFirst&&this.getFirst();var k;if(!j){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&!1===i(this,!0)){return null}j=this.getNext()}for(;!j&&(k=(k||this).getParent());){if(i&&!1===i(k,!0)){return null}j=k.getNext()}return !j||i&&!1===i(j)?null:l&&l!=j.type?j.getNextSourceNode(!1,l,i):j},getPreviousSourceNode:function(j,l,i){if(i&&!i.call){var m=i;i=function(n){return !n.equals(m)}}j=!j&&this.getLast&&this.getLast();var k;if(!j){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&!1===i(this,!0)){return null}j=this.getPrevious()}for(;!j&&(k=(k||this).getParent());){if(i&&!1===i(k,!0)){return null}j=k.getPrevious()}return !j||i&&!1===i(j)?null:l&&j.type!=l?j.getPreviousSourceNode(!1,l,i):j},getPrevious:function(j){var k=this.$,i;do{i=(k=k.previousSibling)&&10!=k.nodeType&&new CKEDITOR.dom.node(k)}while(i&&j&&!j(i));return i},getNext:function(j){var k=this.$,i;do{i=(k=k.nextSibling)&&new CKEDITOR.dom.node(k)}while(i&&j&&!j(i));return i},getParent:function(i){var j=this.$.parentNode;return j&&(j.nodeType==CKEDITOR.NODE_ELEMENT||i&&j.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(j):null},getParents:function(j){var k=this,i=[];do{i[j?"push":"unshift"](k)}while(k=k.getParent());return i},getCommonAncestor:function(i){if(i.equals(this)){return this}if(i.contains&&i.contains(this)){return i}var j=this.contains?this:this.getParent();do{if(j.contains(i)){return j}}while(j=j.getParent());return null},getPosition:function(j){var k=this.$,i=j.$;if(k.compareDocumentPosition){return k.compareDocumentPosition(i)}if(k==i){return CKEDITOR.POSITION_IDENTICAL}if(this.type==CKEDITOR.NODE_ELEMENT&&j.type==CKEDITOR.NODE_ELEMENT){if(k.contains){if(k.contains(i)){return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING}if(i.contains(k)){return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}}if("sourceIndex" in k){return 0>k.sourceIndex||0>i.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:k.sourceIndex<i.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}k=this.getAddress();j=j.getAddress();for(var i=Math.min(k.length,j.length),l=0;l<i;l++){if(k[l]!=j[l]){return k[l]<j[l]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}return k.length<j.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(j,m){var i=this.$,n,l;m||(i=i.parentNode);"function"==typeof j?(l=!0,n=j):(l=!1,n=function(o){o="string"==typeof o.nodeName?o.nodeName.toLowerCase():"";return"string"==typeof j?o==j:o in j});for(;i;){if(n(l?new CKEDITOR.dom.node(i):i)){return new CKEDITOR.dom.node(i)}try{i=i.parentNode}catch(k){i=null}}return null},hasAscendant:function(j,k){var i=this.$;k||(i=i.parentNode);for(;i;){if(i.nodeName&&i.nodeName.toLowerCase()==j){return !0}i=i.parentNode}return !1},move:function(i,j){i.append(this.remove(),j)},remove:function(j){var k=this.$,i=k.parentNode;if(i){if(j){for(;j=k.firstChild;){i.insertBefore(k.removeChild(j),k)}}i.removeChild(k)}return this},replace:function(i){this.insertBefore(i);i.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var j;this.getFirst&&(j=this.getFirst());){if(j.type==CKEDITOR.NODE_TEXT){var k=CKEDITOR.tools.ltrim(j.getText()),i=j.getLength();if(k){k.length<i&&(j.split(i-k.length),this.$.removeChild(this.$.firstChild))}else{j.remove();continue}}break}},rtrim:function(){for(var j;this.getLast&&(j=this.getLast());){if(j.type==CKEDITOR.NODE_TEXT){var k=CKEDITOR.tools.rtrim(j.getText()),i=j.getLength();if(k){k.length<i&&(j.split(k.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}else{j.remove();continue}}break}CKEDITOR.env.needsBrFiller&&(j=this.$.lastChild)&&1==j.type&&"br"==j.nodeName.toLowerCase()&&j.parentNode.removeChild(j)},isReadOnly:function(i){var j=this;this.type!=CKEDITOR.NODE_ELEMENT&&(j=this.getParent());CKEDITOR.env.edge&&j&&j.is("textarea","input")&&(i=!0);if(!i&&j&&"undefined"!=typeof j.$.isContentEditable){return !(j.$.isContentEditable||j.data("cke-editable"))}for(;j;){if(j.data("cke-editable")){return !1}if(j.hasAttribute("contenteditable")){return"false"==j.getAttribute("contenteditable")}j=j.getParent()}return !0}});CKEDITOR.dom.window=function(i){CKEDITOR.dom.domObject.call(this,i)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var i=this.$.document,j="CSS1Compat"==i.compatMode;return{width:(j?i.documentElement.clientWidth:i.body.clientWidth)||0,height:(j?i.documentElement.clientHeight:i.body.clientHeight)||0}},getScrollPosition:function(){var i=this.$;if("pageXOffset" in i){return{x:i.pageXOffset||0,y:i.pageYOffset||0}}i=i.document;return{x:i.documentElement.scrollLeft||i.body.scrollLeft||0,y:i.documentElement.scrollTop||i.body.scrollTop||0}},getFrame:function(){var i=this.$.frameElement;return i?new CKEDITOR.dom.element.get(i):null}});CKEDITOR.dom.document=function(i){CKEDITOR.dom.domObject.call(this,i)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(i){if(this.$.createStyleSheet){this.$.createStyleSheet(i)}else{var j=new CKEDITOR.dom.element("link");j.setAttributes({rel:"stylesheet",type:"text/css",href:i});this.getHead().append(j)}},appendStyleText:function(j){if(this.$.createStyleSheet){var k=this.$.createStyleSheet("");k.cssText=j}else{var i=new CKEDITOR.dom.element("style",this);i.append(new CKEDITOR.dom.text(j,this));this.getHead().append(i)}return k||i.$.sheet},createElement:function(j,k){var i=new CKEDITOR.dom.element(j,this);k&&(k.attributes&&i.setAttributes(k.attributes),k.styles&&i.setStyles(k.styles));return i},createText:function(i){return new CKEDITOR.dom.text(i,this)},focus:function(){this.getWindow().focus()},getActive:function(){var i;try{i=this.$.activeElement}catch(j){return null}return new CKEDITOR.dom.element(i)},getById:function(i){return(i=this.$.getElementById(i))?new CKEDITOR.dom.element(i):null},getByAddress:function(k,p){for(var i=this.$.documentElement,q=0;i&&q<k.length;q++){var o=k[q];if(p){for(var n=-1,m=0;m<i.childNodes.length;m++){var j=i.childNodes[m];if(!0!==p||3!=j.nodeType||!j.previousSibling||3!=j.previousSibling.nodeType){if(n++,n==o){i=j;break}}}}else{i=i.childNodes[o]}}return i?new CKEDITOR.dom.node(i):null},getElementsByTag:function(i,j){CKEDITOR.env.ie&&8>=document.documentMode||!j||(i=j+":"+i);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(i))},getHead:function(){var i=this.$.getElementsByTagName("head")[0];return i=i?new CKEDITOR.dom.element(i):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(i){this.$.open("text/html","replace");CKEDITOR.env.ie&&(i=i.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+CKEDITOR.tools.fixDomain+")();\x3c/script\x3e"));this.$.write(i);this.$.close()},find:function(i){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(i))},findOne:function(i){return(i=this.$.querySelector(i))?new CKEDITOR.dom.element(i):null},_getHtml5ShivFrag:function(){var i=this.getCustomData("html5ShivFrag");i||(i=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(i,!0),this.setCustomData("html5ShivFrag",i));return i}});CKEDITOR.dom.nodeList=function(i){this.$=i};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(i){return 0>i||i>=this.$.length?null:(i=this.$[i])?new CKEDITOR.dom.node(i):null}};CKEDITOR.dom.element=function(i,j){"string"==typeof i&&(i=(j?j.$:document).createElement(i));CKEDITOR.dom.domObject.call(this,i)};CKEDITOR.dom.element.get=function(i){return(i="string"==typeof i?document.getElementById(i)||document.getElementsByName(i)[0]:i)&&(i.$?i:new CKEDITOR.dom.element(i))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(j,k){var i=new CKEDITOR.dom.element("div",k);i.setHtml(j);return i.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(j,m,i,n){var l=m.getCustomData("list_marker_id")||m.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),k=m.getCustomData("list_marker_names")||m.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");j[l]=m;k[i]=1;return m.setCustomData(i,n)};CKEDITOR.dom.element.clearAllMarkers=function(i){for(var j in i){CKEDITOR.dom.element.clearMarkers(i,i[j],1)}};CKEDITOR.dom.element.clearMarkers=function(j,m,i){var n=m.getCustomData("list_marker_names"),l=m.getCustomData("list_marker_id"),k;for(k in n){m.removeCustomData(k)}m.removeCustomData("list_marker_names");i&&(m.removeCustomData("list_marker_id"),delete j[l])};(function(){function j(q,p){return -1<(" "+q+" ").replace(l," ").indexOf(" "+p+" ")}function n(q){var p=!0;q.$.id||(q.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),p=!1);return function(){p||q.removeAttribute("id")}}function i(q,p){return"#"+q.$.id+" "+p.split(/,\s*/).join(", #"+q.$.id+" ")}function o(q){for(var p=0,s=0,r=k[q].length;s<r;s++){p+=parseInt(this.getComputedStyle(k[q][s])||0,10)||0}return p}var m=document.createElement("_").classList,m="undefined"!==typeof m&&null!==String(m.add).match(/\[Native code\]/gi),l=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:m?function(p){this.$.classList.add(p);return this}:function(p){var q=this.$.className;q&&(j(q,p)||(q+=" "+p));this.$.className=q||p;return this},removeClass:m?function(q){var p=this.$;p.classList.remove(q);p.className||p.removeAttribute("class");return this}:function(p){var q=this.getAttribute("class");q&&j(q,p)&&((q=q.replace(new RegExp("(?:^|\\s+)"+p+"(?\x3d\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",q):this.removeAttribute("class"));return this},hasClass:function(p){return j(this.$.className,p)},append:function(q,p){"string"==typeof q&&(q=this.getDocument().createElement(q));p?this.$.insertBefore(q.$,this.$.firstChild):this.$.appendChild(q.$);return q},appendHtml:function(q){if(this.$.childNodes.length){var p=new CKEDITOR.dom.element("div",this.getDocument());p.setHtml(q);p.moveChildren(this)}else{this.setHtml(q)}},appendText:function(p){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=p:this.append(new CKEDITOR.dom.text(p))},appendBogus:function(p){if(p||CKEDITOR.env.needsBrFiller){for(p=this.getLast();p&&p.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(p.getText());){p=p.getPrevious()}p&&p.is&&p.is("br")||(p=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&p.setAttribute("type","_moz"),this.append(p))}},breakParent:function(q,p){var s=new CKEDITOR.dom.range(this.getDocument());s.setStartAfter(this);s.setEndAfter(q);var r=s.extractContents(!1,p||!1);s.insertNode(this.remove());r.insertAfterNode(this)},contains:document.compareDocumentPosition?function(p){return !!(this.$.compareDocumentPosition(p.$)&16)}:function(q){var p=this.$;return q.type!=CKEDITOR.NODE_ELEMENT?p.contains(q.getParent().$):p!=q.$&&p.contains(q.$)},focus:function(){function p(){try{this.$.focus()}catch(q){}}return function(q){q?CKEDITOR.tools.setTimeout(p,100,this):p.call(this)}}(),getHtml:function(){var p=this.$.innerHTML;return CKEDITOR.env.ie?p.replace(/<\?[^>]*>/g,""):p},getOuterHtml:function(){if(this.$.outerHTML){return this.$.outerHTML.replace(/<\?[^>]*>/,"")}var p=this.$.ownerDocument.createElement("div");p.appendChild(this.$.cloneNode(!0));return p.innerHTML},getClientRect:function(){var p=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!p.width&&(p.width=p.right-p.left);!p.height&&(p.height=p.bottom-p.top);return p},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(q){try{var p=this.$;if(this.getParent()){return p.innerHTML=q}var s=this.getDocument()._getHtml5ShivFrag();s.appendChild(p);p.innerHTML=q;s.removeChild(p);return q}catch(r){this.$.innerHTML="";p=new CKEDITOR.dom.element("body",this.getDocument());p.$.innerHTML=q;for(p=p.getChildren();p.count();){this.append(p.getItem(0))}return q}}:function(p){return this.$.innerHTML=p},setText:function(){var p=document.createElement("p");p.innerHTML="x";p=p.textContent;return function(q){this.$[p?"textContent":"innerText"]=q}}(),getAttribute:function(){var p=function(q){return this.$.getAttribute(q,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(q){switch(q){case"class":q="className";break;case"http-equiv":q="httpEquiv";break;case"name":return this.$.name;case"tabindex":return q=this.$.getAttribute(q,2),0!==q&&0===this.$.tabIndex&&(q=null),q;case"checked":return q=this.$.attributes.getNamedItem(q),(q.specified?q.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[q];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(q,2)}:p}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(q){var p=this.getWindow().$.getComputedStyle(this.$,null);return p?p.getPropertyValue(q):""}:function(p){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(p)]},getDtd:function(){var p=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return p};return p},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var p=this.$.tabIndex;return 0!==p||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?p:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var q=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var p=this.$.scopeName;"HTML"!=p&&(q=p.toLowerCase()+":"+q)}this.getName=function(){return q};return this.getName()},getValue:function(){return this.$.value},getFirst:function(q){var p=this.$.firstChild;(p=p&&new CKEDITOR.dom.node(p))&&q&&!q(p)&&(p=p.getNext(q));return p},getLast:function(q){var p=this.$.lastChild;(p=p&&new CKEDITOR.dom.node(p))&&q&&!q(p)&&(p=p.getPrevious(q));return p},getStyle:function(p){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(p)]},is:function(){var q=this.getName();if("object"==typeof arguments[0]){return !!arguments[0][q]}for(var p=0;p<arguments.length;p++){if(arguments[p]==q){return !0}}return !1},isEditable:function(q){var p=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[p]||CKEDITOR.dtd.$empty[p]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==q?(q=CKEDITOR.dtd[p]||CKEDITOR.dtd.span,!(!q||!q["#"])):!0},isIdentical:function(q){var p=this.clone(0,1);q=q.clone(0,1);p.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);q.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(p.$.isEqualNode){return p.$.style.cssText=CKEDITOR.tools.normalizeCssText(p.$.style.cssText),q.$.style.cssText=CKEDITOR.tools.normalizeCssText(q.$.style.cssText),p.$.isEqualNode(q.$)}p=p.getOuterHtml();q=q.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var r=this.getParent();r.type==CKEDITOR.NODE_ELEMENT&&(r=r.clone(),r.setHtml(p),p=r.getHtml(),r.setHtml(q),q=r.getHtml())}return p==q},isVisible:function(){var q=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),p,r;q&&CKEDITOR.env.webkit&&(p=this.getWindow(),!p.equals(CKEDITOR.document.getWindow())&&(r=p.$.frameElement)&&(q=(new CKEDITOR.dom.element(r)).isVisible()));return !!q},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()]){return !1}for(var q=this.getChildren(),p=0,s=q.count();p<s;p++){var r=q.getItem(p);if(r.type!=CKEDITOR.NODE_ELEMENT||!r.data("cke-bookmark")){if(r.type==CKEDITOR.NODE_ELEMENT&&!r.isEmptyInlineRemoveable()||r.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(r.getText())){return !1}}}return !0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var q=this.$.attributes,p=0;p<q.length;p++){var r=q[p];switch(r.nodeName){case"class":if(this.getAttribute("class")){return !0}case"data-cke-expando":continue;default:if(r.specified){return !0}}}return !1}:function(){var q=this.$.attributes,p=q.length,r={"data-cke-expando":1,_moz_dirty:1};return 0<p&&(2<p||!r[q[0].nodeName]||2==p&&!r[q[1].nodeName])},hasAttribute:function(){function p(q){var r=this.$.attributes.getNamedItem(q);if("input"==this.getName()){switch(q){case"class":return 0<this.$.className.length;case"checked":return !!this.$.checked;case"value":return q=this.getAttribute("type"),"checkbox"==q||"radio"==q?"on"!=this.$.value:!!this.$.value}}return r?r.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(q){return"name"==q?!!this.$.name:p.call(this,q)}:p:function(q){return !!this.$.attributes.getNamedItem(q)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(q,p){var s=this.$;q=q.$;if(s!=q){var r;if(p){for(;r=s.lastChild;){q.insertBefore(s.removeChild(r),q.firstChild)}}else{for(;r=s.firstChild;){q.appendChild(s.removeChild(r))}}}},mergeSiblings:function(){function p(q,u,s){if(u&&u.type==CKEDITOR.NODE_ELEMENT){for(var t=[];u.data("cke-bookmark")||u.isEmptyInlineRemoveable();){if(t.push(u),u=s?u.getNext():u.getPrevious(),!u||u.type!=CKEDITOR.NODE_ELEMENT){return}}if(q.isIdentical(u)){for(var r=s?q.getLast():q.getFirst();t.length;){t.shift().move(q,!s)}u.moveChildren(q,!s);u.remove();r&&r.type==CKEDITOR.NODE_ELEMENT&&r.mergeSiblings()}}}return function(q){if(!1===q||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a")){p(this,this.getNext(),!0),p(this,this.getPrevious())}}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var p=function(r,q){this.$.setAttribute(r,q);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(q,r){"class"==q?this.$.className=r:"style"==q?this.$.style.cssText=r:"tabindex"==q?this.$.tabIndex=r:"checked"==q?this.$.checked=r:"contenteditable"==q?p.call(this,"contentEditable",r):p.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(q,s){if("src"==q&&s.match(/^http:\/\//)){try{p.apply(this,arguments)}catch(r){}}else{p.apply(this,arguments)}return this}:p}(),setAttributes:function(q){for(var p in q){this.setAttribute(p,q[p])}return this},setValue:function(p){this.$.value=p;return this},removeAttribute:function(){var p=function(q){this.$.removeAttribute(q)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(q){"class"==q?q="className":"tabindex"==q?q="tabIndex":"contenteditable"==q&&(q="contentEditable");this.$.removeAttribute(q)}:p}(),removeAttributes:function(q){if(CKEDITOR.tools.isArray(q)){for(var p=0;p<q.length;p++){this.removeAttribute(q[p])}}else{for(p in q){q.hasOwnProperty(p)&&this.removeAttribute(p)}}},removeStyle:function(r){var q=this.$.style;if(q.removeProperty||"border"!=r&&"margin"!=r&&"padding"!=r){q.removeProperty?q.removeProperty(r):q.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(r)),this.$.style.cssText||this.removeAttribute("style")}else{var u=["top","left","right","bottom"],s;"border"==r&&(s=["color","style","width"]);for(var q=[],t=0;t<u.length;t++){if(s){for(var p=0;p<s.length;p++){q.push([r,u[t],s[p]].join("-"))}}else{q.push([r,u[t]].join("-"))}}for(r=0;r<q.length;r++){this.removeStyle(q[r])}}},setStyle:function(q,p){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(q)]=p;return this},setStyles:function(q){for(var p in q){this.setStyle(p,q[p])}return this},setOpacity:function(p){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(p=Math.round(100*p),this.setStyle("filter",100<=p?"":"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d"+p+")")):this.setStyle("opacity",p)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var q,p=this.getElementsByTag("*"),s=0,r=p.count();s<r;s++){q=p.getItem(s),q.setAttribute("unselectable","on")}}},getPositionedAncestor:function(){for(var p=this;"html"!=p.getName();){if("static"!=p.getComputedStyle("position")){return p}p=p.getParent()}return null},getDocumentPosition:function(B){var z=0,w=0,t=this.getDocument(),v=t.getBody(),p="BackCompat"==t.$.compatMode;if(document.documentElement.getBoundingClientRect){var u=this.$.getBoundingClientRect(),s=t.$.documentElement,q=s.clientTop||v.$.clientTop||0,x=s.clientLeft||v.$.clientLeft||0,r=!0;CKEDITOR.env.ie&&(r=t.getDocumentElement().contains(this),t=t.getBody().contains(this),r=p&&t||!p&&r);r&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(z=v.$.scrollLeft||s.scrollLeft,w=v.$.scrollTop||s.scrollTop):(w=p?v.$:s,z=w.scrollLeft,w=w.scrollTop),z=u.left+z-x,w=u.top+w-q)}else{for(q=this,x=null;q&&"body"!=q.getName()&&"html"!=q.getName();){z+=q.$.offsetLeft-q.$.scrollLeft;w+=q.$.offsetTop-q.$.scrollTop;q.equals(this)||(z+=q.$.clientLeft||0,w+=q.$.clientTop||0);for(;x&&!x.equals(q);){z-=x.$.scrollLeft,w-=x.$.scrollTop,x=x.getParent()}x=q;q=(u=q.$.offsetParent)?new CKEDITOR.dom.element(u):null}}B&&(u=this.getWindow(),q=B.getWindow(),!u.equals(q)&&u.$.frameElement&&(B=(new CKEDITOR.dom.element(u.$.frameElement)).getDocumentPosition(B),z+=B.x,w+=B.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||p||(z+=this.$.clientLeft?1:0,w+=this.$.clientTop?1:0);return{x:z,y:w}},scrollIntoView:function(q){var p=this.getParent();if(p){do{if((p.$.clientWidth&&p.$.clientWidth<p.$.scrollWidth||p.$.clientHeight&&p.$.clientHeight<p.$.scrollHeight)&&!p.is("body")&&this.scrollIntoParent(p,q,1),p.is("html")){var t=p.getWindow();try{var r=t.$.frameElement;r&&(p=new CKEDITOR.dom.element(r))}catch(s){}}}while(p=p.getParent())}},scrollIntoParent:function(G,E,C){var z,B,A,I;function w(p,u){/body|html/.test(G.getName())?G.getWindow().$.scrollBy(p,u):(G.$.scrollLeft+=p,G.$.scrollTop+=u)}function r(u,p){var x={x:0,y:0};if(!u.is(t?"body":"html")){var v=u.$.getBoundingClientRect();x.x=v.left;x.y=v.top}v=u.getWindow();v.equals(p)||(v=r(CKEDITOR.dom.element.get(v.$.frameElement),p),x.x+=v.x,x.y+=v.y);return x}function D(u,p){return parseInt(u.getComputedStyle("margin-"+p)||0,10)||0}!G&&(G=this.getWindow());A=G.getDocument();var t="BackCompat"==A.$.compatMode;G instanceof CKEDITOR.dom.window&&(G=t?A.getBody():A.getDocumentElement());A=G.getWindow();B=r(this,A);var H=r(G,A),F=this.$.offsetHeight;z=this.$.offsetWidth;var s=G.$.clientHeight,q=G.$.clientWidth;A=B.x-D(this,"left")-H.x||0;I=B.y-D(this,"top")-H.y||0;z=B.x+z+D(this,"right")-(H.x+q)||0;B=B.y+F+D(this,"bottom")-(H.y+s)||0;(0>I||0<B)&&w(0,!0===E?I:!1===E?B:0>I?I:B);C&&(0>A||0<z)&&w(0>A?A:z,0)},setState:function(q,p,r){p=p||"cke";switch(q){case CKEDITOR.TRISTATE_ON:this.addClass(p+"_on");this.removeClass(p+"_off");this.removeClass(p+"_disabled");r&&this.setAttribute("aria-pressed",!0);r&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(p+"_disabled");this.removeClass(p+"_off");this.removeClass(p+"_on");r&&this.setAttribute("aria-disabled",!0);r&&this.removeAttribute("aria-pressed");break;default:this.addClass(p+"_off"),this.removeClass(p+"_on"),this.removeClass(p+"_disabled"),r&&this.removeAttribute("aria-pressed"),r&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var q=this.$;try{q.contentWindow.document}catch(p){q.src=q.src}return q&&new CKEDITOR.dom.document(q.contentWindow.document)},copyAttributes:function(q,p){var w=this.$.attributes;p=p||{};for(var s=0;s<w.length;s++){var v=w[s],t=v.nodeName.toLowerCase(),r;if(!(t in p)){if("checked"==t&&(r=this.getAttribute(t))){q.setAttribute(t,r)}else{if(!CKEDITOR.env.ie||this.hasAttribute(t)){r=this.getAttribute(t),null===r&&(r=v.nodeValue),q.setAttribute(t,r)}}}}""!==this.$.style.cssText&&(q.$.style.cssText=this.$.style.cssText)},renameNode:function(q){if(this.getName()!=q){var p=this.getDocument();q=new CKEDITOR.dom.element(q,p);this.copyAttributes(q);this.moveChildren(q);this.getParent(!0)&&this.$.parentNode.replaceChild(q.$,this.$);q.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=q.$;delete this.getName}},getChild:function(){function p(q,s){var r=q.childNodes;if(0<=s&&s<r.length){return r[s]}}return function(q){var r=this.$;if(q.slice){for(q=q.slice();0<q.length&&r;){r=p(r,q.shift())}}else{r=p(r,q)}return r?new CKEDITOR.dom.node(r):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function p(q){return q.type==CKEDITOR.NODE_ELEMENT&&q.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(q){q.data.getTarget().getAscendant(p,!0)||q.data.preventDefault()})},getDirection:function(p){return p?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(q,p){q="data-"+q;if(void 0===p){return this.getAttribute(q)}!1===p?this.removeAttribute(q):this.setAttribute(q,p);return null},getEditor:function(){var q=CKEDITOR.instances,p,r;for(p in q){if(r=q[p],r.element.equals(this)&&r.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){return r}}return null},find:function(p){var q=n(this);p=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(i(this,p)));q();return p},findOne:function(p){var q=n(this);p=this.$.querySelector(i(this,p));q();return p?new CKEDITOR.dom.element(p):null},forEach:function(q,p,t){if(!(t||p&&this.type!=p)){var r=q(this)}if(!1!==r){t=this.getChildren();for(var s=0;s<t.count();s++){r=t.getItem(s),r.type==CKEDITOR.NODE_ELEMENT?r.forEach(q,p):p&&r.type!=p||q(r)}}}});var k={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(q,p,r){"number"==typeof p&&(!r||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(p-=o.call(this,q)),this.setStyle(q,p+"px"))};CKEDITOR.dom.element.prototype.getSize=function(q,p){var r=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(q)],this.$["client"+CKEDITOR.tools.capitalize(q)])||0;p&&(r-=o.call(this,q));return r}})();CKEDITOR.dom.documentFragment=function(i){i=i||CKEDITOR.document;this.$=i.type==CKEDITOR.NODE_DOCUMENT?i.$.createDocumentFragment():i};CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(i){i=i.$;i.parentNode.insertBefore(this.$,i.nextSibling)},getHtml:function(){var i=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(i);return i.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function v(L,K){var I=this.range;if(this._.end){return null}if(!this._.start){this._.start=1;if(I.collapsed){return this.end(),null}I.optimize()}var E,H=I.startContainer;E=I.endContainer;var G=I.startOffset,J=I.endOffset,M,A=this.guard,t=this.type,y=L?"getPreviousSourceNode":"getNextSourceNode";if(!L&&!this._.guardLTR){var q=E.type==CKEDITOR.NODE_ELEMENT?E:E.getParent(),l=E.type==CKEDITOR.NODE_ELEMENT?E.getChild(J):E.getNext();this._.guardLTR=function(z,x){return(!x||!q.equals(z))&&(!l||!z.equals(l))&&(z.type!=CKEDITOR.NODE_ELEMENT||!x||!z.equals(I.root))}}if(L&&!this._.guardRTL){var N=H.type==CKEDITOR.NODE_ELEMENT?H:H.getParent(),C=H.type==CKEDITOR.NODE_ELEMENT?G?H.getChild(G-1):null:H.getPrevious();this._.guardRTL=function(z,x){return(!x||!N.equals(z))&&(!C||!z.equals(C))&&(z.type!=CKEDITOR.NODE_ELEMENT||!x||!z.equals(I.root))}}var B=L?this._.guardRTL:this._.guardLTR;M=A?function(z,x){return !1===B(z,x)?!1:A(z,x)}:B;this.current?E=this.current[y](!1,t,M):(L?E.type==CKEDITOR.NODE_ELEMENT&&(E=0<J?E.getChild(J-1):!1===M(E,!0)?null:E.getPreviousSourceNode(!0,t,M)):(E=H,E.type==CKEDITOR.NODE_ELEMENT&&((E=E.getChild(G))||(E=!1===M(H,!0)?null:H.getNextSourceNode(!0,t,M)))),E&&!1===M(E)&&(E=null));for(;E&&!this._.end;){this.current=E;if(!this.evaluator||!1!==this.evaluator(E)){if(!K){return E}}else{if(K&&this.evaluator){return !1}}E=E[y](!1,t,M)}this.end();return this.current=null}function p(l){for(var t,q=null;t=v.call(this,l);){q=t}return q}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(l){this.range=l;this._={}},proto:{end:function(){this._.end=1},next:function(){return v.call(this)},previous:function(){return v.call(this,1)},checkForward:function(){return !1!==v.call(this,0,1)},checkBackward:function(){return !1!==v.call(this,1,1)},lastForward:function(){return p.call(this)},lastBackward:function(){return p.call(this,1)},reset:function(){delete this.current;this._={}}}});var u={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},s={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(l){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position") in s||!u[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||l&&this.is(l)):!0};CKEDITOR.dom.walker.blockBoundary=function(l){return function(q){return !(q.type==CKEDITOR.NODE_ELEMENT&&q.isBlockBoundary(l))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(q,l){function t(x){return x&&x.getName&&"span"==x.getName()&&x.data("cke-bookmark")}return function(x){var z,y;z=x&&x.type!=CKEDITOR.NODE_ELEMENT&&(y=x.getParent())&&t(y);z=q?z:z||t(x);return !!(l^z)}};CKEDITOR.dom.walker.whitespaces=function(l){return function(q){var t;q&&q.type==CKEDITOR.NODE_TEXT&&(t=!CKEDITOR.tools.trim(q.getText())||CKEDITOR.env.webkit&&""==q.getText());return !!(l^t)}};CKEDITOR.dom.walker.invisible=function(q){var l=CKEDITOR.dom.walker.whitespaces(),t=CKEDITOR.env.webkit?1:0;return function(x){l(x)?x=1:(x.type==CKEDITOR.NODE_TEXT&&(x=x.getParent()),x=x.$.offsetWidth<=t);return !!(q^x)}};CKEDITOR.dom.walker.nodeType=function(q,l){return function(t){return !!(l^t.type==q)}};CKEDITOR.dom.walker.bogus=function(q){function l(t){return !m(t)&&!k(t)}return function(x){var t=CKEDITOR.env.needsBrFiller?x.is&&x.is("br"):x.getText&&o.test(x.getText());t&&(t=x.getParent(),x=x.getNext(l),t=t.isBlockBoundary()&&(!x||x.type==CKEDITOR.NODE_ELEMENT&&x.isBlockBoundary()));return !!(q^t)}};CKEDITOR.dom.walker.temp=function(l){return function(q){q.type!=CKEDITOR.NODE_ELEMENT&&(q=q.getParent());q=q&&q.hasAttribute("data-cke-temp");return !!(l^q)}};var o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,m=CKEDITOR.dom.walker.whitespaces(),k=CKEDITOR.dom.walker.bookmark(),j=CKEDITOR.dom.walker.temp(),i=function(l){return k(l)||m(l)||l.type==CKEDITOR.NODE_ELEMENT&&l.is(CKEDITOR.dtd.$inline)&&!l.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(l){return function(q){q=m(q)||k(q)||j(q);return !!(l^q)}};var w=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(l){return function(q){for(var x=0,t=q.getChildCount();x<t;++x){if(!w(q.getChild(x))){return !!l}}return !l}};var n=CKEDITOR.dom.walker.empty(),r=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(q){var l={},t;for(t in q){CKEDITOR.dtd[t]["#"]&&(l[t]=1)}return l}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(l){return function(q){q=w(q)?!1:q.type==CKEDITOR.NODE_TEXT||q.type==CKEDITOR.NODE_ELEMENT&&(q.is(CKEDITOR.dtd.$inline)||q.is("hr")||"false"==q.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&q.is(r)&&n(q))?!0:!1;return !!(l^q)}};CKEDITOR.dom.element.prototype.getBogus=function(){var l=this;do{l=l.getPreviousSourceNode()}while(i(l));return l&&(CKEDITOR.env.needsBrFiller?l.is&&l.is("br"):l.getText&&o.test(l.getText()))?l:!1}})();CKEDITOR.dom.range=function(i){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var j=i instanceof CKEDITOR.dom.document;this.document=j?i:i.getDocument();this.root=j?i.getBody():i};(function(){function s(l){l.collapsed=l.startContainer&&l.endContainer&&l.startContainer.equals(l.endContainer)&&l.startOffset==l.endOffset}function o(ap,ao,an,am,al){function ag(q,l,x,t){var w=x?q.getPrevious():q.getNext();if(t&&ah){return w}ai||t?l.append(q.clone(!0,al),x):(q.remove(),Q&&l.append(q));return w}function ak(){var q,l,w,t=Math.min(T.length,R.length);for(q=0;q<t;q++){if(l=T[q],w=R[q],!l.equals(w)){return q}}return q-1}function aj(){var l=N-1,q=X&&ab&&!ad.equals(af);l<U-1||l<L-1||q?(q?ap.moveToPosition(af,CKEDITOR.POSITION_BEFORE_START):L==l+1&&ac?ap.moveToPosition(R[l],CKEDITOR.POSITION_BEFORE_END):ap.moveToPosition(R[l+1],CKEDITOR.POSITION_BEFORE_START),am&&(l=T[l+1])&&l.type==CKEDITOR.NODE_ELEMENT&&(q=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',ap.document),q.insertAfter(l),l.mergeSiblings(!1),ap.moveToBookmark({startNode:q}))):ap.collapse(!0)}ap.optimizeBookmark();var ah=0===ao,Q=1==ao,ai=2==ao;ao=ai||Q;var ad=ap.startContainer,af=ap.endContainer,Y=ap.startOffset,Z=ap.endOffset,V,ac,X,ab,C,y;if(ai&&af.type==CKEDITOR.NODE_TEXT&&ad.equals(af)){ad=ap.document.createText(ad.substring(Y,Z)),an.append(ad)}else{af.type==CKEDITOR.NODE_TEXT?ai?y=!0:af=af.split(Z):0<af.getChildCount()?Z>=af.getChildCount()?(af=af.getChild(Z-1),ac=!0):af=af.getChild(Z):ab=ac=!0;ad.type==CKEDITOR.NODE_TEXT?ai?C=!0:ad.split(Y):0<ad.getChildCount()?0===Y?(ad=ad.getChild(Y),V=!0):ad=ad.getChild(Y-1):X=V=!0;for(var T=ad.getParents(),R=af.getParents(),N=ak(),U=T.length-1,L=R.length-1,A=an,E,aq,v,ae=-1,z=N;z<=U;z++){aq=T[z];v=aq.getNext();for(z!=U||aq.equals(R[z])&&U<L?ao&&(E=A.append(aq.clone(0,al))):V?ag(aq,A,!1,X):C&&A.append(ap.document.createText(aq.substring(Y)));v;){if(v.equals(R[z])){ae=z;break}v=ag(v,A)}A=E}A=an;for(z=N;z<=L;z++){if(an=R[z],v=an.getPrevious(),an.equals(T[z])){ao&&(A=A.getChild(0))}else{z!=L||an.equals(T[z])&&L<U?ao&&(E=A.append(an.clone(0,al))):ac?ag(an,A,!1,ab):y&&A.append(ap.document.createText(an.substring(0,Z)));if(z>ae){for(;v;){v=ag(v,A,!0)}}A=E}}ai||aj()}}function r(){var q=!1,l=CKEDITOR.dom.walker.whitespaces(),v=CKEDITOR.dom.walker.bookmark(!0),t=CKEDITOR.dom.walker.bogus();return function(w){return v(w)||l(w)?!0:t(w)&&!q?q=!0:w.type==CKEDITOR.NODE_TEXT&&(w.hasAscendant("pre")||CKEDITOR.tools.trim(w.getText()).length)||w.type==CKEDITOR.NODE_ELEMENT&&!w.is(m)?!1:!0}}function p(q){var l=CKEDITOR.dom.walker.whitespaces(),t=CKEDITOR.dom.walker.bookmark(1);return function(v){return t(v)||l(v)?!0:!q&&k(v)||v.type==CKEDITOR.NODE_ELEMENT&&v.is(CKEDITOR.dtd.$removeEmpty)}}function n(l){return function(){var q;return this[l?"getPreviousNode":"getNextNode"](function(t){!q&&u(t)&&(q=t);return i(t)&&!(k(t)&&t.equals(q))})}}var m={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},k=CKEDITOR.dom.walker.bogus(),j=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,i=CKEDITOR.dom.walker.editable(),u=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var l=new CKEDITOR.dom.range(this.root);l._setStartContainer(this.startContainer);l.startOffset=this.startOffset;l._setEndContainer(this.endContainer);l.endOffset=this.endOffset;l.collapsed=this.collapsed;return l},collapse:function(l){l?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(q){var l=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||o(this,2,l,!1,"undefined"==typeof q?!0:q);return l},deleteContents:function(l){this.collapsed||o(this,0,null,l)},extractContents:function(q,l){var t=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||o(this,1,t,q,"undefined"==typeof l?!0:l);return t},createBookmark:function(t){var q,x,w,v,l=this.collapsed;q=this.document.createElement("span");q.data("cke-bookmark",1);q.setStyle("display","none");q.setHtml("\x26nbsp;");t&&(w="cke_bm_"+CKEDITOR.tools.getNextNumber(),q.setAttribute("id",w+(l?"C":"S")));l||(x=q.clone(),x.setHtml("\x26nbsp;"),t&&x.setAttribute("id",w+"E"),v=this.clone(),v.collapse(),v.insertNode(x));v=this.clone();v.collapse(!0);v.insertNode(q);x?(this.setStartAfter(q),this.setEndBefore(x)):this.moveToPosition(q,CKEDITOR.POSITION_AFTER_END);return{startNode:t?w+(l?"C":"S"):q,endNode:t?w+"E":x,serializable:t,collapsed:l}},createBookmark2:function(){function q(y){var v=y.container,x=y.offset,w;w=v;var t=x;w=w.type!=CKEDITOR.NODE_ELEMENT||0===t||t==w.getChildCount()?0:w.getChild(t-1).type==CKEDITOR.NODE_TEXT&&w.getChild(t).type==CKEDITOR.NODE_TEXT;w&&(v=v.getChild(x-1),x=v.getLength());v.type==CKEDITOR.NODE_ELEMENT&&1<x&&(x=v.getChild(x-1).getIndex(!0)+1);if(v.type==CKEDITOR.NODE_TEXT){w=v;for(t=0;(w=w.getPrevious())&&w.type==CKEDITOR.NODE_TEXT;){t+=w.getLength()}w=t;v.getText()?x+=w:(t=v.getPrevious(l),w?(x=w,v=t?t.getNext():v.getParent().getFirst()):(v=v.getParent(),x=t?t.getIndex(!0)+1:0))}y.container=v;y.offset=x}var l=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(t){var x=this.collapsed,w={container:this.startContainer,offset:this.startOffset},v={container:this.endContainer,offset:this.endOffset};t&&(q(w),x||q(v));return{start:w.container.getAddress(t),end:x?null:v.container.getAddress(t),startOffset:w.offset,endOffset:v.offset,normalized:t,collapsed:x,is2:!0}}}(),moveToBookmark:function(q){if(q.is2){var l=this.document.getByAddress(q.start,q.normalized),v=q.startOffset,t=q.end&&this.document.getByAddress(q.end,q.normalized);q=q.endOffset;this.setStart(l,v);t?this.setEnd(t,q):this.collapse(!0)}else{l=(v=q.serializable)?this.document.getById(q.startNode):q.startNode,q=v?this.document.getById(q.endNode):q.endNode,this.setStartBefore(l),l.remove(),q?(this.setEndBefore(q),q.remove()):this.collapse(!0)}},getBoundaryNodes:function(){var q=this.startContainer,l=this.endContainer,w=this.startOffset,v=this.endOffset,t;if(q.type==CKEDITOR.NODE_ELEMENT){if(t=q.getChildCount(),t>w){q=q.getChild(w)}else{if(1>t){q=q.getPreviousSourceNode()}else{for(q=q.$;q.lastChild;){q=q.lastChild}q=new CKEDITOR.dom.node(q);q=q.getNextSourceNode()||q}}}if(l.type==CKEDITOR.NODE_ELEMENT){if(t=l.getChildCount(),t>v){l=l.getChild(v).getPreviousSourceNode(!0)}else{if(1>t){l=l.getPreviousSourceNode()}else{for(l=l.$;l.lastChild;){l=l.lastChild}l=new CKEDITOR.dom.node(l)}}}q.getPosition(l)&CKEDITOR.POSITION_FOLLOWING&&(q=l);return{startNode:q,endNode:l}},getCommonAncestor:function(q,l){var v=this.startContainer,t=this.endContainer,v=v.equals(t)?q&&v.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?v.getChild(this.startOffset):v:v.getCommonAncestor(t);return l&&!v.is?v.getParent():v},optimize:function(){var q=this.startContainer,l=this.startOffset;q.type!=CKEDITOR.NODE_ELEMENT&&(l?l>=q.getLength()&&this.setStartAfter(q):this.setStartBefore(q));q=this.endContainer;l=this.endOffset;q.type!=CKEDITOR.NODE_ELEMENT&&(l?l>=q.getLength()&&this.setEndAfter(q):this.setEndBefore(q))},optimizeBookmark:function(){var q=this.startContainer,l=this.endContainer;q.is&&q.is("span")&&q.data("cke-bookmark")&&this.setStartAt(q,CKEDITOR.POSITION_BEFORE_START);l&&l.is&&l.is("span")&&l.data("cke-bookmark")&&this.setEndAt(l,CKEDITOR.POSITION_AFTER_END)},trim:function(t,q){var x=this.startContainer,w=this.startOffset,v=this.collapsed;if((!t||v)&&x&&x.type==CKEDITOR.NODE_TEXT){if(w){if(w>=x.getLength()){w=x.getIndex()+1,x=x.getParent()}else{var l=x.split(w),w=x.getIndex()+1,x=x.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(l,this.endOffset-this.startOffset):x.equals(this.endContainer)&&(this.endOffset+=1)}}else{w=x.getIndex(),x=x.getParent()}this.setStart(x,w);if(v){this.collapse(!0);return}}x=this.endContainer;w=this.endOffset;q||v||!x||x.type!=CKEDITOR.NODE_TEXT||(w?(w>=x.getLength()||x.split(w),w=x.getIndex()+1):w=x.getIndex(),x=x.getParent(),this.setEnd(x,w))},enlarge:function(af,ae){function ad(l){return l&&l.type==CKEDITOR.NODE_ELEMENT&&l.hasAttribute("contenteditable")?null:l}var ac=new RegExp(/[^\s\ufeff]/);switch(af){case CKEDITOR.ENLARGE_INLINE:var ab=1;case CKEDITOR.ENLARGE_ELEMENT:var W=function(q,l){var w=new CKEDITOR.dom.range(Z);w.setStart(q,l);w.setEndAt(Z,CKEDITOR.POSITION_BEFORE_END);var w=new CKEDITOR.dom.walker(w),t;for(w.guard=function(x){return !(x.type==CKEDITOR.NODE_ELEMENT&&x.isBlockBoundary())};t=w.next();){if(t.type!=CKEDITOR.NODE_TEXT){return !1}N=t!=q?t.getText():t.substring(l);if(ac.test(N)){return !1}}return !0};if(this.collapsed){break}var aa=this.getCommonAncestor(),Z=this.root,X,C,Y,U,V,P=!1,Q,N;Q=this.startContainer;var T=this.startOffset;Q.type==CKEDITOR.NODE_TEXT?(T&&(Q=!CKEDITOR.tools.trim(Q.substring(0,T)).length&&Q,P=!!Q),Q&&((U=Q.getPrevious())||(Y=Q.getParent()))):(T&&(U=Q.getChild(T-1)||Q.getLast()),U||(Y=Q));for(Y=ad(Y);Y||U;){if(Y&&!U){!V&&Y.equals(aa)&&(V=!0);if(ab?Y.isBlockBoundary():!Z.contains(Y)){break}P&&"inline"==Y.getComputedStyle("display")||(P=!1,V?X=Y:this.setStartBefore(Y));U=Y.getPrevious()}for(;U;){if(Q=!1,U.type==CKEDITOR.NODE_COMMENT){U=U.getPrevious()}else{if(U.type==CKEDITOR.NODE_TEXT){N=U.getText(),ac.test(N)&&(U=null),Q=/[\s\ufeff]$/.test(N)}else{if((U.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||ae&&U.is("br"))&&!U.data("cke-bookmark")){if(P&&CKEDITOR.dtd.$removeEmpty[U.getName()]){N=U.getText();if(ac.test(N)){U=null}else{for(var T=U.$.getElementsByTagName("*"),O=0,R;R=T[O++];){if(!CKEDITOR.dtd.$removeEmpty[R.nodeName.toLowerCase()]){U=null;break}}}U&&(Q=!!N.length)}else{U=null}}}Q&&(P?V?X=Y:Y&&this.setStartBefore(Y):P=!0);if(U){Q=U.getPrevious();if(!Y&&!Q){Y=U;U=null;break}U=Q}else{Y=null}}}Y&&(Y=ad(Y.getParent()))}Q=this.endContainer;T=this.endOffset;Y=U=null;V=P=!1;Q.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(Q.substring(T)).length?P=!0:(P=!Q.getLength(),T==Q.getLength()?(U=Q.getNext())||(Y=Q.getParent()):W(Q,T)&&(Y=Q.getParent())):(U=Q.getChild(T))||(Y=Q);for(;Y||U;){if(Y&&!U){!V&&Y.equals(aa)&&(V=!0);if(ab?Y.isBlockBoundary():!Z.contains(Y)){break}P&&"inline"==Y.getComputedStyle("display")||(P=!1,V?C=Y:Y&&this.setEndAfter(Y));U=Y.getNext()}for(;U;){Q=!1;if(U.type==CKEDITOR.NODE_TEXT){N=U.getText(),W(U,0)||(U=null),Q=/^[\s\ufeff]/.test(N)}else{if(U.type==CKEDITOR.NODE_ELEMENT){if((0<U.$.offsetWidth||ae&&U.is("br"))&&!U.data("cke-bookmark")){if(P&&CKEDITOR.dtd.$removeEmpty[U.getName()]){N=U.getText();if(ac.test(N)){U=null}else{for(T=U.$.getElementsByTagName("*"),O=0;R=T[O++];){if(!CKEDITOR.dtd.$removeEmpty[R.nodeName.toLowerCase()]){U=null;break}}}U&&(Q=!!N.length)}else{U=null}}}else{Q=1}}Q&&P&&(V?C=Y:this.setEndAfter(Y));if(U){Q=U.getNext();if(!Y&&!Q){Y=U;U=null;break}U=Q}else{Y=null}}Y&&(Y=ad(Y.getParent()))}X&&C&&(aa=X.contains(C)?C:X,this.setStartBefore(aa),this.setEndAfter(aa));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:Y=new CKEDITOR.dom.range(this.root);Z=this.root;Y.setStartAt(Z,CKEDITOR.POSITION_AFTER_START);Y.setEnd(this.startContainer,this.startOffset);Y=new CKEDITOR.dom.walker(Y);var y,v,K=CKEDITOR.dom.walker.blockBoundary(af==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),E=null,A=function(q){if(q.type==CKEDITOR.NODE_ELEMENT&&"false"==q.getAttribute("contenteditable")){if(E){if(E.equals(q)){E=null;return}}else{E=q}}else{if(E){return}}var l=K(q);l||(y=q);return l},ab=function(q){var l=A(q);!l&&q.is&&q.is("br")&&(v=q);return l};Y.guard=A;Y=Y.lastBackward();y=y||Z;this.setStartAt(y,!y.is("br")&&(!Y&&this.checkStartOfBlock()||Y&&y.contains(Y))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(af==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){Y=this.clone();Y=new CKEDITOR.dom.walker(Y);var L=CKEDITOR.dom.walker.whitespaces(),z=CKEDITOR.dom.walker.bookmark();Y.evaluator=function(l){return !L(l)&&!z(l)};if((Y=Y.previous())&&Y.type==CKEDITOR.NODE_ELEMENT&&Y.is("br")){break}}Y=this.clone();Y.collapse();Y.setEndAt(Z,CKEDITOR.POSITION_BEFORE_END);Y=new CKEDITOR.dom.walker(Y);Y.guard=af==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?ab:A;y=E=v=null;Y=Y.lastForward();y=y||Z;this.setEndAt(y,!Y&&this.checkEndOfBlock()||Y&&y.contains(Y)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);v&&this.setEndAfter(v)}},shrink:function(F,D,C){if(!this.collapsed){F=F||CKEDITOR.SHRINK_TEXT;var B=this.clone(),A=this.startContainer,t=this.endContainer,z=this.startOffset,y=this.endOffset,v=1,E=1;A&&A.type==CKEDITOR.NODE_TEXT&&(z?z>=A.getLength()?B.setStartAfter(A):(B.setStartBefore(A),v=0):B.setStartBefore(A));t&&t.type==CKEDITOR.NODE_TEXT&&(y?y>=t.getLength()?B.setEndAfter(t):(B.setEndAfter(t),E=0):B.setEndBefore(t));var B=new CKEDITOR.dom.walker(B),w=CKEDITOR.dom.walker.bookmark();B.evaluator=function(l){return l.type==(F==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var q;B.guard=function(l,x){if(w(l)){return !0}if(F==CKEDITOR.SHRINK_ELEMENT&&l.type==CKEDITOR.NODE_TEXT||x&&l.equals(q)||!1===C&&l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()||l.type==CKEDITOR.NODE_ELEMENT&&l.hasAttribute("contenteditable")){return !1}x||l.type!=CKEDITOR.NODE_ELEMENT||(q=l);return !0};v&&(A=B[F==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(A,D?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);E&&(B.reset(),(B=B[F==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(B,D?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return !(!v&&!E)}},insertNode:function(q){this.optimizeBookmark();this.trim(!1,!0);var l=this.startContainer,t=l.getChild(this.startOffset);t?q.insertBefore(t):l.append(q);q.getParent()&&q.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(q)},moveToPosition:function(q,l){this.setStartAt(q,l);this.collapse(!0)},moveToRange:function(l){this.setStart(l.startContainer,l.startOffset);this.setEnd(l.endContainer,l.endOffset)},selectNodeContents:function(l){this.setStart(l,0);this.setEnd(l,l.type==CKEDITOR.NODE_TEXT?l.getLength():l.getChildCount())},setStart:function(l,q){l.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[l.getName()]&&(q=l.getIndex(),l=l.getParent());this._setStartContainer(l);this.startOffset=q;this.endContainer||(this._setEndContainer(l),this.endOffset=q);s(this)},setEnd:function(l,q){l.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[l.getName()]&&(q=l.getIndex()+1,l=l.getParent());this._setEndContainer(l);this.endOffset=q;this.startContainer||(this._setStartContainer(l),this.startOffset=q);s(this)},setStartAfter:function(l){this.setStart(l.getParent(),l.getIndex()+1)},setStartBefore:function(l){this.setStart(l.getParent(),l.getIndex())},setEndAfter:function(l){this.setEnd(l.getParent(),l.getIndex()+1)},setEndBefore:function(l){this.setEnd(l.getParent(),l.getIndex())},setStartAt:function(l,q){switch(q){case CKEDITOR.POSITION_AFTER_START:this.setStart(l,0);break;case CKEDITOR.POSITION_BEFORE_END:l.type==CKEDITOR.NODE_TEXT?this.setStart(l,l.getLength()):this.setStart(l,l.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(l);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(l)}s(this)},setEndAt:function(l,q){switch(q){case CKEDITOR.POSITION_AFTER_START:this.setEnd(l,0);break;case CKEDITOR.POSITION_BEFORE_END:l.type==CKEDITOR.NODE_TEXT?this.setEnd(l,l.getLength()):this.setEnd(l,l.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(l);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(l)}s(this)},fixBlock:function(q,l){var w=this.createBookmark(),v=this.document.createElement(l);this.collapse(q);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(v);v.trim();this.insertNode(v);var t=v.getBogus();t&&t.remove();v.appendBogus();this.moveToBookmark(w);return v},splitBlock:function(t,q){var y=new CKEDITOR.dom.elementPath(this.startContainer,this.root),x=new CKEDITOR.dom.elementPath(this.endContainer,this.root),w=y.block,l=x.block,v=null;if(!y.blockLimit.equals(x.blockLimit)){return null}"br"!=t&&(w||(w=this.fixBlock(!0,t),l=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),l||(l=this.fixBlock(!1,t)));y=w&&this.checkStartOfBlock();x=l&&this.checkEndOfBlock();this.deleteContents();w&&w.equals(l)&&(x?(v=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(l,CKEDITOR.POSITION_AFTER_END),l=null):y?(v=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(w,CKEDITOR.POSITION_BEFORE_START),w=null):(l=this.splitElement(w,q||!1),w.is("ul","ol")||w.appendBogus()));return{previousBlock:w,nextBlock:l,wasStartOfBlock:y,wasEndOfBlock:x,elementPath:v}},splitElement:function(q,l){if(!this.collapsed){return null}this.setEndAt(q,CKEDITOR.POSITION_BEFORE_END);var v=this.extractContents(!1,l||!1),t=q.clone(!1,l||!1);v.appendTo(t);t.insertAfter(q);this.moveToPosition(q,CKEDITOR.POSITION_AFTER_END);return t},removeEmptyBlocksAtEnd:function(){function q(v){return function(w){return l(w)||t(w)||w.type==CKEDITOR.NODE_ELEMENT&&w.isEmptyInlineRemoveable()||v.is("table")&&w.is("caption")?!1:!0}}var l=CKEDITOR.dom.walker.whitespaces(),t=CKEDITOR.dom.walker.bookmark(!1);return function(v){for(var z=this.createBookmark(),y=this[v?"endPath":"startPath"](),x=y.block||y.blockLimit,w;x&&!x.equals(y.root)&&!x.getFirst(q(x));){w=x.getParent(),this[v?"setEndAt":"setStartAt"](x,CKEDITOR.POSITION_AFTER_END),x.remove(1),x=w}this.moveToBookmark(z)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(q,l){var v=l==CKEDITOR.START,t=this.clone();t.collapse(v);t[v?"setStartAt":"setEndAt"](q,v?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);t=new CKEDITOR.dom.walker(t);t.evaluator=p(v);return t[v?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var l=this.startContainer,q=this.startOffset;CKEDITOR.env.ie&&q&&l.type==CKEDITOR.NODE_TEXT&&(l=CKEDITOR.tools.ltrim(l.substring(0,q)),j.test(l)&&this.trim(0,1));this.trim();l=new CKEDITOR.dom.elementPath(this.startContainer,this.root);q=this.clone();q.collapse(!0);q.setStartAt(l.block||l.blockLimit,CKEDITOR.POSITION_AFTER_START);l=new CKEDITOR.dom.walker(q);l.evaluator=r();return l.checkBackward()},checkEndOfBlock:function(){var l=this.endContainer,q=this.endOffset;CKEDITOR.env.ie&&l.type==CKEDITOR.NODE_TEXT&&(l=CKEDITOR.tools.rtrim(l.substring(q)),j.test(l)&&this.trim(1,0));this.trim();l=new CKEDITOR.dom.elementPath(this.endContainer,this.root);q=this.clone();q.collapse(!1);q.setEndAt(l.block||l.blockLimit,CKEDITOR.POSITION_BEFORE_END);l=new CKEDITOR.dom.walker(q);l.evaluator=r();return l.checkForward()},getPreviousNode:function(q,l,v){var t=this.clone();t.collapse(1);t.setStartAt(v||this.root,CKEDITOR.POSITION_AFTER_START);v=new CKEDITOR.dom.walker(t);v.evaluator=q;v.guard=l;return v.previous()},getNextNode:function(q,l,v){var t=this.clone();t.collapse();t.setEndAt(v||this.root,CKEDITOR.POSITION_BEFORE_END);v=new CKEDITOR.dom.walker(t);v.evaluator=q;v.guard=l;return v.next()},checkReadOnly:function(){function l(q,t){for(;q;){if(q.type==CKEDITOR.NODE_ELEMENT){if("false"==q.getAttribute("contentEditable")&&!q.data("cke-editable")){return 0}if(q.is("html")||"true"==q.getAttribute("contentEditable")&&(q.contains(t)||q.equals(t))){break}}q=q.getParent()}return 1}return function(){var q=this.startContainer,t=this.endContainer;return !(l(q,t)&&l(t,q))}}(),moveToElementEditablePosition:function(t,q){if(t.type==CKEDITOR.NODE_ELEMENT&&!t.isEditable(!1)){return this.moveToPosition(t,q?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0}for(var x=0;t;){if(t.type==CKEDITOR.NODE_TEXT){q&&this.endContainer&&this.checkEndOfBlock()&&j.test(t.getText())?this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(t,q?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);x=1;break}if(t.type==CKEDITOR.NODE_ELEMENT){if(t.isEditable()){this.moveToPosition(t,q?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),x=1}else{if(q&&t.is("br")&&this.endContainer&&this.checkEndOfBlock()){this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START)}else{if("false"==t.getAttribute("contenteditable")&&t.is(CKEDITOR.dtd.$block)){return this.setStartBefore(t),this.setEndAfter(t),!0}}}}var w=t,v=x,l=void 0;w.type==CKEDITOR.NODE_ELEMENT&&w.isEditable(!1)&&(l=w[q?"getLast":"getFirst"](u));v||l||(l=w[q?"getPrevious":"getNext"](u));t=l}return !!x},moveToClosestEditablePosition:function(t,q){var y,x=0,w,l,v=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];t?(y=new CKEDITOR.dom.range(this.root),y.moveToPosition(t,v[q?0:1])):y=this.clone();if(t&&!t.is(CKEDITOR.dtd.$block)){x=1}else{if(w=y[q?"getNextEditableNode":"getPreviousEditableNode"]()){x=1,(l=w.type==CKEDITOR.NODE_ELEMENT)&&w.is(CKEDITOR.dtd.$block)&&"false"==w.getAttribute("contenteditable")?(y.setStartAt(w,CKEDITOR.POSITION_BEFORE_START),y.setEndAt(w,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&l&&w.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(y.setEnd(w,0),y.collapse()):y.moveToPosition(w,v[q?1:0])}}x&&this.moveToRange(y);return !!x},moveToElementEditStart:function(l){return this.moveToElementEditablePosition(l)},moveToElementEditEnd:function(l){return this.moveToElementEditablePosition(l,!0)},getEnclosedNode:function(){var q=this.clone();q.optimize();if(q.startContainer.type!=CKEDITOR.NODE_ELEMENT||q.endContainer.type!=CKEDITOR.NODE_ELEMENT){return null}var q=new CKEDITOR.dom.walker(q),l=CKEDITOR.dom.walker.bookmark(!1,!0),v=CKEDITOR.dom.walker.whitespaces(!0);q.evaluator=function(w){return v(w)&&l(w)};var t=q.next();q.reset();return t&&t.equals(q.previous())?t:null},getTouchedStartNode:function(){var l=this.startContainer;return this.collapsed||l.type!=CKEDITOR.NODE_ELEMENT?l:l.getChild(this.startOffset)||l},getTouchedEndNode:function(){var l=this.endContainer;return this.collapsed||l.type!=CKEDITOR.NODE_ELEMENT?l:l.getChild(this.endOffset-1)||l},getNextEditableNode:n(),getPreviousEditableNode:n(1),scrollIntoView:function(){var q=new CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",this.document),l,w,v,t=this.clone();t.optimize();(v=t.startContainer.type==CKEDITOR.NODE_TEXT)?(w=t.startContainer.getText(),l=t.startContainer.split(t.startOffset),q.insertAfter(t.startContainer)):t.insertNode(q);q.scrollIntoView();v&&(t.startContainer.setText(w),l.remove());q.remove()},_setStartContainer:function(l){this.startContainer=l},_setEndContainer:function(l){this.endContainer=l}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";(function(){function s(l){1>arguments.length||(this.range=l,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function o(q){var l=[];q.forEach(function(t){if("true"==t.getAttribute("contenteditable")){return l.push(t),!1}},CKEDITOR.NODE_ELEMENT,!0);return l}function r(l,v,u,t){l:{null==t&&(t=o(u));for(var q;q=t.shift();){if(q.getDtd().p){t={element:q,remaining:t};break l}}t=null}if(!t){return 0}if((q=CKEDITOR.filter.instances[t.element.data("cke-filter")])&&!q.check(v)){return r(l,v,u,t.remaining)}v=new CKEDITOR.dom.range(t.element);v.selectNodeContents(t.element);v=v.createIterator();v.enlargeBr=l.enlargeBr;v.enforceRealBlocks=l.enforceRealBlocks;v.activeFilter=v.filter=q;l._.nestedEditable={element:t.element,container:u,remaining:t.remaining,iterator:v};return 1}function p(q,l,t){if(!l){return !1}q=q.clone();q.collapse(!t);return q.checkBoundaryOfElement(l,t?CKEDITOR.START:CKEDITOR.END)}var n=/^[\r\n\t ]+$/,m=CKEDITOR.dom.walker.bookmark(!1,!0),k=CKEDITOR.dom.walker.whitespaces(!0),j=function(l){return m(l)&&k(l)},i={dd:1,dt:1,li:1};s.prototype={getNextParagraph:function(H){var D,B,t,J,l;H=H||"p";if(this._.nestedEditable){if(D=this._.nestedEditable.iterator.getNextParagraph(H)){return this.activeFilter=this._.nestedEditable.iterator.activeFilter,D}this.activeFilter=this.filter;if(r(this,H,this._.nestedEditable.container,this._.nestedEditable.remaining)){return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(H)}this._.nestedEditable=null}if(!this.range.root.getDtd()[H]){return null}if(!this._.started){var w=this.range.clone();B=w.startPath();var F=w.endPath(),K=!w.collapsed&&p(w,B.block),I=!w.collapsed&&p(w,F.block,1);w.shrink(CKEDITOR.SHRINK_ELEMENT,!0);K&&w.setStartAt(B.block,CKEDITOR.POSITION_BEFORE_END);I&&w.setEndAt(F.block,CKEDITOR.POSITION_AFTER_START);B=w.endContainer.hasAscendant("pre",!0)||w.startContainer.hasAscendant("pre",!0);w.enlarge(this.forceBrBreak&&!B||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);w.collapsed||(B=new CKEDITOR.dom.walker(w.clone()),F=CKEDITOR.dom.walker.bookmark(!0,!0),B.evaluator=F,this._.nextNode=B.next(),B=new CKEDITOR.dom.walker(w.clone()),B.evaluator=F,B=B.previous(),this._.lastNode=B.getNextSourceNode(!0,null,w.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(F=this.range.clone(),F.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),F.checkEndOfBlock()&&(F=new CKEDITOR.dom.elementPath(F.endContainer,F.root),this._.lastNode=(F.block||F.blockLimit).getNextSourceNode(!0))),this._.lastNode&&w.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=w.document.createText(""),this._.lastNode.insertAfter(B)),w=null);this._.started=1;B=w}F=this._.nextNode;w=this._.lastNode;for(this._.nextNode=null;F;){var K=0,I=F.hasAscendant("pre"),G=F.type!=CKEDITOR.NODE_ELEMENT,z=0;if(G){F.type==CKEDITOR.NODE_TEXT&&n.test(F.getText())&&(G=0)}else{var q=F.getName();if(CKEDITOR.dtd.$block[q]&&"false"==F.getAttribute("contenteditable")){D=F;r(this,H,D);break}else{if(F.isBlockBoundary(this.forceBrBreak&&!I&&{br:1})){if("br"==q){G=1}else{if(!B&&!F.getChildCount()&&"hr"!=q){D=F;t=F.equals(w);break}}B&&(B.setEndAt(F,CKEDITOR.POSITION_BEFORE_START),"br"!=q&&(this._.nextNode=F));K=1}else{if(F.getFirst()){B||(B=this.range.clone(),B.setStartAt(F,CKEDITOR.POSITION_BEFORE_START));F=F.getFirst();continue}G=1}}}G&&!B&&(B=this.range.clone(),B.setStartAt(F,CKEDITOR.POSITION_BEFORE_START));t=(!K||G)&&F.equals(w);if(B&&!K){for(;!F.getNext(j)&&!t;){q=F.getParent();if(q.isBlockBoundary(this.forceBrBreak&&!I&&{br:1})){K=1;G=0;t||q.equals(w);B.setEndAt(q,CKEDITOR.POSITION_BEFORE_END);break}F=q;G=1;t=F.equals(w);z=1}}G&&B.setEndAt(F,CKEDITOR.POSITION_AFTER_END);F=this._getNextSourceNode(F,z,w);if((t=!F)||K&&B){break}}if(!D){if(!B){return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null}D=new CKEDITOR.dom.elementPath(B.startContainer,B.root);F=D.blockLimit;K={div:1,th:1,td:1};D=D.block;!D&&F&&!this.enforceRealBlocks&&K[F.getName()]&&B.checkStartOfBlock()&&B.checkEndOfBlock()&&!F.equals(B.root)?D=F:!D||this.enforceRealBlocks&&D.is(i)?(D=this.range.document.createElement(H),B.extractContents().appendTo(D),D.trim(),B.insertNode(D),J=l=!0):"li"!=D.getName()?B.checkStartOfBlock()&&B.checkEndOfBlock()||(D=D.clone(!1),B.extractContents().appendTo(D),D.trim(),l=B.splitBlock(),J=!l.wasStartOfBlock,l=!l.wasEndOfBlock,B.insertNode(D)):t||(this._.nextNode=D.equals(w)?null:this._getNextSourceNode(B.getBoundaryNodes().endNode,1,w))}J&&(J=D.getPrevious())&&J.type==CKEDITOR.NODE_ELEMENT&&("br"==J.getName()?J.remove():J.getLast()&&"br"==J.getLast().$.nodeName.toLowerCase()&&J.getLast().remove());l&&(J=D.getLast())&&J.type==CKEDITOR.NODE_ELEMENT&&"br"==J.getName()&&(!CKEDITOR.env.needsBrFiller||J.getPrevious(m)||J.getNext(m))&&J.remove();this._.nextNode||(this._.nextNode=t||D.equals(w)||!w?null:this._getNextSourceNode(D,1,w));return D},_getNextSourceNode:function(q,l,v){function u(w){return !(w.equals(v)||w.equals(t))}var t=this.range.root;for(q=q.getNextSourceNode(l,null,u);!m(q);){q=q.getNextSourceNode(l,null,u)}return q}};CKEDITOR.dom.range.prototype.createIterator=function(){return new s(this)}})();CKEDITOR.command=function(j,k){this.uiItems=[];this.exec=function(l){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed()){return !1}this.editorFocus&&j.focus();return !1===this.fire("exec")?!0:!1!==k.exec.call(this,j,l)};this.refresh=function(m,l){if(!this.readOnly&&m.readOnly){return !0}if(this.context&&!l.isContextFor(this.context)||!this.checkAllowed(!0)){return this.disable(),!0}this.startDisabled||this.enable();this.modes&&!this.modes[m.mode]&&this.disable();return !1===this.fire("refresh",{editor:m,path:l})?!0:k.refresh&&!1!==k.refresh.apply(this,arguments)};var i;this.checkAllowed=function(l){return l||"boolean"!=typeof i?i=j.activeFilter.checkFeature(this):i};CKEDITOR.tools.extend(this,k,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!k.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(i){if(this.state==i||i!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()){return !1}this.previousState=this.state;this.state=i;this.fire("state");return !0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"\x3c!DOCTYPE html\x3e",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:10000,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};(function(){function aw(T,S,O,M,L){var E,z;T=[];for(E in S){z=S[E];z="boolean"==typeof z?{}:"function"==typeof z?{match:z}:K(z);"$"!=E.charAt(0)&&(z.elements=E);O&&(z.featureName=O.toLowerCase());var A=z;A.elements=ao(A.elements,/\s+/)||null;A.propertiesOnly=A.propertiesOnly||!0===A.elements;var y=/\s*,\s*/,B=void 0;for(B in j){A[B]=ao(A[B],y)||null;var u=A,I=ad[B],t=ao(A[ad[B]],y),H=A[B],w=[],v=!0,q=void 0;t?v=!1:t={};for(q in H){"!"==q.charAt(0)&&(q=q.slice(1),w.push(q),t[q]=!0,v=!1)}for(;q=w.pop();){H[q]=H["!"+q],delete H["!"+q]}u[I]=(v?!1:t)||null}A.match=A.match||null;M.push(z);T.push(z)}S=L.elements;L=L.generic;var C;O=0;for(M=T.length;O<M;++O){E=K(T[O]);z=!0===E.classes||!0===E.styles||!0===E.attributes;A=E;B=I=y=void 0;for(y in j){A[y]=V(A[y])}u=!0;for(B in ad){y=ad[B];I=A[y];t=[];H=void 0;for(H in I){-1<H.indexOf("*")?t.push(new RegExp("^"+H.replace(/\*/g,".*")+"$")):t.push(H)}I=t;I.length&&(A[y]=I,u=!1)}A.nothingRequired=u;A.noProperties=!(A.attributes||A.classes||A.styles);if(!0===E.elements||null===E.elements){L[z?"unshift":"push"](E)}else{for(C in A=E.elements,delete E.elements,A){if(S[C]){S[C][z?"unshift":"push"](E)}else{S[C]=[E]}}}}}function at(l,v,t,m){if(!l.match||l.match(v)){if(m||am(l,v)){if(l.propertiesOnly||(t.valid=!0),t.allAttributes||(t.allAttributes=av(l.attributes,v.attributes,t.validAttributes)),t.allStyles||(t.allStyles=av(l.styles,v.styles,t.validStyles)),!t.allClasses){l=l.classes;v=v.classes;m=t.validClasses;if(l){if(!0===l){l=!0}else{for(var r=0,q=v.length,u;r<q;++r){u=v[r],m[u]||(m[u]=l(u))}l=!1}}else{l=!1}t.allClasses=l}}}}function av(l,k,n){if(!l){return !1}if(!0===l){return !0}for(var m in k){n[m]||(n[m]=l(m))}return !1}function au(m,l,t){if(!m.match||m.match(l)){if(m.noProperties){return !1}t.hadInvalidAttribute=ar(m.attributes,l.attributes)||t.hadInvalidAttribute;t.hadInvalidStyle=ar(m.styles,l.styles)||t.hadInvalidStyle;m=m.classes;l=l.classes;if(m){for(var r=!1,n=!0===m,q=l.length;q--;){if(n||m(l[q])){l.splice(q,1),r=!0}}m=r}else{m=!1}t.hadInvalidClass=m||t.hadInvalidClass}}function ar(m,l){if(!m){return !1}var q=!1,p=!0===m,n;for(n in l){if(p||m(n)){delete l[n],q=!0}}return q}function ap(l,k,m){if(l.disabled||l.customConfig&&!m||!k){return !1}l._.cachedChecks={};return !0}function ao(m,l){if(!m){return !1}if(!0===m){return m}if("string"==typeof m){return m=i(m),"*"==m?!0:CKEDITOR.tools.convertArrayToObject(m.split(l))}if(CKEDITOR.tools.isArray(m)){return m.length?CKEDITOR.tools.convertArrayToObject(m):!1}var q={},p=0,n;for(n in m){q[n]=m[n],p++}return p?q:!1}function am(m,l){if(m.nothingRequired){return !0}var t,r,n,q;if(n=m.requiredClasses){for(q=l.classes,t=0;t<n.length;++t){if(r=n[t],"string"==typeof r){if(-1==CKEDITOR.tools.indexOf(q,r)){return !1}}else{if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(q,r)){return !1}}}}return ai(l.styles,m.requiredStyles)&&ai(l.attributes,m.requiredAttributes)}function ai(l,k){if(!k){return !0}for(var n=0,m;n<k.length;++n){if(m=k[n],"string"==typeof m){if(!(m in l)){return !1}}else{if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(l,m)){return !1}}}return !0}function ag(l){if(!l){return{}}l=l.split(/\s*,\s*/).sort();for(var k={};l.length;){k[l.shift()]="cke-test"}return k}function aq(m){var l,u,t,n,r={},q=1;for(m=i(m);l=m.match(Q);){(u=l[2])?(t=aa(u,"styles"),n=aa(u,"attrs"),u=aa(u,"classes")):t=n=u=null,r["$"+q++]={elements:l[1],classes:u,styles:t,attributes:n},m=m.slice(l[0].length)}return r}function aa(l,k){var m=l.match(P[k]);return m?i(m[1]):null}function Z(l){var k=l.styleBackup=l.attributes.style,m=l.classBackup=l.attributes["class"];l.styles||(l.styles=CKEDITOR.tools.parseCssText(k||"",1));l.classes||(l.classes=m?m.split(/\s+/):[])}function af(az,ay,J,ax){var E=0,A;ax.toHtml&&(ay.name=ay.name.replace(R,"$1"));if(ax.doCallbacks&&az.elementCallbacks){az:{A=az.elementCallbacks;for(var T=0,t=A.length,S;T<t;++T){if(S=A[T](ay)){A=S;break az}}A=void 0}if(A){return A}}if(ax.doTransform&&(A=az._.transformations[ay.name])){Z(ay);for(T=0;T<A.length;++T){aj(az,ay,A[T])}al(ay)}if(ax.doFilter){az:{T=ay.name;t=az._;az=t.allowedRules.elements[T];A=t.allowedRules.generic;T=t.disallowedRules.elements[T];t=t.disallowedRules.generic;S=ax.skipRequired;var z={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},v,M;if(az||A){Z(ay);if(T){for(v=0,M=T.length;v<M;++v){if(!1===au(T[v],ay,z)){az=null;break az}}}if(t){for(v=0,M=t.length;v<M;++v){au(t[v],ay,z)}}if(az){for(v=0,M=az.length;v<M;++v){at(az[v],ay,z,S)}}if(A){for(v=0,M=A.length;v<M;++v){at(A[v],ay,z,S)}}az=z}else{az=null}}if(!az||!az.valid){return J.push(ay),1}M=az.validAttributes;var y=az.validStyles;A=az.validClasses;var T=ay.attributes,G=ay.styles,t=ay.classes;S=ay.classBackup;var q=ay.styleBackup,C,u,m=[],z=[],p=/^data-cke-/;v=!1;delete T.style;delete T["class"];delete ay.classBackup;delete ay.styleBackup;if(!az.allAttributes){for(C in T){M[C]||(p.test(C)?C==(u=C.replace(/^data-cke-saved-/,""))||M[u]||(delete T[C],v=!0):(delete T[C],v=!0))}}if(!az.allStyles||az.hadInvalidStyle){for(C in G){az.allStyles||y[C]?m.push(C+":"+G[C]):v=!0}m.length&&(T.style=m.sort().join("; "))}else{q&&(T.style=q)}if(!az.allClasses||az.hadInvalidClass){for(C=0;C<t.length;++C){(az.allClasses||A[t[C]])&&z.push(t[C])}z.length&&(T["class"]=z.sort().join(" "));S&&z.length<S.split(/\s+/).length&&(v=!0)}else{S&&(T["class"]=S)}v&&(E=1);if(!ax.skipFinalValidation&&!ab(ay)){return J.push(ay),1}}ax.toHtml&&(ay.name=ay.name.replace(N,"cke:$1"));return E}function X(l){var k=[],m;for(m in l){-1<m.indexOf("*")&&k.push(m.replace(/\*/g,".*"))}return k.length?new RegExp("^(?:"+k.join("|")+")$"):null}function al(l){var k=l.attributes,m;delete k.style;delete k["class"];if(m=CKEDITOR.tools.writeCssText(l.styles,!0)){k.style=m}l.classes.length&&(k["class"]=l.classes.sort().join(" "))}function ab(k){switch(k.name){case"a":if(!(k.children.length||k.attributes.name||k.attributes.id)){return !1}break;case"img":if(!k.attributes.src){return !1}}return !0}function V(l){if(!l){return !1}if(!0===l){return !0}var k=X(l);return function(m){return m in l||k&&m.match(k)}}function ae(){return new CKEDITOR.htmlParser.element("br")}function ac(k){return k.type==CKEDITOR.NODE_ELEMENT&&("br"==k.name||Y.$block[k.name])}function an(z,y,x){var w=z.name;if(Y.$empty[w]||!z.children.length){"hr"==w&&"br"==y?z.replaceWith(ae()):(z.parent&&x.push({check:"it",el:z.parent}),z.remove())}else{if(Y.$block[w]||"tr"==w){if("br"==y){z.previous&&!ac(z.previous)&&(y=ae(),y.insertBefore(z)),z.next&&!ac(z.next)&&(y=ae(),y.insertAfter(z)),z.replaceWithChildren()}else{var w=z.children,t;y:{t=Y[y];for(var v=0,m=w.length,q;v<m;++v){if(q=w[v],q.type==CKEDITOR.NODE_ELEMENT&&!t[q.name]){t=!1;break y}}t=!0}if(t){z.name=y,z.attributes={},x.push({check:"parent-down",el:z})}else{t=z.parent;for(var v=t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==t.name,l,u,m=w.length;0<m;){q=w[--m],v&&(q.type==CKEDITOR.NODE_TEXT||q.type==CKEDITOR.NODE_ELEMENT&&Y.$inline[q.name])?(l||(l=new CKEDITOR.htmlParser.element(y),l.insertAfter(z),x.push({check:"parent-down",el:l})),l.add(q,0)):(l=null,u=Y[t.name]||Y.span,q.insertAfter(z),t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||q.type!=CKEDITOR.NODE_ELEMENT||u[q.name]||x.push({check:"el-up",el:q}))}z.remove()}}}else{w in {style:1,script:1}?z.remove():(z.parent&&x.push({check:"it",el:z.parent}),z.replaceWithChildren())}}}function aj(m,l,q){var p,n;for(p=0;p<q.length;++p){if(n=q[p],!(n.check&&!m.check(n.check,!1)||n.left&&!n.left(l))){n.right(l,o);break}}}function ak(y,x){var w=x.getDefinition(),v=w.attributes,t=w.styles,u,m,q,l;if(y.name!=w.element){return !1}for(u in v){if("class"==u){for(w=v[u].split(/\s+/),q=y.classes.join("|");l=w.pop();){if(-1==q.indexOf(l)){return !1}}}else{if(y.attributes[u]!=v[u]){return !1}}}for(m in t){if(y.styles[m]!=t[m]){return !1}}return !0}function W(l,k){var n,m;"string"==typeof l?n=l:l instanceof CKEDITOR.style?m=l:(n=l[0],m=l[1]);return[{element:n,left:m,right:function(p,q){q.transform(p,k)}}]}function ah(k){return function(l){return ak(l,k)}}function U(k){return function(l,m){m[k](l)}}var Y=CKEDITOR.dtd,K=CKEDITOR.tools.copy,i=CKEDITOR.tools.trim,s=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(l){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(l instanceof CKEDITOR.editor){l=this.editor=l;this.customConfig=!0;var k=l.config.allowedContent;!0===k?this.disabled=!0:(k||(this.customConfig=!1),this.allow(k,"config",1),this.allow(l.config.extraAllowedContent,"extra",1),this.allow(s[l.enterMode]+" "+s[l.shiftEnterMode],"default",1),this.disallow(l.config.disallowedContent))}else{this.customConfig=!1,this.allow(l,"default",1)}};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(l,q,p){if(!ap(this,l,p)){return !1}var m,n;if("string"==typeof l){l=aq(l)}else{if(l instanceof CKEDITOR.style){if(l.toAllowedContentRules){return this.allow(l.toAllowedContentRules(this.editor),q,p)}m=l.getDefinition();l={};p=m.attributes;l[m.element]=m={styles:m.styles,requiredStyles:m.styles&&CKEDITOR.tools.objectKeys(m.styles)};p&&(p=K(p),m.classes=p["class"]?p["class"].split(/\s+/):null,m.requiredClasses=m.classes,delete p["class"],m.attributes=p,m.requiredAttributes=p&&CKEDITOR.tools.objectKeys(p))}else{if(CKEDITOR.tools.isArray(l)){for(m=0;m<l.length;++m){n=this.allow(l[m],q,p)}return n}}}aw(this,l,q,this.allowedContent,this._.allowedRules);return !0},applyTo:function(C,A,z,y){if(this.disabled){return !1}var w=this,l=[],q=this.editor&&this.editor.config.protectedSource,k,v=!1,t={doFilter:!z,doTransform:!0,doCallbacks:!0,toHtml:A};C.forEach(function(n){if(n.type==CKEDITOR.NODE_ELEMENT){if("off"==n.attributes["data-cke-filter"]){return !1}if(!A||"span"!=n.name||!~CKEDITOR.tools.objectKeys(n.attributes).join("|").indexOf("data-cke-")){if(k=af(w,n,l,t),k&1){v=!0}else{if(k&2){return !1}}}}else{if(n.type==CKEDITOR.NODE_COMMENT&&n.value.match(/^\{cke_protected\}(?!\{C\})/)){var E;n:{var D=decodeURIComponent(n.value.replace(/^\{cke_protected\}/,""));E=[];var p,m,r;if(q){for(m=0;m<q.length;++m){if((r=D.match(q[m]))&&r[0].length==D.length){E=!0;break n}}}D=CKEDITOR.htmlParser.fragment.fromHtml(D);1==D.children.length&&(p=D.children[0]).type==CKEDITOR.NODE_ELEMENT&&af(w,p,E,t);E=!E.length}E||l.push(n)}}},null,!0);l.length&&(v=!0);var B;C=[];y=s[y||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var u;z=l.pop();){z.type==CKEDITOR.NODE_ELEMENT?an(z,y,C):z.remove()}for(;B=C.pop();){if(z=B.el,z.parent){switch(u=Y[z.parent.name]||Y.span,B.check){case"it":Y.$removeEmpty[z.name]&&!z.children.length?an(z,y,C):ab(z)||an(z,y,C);break;case"el-up":z.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||u[z.name]||an(z,y,C);break;case"parent-down":z.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||u[z.name]||an(z.parent,y,C)}}}return v},checkFeature:function(k){if(this.disabled||!k){return !0}k.toFeature&&(k=k.toFeature(this.editor));return !k.requiredContent||this.check(k.requiredContent)},disable:function(){this.disabled=!0},disallow:function(k){if(!ap(this,k,!0)){return !1}"string"==typeof k&&(k=aq(k));aw(this,k,null,this.disallowedContent,this._.disallowedRules);return !0},addContentForms:function(m){if(!this.disabled&&m){var l,q,p=[],n;for(l=0;l<m.length&&!n;++l){q=m[l],("string"==typeof q||q instanceof CKEDITOR.style)&&this.check(q)&&(n=q)}if(n){for(l=0;l<m.length;++l){p.push(W(m[l],n))}this.addTransformations(p)}}},addElementCallback:function(k){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(k)},addFeature:function(k){if(this.disabled||!k){return !0}k.toFeature&&(k=k.toFeature(this.editor));this.allow(k.allowedContent,k.name);this.addTransformations(k.contentTransformations);this.addContentForms(k.contentForms);return k.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(k.requiredContent):!0},addTransformations:function(B){var z,y;if(!this.disabled&&B){var w=this._.transformations,t;for(t=0;t<B.length;++t){z=B[t];var v=void 0,l=void 0,q=void 0,u=void 0,A=void 0,r=void 0;y=[];for(l=0;l<z.length;++l){q=z[l],"string"==typeof q?(q=q.split(/\s*:\s*/),u=q[0],A=null,r=q[1]):(u=q.check,A=q.left,r=q.right),v||(v=q,v=v.element?v.element:u?u.match(/^([a-z0-9]+)/i)[0]:v.left.getDefinition().element),A instanceof CKEDITOR.style&&(A=ah(A)),y.push({check:u==v?null:u,left:A,right:"string"==typeof r?U(r):r})}z=v;w[z]||(w[z]=[]);w[z].push(y)}}},check:function(y,v,u){if(this.disabled){return !0}if(CKEDITOR.tools.isArray(y)){for(var t=y.length;t--;){if(this.check(y[t],v,u)){return !0}}return !1}var p,q;if("string"==typeof y){q=y+"\x3c"+(!1===v?"0":"1")+(u?"1":"0")+"\x3e";if(q in this._.cachedChecks){return this._.cachedChecks[q]}t=aq(y).$1;p=t.styles;var m=t.classes;t.name=t.elements;t.classes=m=m?m.split(/\s*,\s*/):[];t.styles=ag(p);t.attributes=ag(t.attributes);t.children=[];m.length&&(t.attributes["class"]=m.join(" "));p&&(t.attributes.style=CKEDITOR.tools.writeCssText(t.styles));p=t}else{t=y.getDefinition(),p=t.styles,m=t.attributes||{},p?(p=K(p),m.style=CKEDITOR.tools.writeCssText(p,!0)):p={},p={name:t.element,attributes:m,classes:m["class"]?m["class"].split(/\s+/):[],styles:p,children:[]}}var m=CKEDITOR.tools.clone(p),l=[],w;if(!1!==v&&(w=this._.transformations[p.name])){for(t=0;t<w.length;++t){aj(this,p,w[t])}al(p)}af(this,m,l,{doFilter:!0,doTransform:!1!==v,skipRequired:!u,skipFinalValidation:!u});v=0<l.length?!1:CKEDITOR.tools.objectCompare(p.attributes,m.attributes,!0)?!0:!1;"string"==typeof y&&(this._.cachedChecks[q]=v);return v},getAllowedEnterMode:function(){var l=["p","div","br"],k={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(q,p){var m=l.slice(),n;if(this.check(s[q])){return q}for(p||(m=m.reverse());n=m.pop();){if(this.check(n)){return k[n]}}return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var j={styles:1,attributes:1,classes:1},ad={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},Q=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,P={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},R=/^cke:(object|embed|param)$/,N=/^(object|embed|param)$/,o=CKEDITOR.filter.transformationsTools={sizeToStyle:function(k){this.lengthToStyle(k,"width");this.lengthToStyle(k,"height")},sizeToAttribute:function(k){this.lengthToAttribute(k,"width");this.lengthToAttribute(k,"height")},lengthToStyle:function(l,k,n){n=n||k;if(!(n in l.styles)){var m=l.attributes[k];m&&(/^\d+$/.test(m)&&(m+="px"),l.styles[n]=m)}delete l.attributes[k]},lengthToAttribute:function(m,l,q){q=q||l;if(!(q in m.attributes)){var p=m.styles[l],n=p&&p.match(/^(\d+)(?:\.\d*)?px$/);n?m.attributes[q]=n[1]:"cke-test"==p&&(m.attributes[q]="cke-test")}delete m.styles[l]},alignmentToStyle:function(l){if(!("float" in l.styles)){var k=l.attributes.align;if("left"==k||"right"==k){l.styles["float"]=k}}delete l.attributes.align},alignmentToAttribute:function(l){if(!("align" in l.attributes)){var k=l.styles["float"];if("left"==k||"right"==k){l.attributes.align=k}}delete l.styles["float"]},matchesStyle:ak,transform:function(y,x){if("string"==typeof x){y.name=x}else{var w=x.getDefinition(),v=w.styles,t=w.attributes,u,m,q,l;y.name=w.element;for(u in t){if("class"==u){for(w=y.classes.join("|"),q=t[u].split(/\s+/);l=q.pop();){-1==w.indexOf(l)&&y.classes.push(l)}}else{y.attributes[u]=t[u]}}for(m in v){y.styles[m]=v[m]}}}}})();(function(){CKEDITOR.focusManager=function(i){if(i.focusManager){return i.focusManager}this.hasFocus=!1;this.currentActive=null;this._={editor:i};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(i){this._.timer&&clearTimeout(this._.timer);i&&(this.currentActive=i);this.hasFocus||this._.locked||((i=CKEDITOR.currentInstance)&&i.focusManager.blur(1),this.hasFocus=!0,(i=this._.editor.container)&&i.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(j){function k(){if(this.hasFocus){this.hasFocus=!1;var l=this._.editor.container;l&&l.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var i=CKEDITOR.focusManager._.blurDelay;j||!i?k.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;k.call(this)},i,this)}},add:function(j,l){var i=j.getCustomData("focusmanager");if(!i||i!=this){i&&i.remove(j);var i="focus",m="blur";l&&(CKEDITOR.env.ie?(i="focusin",m="focusout"):CKEDITOR.event.useCapture=1);var k={blur:function(){j.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(j)}};j.on(i,k.focus,this);j.on(m,k.blur,this);l&&(CKEDITOR.event.useCapture=0);j.setCustomData("focusmanager",this);j.setCustomData("focusmanager_handlers",k)}},remove:function(i){i.removeCustomData("focusmanager");var j=i.removeCustomData("focusmanager_handlers");i.removeListener("blur",j.blur);i.removeListener("focus",j.focus)}}})();CKEDITOR.keystrokeHandler=function(i){if(i.keystrokeHandler){return i.keystrokeHandler}this.keystrokes={};this.blockedKeystrokes={};this._={editor:i};return this};(function(){var j,k=function(l){l=l.data;var o=l.getKeystroke(),n=this.keystrokes[o],m=this._.editor;j=!1===m.fire("key",{keyCode:o,domEvent:l});j||(n&&(j=!1!==m.execCommand(n,{from:"keystrokeHandler"})),j||(j=!!this.blockedKeystrokes[o]));j&&l.preventDefault(!0);return !j},i=function(l){j&&(j=!1,l.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(l){l.on("keydown",k,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac){l.on("keypress",i,this)}}}})();(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(j,k,i){j&&CKEDITOR.lang.languages[j]||(j=this.detect(k,j));var l=this;k=function(){l[j].dir=l.rtl[j]?"rtl":"ltr";i(j,l[j])};this[j]?k():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+j+".js"),k,this)},detect:function(j,l){var i=this.languages;l=l||navigator.userLanguage||navigator.language||j;var m=l.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),k=m[1],m=m[2];i[k+"-"+m]?k=k+"-"+m:i[k]||(k=null);CKEDITOR.lang.detect=k?function(){return k}:function(n){return n};return k||j}}})();CKEDITOR.scriptLoader=function(){var i={},j={};return{load:function(y,x,v,r){var p="string"==typeof y;p&&(y=[y]);v||(v=CKEDITOR);var o=y.length,m=[],D=[],s=function(l){x&&(p?x.call(v,l):x.call(v,m,D))};if(0===o){s(!0)}else{var w=function(q,l){(l?m:D).push(q);0>=--o&&(r&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),s(l))},n=function(l,u){i[l]=1;var t=j[l];delete j[l];for(var q=0;q<t.length;q++){t[q](l,u)}},B=function(l){if(i[l]){w(l,!0)}else{var t=j[l]||(j[l]=[]);t.push(w);if(!(1<t.length)){var q=new CKEDITOR.dom.element("script");q.setAttributes({type:"text/javascript",src:l});x&&(CKEDITOR.env.ie&&11>CKEDITOR.env.version?q.$.onreadystatechange=function(){if("loaded"==q.$.readyState||"complete"==q.$.readyState){q.$.onreadystatechange=null,n(l,!0)}}:(q.$.onload=function(){setTimeout(function(){n(l,!0)},0)},q.$.onerror=function(){n(l,!1)}));q.appendTo(CKEDITOR.document.getHead())}}};r&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var k=0;k<o;k++){B(y[k])}}},queue:function(){function k(){var m;(m=l[0])&&this.load(m.scriptUrl,m.callback,CKEDITOR,0)}var l=[];return function(o,n){var m=this;l.push({scriptUrl:o,callback:function(){n&&n.apply(this,arguments);l.shift();k.call(m)}});1==l.length&&k.call(this)}}()}}();CKEDITOR.resourceManager=function(i,j){this.basePath=i;this.fileName=j;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};CKEDITOR.resourceManager.prototype={add:function(j,k){if(this.registered[j]){throw Error('[CKEDITOR.resourceManager.add] The resource name "'+j+'" is already registered.')}var i=this.registered[j]=k||{};i.name=j;i.path=this.getPath(j);CKEDITOR.fire(j+CKEDITOR.tools.capitalize(this.fileName)+"Ready",i);return this.get(j)},get:function(i){return this.registered[i]||null},getPath:function(i){var j=this.externals[i];return CKEDITOR.getUrl(j&&j.dir||this.basePath+i+"/")},getFilePath:function(i){var j=this.externals[i];return CKEDITOR.getUrl(this.getPath(i)+(j?j.file:this.fileName+".js"))},addExternal:function(j,l,i){j=j.split(",");for(var m=0;m<j.length;m++){var k=j[m];i||(l=l.replace(/[^\/]+$/,function(n){i=n;return""}));this.externals[k]={dir:l,file:i||this.fileName+".js"}}},load:function(u,p,s){CKEDITOR.tools.isArray(u)||(u=u?[u]:[]);for(var r=this.loaded,o=this.registered,m=[],k={},j={},i=0;i<u.length;i++){var v=u[i];if(v){if(r[v]||o[v]){j[v]=this.get(v)}else{var n=this.getFilePath(v);m.push(n);n in k||(k[n]=[]);k[n].push(v)}}}CKEDITOR.scriptLoader.load(m,function(q,x){if(x.length){throw Error('[CKEDITOR.resourceManager.load] Resource name "'+k[x[0]].join(",")+'" was not found at "'+x[0]+'".')}for(var w=0;w<q.length;w++){for(var t=k[q[w]],l=0;l<t.length;l++){var z=t[l];j[z]=this.get(z);r[z]=1}}p.call(s,j)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(i){var j={};return function(k,o,n){var m={},l=function(p){i.call(this,p,function(t){CKEDITOR.tools.extend(m,t);var r=[],w;for(w in t){var s=t[w],q=s&&s.requires;if(!j[w]){if(s.icons){for(var v=s.icons.split(","),x=v.length;x--;){CKEDITOR.skin.addIcon(v[x],s.path+"icons/"+(CKEDITOR.env.hidpi&&s.hidpi?"hidpi/":"")+v[x]+".png")}}j[w]=1}if(q){for(q.split&&(q=q.split(",")),s=0;s<q.length;s++){m[q[s]]||r.push(q[s])}}}if(r.length){l.call(this,r)}else{for(w in m){s=m[w],s.onLoad&&!s.onLoad._called&&(!1===s.onLoad()&&delete m[w],s.onLoad._called=1)}o&&o.call(n||window,m)}},this)};l.call(this,k)}});CKEDITOR.plugins.setLang=function(j,k,i){var l=this.get(j);j=l.langEntries||(l.langEntries={});l=l.lang||(l.lang=[]);l.split&&(l=l.split(","));-1==CKEDITOR.tools.indexOf(l,k)&&l.push(k);j[k]=i};CKEDITOR.ui=function(i){if(i.ui){return i.ui}this.items={};this.instances={};this.editor=i;this._={handlers:{}};return this};CKEDITOR.ui.prototype={add:function(j,k,i){i.name=j.toLowerCase();var l=this.items[j]={type:k,command:i.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(l,i)},get:function(i){return this.instances[i]},create:function(j){var k=this.items[j],i=k&&this._.handlers[k.type],l=k&&k.command&&this.editor.getCommand(k.command),i=i&&i.create.apply(this,k.args);this.instances[j]=i;l&&l.uiItems.push(i);i&&!i.type&&(i.type=k.type);return i},addHandler:function(i,j){this._.handlers[i]=j},space:function(i){return CKEDITOR.document.getById(this.spaceId(i))},spaceId:function(i){return this.editor.id+"_"+i}};CKEDITOR.event.implementOn(CKEDITOR.ui);(function(){function y(l,t,q){CKEDITOR.event.call(this);l=l&&CKEDITOR.tools.clone(l);if(void 0!==t){if(!(t instanceof CKEDITOR.dom.element)){throw Error("Expect element of type CKEDITOR.dom.element.")}if(!q){throw Error("One of the element modes must be specified.")}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&q==CKEDITOR.ELEMENT_MODE_INLINE){throw Error("Inline element mode is not supported on IE quirks.")}if(!x(t,q)){throw Error('The specified element mode is not supported on element: "'+t.getName()+'".')}this.element=t;this.elementMode=q;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(t.getId()||t.getNameAtt())}else{this.elementMode=CKEDITOR.ELEMENT_MODE_NONE}this._={};this.commands={};this.templates={};this.name=this.name||s();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",w);this.on("selectionChange",function(u){o(this,u.data.path)});this.on("activeFilterChange",function(){o(this,this.elementPath(),!0)});this.on("mode",w);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?m(this,l):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function s(){do{var l="editor"+ ++B}while(CKEDITOR.instances[l]);return l}function x(q,l){return l==CKEDITOR.ELEMENT_MODE_INLINE?q.is(CKEDITOR.dtd.$editable)||q.is("textarea"):l==CKEDITOR.ELEMENT_MODE_REPLACE?!q.is(CKEDITOR.dtd.$nonBodyContent):1}function w(){var q=this.commands,l;for(l in q){r(this,q[l])}}function r(q,l){l[l.startDisabled?"disable":q.readOnly&&!l.readOnly?"disable":l.modes[q.mode]?"enable":"disable"]()}function o(q,l,A){if(l){var z,u,t=q.commands;for(u in t){z=t[u],(A||z.contextSensitive)&&z.refresh(q,l)}}}function n(q){var l=q.config.customConfig;if(!l){return !1}var l=CKEDITOR.getUrl(l),t=i[l]||(i[l]={});t.fn?(t.fn.call(q,q.config),CKEDITOR.getUrl(q.config.customConfig)!=l&&n(q)||q.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(l,function(){t.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};n(q)});return !0}function m(q,l){q.on("customConfigLoaded",function(){if(l){if(l.on){for(var t in l.on){q.on(t,l.on[t])}}CKEDITOR.tools.extend(q.config,l,!0);delete q.config.on}t=q.config;q.readOnly=t.readOnly?!0:q.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?q.element.is("textarea")?q.element.hasAttribute("disabled")||q.element.hasAttribute("readonly"):q.element.isReadOnly():q.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?q.element.hasAttribute("disabled")||q.element.hasAttribute("readonly"):!1;q.blockless=q.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(q.element.is("textarea")||CKEDITOR.dtd[q.element.getName()].p):!1;q.tabIndex=t.tabIndex||q.element&&q.element.getAttribute("tabindex")||0;q.activeEnterMode=q.enterMode=q.blockless?CKEDITOR.ENTER_BR:t.enterMode;q.activeShiftEnterMode=q.shiftEnterMode=q.blockless?CKEDITOR.ENTER_BR:t.shiftEnterMode;t.skin&&(CKEDITOR.skinName=t.skin);q.fireOnce("configLoaded");q.dataProcessor=new CKEDITOR.htmlDataProcessor(q);q.filter=q.activeFilter=new CKEDITOR.filter(q);j(q)});l&&null!=l.customConfig&&(q.config.customConfig=l.customConfig);n(q)||q.fireOnce("customConfigLoaded")}function j(l){CKEDITOR.skin.loadPart("editor",function(){D(l)})}function D(l){CKEDITOR.lang.load(l.config.language,l.config.defaultLanguage,function(q,u){var t=l.config.title;l.langCode=q;l.lang=CKEDITOR.tools.prototypedCopy(u);l.title="string"==typeof t||!1===t?t:[l.lang.editor,l.name].join(", ");l.config.contentsLangDirection||(l.config.contentsLangDirection=l.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?l.element.getDirection(1):l.lang.dir);l.fire("langLoaded");p(l)})}function p(l){l.getStylesSet(function(q){l.once("loaded",function(){l.fire("stylesSet",{styles:q})},null,null,1);v(l)})}function v(q){var l=q.config,C=l.plugins,A=l.extraPlugins,z=l.removePlugins;if(A){var t=new RegExp("(?:^|,)(?:"+A.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),C=C.replace(t,""),C=C+(","+A)}if(z){var u=new RegExp("(?:^|,)(?:"+z.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),C=C.replace(u,"")}CKEDITOR.env.air&&(C+=",adobeair");CKEDITOR.plugins.load(C.split(","),function(L){var K=[],F=[],J=[];q.plugins=L;for(var I in L){var M=L[I],H=M.lang,G=null,E=M.requires,N;CKEDITOR.tools.isArray(E)&&(E=E.join(","));if(E&&(N=E.match(u))){for(;E=N.pop();){CKEDITOR.error("editor-plugin-required",{plugin:E.replace(",",""),requiredBy:I})}}H&&!q.lang[I]&&(H.split&&(H=H.split(",")),0<=CKEDITOR.tools.indexOf(H,q.langCode)?G=q.langCode:(G=q.langCode.replace(/-.*/,""),G=G!=q.langCode&&0<=CKEDITOR.tools.indexOf(H,G)?G:0<=CKEDITOR.tools.indexOf(H,"en")?"en":H[0]),M.langEntries&&M.langEntries[G]?(q.lang[I]=M.langEntries[G],G=null):J.push(CKEDITOR.getUrl(M.path+"lang/"+G+".js")));F.push(G);K.push(M)}CKEDITOR.scriptLoader.load(J,function(){for(var R=["beforeInit","init","afterInit"],P=0;P<R.length;P++){for(var O=0;O<K.length;O++){var Q=K[O];0===P&&F[O]&&Q.lang&&Q.langEntries&&(q.lang[Q.name]=Q.langEntries[F[O]]);if(Q[R[P]]){Q[R[P]](q)}}}q.fireOnce("pluginsLoaded");l.keystrokes&&q.setKeystroke(q.config.keystrokes);for(O=0;O<q.config.blockedKeystrokes.length;O++){q.keystrokeHandler.blockedKeystrokes[q.config.blockedKeystrokes[O]]=1}q.status="loaded";q.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,q)})})}function k(){var q=this.element;if(q&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var l=this.getData();this.config.htmlEncodeOutput&&(l=CKEDITOR.tools.htmlEncode(l));q.is("textarea")?q.setValue(l):q.setHtml(l);return !0}return !1}y.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=y;var B=0,i={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(q,l){l.name=q.toLowerCase();var t=new CKEDITOR.command(this,l);this.mode&&r(this,t);return this.commands[q]=t},_attachToForm:function(){function q(A){z.updateElement();z._.required&&!u.getValue()&&!1===z.fire("required")&&A.data.preventDefault()}function l(A){return !!(A&&A.call&&A.apply)}var z=this,u=z.element,t=new CKEDITOR.dom.element(u.$.form);u.is("textarea")&&t&&(t.on("submit",q),l(t.$.submit)&&(t.$.submit=CKEDITOR.tools.override(t.$.submit,function(A){return function(){q();A.apply?A.apply(this):A()}})),z.on("destroy",function(){t.removeListener("submit",q)}))},destroy:function(l){this.fire("beforeDestroy");!l&&k.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(l){if(!l){l=this.getSelection();if(!l){return null}l=l.getStartElement()}return l?new CKEDITOR.dom.elementPath(l,this.editable()):null},createRange:function(){var l=this.editable();return l?new CKEDITOR.dom.range(l):null},execCommand:function(q,l){var u=this.getCommand(q),t={name:q,commandData:l,command:u};return u&&u.state!=CKEDITOR.TRISTATE_DISABLED&&!1!==this.fire("beforeCommandExec",t)&&(t.returnValue=u.exec(t.commandData),!u.async&&!1!==this.fire("afterCommandExec",t))?t.returnValue:!1},getCommand:function(l){return this.commands[l]},getData:function(q){!q&&this.fire("beforeGetData");var l=this._.data;"string"!=typeof l&&(l=(l=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?l.is("textarea")?l.getValue():l.getHtml():"");l={dataValue:l};!q&&this.fire("getData",l);return l.dataValue},getSnapshot:function(){var l=this.fire("getSnapshot");"string"!=typeof l&&(l=(l=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?l.is("textarea")?l.getValue():l.getHtml():"");return l},loadSnapshot:function(l){this.fire("loadSnapshot",l)},setData:function(q,l,z){var u=!0,t=l;l&&"object"==typeof l&&(z=l.internal,t=l.callback,u=!l.noSnapshot);!z&&u&&this.fire("saveSnapshot");if(t||!z){this.once("dataReady",function(A){!z&&u&&this.fire("saveSnapshot");t&&t.call(A.editor)})}q={dataValue:q};!z&&this.fire("setData",q);this._.data=q.dataValue;!z&&this.fire("afterSetData",q)},setReadOnly:function(l){l=null==l||l;this.readOnly!=l&&(this.readOnly=l,this.keystrokeHandler.blockedKeystrokes[8]=+l,this.editable().setReadOnly(l),this.fire("readOnly"))},insertHtml:function(q,l,t){this.fire("insertHtml",{dataValue:q,mode:l,range:t})},insertText:function(l){this.fire("insertText",l)},insertElement:function(l){this.fire("insertElement",l)},getSelectedHtml:function(q){var l=this.editable(),t=this.getSelection(),t=t&&t.getRanges();if(!l||!t||0===t.length){return null}l=l.getHtmlFromRange(t[0]);return q?l.getHtml():l},extractSelectedHtml:function(q,l){var u=this.editable(),t=this.getSelection().getRanges();if(!u||0===t.length){return null}t=t[0];u=u.extractHtmlFromRange(t,l);l||this.getSelection().selectRanges([t]);return q?u.getHtml():u},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return k.call(this)},setKeystroke:function(){for(var q=this.keystrokeHandler.keystrokes,l=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],z,u,t=l.length;t--;){z=l[t],u=0,CKEDITOR.tools.isArray(z)&&(u=z[1],z=z[0]),u?q[z]=u:delete q[z]}},addFeature:function(l){return this.filter.addFeature(l)},setActiveFilter:function(l){l||(l=this.filter);this.activeFilter!==l&&(this.activeFilter=l,this.fire("activeFilterChange"),l===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(l.getAllowedEnterMode(this.enterMode),l.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(q,l){q=q?this.blockless?CKEDITOR.ENTER_BR:q:this.enterMode;l=l?this.blockless?CKEDITOR.ENTER_BR:l:this.shiftEnterMode;if(this.activeEnterMode!=q||this.activeShiftEnterMode!=l){this.activeEnterMode=q,this.activeShiftEnterMode=l,this.fire("activeEnterModeChange")}},showNotification:function(l){alert(l)}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};(function(){var i=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,j={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(u){for(var s,r,o=0,n;s=this._.htmlPartsRegex.exec(u);){r=s.index;if(r>o){if(o=u.substring(o,r),n){n.push(o)}else{this.onText(o)}}o=this._.htmlPartsRegex.lastIndex;if(r=s[1]){if(r=r.toLowerCase(),n&&CKEDITOR.dtd.$cdata[r]&&(this.onCDATA(n.join("")),n=null),!n){this.onTagClose(r);continue}}if(n){n.push(s[0])}else{if(r=s[3]){if(r=r.toLowerCase(),!/="/.test(r)){var m={},k,v=s[4];s=!!s[5];if(v){for(;k=i.exec(v);){var p=k[1].toLowerCase();k=k[2]||k[3]||k[4]||"";m[p]=!k&&j[p]?p:CKEDITOR.tools.htmlDecodeAttr(k)}}this.onTagOpen(r,m,s);!n&&CKEDITOR.dtd.$cdata[r]&&(n=[])}}else{if(r=s[2]){this.onComment(r)}}}}if(u.length>o){this.onText(u.substring(o,u.length))}}}})();CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(i){this._.output.push("\x3c",i)},openTagClose:function(i,j){j?this._.output.push(" /\x3e"):this._.output.push("\x3e")},attribute:function(i,j){"string"==typeof j&&(j=CKEDITOR.tools.htmlEncodeAttr(j));this._.output.push(" ",i,'\x3d"',j,'"')},closeTag:function(i){this._.output.push("\x3c/",i,"\x3e")},text:function(i){this._.output.push(i)},comment:function(i){this._.output.push("\x3c!--",i,"--\x3e")},write:function(i){this._.output.push(i)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(i){var j=this._.output.join("");i&&this.reset();return j}}});"use strict";(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var j=this.parent.children,k=CKEDITOR.tools.indexOf(j,this),i=this.previous,l=this.next;i&&(i.next=l);l&&(l.previous=i);j.splice(k,1);this.parent=null},replaceWith:function(j){var l=this.parent.children,i=CKEDITOR.tools.indexOf(l,this),m=j.previous=this.previous,k=j.next=this.next;m&&(m.next=j);k&&(k.previous=j);l[i]=j;j.parent=this.parent;this.parent=null},insertAfter:function(j){var k=j.parent.children,i=CKEDITOR.tools.indexOf(k,j),l=j.next;k.splice(i+1,0,this);this.next=j.next;this.previous=j;j.next=this;l&&(l.previous=this);this.parent=j.parent},insertBefore:function(j){var k=j.parent.children,i=CKEDITOR.tools.indexOf(k,j);k.splice(i,0,this);this.next=j;(this.previous=j.previous)&&(j.previous.next=this);j.previous=this;this.parent=j.parent},getAscendant:function(j){var k="function"==typeof j?j:"string"==typeof j?function(l){return l.name==j}:function(l){return l.name in j},i=this.parent;for(;i&&i.type==CKEDITOR.NODE_ELEMENT;){if(k(i)){return i}i=i.parent}return null},wrapWith:function(i){this.replaceWith(i);i.add(this);return i},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(i){return i||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(i){this.value=i;this._={isBlockLike:!1}};CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(j,k){var i=this.value;if(!(i=j.onComment(k,i,this))){return this.remove(),!1}if("string"!=typeof i){return this.replaceWith(i),!1}this.value=i;return !0},writeHtml:function(i,j){j&&this.filter(j);i.comment(this.value)}});"use strict";(function(){CKEDITOR.htmlParser.text=function(i){this.value=i;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(i,j){if(!(this.value=i.onText(j,this.value,this))){return this.remove(),!1}},writeHtml:function(i,j){j&&this.filter(j);i.text(this.value)}})})();"use strict";(function(){CKEDITOR.htmlParser.cdata=function(i){this.value=i};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(i){i.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};(function(){function j(n){return n.attributes["data-cke-survive"]?!1:"a"==n.name&&n.attributes.href||CKEDITOR.dtd.$removeEmpty[n.name]}var l=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),i={ol:1,ul:1},m=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),k={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(D,B,s){function o(t){var q;if(0<H.length){for(var z=0;z<H.length;z++){var y=H[z],u=y.name,x=CKEDITOR.dtd[u],v=J.name&&CKEDITOR.dtd[J.name];v&&!v[u]||t&&x&&!x[t]&&CKEDITOR.dtd[t]?u==J.name&&(G(J,J.parent,1),z--):(q||(L(),q=1),y=y.clone(),y.parent=J,J=y,H.splice(z,1),z--)}}}function L(){for(;M.length;){G(M.shift(),J)}}function F(t){if(t._.isBlockLike&&"pre"!=t.name&&"textarea"!=t.name){var q=t.children.length,v=t.children[q-1],u;v&&v.type==CKEDITOR.NODE_TEXT&&((u=CKEDITOR.tools.rtrim(v.value))?v.value=u:t.children.length=q-1)}}function G(q,v,u){v=v||J||r;var t=J;void 0===q.previous&&(p(v,q)&&(J=v,n.onTagOpen(s,{}),q.returnPoint=v=J),F(q),j(q)&&!q.children.length||v.add(q),"pre"==q.name&&(w=!1),"textarea"==q.name&&(I=!1));q.returnPoint?(J=q.returnPoint,delete q.returnPoint):J=u?v:t}function p(t,q){if((t==r||"body"==t.name)&&s&&(!t.name||CKEDITOR.dtd[t.name][s])){var v,u;return(v=q.attributes&&(u=q.attributes["data-cke-real-element-type"])?u:q.name)&&v in CKEDITOR.dtd.$inline&&!(v in CKEDITOR.dtd.head)&&!q.isOrphan||q.type==CKEDITOR.NODE_TEXT}}function K(t,q){return t in CKEDITOR.dtd.$listItem||t in CKEDITOR.dtd.$tableContent?t==q||"dt"==t&&"dd"==q||"dd"==t&&"dt"==q:!1}var n=new CKEDITOR.htmlParser,r=B instanceof CKEDITOR.htmlParser.element?B:"string"==typeof B?new CKEDITOR.htmlParser.element(B):new CKEDITOR.htmlParser.fragment,H=[],M=[],J=r,I="textarea"==r.name,w="pre"==r.name;n.onTagOpen=function(u,v,t,q){v=new CKEDITOR.htmlParser.element(u,v);v.isUnknown&&t&&(v.isEmpty=!0);v.isOptionalClose=q;if(j(v)){H.push(v)}else{if("pre"==u){w=!0}else{if("br"==u&&w){J.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==u&&(I=!0)}if("br"==u){M.push(v)}else{for(;!(q=(t=J.name)?CKEDITOR.dtd[t]||(J._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):m,v.isUnknown||J.isUnknown||q[u]);){if(J.isOptionalClose){n.onTagClose(t)}else{if(u in i&&t in i){t=J.children,(t=t[t.length-1])&&"li"==t.name||G(t=new CKEDITOR.htmlParser.element("li"),J),!v.returnPoint&&(v.returnPoint=J),J=t}else{if(u in CKEDITOR.dtd.$listItem&&!K(u,t)){n.onTagOpen("li"==u?"ul":"dl",{},0,1)}else{if(t in l&&!K(u,t)){!v.returnPoint&&(v.returnPoint=J),J=J.parent}else{if(t in CKEDITOR.dtd.$inline&&H.unshift(J),J.parent){G(J,J.parent,1)}else{v.isOrphan=1;break}}}}}}o(u);L();v.parent=J;v.isEmpty?G(v):J=v}}};n.onTagClose=function(t){for(var q=H.length-1;0<=q;q--){if(t==H[q].name){H.splice(q,1);return}}for(var y=[],x=[],u=J;u!=r&&u.name!=t;){u._.isBlockLike||x.unshift(u),y.push(u),u=u.returnPoint||u.parent}if(u!=r){for(q=0;q<y.length;q++){var v=y[q];G(v,v.parent)}J=u;u._.isBlockLike&&L();G(u,u.parent);u==J&&(J=J.parent);H=H.concat(x)}"body"==t&&(s=!1)};n.onText=function(t){if(!(J._.hasInlineStarted&&!M.length||w||I)&&(t=CKEDITOR.tools.ltrim(t),0===t.length)){return}var q=J.name,u=q?CKEDITOR.dtd[q]||(J._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):m;if(!I&&!u["#"]&&q in l){n.onTagOpen(k[q]||""),n.onText(t)}else{L();o();w||I||(t=t.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));t=new CKEDITOR.htmlParser.text(t);if(p(J,t)){this.onTagOpen(s,{},0,1)}J.add(t)}};n.onCDATA=function(q){J.add(new CKEDITOR.htmlParser.cdata(q))};n.onComment=function(q){L();o();J.add(new CKEDITOR.htmlParser.comment(q))};n.parse(D);for(L();J!=r;){G(J,J.parent,1)}F(r);return r};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(o,n){isNaN(n)&&(n=this.children.length);var p=0<n?this.children[n-1]:null;if(p){if(o._.isBlockLike&&p.type==CKEDITOR.NODE_TEXT&&(p.value=CKEDITOR.tools.rtrim(p.value),0===p.value.length)){this.children.pop();this.add(o);return}p.next=o}o.previous=p;o.parent=this;this.children.splice(n,0,o);this._.hasInlineStarted||(this._.hasInlineStarted=o.type==CKEDITOR.NODE_TEXT||o.type==CKEDITOR.NODE_ELEMENT&&!o._.isBlockLike)},filter:function(o,n){n=this.getFilterContext(n);o.onRoot(n,this);this.filterChildren(o,!1,n)},filterChildren:function(o,n,p){if(this.childrenFilteredBy!=o.id){p=this.getFilterContext(p);if(n&&!this.parent){o.onRoot(p,this)}this.childrenFilteredBy=o.id;for(n=0;n<this.children.length;n++){!1===this.children[n].filter(o,p)&&n--}}},writeHtml:function(o,n){n&&this.filter(n);this.writeChildrenHtml(o)},writeChildrenHtml:function(o,n,q){var p=this.getFilterContext();if(q&&!this.parent&&n){n.onRoot(p,this)}n&&this.filterChildren(n,!1,p);n=0;q=this.children;for(p=q.length;n<p;n++){q[n].writeHtml(o)}},forEach:function(o,n,r){if(!(r||n&&this.type!=n)){var q=o(this)}if(!1!==q){r=this.children;for(var p=0;p<r.length;p++){q=r[p],q.type==CKEDITOR.NODE_ELEMENT?q.forEach(o,n):n&&q.type!=n||o(q)}}},getFilterContext:function(n){return n||{}}}})();"use strict";(function(){function i(){this.rules=[]}function j(k,q,p,o){var n,m;for(n in q){(m=k[n])||(m=k[n]=new i),m.add(q[n],p,o)}}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(k){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new i;this.attributeNameRules=new i;this.elementsRules={};this.attributesRules={};this.textRules=new i;this.commentRules=new i;this.rootRules=new i;k&&this.addRules(k,10)},proto:{addRules:function(k,m){var l;"number"==typeof m?l=m:m&&"priority" in m&&(l=m.priority);"number"!=typeof l&&(l=10);"object"!=typeof m&&(m={});k.elementNames&&this.elementNameRules.addMany(k.elementNames,l,m);k.attributeNames&&this.attributeNameRules.addMany(k.attributeNames,l,m);k.elements&&j(this.elementsRules,k.elements,l,m);k.attributes&&j(this.attributesRules,k.attributes,l,m);k.text&&this.textRules.add(k.text,l,m);k.comment&&this.commentRules.add(k.comment,l,m);k.root&&this.rootRules.add(k.root,l,m)},applyTo:function(k){k.filter(this)},onElementName:function(k,l){return this.elementNameRules.execOnName(k,l)},onAttributeName:function(k,l){return this.attributeNameRules.execOnName(k,l)},onText:function(k,m,l){return this.textRules.exec(k,m,l)},onComment:function(k,m,l){return this.commentRules.exec(k,m,l)},onRoot:function(k,l){return this.rootRules.exec(k,l)},onElement:function(k,o){for(var n=[this.elementsRules["^"],this.elementsRules[o.name],this.elementsRules.$],m,l=0;3>l;l++){if(m=n[l]){m=m.exec(k,o,this);if(!1===m){return null}if(m&&m!=o){return this.onNode(k,m)}if(o.parent&&!o.name){break}}}return o},onNode:function(k,m){var l=m.type;return l==CKEDITOR.NODE_ELEMENT?this.onElement(k,m):l==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(k,m.value)):l==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(k,m.value)):null},onAttribute:function(k,n,m,l){return(m=this.attributesRules[m])?m.exec(k,l,n,this):l}}});CKEDITOR.htmlParser.filterRulesGroup=i;i.prototype={add:function(k,m,l){this.rules.splice(this.findIndex(m),0,{value:k,priority:m,options:l})},addMany:function(m,q,p){for(var o=[this.findIndex(q),0],n=0,k=m.length;n<k;n++){o.push({value:m[n],priority:q,options:p})}this.rules.splice.apply(this.rules,o)},findIndex:function(k){for(var m=this.rules,l=m.length-1;0<=l&&k<m[l].priority;){l--}return l+1},exec:function(v,u){var r=u instanceof CKEDITOR.htmlParser.node||u instanceof CKEDITOR.htmlParser.fragment,o=Array.prototype.slice.call(arguments,1),n=this.rules,m=n.length,k,w,p,s;for(s=0;s<m;s++){if(r&&(k=u.type,w=u.name),p=n[s],!(v.nonEditable&&!p.options.applyToAll||v.nestedEditable&&p.options.excludeNestedEditable)){p=p.value.apply(null,o);if(!1===p||r&&p&&(p.name!=w||p.type!=k)){return p}null!=p&&(o[0]=u=p)}}return u},execOnName:function(m,q){for(var p=0,o=this.rules,n=o.length,k;q&&p<n;p++){k=o[p],m.nonEditable&&!k.options.applyToAll||m.nestedEditable&&k.options.excludeNestedEditable||(q=q.replace(k.value[0],k.value[1]))}return q}}})();(function(){function ap(v,u){function q(n){return n||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("Â "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function m(n,p){return function(A){if(A.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var D=[],C=ao(A),B,x;if(C){for(t(C,1)&&D.push(C);C;){aj(C)&&(B=an(C))&&t(B)&&((x=an(B))&&!aj(x)?D.push(B):(q(y).insertAfter(B),B.remove())),C=C.previous}}for(C=0;C<D.length;C++){D[C].remove()}if(D=!n||!1!==("function"==typeof p?p(A):p)){y||CKEDITOR.env.needsBrFiller||A.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?y||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||A.name in CKEDITOR.dtd.tr||A.name in CKEDITOR.dtd.$listItem)?(D=ao(A),D=!D||"form"==A.name&&"input"==D.name):D=!1:D=!1}D&&A.add(q(n))}}}function t(p,n){if((!y||CKEDITOR.env.needsBrFiller)&&p.type==CKEDITOR.NODE_ELEMENT&&"br"==p.name&&!p.attributes["data-cke-eol"]){return !0}var r;return p.type==CKEDITOR.NODE_TEXT&&(r=p.value.match(J))&&(r.index&&((new CKEDITOR.htmlParser.text(p.value.substring(0,r.index))).insertBefore(p),p.value=r[0]),!CKEDITOR.env.needsBrFiller&&y&&(!n||p.parent.name in z)||!y&&((r=p.previous)&&"br"==r.name||!r||aj(r)))?!0:!1}var l={elements:{}},y="html"==u,z=CKEDITOR.tools.extend({},ah),k;for(k in z){"#" in Q[k]||delete z[k]}for(k in z){l.elements[k]=m(y,v.config.fillEmptyBlocks)}l.root=m(y,!1);l.elements.br=function(n){return function(p){if(p.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var w=p.attributes;if("data-cke-bogus" in w||"data-cke-eol" in w){delete w["data-cke-bogus"]}else{for(w=p.next;w&&al(w);){w=w.next}var r=an(p);!w&&aj(p.parent)?ai(p.parent,q(n)):aj(w)&&r&&!aj(r)&&q(n).insertBefore(w)}}}}(y);return l}function am(l,k){return l!=CKEDITOR.ENTER_BR&&!1!==k?l==CKEDITOR.ENTER_DIV?"div":"p":!1}function ao(k){for(k=k.children[k.children.length-1];k&&al(k);){k=k.previous}return k}function an(k){for(k=k.previous;k&&al(k);){k=k.previous}return k}function al(k){return k.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(k.value)||k.type==CKEDITOR.NODE_ELEMENT&&k.attributes["data-cke-bookmark"]}function aj(k){return k&&(k.type==CKEDITOR.NODE_ELEMENT&&k.name in ah||k.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function ai(l,k){var m=l.children[l.children.length-1];l.children.push(k);k.parent=l;m&&(m.next=k,k.previous=m)}function ag(k){k=k.attributes;"false"!=k.contenteditable&&(k["data-cke-editable"]=k.contenteditable?"true":1);k.contenteditable="false"}function ab(k){k=k.attributes;switch(k["data-cke-editable"]){case"true":k.contenteditable="true";break;case"1":delete k.contenteditable}}function W(k){return k.replace(R,function(m,l,n){return"\x3c"+l+n.replace(aa,function(q,p){return s.test(p)&&-1==n.indexOf("data-cke-saved-"+p)?" data-cke-saved-"+q+" data-cke-"+CKEDITOR.rnd+"-"+q:q})+"\x3e"})}function ak(l,k){return l.replace(k,function(n,m,p){0===n.indexOf("\x3ctextarea")&&(n=m+U(p).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")+"\x3c/textarea\x3e");return"\x3ccke:encoded\x3e"+encodeURIComponent(n)+"\x3c/cke:encoded\x3e"})}function G(k){return k.replace(j,function(m,l){return decodeURIComponent(l)})}function ad(k){return k.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(l){return"\x3c!--"+V+"{C}"+encodeURIComponent(l).replace(/--/g,"%2D%2D")+"--\x3e"})}function U(k){return k.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(m,l){return decodeURIComponent(l)})}function Z(l,k){var m=k._.dataStore;return l.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(p,n){return decodeURIComponent(n)}).replace(/\{cke_protected_(\d+)\}/g,function(p,n){return m&&m[n]||""})}function af(m,l){var u=[],r=l.config.protectedSource,p=l._.dataStore||(l._.dataStore={id:1}),q=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,r=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(r);m=m.replace(/\x3c!--[\s\S]*?--\x3e/g,function(k){return"\x3c!--{cke_tempcomment}"+(u.push(k)-1)+"--\x3e"});for(var t=0;t<r.length;t++){m=m.replace(r[t],function(k){k=k.replace(q,function(v,n,w){return u[w]});return/cke_temp(comment)?/.test(k)?k:"\x3c!--{cke_temp}"+(u.push(k)-1)+"--\x3e"})}m=m.replace(q,function(n,k,v){return"\x3c!--"+V+(k?"{C}":"")+encodeURIComponent(u[v]).replace(/--/g,"%2D%2D")+"--\x3e"});m=m.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(k){return k.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(v,n){p[p.id]=decodeURIComponent(n);return"{cke_protected_"+p.id+++"}"})});return m=m.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(n,x,w,v){return"\x3c"+x+w+"\x3e"+Z(U(v),l)+"\x3c/"+x+"\x3e"})}CKEDITOR.htmlDataProcessor=function(l){var p,m,n=this;this.editor=l;this.dataFilter=p=new CKEDITOR.htmlParser.filter;this.htmlFilter=m=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;p.addRules(ac);p.addRules(ae,{applyToAll:!0});p.addRules(ap(l,"data"),{applyToAll:!0});m.addRules(X);m.addRules(Y,{applyToAll:!0});m.addRules(ap(l,"html"),{applyToAll:!0});l.on("toHtml",function(q){q=q.data;var u=q.dataValue,r,u=af(u,l),u=ak(u,o),u=W(u),u=ak(u,i),u=u.replace(P,"$1cke:$2"),u=u.replace(K,"\x3ccke:$1$2\x3e\x3c/cke:$1\x3e"),u=u.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),u=u.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");r=q.context||l.editable().getName();var t;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==r&&(r="div",u="\x3cpre\x3e"+u+"\x3c/pre\x3e",t=1);r=l.document.createElement(r);r.setHtml("a"+u);u=r.getHtml().substr(1);u=u.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");t&&(u=u.replace(/^<pre>|<\/pre>$/gi,""));u=u.replace(O,"$1$2");u=G(u);u=U(u);r=!1===q.fixForBody?!1:am(q.enterMode,l.config.autoParagraph);u=CKEDITOR.htmlParser.fragment.fromHtml(u,q.context,r);r&&(t=u,!t.children.length&&CKEDITOR.dtd[t.name][r]&&(r=new CKEDITOR.htmlParser.element(r),t.add(r)));q.dataValue=u},null,null,5);l.on("toHtml",function(k){k.data.filter.applyTo(k.data.dataValue,!0,k.data.dontFilter,k.data.enterMode)&&l.fire("dataFiltered")},null,null,6);l.on("toHtml",function(k){k.data.dataValue.filterChildren(n.dataFilter,!0)},null,null,10);l.on("toHtml",function(q){q=q.data;var k=q.dataValue,r=new CKEDITOR.htmlParser.basicWriter;k.writeChildrenHtml(r);k=r.getHtml(!0);q.dataValue=ad(k)},null,null,15);l.on("toDataFormat",function(k){var q=k.data.dataValue;k.data.enterMode!=CKEDITOR.ENTER_BR&&(q=q.replace(/^<br *\/?>/i,""));k.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(q,k.data.context,am(k.data.enterMode,l.config.autoParagraph))},null,null,5);l.on("toDataFormat",function(k){k.data.dataValue.filterChildren(n.htmlFilter,!0)},null,null,10);l.on("toDataFormat",function(k){k.data.filter.applyTo(k.data.dataValue,!1,!0)},null,null,11);l.on("toDataFormat",function(k){var r=k.data.dataValue,q=n.writer;q.reset();r.writeChildrenHtml(q);r=q.getHtml(!0);r=U(r);r=Z(r,l);k.data.dataValue=r},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(x,w,v,u){var q=this.editor,t,m,l,r;w&&"object"==typeof w?(t=w.context,v=w.fixForBody,u=w.dontFilter,m=w.filter,l=w.enterMode,r=w.protectedWhitespaces):t=w;t||null===t||(t=q.editable().getName());return q.fire("toHtml",{dataValue:x,context:t,fixForBody:v,dontFilter:u,filter:m||q.filter,enterMode:l||q.enterMode,protectedWhitespaces:r}).dataValue},toDataFormat:function(m,l){var q,p,n;l&&(q=l.context,p=l.filter,n=l.enterMode);q||null===q||(q=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:m,filter:p||this.editor.filter,context:q,enterMode:n||this.editor.enterMode}).dataValue}};var J=/(?:&nbsp;|\xa0)$/,V="{cke_protected}",Q=CKEDITOR.dtd,N="caption colgroup col thead tfoot tbody".split(" "),ah=CKEDITOR.tools.extend({},Q.$blockLimit,Q.$block),ac={elements:{input:ag,textarea:ag}},ae={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},X={elements:{embed:function(l){var k=l.parent;if(k&&"object"==k.name){var m=k.attributes.width,k=k.attributes.height;m&&(l.attributes.width=m);k&&(l.attributes.height=k)}},a:function(l){var k=l.attributes;if(!(l.children.length||k.name||k.id||l.attributes["data-cke-saved-name"])){return !1}}}},Y={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(m){var l=m.attributes;if(l){if(l["data-cke-temp"]){return !1}for(var q=["name","href","src"],p,n=0;n<q.length;n++){p="data-cke-saved-"+q[n],p in l&&delete l[q[n]]}}return m},table:function(k){k.children.slice(0).sort(function(m,l){var p,n;m.type==CKEDITOR.NODE_ELEMENT&&l.type==m.type&&(p=CKEDITOR.tools.indexOf(N,m.name),n=CKEDITOR.tools.indexOf(N,l.name));-1<p&&-1<n&&p!=n||(p=m.parent?m.getIndex():-1,n=l.parent?l.getIndex():-1);return p>n?1:-1})},param:function(k){k.children=[];k.isEmpty=!0;return k},span:function(k){"Apple-style-span"==k.attributes["class"]&&delete k.name},html:function(k){delete k.attributes.contenteditable;delete k.attributes["class"]},body:function(k){delete k.attributes.spellcheck;delete k.attributes.contenteditable},style:function(l){var k=l.children[0];k&&k.value&&(k.value=CKEDITOR.tools.trim(k.value));l.attributes.type||(l.attributes.type="text/css")},title:function(l){var k=l.children[0];!k&&ai(l,k=new CKEDITOR.htmlParser.text);k.value=l.attributes["data-cke-title"]||""},input:ab,textarea:ab},attributes:{"class":function(k){return CKEDITOR.tools.ltrim(k.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(Y.attributes.style=function(k){return k.replace(/(^|;)([^\:]+)/g,function(l){return l.toLowerCase()})});var R=/<(a|area|img|input|source)\b([^>]*)>/gi,aa=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,s=/^(href|src|name)$/i,i=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,o=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,j=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,P=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,O=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,K=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();"use strict";CKEDITOR.htmlParser.element=function(j,k){this.name=j;this.attributes=k||{};this.children=[];var i=j||"",l=i.match(/^cke:(.*)/);l&&(i=l[1]);i=!!(CKEDITOR.dtd.$nonBodyContent[i]||CKEDITOR.dtd.$block[i]||CKEDITOR.dtd.$listItem[i]||CKEDITOR.dtd.$tableContent[i]||CKEDITOR.dtd.$nonEditable[i]||"br"==i);this.isEmpty=!!CKEDITOR.dtd.$empty[j];this.isUnknown=!CKEDITOR.dtd[j];this._={isBlockLike:i,hasInlineStarted:this.isEmpty||!i}};CKEDITOR.htmlParser.cssStyle=function(i){var j={};((i instanceof CKEDITOR.htmlParser.element?i.attributes.style:i)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(k,m,l){"font-family"==m&&(l=l.replace(/["']/g,""));j[m.toLowerCase()]=l});return{rules:j,populate:function(k){var l=this.toString();l&&(k instanceof CKEDITOR.dom.element?k.setAttribute("style",l):k instanceof CKEDITOR.htmlParser.element?k.attributes.style=l:k.style=l)},toString:function(){var k=[],l;for(l in j){j[l]&&k.push(l,":",j[l],";")}return k.join("")}}};(function(){function j(l){return function(m){return m.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof l?m.name==l:m.name in l)}}var k=function(m,l){m=m[0];l=l[0];return m<l?-1:m>l?1:0},i=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:i.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(o,m){var u=this,r,n;m=u.getFilterContext(m);if(m.off){return !0}if(!u.parent){o.onRoot(m,u)}for(;;){r=u.name;if(!(n=o.onElementName(m,r))){return this.remove(),!1}u.name=n;if(!(u=o.onElement(m,u))){return this.remove(),!1}if(u!==this){return this.replaceWith(u),!1}if(u.name==r){break}if(u.type!=CKEDITOR.NODE_ELEMENT){return this.replaceWith(u),!1}if(!u.name){return this.replaceWithChildren(),!1}}r=u.attributes;var s,p;for(s in r){for(n=r[s];;){if(p=o.onAttributeName(m,s)){if(p!=s){delete r[s],s=p}else{break}}else{delete r[s];break}}p&&(!1===(n=o.onAttribute(m,u,p,n))?delete r[p]:r[p]=n)}u.isEmpty||this.filterChildren(o,!1,m);return !0},filterChildren:i.filterChildren,writeHtml:function(o,m){m&&this.filter(m);var s=this.name,r=[],n=this.attributes,u,p;o.openTag(s,n);for(u in n){r.push([u,n[u]])}o.sortAttributes&&r.sort(k);u=0;for(p=r.length;u<p;u++){n=r[u],o.attribute(n[0],n[1])}o.openTagClose(s,this.isEmpty);this.writeChildrenHtml(o);this.isEmpty||o.closeTag(s)},writeChildrenHtml:i.writeChildrenHtml,replaceWithChildren:function(){for(var m=this.children,l=m.length;l;){m[--l].insertAfter(this)}this.remove()},forEach:i.forEach,getFirst:function(l){if(!l){return this.children.length?this.children[0]:null}"function"!=typeof l&&(l=j(l));for(var n=0,m=this.children.length;n<m;++n){if(l(this.children[n])){return this.children[n]}}return null},getHtml:function(){var l=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(l);return l.getHtml()},setHtml:function(m){m=this.children=CKEDITOR.htmlParser.fragment.fromHtml(m).children;for(var l=0,n=m.length;l<n;++l){m[l].parent=this}},getOuterHtml:function(){var l=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(l);return l.getHtml()},split:function(m){for(var l=this.children.splice(m,this.children.length-m),o=this.clone(),n=0;n<l.length;++n){l[n].parent=o}o.children=l;l[0]&&(l[0].previous=null);0<m&&(this.children[m-1].next=null);this.parent.add(o,this.getIndex()+1);return o},addClass:function(m){if(!this.hasClass(m)){var l=this.attributes["class"]||"";this.attributes["class"]=l+(l?" ":"")+m}},removeClass:function(m){var l=this.attributes["class"];l&&((l=CKEDITOR.tools.trim(l.replace(new RegExp("(?:\\s+|^)"+m+"(?:\\s+|$)")," ")))?this.attributes["class"]=l:delete this.attributes["class"])},hasClass:function(m){var l=this.attributes["class"];return l?(new RegExp("(?:^|\\s)"+m+"(?\x3d\\s|$)")).test(l):!1},getFilterContext:function(m){var l=[];m||(m={off:!1,nonEditable:!1,nestedEditable:!1});m.off||"off"!=this.attributes["data-cke-processor"]||l.push("off",!0);m.nonEditable||"false"!=this.attributes.contenteditable?m.nonEditable&&!m.nestedEditable&&"true"==this.attributes.contenteditable&&l.push("nestedEditable",!0):l.push("nonEditable",!0);if(l.length){m=CKEDITOR.tools.copy(m);for(var n=0;n<l.length;n+=2){m[l[n]]=l[n+1]}}return m}},!0)})();(function(){var j={},l=/{([^}]+)}/g,i=/([\\'])/g,m=/\n/g,k=/\r/g;CKEDITOR.template=function(o){if(j[o]){this.output=j[o]}else{var n=o.replace(i,"\\$1").replace(m,"\\n").replace(k,"\\r").replace(l,function(q,p){return"',data['"+p+"']\x3d\x3dundefined?'{"+p+"}':data['"+p+"'],'"});this.output=j[o]=Function("data","buffer","return buffer?buffer.push('"+n+"'):['"+n+"'].join('');")}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(i){CKEDITOR.instances[i.name]=i;i.on("focus",function(){CKEDITOR.currentInstance!=i&&(CKEDITOR.currentInstance=i,CKEDITOR.fire("currentInstance"))});i.on("blur",function(){CKEDITOR.currentInstance==i&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,i)};CKEDITOR.remove=function(i){delete CKEDITOR.instances[i.name]};(function(){var i={};CKEDITOR.addTemplate=function(k,j){var l=i[k];if(l){return l}l={name:k,source:j};CKEDITOR.fire("template",l);return i[k]=new CKEDITOR.template(l.source)};CKEDITOR.getTemplate=function(j){return i[j]}})();(function(){var i=[];CKEDITOR.addCss=function(j){i.push(j)};CKEDITOR.getCss=function(){return i.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;(function(){CKEDITOR.inline=function(j,k){if(!CKEDITOR.env.isCompatible){return null}j=CKEDITOR.dom.element.get(j);if(j.getEditor()){throw'The editor instance "'+j.getEditor().name+'" is already attached to the provided element.'}var i=new CKEDITOR.editor(k,j,CKEDITOR.ELEMENT_MODE_INLINE),l=j.is("textarea")?j:null;l?(i.setData(l.getValue(),null,!0),j=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!i.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+l.getValue()+"\x3c/div\x3e",CKEDITOR.document),j.insertAfter(l),l.hide(),l.$.form&&i._attachToForm()):i.setData(j.getHtml(),null,!0);i.on("loaded",function(){i.fire("uiReady");i.editable(j);i.container=j;i.ui.contentsElement=j;i.setData(i.getData(1));i.resetDirty();i.fire("contentDom");i.mode="wysiwyg";i.fire("mode");i.status="ready";i.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,i)},null,null,10000);i.on("destroy",function(){l&&(i.container.clearCustomData(),i.container.remove(),l.show());i.element.clearCustomData();delete i.element});return i};CKEDITOR.inlineAll=function(){var j,m,i;for(i in CKEDITOR.dtd.$editable){for(var n=CKEDITOR.document.getElementsByTag(i),l=0,k=n.count();l<k;l++){j=n.getItem(l),"true"==j.getAttribute("contenteditable")&&(m={element:j,config:{}},!1!==CKEDITOR.fire("inline",m)&&CKEDITOR.inline(j,m.config))}}};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";(function(){function j(n,q,p,o){if(!CKEDITOR.env.isCompatible){return null}n=CKEDITOR.dom.element.get(n);if(n.getEditor()){throw'The editor instance "'+n.getEditor().name+'" is already attached to the provided element.'}var m=new CKEDITOR.editor(q,n,o);o==CKEDITOR.ELEMENT_MODE_REPLACE&&(n.setStyle("visibility","hidden"),m._.required=n.hasAttribute("required"),n.removeAttribute("required"));p&&m.setData(p,null,!0);m.on("loaded",function(){i(m);o==CKEDITOR.ELEMENT_MODE_REPLACE&&m.config.autoUpdateElement&&n.$.form&&m._attachToForm();m.setMode(m.config.startupMode,function(){m.resetDirty();m.status="ready";m.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,m)})});m.on("destroy",k);return m}function k(){var m=this.container,l=this.element;m&&(m.clearCustomData(),m.remove());l&&(l.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(l.show(),this._.required&&l.setAttribute("required","required")),delete this.element)}function i(o){var m=o.name,u=o.element,r=o.elementMode,n=o.fire("uiSpace",{space:"top",html:""}).html,s=o.fire("uiSpace",{space:"bottom",html:""}).html,p=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(o.title?' aria-labelledby\x3d"cke_{name}_arialbl"':"")+"\x3e"+(o.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':"")+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),m=CKEDITOR.dom.element.createFromHtml(p.output({id:o.id,name:m,langDir:o.lang.dir,langCode:o.langCode,voiceLabel:o.title,topHtml:n?'\x3cspan id\x3d"'+o.ui.spaceId("top")+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+n+"\x3c/span\x3e":"",contentId:o.ui.spaceId("contents"),bottomHtml:s?'\x3cspan id\x3d"'+o.ui.spaceId("bottom")+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+s+"\x3c/span\x3e":"",outerEl:CKEDITOR.env.ie?"span":"div"}));r==CKEDITOR.ELEMENT_MODE_REPLACE?(u.hide(),m.insertAfter(u)):u.append(m);o.container=m;o.ui.contentsElement=o.ui.space("contents");n&&o.ui.space("top").unselectable();s&&o.ui.space("bottom").unselectable();u=o.config.width;r=o.config.height;u&&m.setStyle("width",CKEDITOR.tools.cssLength(u));r&&o.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(r));m.disableContextMenu();CKEDITOR.env.webkit&&m.on("focus",function(){o.focus()});o.fireOnce("uiReady")}CKEDITOR.replace=function(l,m){return j(l,m,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(l,n,m){return j(l,n,m,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var m=document.getElementsByTagName("textarea"),l=0;l<m.length;l++){var o=null,n=m[l];if(n.name||n.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)")).test(n.className)){continue}}else{if("function"==typeof arguments[0]&&(o={},!1===arguments[0](n,o))){continue}}this.replace(n,o)}}};CKEDITOR.editor.prototype.addMode=function(m,l){(this._.modes||(this._.modes={}))[m]=l};CKEDITOR.editor.prototype.setMode=function(o,m){var u=this,r=this._.modes;if(o!=u.mode&&r&&r[o]){u.fire("beforeSetMode",o);if(u.mode){var n=u.checkDirty(),r=u._.previousModeData,s,p=0;u.fire("beforeModeUnload");u.editable(0);u._.previousMode=u.mode;u._.previousModeData=s=u.getData(1);"source"==u.mode&&r==s&&(u.fire("lockSnapshot",{forceUpdate:!0}),p=1);u.ui.space("contents").setHtml("");u.mode=""}else{u._.previousModeData=u.getData(1)}this._.modes[o](function(){u.mode=o;void 0!==n&&!n&&u.resetDirty();p?u.fire("unlockSnapshot"):"wysiwyg"==o&&u.fire("saveSnapshot");setTimeout(function(){u.fire("mode");m&&m.call(u)},0)})}};CKEDITOR.editor.prototype.resize=function(o,m,v,r){var n=this.container,u=this.ui.space("contents"),p=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;r=r?this.container.getFirst(function(l){return l.type==CKEDITOR.NODE_ELEMENT&&l.hasClass("cke_inner")}):n;r.setSize("width",o,!0);p&&(p.style.width="1%");var s=(r.$.offsetHeight||0)-(u.$.clientHeight||0),n=Math.max(m-(v?0:s),0);m=v?m+s:m;u.setStyle("height",n+"px");p&&(p.style.width="100%");this.fire("resize",{outerHeight:m,contentsHeight:n,outerWidth:o||r.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(l){return l?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";(function(){function L(m){var l=m.editor,v=m.data.path,y=v.blockLimit,u=m.data.selection,t=u.getRanges()[0],q;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller){if(u=I(u,v)){u.appendBogus(),q=CKEDITOR.env.ie}}D(l,v.block,y)&&t.collapsed&&!t.getCommonAncestor().isReadOnly()&&(v=t.clone(),v.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),y=new CKEDITOR.dom.walker(v),y.guard=function(z){return !J(z)||z.type==CKEDITOR.NODE_COMMENT||z.isReadOnly()},!y.checkForward()||v.checkStartOfBlock()&&v.checkEndOfBlock())&&(l=t.fixBlock(!0,l.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(l=l.getFirst(J))&&l.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(l.getText()).match(/^(?:&nbsp;|\xa0)$/)&&l.remove(),q=1,m.cancel());q&&t.select()}function I(m,l){if(m.isFake){return 0}var t=l.block||l.blockLimit,q=t&&t.getLast(J);if(!(!t||!t.isBlockBoundary()||q&&q.type==CKEDITOR.NODE_ELEMENT&&q.isBlockBoundary()||t.is("pre")||t.getBogus())){return t}}function K(m){var l=m.data.getTarget();l.is("input")&&(l=l.getAttribute("type"),"submit"!=l&&"reset"!=l||m.data.preventDefault())}function J(l){return G(l)&&i(l)}function H(m,l){return function(t){var q=t.data.$.toElement||t.data.$.fromElement||t.data.$.relatedTarget;(q=q&&q.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(q):null)&&(l.equals(q)||l.contains(q))||m.call(this,t)}}function F(m){function l(y){return function(z,A){A&&z.type==CKEDITOR.NODE_ELEMENT&&z.is(t)&&(v=z);if(!(A||!J(z)||y&&n(z))){return !1}}}var v,u=m.getRanges()[0];m=m.root;var t={table:1,ul:1,ol:1,dl:1};if(u.startPath().contains(t)){var q=u.clone();q.collapse(1);q.setStartAt(m,CKEDITOR.POSITION_AFTER_START);m=new CKEDITOR.dom.walker(q);m.guard=l();m.checkBackward();if(v){return q=u.clone(),q.collapse(),q.setEndAt(v,CKEDITOR.POSITION_AFTER_END),m=new CKEDITOR.dom.walker(q),m.guard=l(!0),v=!1,m.checkForward(),v}}return null}function D(m,l,q){return !1!==m.config.autoParagraph&&m.activeEnterMode!=CKEDITOR.ENTER_BR&&(m.editable().equals(q)&&!l||l&&"true"==l.getAttribute("contenteditable"))}function B(l){return l.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==l.config.autoParagraph?l.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function s(m){var l=m.editor;l.getSelection().scrollIntoView();setTimeout(function(){l.fire("saveSnapshot")},0)}function p(m,l,t){var q=m.getCommonAncestor(l);for(l=m=t?l:m;(m=m.getParent())&&!q.equals(m)&&1==m.getChildCount();){l=m}l.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(m,l){this.base(l.$||l);this.editor=m;this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var m;if(CKEDITOR.env.webkit&&!this.hasFocus&&(m=this.editor._.previousActive||this.getDocument().getActive(),this.contains(m))){m.focus();return}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(l){if(!CKEDITOR.env.ie){throw l}}CKEDITOR.env.safari&&!this.isInline()&&(m=CKEDITOR.document.getActive(),m.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(m,l){var q=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(m)&&(m="focus"==m?"focusin":"focusout",l=H(l,this),q[0]=m,q[1]=l);return CKEDITOR.dom.element.prototype.on.apply(this,q)},attachListener:function(m){!this._.listeners&&(this._.listeners=[]);var l=Array.prototype.slice.call(arguments,1),l=m.on.apply(m,l);this._.listeners.push(l);return l},clearListeners:function(){var m=this._.listeners;try{for(;m.length;){m.pop().removeListener()}}catch(l){}},restoreAttrs:function(){var m=this._.attrChanges,l,q;for(q in m){m.hasOwnProperty(q)&&(l=m[q],null!==l?this.setAttribute(q,l):this.removeAttribute(q))}},attachClass:function(m){var l=this.getCustomData("classes");this.hasClass(m)||(!l&&(l=[]),l.push(m),this.setCustomData("classes",l),this.addClass(m))},changeAttr:function(m,l){var q=this.getAttribute(m);l!==q&&(!this._.attrChanges&&(this._.attrChanges={}),m in this._.attrChanges||(this._.attrChanges[m]=q),this.setAttribute(m,l))},insertText:function(l){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(l),"text")},transformPlainTextToHtml:function(m){var l=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(m,l)},insertHtml:function(m,l,t){var q=this.editor;q.focus();q.fire("saveSnapshot");t||(t=q.getSelection().getRanges()[0]);x(this,l||"html",m,t);t.select();s(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(m,l,q){x(this,q||"html",m,l);this.editor.fire("afterInsertHtml",{intoRange:l})},insertElement:function(m,l){var u=this.editor;u.focus();u.fire("saveSnapshot");var t=u.activeEnterMode,u=u.getSelection(),q=m.getName(),q=CKEDITOR.dtd.$block[q];l||(l=u.getRanges()[0]);this.insertElementIntoRange(m,l)&&(l.moveToPosition(m,CKEDITOR.POSITION_AFTER_END),q&&((q=m.getNext(function(v){return J(v)&&!n(v)}))&&q.type==CKEDITOR.NODE_ELEMENT&&q.is(CKEDITOR.dtd.$block)?q.getDtd()["#"]?l.moveToElementEditStart(q):l.moveToElementEditEnd(m):q||t==CKEDITOR.ENTER_BR||(q=l.fixBlock(!0,t==CKEDITOR.ENTER_DIV?"div":"p"),l.moveToElementEditStart(q))));u.selectRanges([l]);s(this)},insertElementIntoSelection:function(l){this.insertElement(l)},insertElementIntoRange:function(m,l){var z=this.editor,y=z.config.enterMode,v=m.getName(),u=CKEDITOR.dtd.$block[v];if(l.checkReadOnly()){return !1}l.deleteContents(1);l.startContainer.type==CKEDITOR.NODE_ELEMENT&&l.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&j(l);var q,t;if(u){for(;(q=l.getCommonAncestor(0,1))&&(t=CKEDITOR.dtd[q.getName()])&&(!t||!t[v]);){q.getName() in CKEDITOR.dtd.span?l.splitElement(q):l.checkStartOfBlock()&&l.checkEndOfBlock()?(l.setStartBefore(q),l.collapse(!0),q.remove()):l.splitBlock(y==CKEDITOR.ENTER_DIV?"div":"p",z.editable())}}l.insertNode(m);return !0},setData:function(m,l){l||(m=this.editor.dataProcessor.toHtml(m));this.setHtml(m);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(m){var l=this.getHtml();m||(l=this.editor.dataProcessor.toDataFormat(l));return l},setReadOnly:function(l){this.setAttribute("contenteditable",!l)},detach:function(){this.removeClass("cke_editable");this.status="detached";var l=this.editor;this._.detach();delete l.document;delete l.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function m(){var t=q.getDocument().$,v=t.getSelection(),u;m:if(v.anchorNode&&v.anchorNode==q.$){u=!0}else{if(CKEDITOR.env.webkit&&(u=q.getDocument().getActive())&&u.equals(q)&&!v.anchorNode){u=!0;break m}u=void 0}u&&(u=new CKEDITOR.dom.range(q),u.moveToElementEditStart(q),t=t.createRange(),t.setStart(u.startContainer.$,u.startOffset),t.collapse(!0),v.removeAllRanges(),v.addRange(t))}function l(){var t=q.getDocument().$,v=t.selection,u=q.getDocument().getActive();"None"==v.type&&u.equals(q)&&(v=new CKEDITOR.dom.range(q),t=t.body.createTextRange(),v.moveToElementEditStart(q),v=v.startContainer,v.type!=CKEDITOR.NODE_ELEMENT&&(v=v.getParent()),t.moveToElementText(v.$),t.collapse(!0),t.select())}var q=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)){this.hasFocus&&(this.focus(),l())}else{if(this.hasFocus){this.focus(),m()}else{this.once("focus",function(){m()},null,null,-999)}}},getHtmlFromRange:function(l){if(l.collapsed){return new CKEDITOR.dom.documentFragment(l.document)}l={doc:this.getDocument(),range:l.clone()};o.eol.detect(l,this);o.bogus.exclude(l);o.cell.shrink(l);l.fragment=l.range.cloneContents();o.tree.rebuild(l,this);o.eol.fix(l,this);return new CKEDITOR.dom.documentFragment(l.fragment.$)},extractHtmlFromRange:function(m,l){var y=k,v={range:m,doc:m.document},u=this.getHtmlFromRange(m);if(m.collapsed){return m.optimize(),u}m.enlarge(CKEDITOR.ENLARGE_INLINE,1);y.table.detectPurge(v);v.bookmark=m.createBookmark();delete v.range;var t=this.editor.createRange();t.moveToPosition(v.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);v.targetBookmark=t.createBookmark();y.list.detectMerge(v,this);y.table.detectRanges(v,this);y.block.detectMerge(v,this);v.tableContentsRanges?(y.table.deleteRanges(v),m.moveToBookmark(v.bookmark),v.range=m):(m.moveToBookmark(v.bookmark),v.range=m,m.extractContents(y.detectExtractMerge(v)));m.moveToBookmark(v.targetBookmark);m.optimize();y.fixUneditableRangePosition(m);y.list.merge(v,this);y.table.purge(v,this);y.block.merge(v,this);if(l){y=m.startPath();if(v=m.checkStartOfBlock()&&m.checkEndOfBlock()&&y.block&&!m.root.equals(y.block)){m:{var v=y.block.getElementsByTag("span"),t=0,q;if(v){for(;q=v.getItem(t++);){if(!i(q)){v=!0;break m}}}v=!1}v=!v}v&&(m.moveToPosition(y.block,CKEDITOR.POSITION_BEFORE_START),y.block.remove())}else{y.autoParagraph(this.editor,m),w(m.startContainer)&&m.startContainer.appendBogus()}m.startContainer.mergeSiblings();return u},setup:function(){var l=this.editor;this.attachListener(l,"beforeGetData",function(){var v=this.getData();this.is("textarea")||!1!==l.config.ignoreEmptyParagraph&&(v=v.replace(r,function(z,y){return y}));l.setData(v,null,1)},this);this.attachListener(l,"getSnapshot",function(v){v.data=this.getData(1)},this);this.attachListener(l,"afterSetData",function(){this.setData(l.getData(1))},this);this.attachListener(l,"loadSnapshot",function(v){this.setData(v.data,1)},this);this.attachListener(l,"beforeFocus",function(){var v=l.getSelection();(v=v&&v.getNative())&&"Control"==v.type||this.focus()},this);this.attachListener(l,"insertHtml",function(v){this.insertHtml(v.data.dataValue,v.data.mode,v.data.range)},this);this.attachListener(l,"insertElement",function(v){this.insertElement(v.data)},this);this.attachListener(l,"insertText",function(v){this.insertText(v.data)},this);this.setReadOnly(l.readOnly);this.attachClass("cke_editable");l.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):l.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&l.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+l.config.contentsLangDirection);l.keystrokeHandler.blockedKeystrokes[8]=+l.readOnly;l.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);l.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,l.once("contentDom",function(){l.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",l.tabIndex);if(!this.is("textarea")){l.document=this.getDocument();l.window=this.getWindow();var t=l.document;this.changeAttr("spellcheck",!l.config.disableNativeSpellChecker);var q=l.config.contentsLangDirection;this.getDirection(1)!=q&&this.changeAttr("dir",q);var u=CKEDITOR.getCss();u&&(q=t.getHead(),q.getCustomData("stylesheet")||(u=t.appendStyleText(u),u=new CKEDITOR.dom.element(u.ownerNode||u.owningElement),q.setCustomData("stylesheet",u),u.data("cke-temp",1)));q=t.getCustomData("stylesheet_ref")||0;t.setCustomData("stylesheet_ref",q+1);this.setCustomData("cke_includeReadonly",!l.config.disableReadonlyStyling);this.attachListener(this,"click",function(y){y=y.data;var v=(new CKEDITOR.dom.elementPath(y.getTarget(),this)).contains("a");v&&2!=y.$.button&&v.isReadOnly()&&y.preventDefault()});var m={8:1,46:1};this.attachListener(l,"key",function(N){if(l.readOnly){return !0}var M=N.data.domEvent.getKey(),E;if(M in m){N=l.getSelection();var A,C=N.getRanges()[0],y=C.startPath(),v,O,z,M=8==M;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(A=N.getSelectedElement())||(A=F(N))?(l.fire("saveSnapshot"),C.moveToPosition(A,CKEDITOR.POSITION_BEFORE_START),A.remove(),C.select(),l.fire("saveSnapshot"),E=1):C.collapsed&&((v=y.block)&&(z=v[M?"getPrevious":"getNext"](G))&&z.type==CKEDITOR.NODE_ELEMENT&&z.is("table")&&C[M?"checkStartOfBlock":"checkEndOfBlock"]()?(l.fire("saveSnapshot"),C[M?"checkEndOfBlock":"checkStartOfBlock"]()&&v.remove(),C["moveToElementEdit"+(M?"End":"Start")](z),C.select(),l.fire("saveSnapshot"),E=1):y.blockLimit&&y.blockLimit.is("td")&&(O=y.blockLimit.getAscendant("table"))&&C.checkBoundaryOfElement(O,M?CKEDITOR.START:CKEDITOR.END)&&(z=O[M?"getPrevious":"getNext"](G))?(l.fire("saveSnapshot"),C["moveToElementEdit"+(M?"End":"Start")](z),C.checkStartOfBlock()&&C.checkEndOfBlock()?z.remove():C.select(),l.fire("saveSnapshot"),E=1):(O=y.contains(["td","th","caption"]))&&C.checkBoundaryOfElement(O,M?CKEDITOR.START:CKEDITOR.END)&&(E=1))}return !E});l.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(v){v.data.getKeystroke() in m&&!this.getFirst(J)&&(this.appendBogus(),v=l.createRange(),v.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),v.select())});this.attachListener(this,"dblclick",function(v){if(l.readOnly){return !1}v={element:v.data.getTarget()};l.fire("doubleclick",v)});CKEDITOR.env.ie&&this.attachListener(this,"click",K);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(v){var y=v.data.getTarget();y.is("img","hr","input","textarea","select")&&!y.isReadOnly()&&(l.getSelection().selectElement(y),y.is("input","textarea","select")&&v.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(v){(v=v.data.getTarget())&&v.is("img")&&l.getSelection().selectElement(v)});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(v){if(2==v.data.$.button&&(v=v.data.getTarget(),!v.getOuterHtml().replace(r,""))){var y=l.createRange();y.moveToElementEditStart(v);y.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(v){v.data.getTarget().is("input","select")&&v.data.preventDefault()}),this.attachListener(this,"mouseup",function(v){v.data.getTarget().is("input","textarea")&&v.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(l,"key",function(v){if(l.readOnly){return !0}v=v.data.domEvent.getKey();if(v in m){var E=8==v,C=l.getSelection().getRanges()[0];v=C.startPath();if(C.collapsed){l:{var y=v.block;if(y&&C[E?"checkStartOfBlock":"checkEndOfBlock"]()&&C.moveToClosestEditablePosition(y,!E)&&C.collapsed){if(C.startContainer.type==CKEDITOR.NODE_ELEMENT){var A=C.startContainer.getChild(C.startOffset-(E?1:0));if(A&&A.type==CKEDITOR.NODE_ELEMENT&&A.is("hr")){l.fire("saveSnapshot");A.remove();v=!0;break l}}C=C.startPath().block;if(!C||C&&C.contains(y)){v=void 0}else{l.fire("saveSnapshot");var z;(z=(E?C:y).getBogus())&&z.remove();z=l.getSelection();A=z.createBookmarks();(E?y:C).moveChildren(E?C:y,!1);v.lastElement.mergeSiblings();p(y,C,!E);z.selectBookmarks(A);v=!0}}else{v=!1}}}else{E=C,z=v.block,C=E.endPath().block,z&&C&&!z.equals(C)?(l.fire("saveSnapshot"),(y=z.getBogus())&&y.remove(),E.enlarge(CKEDITOR.ENLARGE_INLINE),E.deleteContents(),C.getParent()&&(C.moveChildren(z,!1),v.lastElement.mergeSiblings(),p(z,C,!0)),E=l.getSelection().getRanges()[0],E.collapse(1),E.optimize(),""===E.startContainer.getHtml()&&E.startContainer.appendBogus(),E.select(),v=!0):v=!1}if(!v){return}l.getSelection().scrollIntoView();l.fire("saveSnapshot");return !1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var m;if(m=this.removeCustomData("classes")){for(;m.length;){this.removeClass(m.pop())}}if(!this.is("textarea")){m=this.getDocument();var l=m.getHead();if(l.getCustomData("stylesheet")){var q=m.getCustomData("stylesheet_ref");--q?m.setCustomData("stylesheet_ref",q):(m.removeCustomData("stylesheet_ref"),l.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(m){var l=this._.editable;if(l&&m){return 0}arguments.length&&(l=this._.editable=m?m instanceof CKEDITOR.editable?m:new CKEDITOR.editable(this,m):(l&&l.detach(),null));return l};CKEDITOR.on("instanceLoaded",function(l){var m=l.editor;m.on("insertElement",function(q){q=q.data;q.type==CKEDITOR.NODE_ELEMENT&&(q.is("input")||q.is("textarea"))&&("false"!=q.getAttribute("contentEditable")&&q.data("cke-editable",q.hasAttribute("contenteditable")?"true":"1"),q.setAttribute("contentEditable",!1))});m.on("selectionChange",function(q){if(!m.readOnly){var t=m.getSelection();t&&!t.isLocked&&(t=m.checkDirty(),m.fire("lockSnapshot"),L(q),m.fire("unlockSnapshot"),!t&&m.resetDirty())}})});CKEDITOR.on("instanceCreated",function(m){var l=m.editor;l.on("mode",function(){var q=l.editable();if(q&&q.isInline()){var v=l.title;q.changeAttr("role","textbox");q.changeAttr("aria-label",v);v&&q.changeAttr("title",v);var u=l.fire("ariaEditorHelpLabel",{}).label;if(u&&(v=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var t=CKEDITOR.tools.getNextId(),u=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+t+'" class\x3d"cke_voice_label"\x3e'+u+"\x3c/span\x3e");v.append(u);q.changeAttr("aria-describedby",t)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var G=CKEDITOR.dom.walker.whitespaces(!0),i=CKEDITOR.dom.walker.bookmark(!1,!0),w=CKEDITOR.dom.walker.empty(),n=CKEDITOR.dom.walker.bogus(),r=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,x=function(){function N(m){return m.type==CKEDITOR.NODE_ELEMENT}function M(ab,aa){var Z,Y,T,S,W=[],Q=aa.range.startContainer;Z=aa.range.startPath();for(var Q=v[Q.getName()],X=0,P=ab.getChildren(),V=P.count(),ad=-1,U=-1,ac=0,R=Z.contains(v.$list);X<V;++X){Z=P.getItem(X),N(Z)?(T=Z.getName(),R&&T in CKEDITOR.dtd.$list?W=W.concat(M(Z,aa)):(S=!!Q[T],"br"!=T||!Z.data("cke-eol")||X&&X!=V-1||(ac=(Y=X?W[X-1].node:P.getItem(X+1))&&(!N(Y)||!Y.is("br")),Y=Y&&N(Y)&&v.$block[Y.getName()]),-1!=ad||S||(ad=X),S||(U=X),W.push({isElement:1,isLineBreak:ac,isBlock:Z.isBlockBoundary(),hasBlockSibling:Y,node:Z,name:T,allowed:S}),Y=ac=0)):W.push({isElement:0,node:Z,allowed:1})}-1<ad&&(W[ad].firstNotAllowed=1);-1<U&&(W[U].lastNotAllowed=1);return W}function E(U,T){var S=[],t=U.getChildren(),R=t.count(),q,P=0,m=v[T],Q=!U.is(v.$inline)||U.is("br");for(Q&&S.push(" ");P<R;P++){q=t.getItem(P),N(q)&&!q.is(m)?S=S.concat(E(q,T)):S.push(q)}Q&&S.push(" ");return S}function C(m){return N(m.startContainer)&&m.startContainer.getChild(m.startOffset-1)}function A(m){return m&&N(m)&&(m.is(v.$removeEmpty)||m.is("a")&&!m.isBlockBoundary())}function l(m,S,Q,P){var q=m.clone(),t,R;q.setEndAt(S,CKEDITOR.POSITION_BEFORE_END);(t=(new CKEDITOR.dom.walker(q)).next())&&N(t)&&y[t.getName()]&&(R=t.getPrevious())&&N(R)&&!R.getParent().equals(m.startContainer)&&Q.contains(R)&&P.contains(t)&&t.isIdentical(R)&&(t.moveChildren(R),t.remove(),l(m,S,Q,P))}function z(m,Q){function P(R,S){if(S.isBlock&&S.isElement&&!S.node.is("br")&&N(R)&&R.is("br")){return R.remove(),1}}var t=Q.endContainer.getChild(Q.endOffset),q=Q.endContainer.getChild(Q.endOffset-1);t&&P(t,m[m.length-1]);q&&P(q,m[0])&&(Q.setEnd(Q.endContainer,Q.endOffset-1),Q.collapse())}var v=CKEDITOR.dtd,y={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},O={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},u=CKEDITOR.tools.extend({},v.$inline);delete u.br;return function(au,al,ak,aj){var am=au.editor,ah=!1;"unfiltered_html"==al&&(al="html",ah=!0);if(!aj.checkReadOnly()){var ae=(new CKEDITOR.dom.elementPath(aj.startContainer,aj.root)).blockLimit||aj.root;au={type:al,dontFilter:ah,editable:au,editor:am,range:aj,blockLimit:ae,mergeCandidates:[],zombies:[]};al=au.range;aj=au.mergeCandidates;var af,ao;"text"==au.type&&al.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(af=CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",al.document),al.insertNode(af),al.setStartAfter(af));ah=new CKEDITOR.dom.elementPath(al.startContainer);au.endPath=ae=new CKEDITOR.dom.elementPath(al.endContainer);if(!al.collapsed){var am=ae.block||ae.blockLimit,ai=al.getCommonAncestor();am&&!am.equals(ai)&&!am.contains(ai)&&al.checkEndOfBlock()&&au.zombies.push(am);al.deleteContents()}for(;(ao=C(al))&&N(ao)&&ao.isBlockBoundary()&&ah.contains(ao);){al.moveToPosition(ao,CKEDITOR.POSITION_BEFORE_END)}l(al,au.blockLimit,ah,ae);af&&(al.setEndBefore(af),al.collapse(),af.remove());af=al.startPath();if(am=af.contains(A,!1,1)){al.splitElement(am),au.inlineStylesRoot=am,au.inlineStylesPeak=af.lastElement}af=al.createBookmark();(am=af.startNode.getPrevious(J))&&N(am)&&A(am)&&aj.push(am);(am=af.startNode.getNext(J))&&N(am)&&A(am)&&aj.push(am);for(am=af.startNode;(am=am.getParent())&&A(am);){aj.push(am)}al.moveToBookmark(af);if(af=ak){af=au.range;if("text"==au.type&&au.inlineStylesRoot){ao=au.inlineStylesPeak;al=ao.getDocument().createText("{cke-peak}");for(aj=au.inlineStylesRoot.getParent();!ao.equals(aj);){al=al.appendTo(ao.clone()),ao=ao.getParent()}ak=al.getOuterHtml().split("{cke-peak}").join(ak)}ao=au.blockLimit.getName();if(/^\s+|\s+$/.test(ak)&&"span" in CKEDITOR.dtd[ao]){var ar='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';ak=ar+ak+ar}ak=au.editor.dataProcessor.toHtml(ak,{context:null,fixForBody:!1,protectedWhitespaces:!!ar,dontFilter:au.dontFilter,filter:au.editor.activeFilter,enterMode:au.editor.activeEnterMode});ao=af.document.createElement("body");ao.setHtml(ak);ar&&(ao.getFirst().remove(),ao.getLast().remove());if((ar=af.startPath().block)&&(1!=ar.getChildCount()||!ar.getBogus())){N:{var ag;if(1==ao.getChildCount()&&N(ag=ao.getFirst())&&ag.is(O)&&!ag.hasAttribute("contenteditable")){ar=ag.getElementsByTag("*");af=0;for(aj=ar.count();af<aj;af++){if(al=ar.getItem(af),!al.is(u)){break N}}ag.moveChildren(ag.getParent(1));ag.remove()}}}au.dataWrapper=ao;af=ak}if(af){ag=au.range;af=ag.document;var an;ao=au.blockLimit;aj=0;var aq,ar=[],ad,ap;ak=am=0;var W,P;al=ag.startContainer;var ah=au.endPath.elements[0],t,ae=ah.getPosition(al),ai=!!ah.getCommonAncestor(al)&&ae!=CKEDITOR.POSITION_IDENTICAL&&!(ae&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);al=M(au.dataWrapper,au);for(z(al,ag);aj<al.length;aj++){ae=al[aj];if(an=ae.isLineBreak){an=ag;W=ao;var T=void 0,ab=void 0;ae.hasBlockSibling?an=1:(T=an.startContainer.getAscendant(v.$block,1))&&T.is({div:1,p:1})?(ab=T.getPosition(W),ab==CKEDITOR.POSITION_IDENTICAL||ab==CKEDITOR.POSITION_CONTAINS?an=0:(W=an.splitElement(T),an.moveToPosition(W,CKEDITOR.POSITION_AFTER_START),an=1)):an=0}if(an){ak=0<aj}else{an=ag.startPath();!ae.isBlock&&D(au.editor,an.block,an.blockLimit)&&(ap=B(au.editor))&&(ap=af.createElement(ap),ap.appendBogus(),ag.insertNode(ap),CKEDITOR.env.needsBrFiller&&(aq=ap.getBogus())&&aq.remove(),ag.moveToPosition(ap,CKEDITOR.POSITION_BEFORE_END));if((an=ag.startPath().block)&&!an.equals(ad)){if(aq=an.getBogus()){aq.remove(),ar.push(an)}ad=an}ae.firstNotAllowed&&(am=1);if(am&&ae.isElement){an=ag.startContainer;for(W=null;an&&!v[an.getName()][ae.name];){if(an.equals(ao)){an=null;break}W=an;an=an.getParent()}if(an){W&&(P=ag.splitElement(W),au.zombies.push(P),au.zombies.push(W))}else{W=ao.getName();t=!aj;an=aj==al.length-1;W=E(ae.node,W);for(var T=[],ab=W.length,at=0,ac=void 0,q=0,S=-1;at<ab;at++){ac=W[at]," "==ac?(q||t&&!at||(T.push(new CKEDITOR.dom.text(" ")),S=T.length),q=1):(T.push(ac),q=0)}an&&S==T.length&&T.pop();t=T}}if(t){for(;an=t.pop();){ag.insertNode(an)}t=0}else{ag.insertNode(ae.node)}ae.lastNotAllowed&&aj<al.length-1&&((P=ai?ah:P)&&ag.setEndAt(P,CKEDITOR.POSITION_AFTER_START),am=0);ag.collapse()}}1!=al.length?aq=!1:(aq=al[0],aq=aq.isElement&&"false"==aq.node.getAttribute("contenteditable"));aq&&(ak=!0,an=al[0].node,ag.setStartAt(an,CKEDITOR.POSITION_BEFORE_START),ag.setEndAt(an,CKEDITOR.POSITION_AFTER_END));au.dontMoveCaret=ak;au.bogusNeededBlocks=ar}aq=au.range;var aa;P=au.bogusNeededBlocks;for(t=aq.createBookmark();ad=au.zombies.pop();){ad.getParent()&&(ap=aq.clone(),ap.moveToElementEditStart(ad),ap.removeEmptyBlocksAtEnd())}if(P){for(;ad=P.pop();){CKEDITOR.env.needsBrFiller?ad.appendBogus():ad.append(aq.document.createText("Â "))}}for(;ad=au.mergeCandidates.pop();){ad.mergeSiblings()}aq.moveToBookmark(t);if(!au.dontMoveCaret){for(ad=C(aq);ad&&N(ad)&&!ad.is(v.$empty);){if(ad.isBlockBoundary()){aq.moveToPosition(ad,CKEDITOR.POSITION_BEFORE_END)}else{if(A(ad)&&ad.getHtml().match(/(\s|&nbsp;)$/g)){aa=null;break}aa=aq.clone();aa.moveToPosition(ad,CKEDITOR.POSITION_BEFORE_END)}ad=ad.getLast(J)}aa&&aq.moveToRange(aa)}}}}(),j=function(){function m(t){t=new CKEDITOR.dom.walker(t);t.guard=function(v,u){if(u){return !1}if(v.type==CKEDITOR.NODE_ELEMENT){return v.is(CKEDITOR.dtd.$tableContent)}};t.evaluator=function(u){return u.type==CKEDITOR.NODE_ELEMENT};return t}function l(t,v,u){v=t.getDocument().createElement(v);t.append(v,u);return v}function q(u){var t=u.count(),v;for(t;0<t--;){v=u.getItem(t),CKEDITOR.tools.trim(v.getHtml())||(v.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&v.getChildCount()&&v.getFirst().remove())}}return function(y){var v=y.startContainer,u=v.getAscendant("table",1),t=!1;q(u.getElementsByTag("td"));q(u.getElementsByTag("th"));u=y.clone();u.setStart(v,0);u=m(u).lastBackward();u||(u=y.clone(),u.setEndAt(v,CKEDITOR.POSITION_BEFORE_END),u=m(u).lastForward(),t=!0);u||(u=v);u.is("table")?(y.setStartAt(u,CKEDITOR.POSITION_BEFORE_START),y.collapse(!0),u.remove()):(u.is({tbody:1,thead:1,tfoot:1})&&(u=l(u,"tr",t)),u.is("tr")&&(u=l(u,u.getParent().is("thead")?"th":"td",t)),(v=u.getBogus())&&v.remove(),y.moveToPosition(u,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),o={eol:{detect:function(m,l){var y=m.range,v=y.clone(),u=y.clone(),t=new CKEDITOR.dom.elementPath(y.startContainer,l),q=new CKEDITOR.dom.elementPath(y.endContainer,l);v.collapse(1);u.collapse();t.block&&v.checkBoundaryOfElement(t.block,CKEDITOR.END)&&(y.setStartAfter(t.block),m.prependEolBr=1);q.block&&u.checkBoundaryOfElement(q.block,CKEDITOR.START)&&(y.setEndBefore(q.block),m.appendEolBr=1)},fix:function(m,l){var t=l.getDocument(),q;m.appendEolBr&&(q=this.createEolBr(t),m.fragment.append(q));!m.prependEolBr||q&&!q.getPrevious()||m.fragment.append(this.createEolBr(t),1)},createEolBr:function(l){return l.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(m){var l=m.range.getBoundaryNodes(),q=l.startNode,l=l.endNode;!l||!n(l)||q&&q.equals(l)||m.range.setEndBefore(l)}},tree:{rebuild:function(C,A){var z=C.range,y=z.getCommonAncestor(),v=new CKEDITOR.dom.elementPath(y,A),u=new CKEDITOR.dom.elementPath(z.startContainer,A),z=new CKEDITOR.dom.elementPath(z.endContainer,A),q;y.type==CKEDITOR.NODE_TEXT&&(y=y.getParent());if(v.blockLimit.is({tr:1,table:1})){var t=v.contains("table").getParent();q=function(l){return !l.equals(t)}}else{if(v.block&&v.block.is(CKEDITOR.dtd.$listItem)&&(u=u.contains(CKEDITOR.dtd.$list),z=z.contains(CKEDITOR.dtd.$list),!u.equals(z))){var m=v.contains(CKEDITOR.dtd.$list).getParent();q=function(l){return !l.equals(m)}}}q||(q=function(l){return !l.equals(v.block)&&!l.equals(v.blockLimit)});this.rebuildFragment(C,A,y,q)},rebuildFragment:function(m,l,u,t){for(var q;u&&!u.equals(l)&&t(u);){q=u.clone(0,1),m.fragment.appendTo(q),m.fragment=q,u=u.getParent()}}},cell:{shrink:function(m){m=m.range;var l=m.startContainer,u=m.endContainer,t=m.startOffset,q=m.endOffset;l.type==CKEDITOR.NODE_ELEMENT&&l.equals(u)&&l.is("tr")&&++t==q&&m.shrink(CKEDITOR.SHRINK_TEXT)}}},k=function(){function m(t,v){var u=t.getParent();if(u.is(CKEDITOR.dtd.$inline)){t[v?"insertBefore":"insertAfter"](u)}}function l(y,v,u){m(v);m(u,1);for(var t;t=u.getNext();){t.insertAfter(v),v=t}w(y)&&y.remove()}function q(u,t){var v=new CKEDITOR.dom.range(u);v.setStartAfter(t.startNode);v.setEndBefore(t.endNode);return v}return{list:{detectMerge:function(u,t){var C=q(t,u.bookmark),A=C.startPath(),z=C.endPath(),v=A.contains(CKEDITOR.dtd.$list),y=z.contains(CKEDITOR.dtd.$list);u.mergeList=v&&y&&v.getParent().equals(y.getParent())&&!v.equals(y);u.mergeListItems=A.block&&z.block&&A.block.is(CKEDITOR.dtd.$listItem)&&z.block.is(CKEDITOR.dtd.$listItem);if(u.mergeList||u.mergeListItems){C=C.clone(),C.setStartBefore(u.bookmark.startNode),C.setEndAfter(u.bookmark.endNode),u.mergeListBookmark=C.createBookmark()}},merge:function(t,E){if(t.mergeListBookmark){var C=t.mergeListBookmark.startNode,A=t.mergeListBookmark.endNode,y=new CKEDITOR.dom.elementPath(C,E),u=new CKEDITOR.dom.elementPath(A,E);if(t.mergeList){var z=y.contains(CKEDITOR.dtd.$list),v=u.contains(CKEDITOR.dtd.$list);z.equals(v)||(v.moveChildren(z),v.remove())}t.mergeListItems&&(y=y.contains(CKEDITOR.dtd.$listItem),u=u.contains(CKEDITOR.dtd.$listItem),y.equals(u)||l(u,C,A));C.remove();A.remove()}}},block:{detectMerge:function(u,t){if(!u.tableContentsRanges&&!u.mergeListBookmark){var v=new CKEDITOR.dom.range(t);v.setStartBefore(u.bookmark.startNode);v.setEndAfter(u.bookmark.endNode);u.mergeBlockBookmark=v.createBookmark()}},merge:function(t,A){if(t.mergeBlockBookmark&&!t.purgeTableBookmark){var z=t.mergeBlockBookmark.startNode,y=t.mergeBlockBookmark.endNode,v=new CKEDITOR.dom.elementPath(z,A),u=new CKEDITOR.dom.elementPath(y,A),v=v.block,u=u.block;v&&u&&!v.equals(u)&&l(u,z,y);z.remove();y.remove()}}},table:function(){function u(N){var E=[],A,y=new CKEDITOR.dom.walker(N),z=N.startPath().contains(v),M=N.endPath().contains(v),C={};y.guard=function(O,P){if(O.type==CKEDITOR.NODE_ELEMENT){var Q="visited_"+(P?"out":"in");if(O.getCustomData(Q)){return}CKEDITOR.dom.element.setMarker(C,O,Q,1)}if(P&&z&&O.equals(z)){A=N.clone(),A.setEndAt(z,CKEDITOR.POSITION_BEFORE_END),E.push(A)}else{if(!P&&M&&O.equals(M)){A=N.clone(),A.setStartAt(M,CKEDITOR.POSITION_AFTER_START),E.push(A)}else{if(Q=!P){Q=O.type==CKEDITOR.NODE_ELEMENT&&O.is(v)&&(!z||t(O,z))&&(!M||t(O,M))}Q&&(A=N.clone(),A.selectNodeContents(O),E.push(A))}}};y.lastForward();CKEDITOR.dom.element.clearAllMarkers(C);return E}function t(y,C){var A=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,z=y.getPosition(C);return z===CKEDITOR.POSITION_IDENTICAL?!1:0===(z&A)}var v={td:1,th:1,caption:1};return{detectPurge:function(z){var y=z.range,E=y.clone();E.enlarge(CKEDITOR.ENLARGE_ELEMENT);var E=new CKEDITOR.dom.walker(E),C=0;E.evaluator=function(M){M.type==CKEDITOR.NODE_ELEMENT&&M.is(v)&&++C};E.checkForward();if(1<C){var E=y.startPath().contains("table"),A=y.endPath().contains("table");E&&A&&y.checkBoundaryOfElement(E,CKEDITOR.START)&&y.checkBoundaryOfElement(A,CKEDITOR.END)&&(y=z.range.clone(),y.setStartBefore(E),y.setEndAfter(A),z.purgeTableBookmark=y.createBookmark())}},detectRanges:function(N,M){var A=q(M,N.bookmark),C=A.clone(),E,z,y=A.getCommonAncestor();y.is(CKEDITOR.dtd.$tableContent)&&!y.is(v)&&(y=y.getAscendant("table",!0));z=y;y=new CKEDITOR.dom.elementPath(A.startContainer,z);z=new CKEDITOR.dom.elementPath(A.endContainer,z);y=y.contains("table");z=z.contains("table");if(y||z){y&&z&&t(y,z)?(N.tableSurroundingRange=C,C.setStartAt(y,CKEDITOR.POSITION_AFTER_END),C.setEndAt(z,CKEDITOR.POSITION_BEFORE_START),C=A.clone(),C.setEndAt(y,CKEDITOR.POSITION_AFTER_END),E=A.clone(),E.setStartAt(z,CKEDITOR.POSITION_BEFORE_START),E=u(C).concat(u(E))):y?z||(N.tableSurroundingRange=C,C.setStartAt(y,CKEDITOR.POSITION_AFTER_END),A.setEndAt(y,CKEDITOR.POSITION_AFTER_END)):(N.tableSurroundingRange=C,C.setEndAt(z,CKEDITOR.POSITION_BEFORE_START),A.setStartAt(z,CKEDITOR.POSITION_AFTER_START)),N.tableContentsRanges=E?E:u(A)}},deleteRanges:function(z){for(var y;y=z.tableContentsRanges.pop();){y.extractContents(),w(y.startContainer)&&y.startContainer.appendBogus()}z.tableSurroundingRange&&z.tableSurroundingRange.extractContents()},purge:function(z){if(z.purgeTableBookmark){var y=z.doc,A=z.range.clone(),y=y.createElement("p");y.insertBefore(z.purgeTableBookmark.startNode);A.moveToBookmark(z.purgeTableBookmark);A.deleteContents();z.range.moveToPosition(y,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(t){return !(t.range.startPath().contains(CKEDITOR.dtd.$listItem)&&t.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(t){t.startContainer.getDtd()["#"]||t.moveToClosestEditablePosition(null,!0)},autoParagraph:function(u,t){var y=t.startPath(),v;D(u,y.block,y.blockLimit)&&(v=B(u))&&(v=t.document.createElement(v),v.appendBogus(),t.insertNode(v),t.moveToPosition(v,CKEDITOR.POSITION_AFTER_START))}}}()})();(function(){function N(){var m=this._.fakeSelection,l;m&&(l=this.getSelection(1),l&&l.isHidden()||(m.reset(),m=0));if(!m&&(m=l||this.getSelection(1),!m||m.getType()==CKEDITOR.SELECTION_NONE)){return}this.fire("selectionCheck",m);l=this.elementPath();l.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=l,this.fire("selectionChange",{selection:m,path:l}))}function K(){s=!0;o||(M.call(this),o=CKEDITOR.tools.setTimeout(M,200,this))}function M(){o=null;s&&(CKEDITOR.tools.setTimeout(N,0,this),s=!1)}function L(l){return D(l)||l.type==CKEDITOR.NODE_ELEMENT&&!l.is(CKEDITOR.dtd.$empty)?!0:!1}function J(m){function l(x,v){return x&&x.type!=CKEDITOR.NODE_TEXT?m.clone()["moveToElementEdit"+(v?"End":"Start")](x):!1}if(!(m.root instanceof CKEDITOR.editable)){return !1}var u=m.startContainer,t=m.getPreviousNode(L,null,u),q=m.getNextNode(L,null,u);return l(t)||l(q,1)||!(t||q||u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()&&u.getBogus())?!0:!1}function H(l){return l.getCustomData("cke-fillingChar")}function G(m,l){var v=m&&m.removeCustomData("cke-fillingChar");if(v){if(!1!==l){var u,t=m.getDocument().getSelection().getNative(),q=t&&"None"!=t.type&&t.getRangeAt(0);1<v.getLength()&&q&&q.intersectsNode(v.$)&&(u=w(t),q=t.focusNode==v.$&&0<t.focusOffset,t.anchorNode==v.$&&0<t.anchorOffset&&u[0].offset--,q&&u[1].offset--)}v.setText(F(v.getText()));u&&r(m.getDocument().$,u)}}function F(l){return l.replace(/\u200B( )?/g,function(m){return m[1]?"Â ":""})}function w(l){return[{node:l.anchorNode,offset:l.anchorOffset},{node:l.focusNode,offset:l.focusOffset}]}function r(m,l){var t=m.getSelection(),q=m.createRange();q.setStart(l[0].node,l[0].offset);q.collapse(!0);t.removeAllRanges();t.addRange(q);t.extend(l[1].node,l[1].offset)}function I(m){var l=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'"\x3e\x26nbsp;\x3c/div\x3e',m.document);m.fire("lockSnapshot");m.editable().append(l);var u=m.getSelection(1),t=m.createRange(),q=u.root.on("selectionchange",function(v){v.cancel()},null,null,0);t.setStartAt(l,CKEDITOR.POSITION_AFTER_START);t.setEndAt(l,CKEDITOR.POSITION_BEFORE_END);u.selectRanges([t]);q.removeListener();m.fire("unlockSnapshot");m._.hiddenSelectionContainer=l}function i(m){var l={37:1,39:1,8:1,46:1};return function(v){var u=v.data.getKeystroke();if(l[u]){var t=m.getSelection().getRanges(),q=t[0];1==t.length&&q.collapsed&&(u=q[38>u?"getPreviousEditableNode":"getNextEditableNode"]())&&u.type==CKEDITOR.NODE_ELEMENT&&"false"==u.getAttribute("contenteditable")&&(m.getSelection().fake(u),v.data.preventDefault(),v.cancel())}}}function B(m){for(var l=0;l<m.length;l++){var y=m[l];y.getCommonAncestor().isReadOnly()&&m.splice(l,1);if(!y.collapsed){if(y.startContainer.isReadOnly()){for(var x=y.startContainer,v;x&&!((v=x.type==CKEDITOR.NODE_ELEMENT)&&x.is("body")||!x.isReadOnly());){v&&"false"==x.getAttribute("contentEditable")&&y.setStartAfter(x),x=x.getParent()}}x=y.startContainer;v=y.endContainer;var u=y.startOffset,q=y.endOffset,t=y.clone();x&&x.type==CKEDITOR.NODE_TEXT&&(u>=x.getLength()?t.setStartAfter(x):t.setStartBefore(x));v&&v.type==CKEDITOR.NODE_TEXT&&(q?t.setEndAfter(v):t.setEndBefore(v));x=new CKEDITOR.dom.walker(t);x.evaluator=function(A){if(A.type==CKEDITOR.NODE_ELEMENT&&A.isReadOnly()){var z=y.clone();y.setEndBefore(A);y.collapsed&&m.splice(l--,1);A.getPosition(t.endContainer)&CKEDITOR.POSITION_CONTAINS||(z.setStartAfter(A),z.collapsed||m.splice(l+1,0,z));return !0}return !1};x.next()}}return m}var o,s,D=CKEDITOR.dom.walker.invisible(1),j=function(){function m(u){return function(v){var x=v.editor.createRange();x.moveToClosestEditablePosition(v.selected,u)&&v.editor.getSelection().selectRanges([x]);return !1}}function l(u){return function(v){var z=v.editor,y=z.createRange(),x;(x=y.moveToClosestEditablePosition(v.selected,u))||(x=y.moveToClosestEditablePosition(v.selected,!u));x&&z.getSelection().selectRanges([y]);z.fire("saveSnapshot");v.selected.remove();x||(y.moveToElementEditablePosition(z.editable()),z.getSelection().selectRanges([y]));z.fire("saveSnapshot");return !1}}var t=m(),q=m(1);return{37:t,38:t,39:q,40:q,8:l(),46:l(1)}}();CKEDITOR.on("instanceCreated",function(l){function q(){var t=m.getSelection();t&&t.removeAllRanges()}var m=l.editor;m.on("contentDom",function(){function C(){P=new CKEDITOR.dom.selection(m.getSelection());P.lock()}function A(){x.removeListener("mouseup",A);v.removeListener("mouseup",A);var S=CKEDITOR.document.$.selection,R=S.createRange();"None"!=S.type&&R.parentElement().ownerDocument==z.$&&R.select()}var z=m.document,x=CKEDITOR.document,y=m.editable(),t=z.getBody(),v=z.getDocumentElement(),u=y.isInline(),O,P;CKEDITOR.env.gecko&&y.attachListener(y,"focus",function(R){R.removeListener();0!==O&&(R=m.getSelection().getNative())&&R.isCollapsed&&R.anchorNode==y.$&&(R=m.createRange(),R.moveToElementEditStart(y),R.select())},null,null,-2);y.attachListener(y,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){O&&CKEDITOR.env.webkit&&(O=m._.previousActive&&m._.previousActive.equals(z.getActive()));m.unlockSelection(O);O=0},null,null,-1);y.attachListener(y,"mousedown",function(){O=0});if(CKEDITOR.env.ie||u){p?y.attachListener(y,"beforedeactivate",C,null,null,-1):y.attachListener(m,"selectionCheck",C,null,null,-1),y.attachListener(y,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){m.lockSelection(P);O=1},null,null,-1),y.attachListener(y,"mousedown",function(){O=0})}if(CKEDITOR.env.ie&&!u){var E;y.attachListener(y,"mousedown",function(R){2==R.data.$.button&&((R=m.document.getSelection())&&R.getType()!=CKEDITOR.SELECTION_NONE||(E=m.window.getScrollPosition()))});y.attachListener(y,"mouseup",function(R){2==R.data.$.button&&E&&(m.document.$.documentElement.scrollLeft=E.x,m.document.$.documentElement.scrollTop=E.y);E=null});if("BackCompat"!=z.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){v.on("mousedown",function(S){function R(X){X=X.data.$;if(V){var Z=t.$.createTextRange();try{Z.moveToPoint(X.clientX,X.clientY)}catch(Y){}V.setEndPoint(0>T.compareEndPoints("StartToStart",Z)?"EndToEnd":"StartToStart",Z);V.select()}}function W(){v.removeListener("mousemove",R);x.removeListener("mouseup",W);v.removeListener("mouseup",W);V.select()}S=S.data;if(S.getTarget().is("html")&&S.$.y<v.$.clientHeight&&S.$.x<v.$.clientWidth){var V=t.$.createTextRange();try{V.moveToPoint(S.$.clientX,S.$.clientY)}catch(U){}var T=V.duplicate();v.on("mousemove",R);x.on("mouseup",W);v.on("mouseup",W)}})}if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version){v.on("mousedown",function(R){R.data.getTarget().is("html")&&(x.on("mouseup",A),v.on("mouseup",A))})}}}y.attachListener(y,"selectionchange",N,m);y.attachListener(y,"keyup",K,m);y.attachListener(y,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){m.forceNextSelectionCheck();m.selectionChange(1)});if(u&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var Q;y.attachListener(y,"mousedown",function(){Q=1});y.attachListener(z.getDocumentElement(),"mouseup",function(){Q&&K.call(m);Q=0})}else{y.attachListener(CKEDITOR.env.ie?y:z.getDocumentElement(),"mouseup",K,m)}CKEDITOR.env.webkit&&y.attachListener(z,"keydown",function(R){switch(R.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:G(y)}},null,null,-1);y.attachListener(y,"keydown",i(m),null,null,-1)});m.on("setData",function(){m.unlockSelection();CKEDITOR.env.webkit&&q()});m.on("contentDomUnload",function(){m.unlockSelection()});if(CKEDITOR.env.ie9Compat){m.on("beforeDestroy",q,null,null,9)}m.on("dataReady",function(){delete m._.fakeSelection;delete m._.hiddenSelectionContainer;m.selectionChange(1)});m.on("loadSnapshot",function(){var u=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=m.editable().getLast(u);t&&t.hasAttribute("data-cke-hidden-sel")&&(t.remove(),CKEDITOR.env.gecko&&(u=m.editable().getFirst(u))&&u.is("br")&&u.getAttribute("_moz_editor_bogus_node")&&u.remove())},null,null,100);m.on("key",function(u){if("wysiwyg"==m.mode){var t=m.getSelection();if(t.isFake){var v=j[u.data.keyCode];if(v){return v({editor:m,selected:t.getSelectedElement(),selection:t,keyEvent:u})}}}})});CKEDITOR.on("instanceReady",function(m){function l(){var x=u.editable();if(x&&(x=H(x))){var y=u.document.$.getSelection();"None"==y.type||y.anchorNode!=x.$&&y.focusNode!=x.$||(q=w(y));t=x.getText();x.setText(F(t))}}function v(){var x=u.editable();x&&(x=H(x))&&(x.setText(t),q&&(r(u.document.$,q),q=null))}var u=m.editor,t,q;CKEDITOR.env.webkit&&(u.on("selectionChange",function(){var y=u.editable(),x=H(y);x&&(x.getCustomData("ready")?G(y):x.setCustomData("ready",1))},null,null,-1),u.on("beforeSetMode",function(){G(u.editable())},null,null,-1),u.on("beforeUndoImage",l),u.on("afterUndoImage",v),u.on("beforeGetData",l,null,null,0),u.on("getData",v))});CKEDITOR.editor.prototype.selectionChange=function(l){(l?N:K).call(this)};CKEDITOR.editor.prototype.getSelection=function(l){return !this._.savedSelection&&!this._.fakeSelection||l?(l=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(l):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(l){l=l||this.getSelection(1);return l.getType()!=CKEDITOR.SELECTION_NONE?(!l.isLocked&&l.lock(),this._.savedSelection=l,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(m){var l=this._.savedSelection;return l?(l.unlock(m),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var l=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);l.selectRanges([this]);return l};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;var p="function"!=typeof window.getSelection,n=1;CKEDITOR.dom.selection=function(m){if(m instanceof CKEDITOR.dom.selection){var l=m;m=m.root}var v=m instanceof CKEDITOR.dom.element;this.rev=l?l.rev:n++;this.document=m instanceof CKEDITOR.dom.document?m:m.getDocument();this.root=v?m:this.document.getBody();this.isLocked=0;this._={cache:{}};if(l){return CKEDITOR.tools.extend(this._.cache,l._.cache),this.isFake=l.isFake,this.isLocked=l.isLocked,this}m=this.getNative();var u,t;if(m){if(m.getRangeAt){u=(t=m.rangeCount&&m.getRangeAt(0))&&new CKEDITOR.dom.node(t.commonAncestorContainer)}else{try{t=m.createRange()}catch(q){}u=t&&CKEDITOR.dom.element.get(t.item&&t.item(0)||t.parentElement())}}if(!u||u.type!=CKEDITOR.NODE_ELEMENT&&u.type!=CKEDITOR.NODE_TEXT||!this.root.equals(u)&&!this.root.contains(u)){this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList}return this};var k={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=p?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:p?function(){var m=this._.cache;if(m.type){return m.type}var l=CKEDITOR.SELECTION_NONE;try{var u=this.getNative(),t=u.type;"Text"==t&&(l=CKEDITOR.SELECTION_TEXT);"Control"==t&&(l=CKEDITOR.SELECTION_ELEMENT);u.createRange().parentElement()&&(l=CKEDITOR.SELECTION_TEXT)}catch(q){}return m.type=l}:function(){var m=this._.cache;if(m.type){return m.type}var l=CKEDITOR.SELECTION_TEXT,t=this.getNative();if(!t||!t.rangeCount){l=CKEDITOR.SELECTION_NONE}else{if(1==t.rangeCount){var t=t.getRangeAt(0),q=t.startContainer;q==t.endContainer&&1==q.nodeType&&1==t.endOffset-t.startOffset&&k[q.childNodes[t.startOffset].nodeName.toLowerCase()]&&(l=CKEDITOR.SELECTION_ELEMENT)}}return m.type=l},getRanges:function(){var l=p?function(){function q(t){return(new CKEDITOR.dom.node(t)).getIndex()}var m=function(Q,P){Q=Q.duplicate();Q.collapse(P);var O=Q.parentElement();if(!O.hasChildNodes()){return{container:O,offset:0}}for(var E=O.children,C,y,z=Q.duplicate(),A=0,R=E.length-1,x=-1,u,v;A<=R;){if(x=Math.floor((A+R)/2),C=E[x],z.moveToElementText(C),u=z.compareEndPoints("StartToStart",Q),0<u){R=x-1}else{if(0>u){A=x+1}else{return{container:O,offset:q(C)}}}}if(-1==x||x==E.length-1&&0>u){z.moveToElementText(O);z.setEndPoint("StartToStart",Q);z=z.text.replace(/(\r\n|\r)/g,"\n").length;E=O.childNodes;if(!z){return C=E[E.length-1],C.nodeType!=CKEDITOR.NODE_TEXT?{container:O,offset:E.length}:{container:C,offset:C.nodeValue.length}}for(O=E.length;0<z&&0<O;){y=E[--O],y.nodeType==CKEDITOR.NODE_TEXT&&(v=y,z-=y.nodeValue.length)}return{container:v,offset:-z}}z.collapse(0<u?!0:!1);z.setEndPoint(0<u?"StartToStart":"EndToStart",Q);z=z.text.replace(/(\r\n|\r)/g,"\n").length;if(!z){return{container:O,offset:q(C)+(0<u?0:1)}}for(;0<z;){try{y=C[0<u?"previousSibling":"nextSibling"],y.nodeType==CKEDITOR.NODE_TEXT&&(z-=y.nodeValue.length,v=y),C=y}catch(S){return{container:O,offset:q(C)}}}return{container:v,offset:0<u?-z:v.nodeValue.length+z}};return function(){var t=this.getNative(),A=t&&t.createRange(),z=this.getType();if(!t){return[]}if(z==CKEDITOR.SELECTION_TEXT){return t=new CKEDITOR.dom.range(this.root),z=m(A,!0),t.setStart(new CKEDITOR.dom.node(z.container),z.offset),z=m(A),t.setEnd(new CKEDITOR.dom.node(z.container),z.offset),t.endContainer.getPosition(t.startContainer)&CKEDITOR.POSITION_PRECEDING&&t.endOffset<=t.startContainer.getIndex()&&t.collapse(),[t]}if(z==CKEDITOR.SELECTION_ELEMENT){for(var z=[],y=0;y<A.length;y++){for(var x=A.item(y),u=x.parentNode,v=0,t=new CKEDITOR.dom.range(this.root);v<u.childNodes.length&&u.childNodes[v]!=x;v++){}t.setStart(new CKEDITOR.dom.node(u),v);t.setEnd(new CKEDITOR.dom.node(u),v+1);z.push(t)}return z}return[]}}():function(){var q=[],m,v=this.getNative();if(!v){return q}for(var u=0;u<v.rangeCount;u++){var t=v.getRangeAt(u);m=new CKEDITOR.dom.range(this.root);m.setStart(new CKEDITOR.dom.node(t.startContainer),t.startOffset);m.setEnd(new CKEDITOR.dom.node(t.endContainer),t.endOffset);q.push(m)}return q};return function(m){var t=this._.cache,q=t.ranges;q||(t.ranges=q=new CKEDITOR.dom.rangeList(l.call(this)));return m?B(new CKEDITOR.dom.rangeList(q.slice())):q}}(),getStartElement:function(){var m=this._.cache;if(void 0!==m.startElement){return m.startElement}var l;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var q=this.getRanges()[0];if(q){if(q.collapsed){l=q.startContainer,l.type!=CKEDITOR.NODE_ELEMENT&&(l=l.getParent())}else{for(q.optimize();l=q.startContainer,q.startOffset==(l.getChildCount?l.getChildCount():l.getLength())&&!l.isBlockBoundary();){q.setStartAfter(l)}l=q.startContainer;if(l.type!=CKEDITOR.NODE_ELEMENT){return l.getParent()}if((l=l.getChild(q.startOffset))&&l.type==CKEDITOR.NODE_ELEMENT){for(q=l.getFirst();q&&q.type==CKEDITOR.NODE_ELEMENT;){l=q,q=q.getFirst()}}else{l=q.startContainer}}l=l.$}}return m.startElement=l?new CKEDITOR.dom.element(l):null},getSelectedElement:function(){var m=this._.cache;if(void 0!==m.selectedElement){return m.selectedElement}var l=this,q=CKEDITOR.tools.tryThese(function(){return l.getNative().createRange().item(0)},function(){for(var t=l.getRanges()[0].clone(),x,v,u=2;u&&!((x=t.getEnclosedNode())&&x.type==CKEDITOR.NODE_ELEMENT&&k[x.getName()]&&(v=x));u--){t.shrink(CKEDITOR.SHRINK_ELEMENT)}return v&&v.$});return m.selectedElement=q?new CKEDITOR.dom.element(q):null},getSelectedText:function(){var m=this._.cache;if(void 0!==m.selectedText){return m.selectedText}var l=this.getNative(),l=p?"Control"==l.type?"":l.createRange().text:l.toString();return m.selectedText=l},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(m){if(this.isLocked){if(m){var l=this.getSelectedElement(),t=!l&&this.getRanges(),q=this.isFake}this.isLocked=0;this.reset();m&&(m=l||t[0]&&t[0].getCommonAncestor())&&m.getAscendant("body",1)&&(q?this.fake(l):l?this.selectElement(l):this.selectRanges(t))}},reset:function(){this._.cache={};this.isFake=0;var m=this.root.editor;if(m&&m._.fakeSelection){if(this.rev==m._.fakeSelection.rev){delete m._.fakeSelection;var l=m._.hiddenSelectionContainer;if(l){var q=m.checkDirty();m.fire("lockSnapshot");l.remove();m.fire("unlockSnapshot");!q&&m.resetDirty()}delete m._.hiddenSelectionContainer}else{CKEDITOR.warn("selection-fake-reset")}}this.rev=n++},selectElement:function(m){var l=new CKEDITOR.dom.range(this.root);l.setStartBefore(m);l.setEndAfter(m);this.selectRanges([l])},selectRanges:function(P){var O=this.root.editor,O=O&&O._.hiddenSelectionContainer;this.reset();if(O){for(var O=this.root,E,C=0;C<P.length;++C){E=P[C],E.endContainer.equals(O)&&(E.endOffset=Math.min(E.endOffset,O.getChildCount()))}}if(P.length){if(this.isLocked){var A=CKEDITOR.document.getActive();this.unlock();this.selectRanges(P);this.lock();A&&!A.equals(this.root)&&A.focus()}else{var z;P:{var y,x;if(1==P.length&&!(x=P[0]).collapsed&&(z=x.getEnclosedNode())&&z.type==CKEDITOR.NODE_ELEMENT&&(x=x.clone(),x.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(y=x.getEnclosedNode())&&y.type==CKEDITOR.NODE_ELEMENT&&(z=y),"false"==z.getAttribute("contenteditable"))){break P}z=void 0}if(z){this.fake(z)}else{if(p){x=CKEDITOR.dom.walker.whitespaces(!0);y=/\ufeff|\u00a0/;O={table:1,tbody:1,tr:1};1<P.length&&(z=P[P.length-1],P[0].setEnd(z.endContainer,z.endOffset));z=P[0];P=z.collapsed;var T,v,S;if((E=z.getEnclosedNode())&&E.type==CKEDITOR.NODE_ELEMENT&&E.getName() in k&&(!E.is("a")||!E.getText())){try{S=E.$.createControlRange();S.addElement(E.$);S.select();return}catch(Q){}}if(z.startContainer.type==CKEDITOR.NODE_ELEMENT&&z.startContainer.getName() in O||z.endContainer.type==CKEDITOR.NODE_ELEMENT&&z.endContainer.getName() in O){z.shrink(CKEDITOR.NODE_ELEMENT,!0),P=z.collapsed}S=z.createBookmark();O=S.startNode;P||(A=S.endNode);S=z.document.$.body.createTextRange();S.moveToElementText(O.$);S.moveStart("character",1);A?(y=z.document.$.body.createTextRange(),y.moveToElementText(A.$),S.setEndPoint("EndToEnd",y),S.moveEnd("character",-1)):(T=O.getNext(x),v=O.hasAscendant("pre"),T=!(T&&T.getText&&T.getText().match(y))&&(v||!O.hasPrevious()||O.getPrevious().is&&O.getPrevious().is("br")),v=z.document.createElement("span"),v.setHtml("\x26#65279;"),v.insertBefore(O),T&&z.document.createText("").insertBefore(O));z.setStartBefore(O);O.remove();P?(T?(S.moveStart("character",-1),S.select(),z.document.$.selection.clear()):S.select(),z.moveToPosition(v,CKEDITOR.POSITION_BEFORE_START),v.remove()):(z.setEndBefore(A),A.remove(),S.select())}else{A=this.getNative();if(!A){return}this.removeAllRanges();for(S=0;S<P.length;S++){if(S<P.length-1&&(T=P[S],v=P[S+1],y=T.clone(),y.setStart(T.endContainer,T.endOffset),y.setEnd(v.startContainer,v.startOffset),!y.collapsed&&(y.shrink(CKEDITOR.NODE_ELEMENT,!0),z=y.getCommonAncestor(),y=y.getEnclosedNode(),z.isReadOnly()||y&&y.isReadOnly()))){v.setStart(T.startContainer,T.startOffset);P.splice(S--,1);continue}z=P[S];v=this.document.$.createRange();z.collapsed&&CKEDITOR.env.webkit&&J(z)&&(T=this.root,G(T,!1),y=T.getDocument().createText(""),T.setCustomData("cke-fillingChar",y),z.insertNode(y),(T=y.getNext())&&!y.getPrevious()&&T.type==CKEDITOR.NODE_ELEMENT&&"br"==T.getName()?(G(this.root),z.moveToPosition(T,CKEDITOR.POSITION_BEFORE_START)):z.moveToPosition(y,CKEDITOR.POSITION_AFTER_END));v.setStart(z.startContainer.$,z.startOffset);try{v.setEnd(z.endContainer.$,z.endOffset)}catch(R){if(0<=R.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")){z.collapse(1),v.setEnd(z.endContainer.$,z.endOffset)}else{throw R}}A.addRange(v)}}this.reset();this.root.fire("selectionchange")}}}},fake:function(m){var l=this.root.editor;this.reset();I(l);var t=this._.cache,q=new CKEDITOR.dom.range(this.root);q.setStartBefore(m);q.setEndAfter(m);t.ranges=new CKEDITOR.dom.rangeList(q);t.selectedElement=t.startElement=m;t.type=CKEDITOR.SELECTION_ELEMENT;t.selectedText=t.nativeSel=null;this.isFake=1;this.rev=n++;l._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var l=this.getCommonAncestor();l&&l.type==CKEDITOR.NODE_TEXT&&(l=l.getParent());return !(!l||!l.data("cke-hidden-sel"))},createBookmarks:function(l){l=this.getRanges().createBookmarks(l);this.isFake&&(l.isFake=1);return l},createBookmarks2:function(l){l=this.getRanges().createBookmarks2(l);this.isFake&&(l.isFake=1);return l},selectBookmarks:function(m){for(var l=[],u,t=0;t<m.length;t++){var q=new CKEDITOR.dom.range(this.root);q.moveToBookmark(m[t]);l.push(q)}m.isFake&&(u=l[0].getEnclosedNode(),u&&u.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),m.isFake=0));m.isFake?this.fake(u):this.selectRanges(l);return this},getCommonAncestor:function(){var l=this.getRanges();return l.length?l[0].startContainer.getCommonAncestor(l[l.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var m=this.getNative();try{m&&m[p?"empty":"removeAllRanges"]()}catch(l){}this.reset()}}}})();"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){function aj(l,k){for(var p,n;(l=l.getParent())&&!l.equals(k);){if(l.getAttribute("data-nostyle")){p=l}else{if(!n){var m=l.getAttribute("contentEditable");"false"==m?p=l:"true"==m&&(n=1)}}}return p}function ag(l,k,n,m){return(l.getPosition(k)|m)==m&&(!n.childRule||n.childRule(l))}function ai(aE){var aD=aE.document;if(aE.collapsed){aD=N(this,aD),aE.insertNode(aD),aE.moveToPosition(aD,CKEDITOR.POSITION_BEFORE_END)}else{var aB=this.element,aC=this._.definition,aA,az=aC.ignoreReadonly,ay=az||aC.includeReadonly;null==ay&&(ay=aE.root.getCustomData("cke_includeReadonly"));var ax=CKEDITOR.dtd[aB];ax||(aA=!0,ax=CKEDITOR.dtd.span);aE.enlarge(CKEDITOR.ENLARGE_INLINE,1);aE.trim();var aw=aE.createBookmark(),ap=aw.startNode,au=aw.endNode,ar=ap,ao;if(!az){var al=aE.getCommonAncestor(),az=aj(ap,al),al=aj(au,al);az&&(ar=az.getNextSourceNode(!0));al&&(au=al)}for(ar.getPosition(au)==CKEDITOR.POSITION_FOLLOWING&&(ar=0);ar;){az=!1;if(ar.equals(au)){ar=null,az=!0}else{var am=ar.type==CKEDITOR.NODE_ELEMENT?ar.getName():null,al=am&&"false"==ar.getAttribute("contentEditable"),S=am&&ar.getAttribute("data-nostyle");if(am&&ar.data("cke-bookmark")){ar=ar.getNextSourceNode(!0);continue}if(al&&ay&&CKEDITOR.dtd.$block[am]){for(var av=ar,ak=af(av),at=void 0,aq=ak.length,an=0,av=aq&&new CKEDITOR.dom.range(av.getDocument());an<aq;++an){var at=ak[an],L=CKEDITOR.filter.instances[at.data("cke-filter")];if(L?L.check(this):1){av.selectNodeContents(at),ai.call(this,av)}}}ak=am?!ax[am]||S?0:al&&!ay?0:ag(ar,au,aC,o):1;if(ak){if(at=ar.getParent(),ak=aC,aq=aB,an=aA,!at||!(at.getDtd()||CKEDITOR.dtd.span)[aq]&&!an||ak.parentRule&&!ak.parentRule(at)){az=!0}else{if(ao||am&&CKEDITOR.dtd.$removeEmpty[am]&&(ar.getPosition(au)|o)!=o||(ao=aE.clone(),ao.setStartBefore(ar)),am=ar.type,am==CKEDITOR.NODE_TEXT||al||am==CKEDITOR.NODE_ELEMENT&&!ar.getChildCount()){for(var am=ar,C;(az=!am.getNext(s))&&(C=am.getParent(),ax[C.getName()])&&ag(C,ap,aC,j);){am=C}ao.setEndAfter(am)}}}else{az=!0}ar=ar.getNextSourceNode(S||al)}if(az&&ao&&!ao.collapsed){for(var az=N(this,aD),al=az.hasAttributes(),S=ao.getCommonAncestor(),am={},ak={},at={},aq={},E,M,aF;az&&S;){if(S.getName()==aB){for(E in aC.attributes){!aq[E]&&(aF=S.getAttribute(M))&&(az.getAttribute(E)==aF?ak[E]=1:aq[E]=1)}for(M in aC.styles){!at[M]&&(aF=S.getStyle(M))&&(az.getStyle(M)==aF?am[M]=1:at[M]=1)}}S=S.getParent()}for(E in ak){az.removeAttribute(E)}for(M in am){az.removeStyle(M)}al&&!az.hasAttributes()&&(az=null);az?(ao.extractContents().appendTo(az),ao.insertNode(az),R.call(this,az),az.mergeSiblings(),CKEDITOR.env.ie||az.$.normalize()):(az=new CKEDITOR.dom.element("span"),ao.extractContents().appendTo(az),ao.insertNode(az),R.call(this,az),az.remove(!0));ao=null}}aE.moveToBookmark(aw);aE.shrink(CKEDITOR.SHRINK_TEXT);aE.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function ah(A){function z(){for(var l=new CKEDITOR.dom.elementPath(x.getParent()),D=new CKEDITOR.dom.elementPath(m.getParent()),C=null,B=null,p=0;p<l.elements.length;p++){var n=l.elements[p];if(n==l.block||n==l.blockLimit){break}k.checkElementRemovable(n,!0)&&(C=n)}for(p=0;p<D.elements.length;p++){n=D.elements[p];if(n==D.block||n==D.blockLimit){break}k.checkElementRemovable(n,!0)&&(B=n)}B&&m.breakParent(B);C&&x.breakParent(C)}A.enlarge(CKEDITOR.ENLARGE_INLINE,1);var y=A.createBookmark(),x=y.startNode;if(A.collapsed){for(var v=new CKEDITOR.dom.elementPath(x.getParent(),A.root),u,r=0,t;r<v.elements.length&&(t=v.elements[r])&&t!=v.block&&t!=v.blockLimit;r++){if(this.checkElementRemovable(t)){var q;A.collapsed&&(A.checkBoundaryOfElement(t,CKEDITOR.END)||(q=A.checkBoundaryOfElement(t,CKEDITOR.START)))?(u=t,u.match=q?"start":"end"):(t.mergeSiblings(),t.is(this.element)?K.call(this,t):Z(t,ab(this)[t.getName()]))}}if(u){t=x;for(r=0;;r++){q=v.elements[r];if(q.equals(u)){break}else{if(q.match){continue}else{q=q.clone()}}q.append(t);t=q}t["start"==u.match?"insertBefore":"insertAfter"](u)}}else{var m=y.endNode,k=this;z();for(v=x;!v.equals(m);){u=v.getNextSourceNode(),v.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(v)&&(v.getName()==this.element?K.call(this,v):Z(v,ab(this)[v.getName()]),u.type==CKEDITOR.NODE_ELEMENT&&u.contains(x)&&(z(),u=x.getNext())),v=u}}A.moveToBookmark(y);A.shrink(CKEDITOR.NODE_ELEMENT,!0)}function af(l){var k=[];l.forEach(function(m){if("true"==m.getAttribute("contenteditable")){return k.push(m),!1}},CKEDITOR.NODE_ELEMENT,!0);return k}function ad(l){var k=l.getEnclosedNode()||l.getCommonAncestor(!1,!0);(l=(new CKEDITOR.dom.elementPath(k,l.root)).contains(this.element,1))&&!l.isReadOnly()&&I(l,this)}function ac(l){var k=l.getCommonAncestor(!0,!0);if(l=(new CKEDITOR.dom.elementPath(k,l.root)).contains(this.element,1)){var k=this._.definition,p=k.attributes;if(p){for(var n in p){l.removeAttribute(n,p[n])}}if(k.styles){for(var m in k.styles){k.styles.hasOwnProperty(m)&&l.removeStyle(m)}}}}function aa(l){var k=l.createBookmark(!0),q=l.createIterator();q.enforceRealBlocks=!0;this._.enterMode&&(q.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var p,n=l.document,m;p=q.getNextParagraph();){!p.isReadOnly()&&(q.activeFilter?q.activeFilter.check(this):1)&&(m=N(this,n,p),O(p,m))}l.moveToBookmark(k)}function V(l){var k=l.createBookmark(1),p=l.createIterator();p.enforceRealBlocks=!0;p.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var n,m;n=p.getNextParagraph();){this.checkElementRemovable(n)&&(n.is("pre")?((m=this._.enterMode==CKEDITOR.ENTER_BR?null:l.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&n.copyAttributes(m),O(n,m)):K.call(this,n))}l.moveToBookmark(k)}function O(m,l){var u=!l;u&&(l=m.getDocument().createElement("div"),m.copyAttributes(l));var t=l&&l.is("pre"),r=m.is("pre"),q=!t&&r;if(t&&!r){r=l;(q=m.getBogus())&&q.remove();q=m.getHtml();q=w(q,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");q=q.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");q=q.replace(/([ \t\n\r]+|&nbsp;)/g," ");q=q.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var p=m.getDocument().createElement("div");p.append(r);r.$.outerHTML="\x3cpre\x3e"+q+"\x3c/pre\x3e";r.copyAttributes(p.getFirst());r=p.getFirst().remove()}else{r.setHtml(q)}l=r}else{q?l=X(u?[m.getHtml()]:ae(m),l):m.moveChildren(l)}l.replace(m);if(t){var u=l,n;(n=u.getPrevious(i))&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("pre")&&(t=w(n.getHtml(),/\n$/,"")+"\n\n"+w(u.getHtml(),/^\n/,""),CKEDITOR.env.ie?u.$.outerHTML="\x3cpre\x3e"+t+"\x3c/pre\x3e":u.setHtml(t),n.remove())}else{u&&G(l)}}function ae(l){var k=[];w(l.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(n,m,p){return m+"\x3c/pre\x3e"+p+"\x3cpre\x3e"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(m,n){k.push(n)});return k}function w(l,k,p){var n="",m="";l=l.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(r,q,t){q&&(n=q);t&&(m=t);return""});return n+l.replace(k,p)+m}function X(l,k){var q;1<l.length&&(q=new CKEDITOR.dom.documentFragment(k.getDocument()));for(var p=0;p<l.length;p++){var n=l[p],n=n.replace(/(\r\n|\r)/g,"\n"),n=w(n,/^[ \t]*\n/,""),n=w(n,/\n$/,""),n=w(n,/^[ \t]+|[ \t]+$/g,function(t,r){return 1==t.length?"\x26nbsp;":r?" "+CKEDITOR.tools.repeat("\x26nbsp;",t.length-1):CKEDITOR.tools.repeat("\x26nbsp;",t.length-1)+" "}),n=n.replace(/\n/g,"\x3cbr\x3e"),n=n.replace(/[ \t]{2,}/g,function(r){return CKEDITOR.tools.repeat("\x26nbsp;",r.length-1)+" "});if(q){var m=k.clone();m.setHtml(n);q.append(m)}else{k.setHtml(n)}}return q||k}function K(l,k){var t=this._.definition,r=t.attributes,t=t.styles,q=ab(this)[l.getName()],p=CKEDITOR.tools.isEmpty(r)&&CKEDITOR.tools.isEmpty(t),n;for(n in r){if("class"!=n&&!this._.definition.fullMatch||l.getAttribute(n)==W(n,r[n])){k&&"data-"==n.slice(0,5)||(p=l.hasAttribute(n),l.removeAttribute(n))}}for(var m in t){this._.definition.fullMatch&&l.getStyle(m)!=W(m,t[m],!0)||(p=p||!!l.getStyle(m),l.removeStyle(m))}Z(l,q,P[l.getName()]);p&&(this._.definition.alwaysRemoveElement?G(l,1):!CKEDITOR.dtd.$block[l.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!l.hasAttributes()?G(l):l.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function R(l){for(var k=ab(this),q=l.getElementsByTag(this.element),p,n=q.count();0<=--n;){p=q.getItem(n),p.isReadOnly()||K.call(this,p,!0)}for(var m in k){if(m!=this.element){for(q=l.getElementsByTag(m),n=q.count()-1;0<=n;n--){p=q.getItem(n),p.isReadOnly()||Z(p,k[m])}}}}function Z(l,k,r){if(k=k&&k.attributes){for(var q=0;q<k.length;q++){var p=k[q][0],n;if(n=l.getAttribute(p)){var m=k[q][1];(null===m||m.test&&m.test(n)||"string"==typeof m&&n==m)&&l.removeAttribute(p)}}}r||G(l)}function G(l,k){if(!l.hasAttributes()||k){if(CKEDITOR.dtd.$block[l.getName()]){var n=l.getPrevious(i),m=l.getNext(i);!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||l.append("br",1);!m||m.type!=CKEDITOR.NODE_TEXT&&m.isBlockBoundary({br:1})||l.append("br");l.remove(!0)}else{n=l.getFirst(),m=l.getLast(),l.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),m&&!n.equals(m)&&m.type==CKEDITOR.NODE_ELEMENT&&m.mergeSiblings())}}}function N(l,k,n){var m;m=l.element;"*"==m&&(m="span");m=new CKEDITOR.dom.element(m,k);n&&n.copyAttributes(m);m=I(m,l);k.getCustomData("doc_processing_style")&&m.hasAttribute("id")?m.removeAttribute("id"):k.setCustomData("doc_processing_style",1);return m}function I(l,k){var p=k._.definition,n=p.attributes,p=CKEDITOR.style.getStyleText(p);if(n){for(var m in n){l.setAttribute(m,n[m])}}p&&l.setAttribute("style",p);return l}function H(l,k){for(var m in l){l[m]=l[m].replace(U,function(n,p){return k[p]})}}function ab(l){if(l._.overrides){return l._.overrides}var k=l._.overrides={},t=l._.definition.overrides;if(t){CKEDITOR.tools.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var q=t[r],p,n;"string"==typeof q?p=q.toLowerCase():(p=q.element?q.element.toLowerCase():l.element,n=q.attributes);q=k[p]||(k[p]={});if(n){var q=q.attributes=q.attributes||[],m;for(m in n){q.push([m.toLowerCase(),n[m]])}}}}return k}function W(l,k,n){var m=new CKEDITOR.dom.element("span");m[n?"setStyle":"setAttribute"](l,k);return m[n?"getStyle":"getAttribute"](l)}function Y(l,k,r){var q=l.document,p=l.getRanges();k=k?this.removeFromRange:this.applyToRange;for(var n,m=p.createIterator();n=m.getNextRange();){k.call(this,n,r)}l.selectRanges(p);q.removeCustomData("doc_processing_style")}var P={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},Q={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},J=/\s*(?:;\s*|$)/,U=/#\((.+?)\)/g,s=CKEDITOR.dom.walker.bookmark(0,1),i=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(l,k){if("string"==typeof l.type){return new CKEDITOR.style.customHandlers[l.type](l)}var m=l.attributes;m&&m.style&&(l.styles=CKEDITOR.tools.extend({},l.styles,CKEDITOR.tools.parseCssText(m.style)),delete m.style);k&&(l=CKEDITOR.tools.clone(l),H(l.attributes,k),H(l.styles,k));m=this.element=l.element?"string"==typeof l.element?l.element.toLowerCase():l.element:"*";this.type=l.type||(P[m]?CKEDITOR.STYLE_BLOCK:Q[m]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:l}};CKEDITOR.style.prototype={apply:function(l){if(l instanceof CKEDITOR.dom.document){return Y.call(this,l.getSelection())}if(this.checkApplicable(l.elementPath(),l)){var k=this._.enterMode;k||(this._.enterMode=l.activeEnterMode);Y.call(this,l.getSelection(),0,l);this._.enterMode=k}},remove:function(l){if(l instanceof CKEDITOR.dom.document){return Y.call(this,l.getSelection(),1)}if(this.checkApplicable(l.elementPath(),l)){var k=this._.enterMode;k||(this._.enterMode=l.activeEnterMode);Y.call(this,l.getSelection(),1,l);this._.enterMode=k}},applyToRange:function(k){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?ai:this.type==CKEDITOR.STYLE_BLOCK?aa:this.type==CKEDITOR.STYLE_OBJECT?ad:null;return this.applyToRange(k)},removeFromRange:function(k){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?ah:this.type==CKEDITOR.STYLE_BLOCK?V:this.type==CKEDITOR.STYLE_OBJECT?ac:null;return this.removeFromRange(k)},applyToObject:function(k){I(k,this)},checkActive:function(l,k){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(l.block||l.blockLimit,!0,k);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var q=l.elements,p=0,n;p<q.length;p++){if(n=q[p],this.type!=CKEDITOR.STYLE_INLINE||n!=l.block&&n!=l.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var m=n.getName();if(!("string"==typeof this.element?m==this.element:m in this.element)){continue}}if(this.checkElementRemovable(n,!0,k)){return !0}}}}return !1},checkApplicable:function(l,k,m){k&&k instanceof CKEDITOR.filter&&(m=k);if(m&&!m.check(this)){return !1}switch(this.type){case CKEDITOR.STYLE_OBJECT:return !!l.contains(this.element);case CKEDITOR.STYLE_BLOCK:return !!l.blockLimit.getDtd()[this.element]}return !0},checkElementMatch:function(l,k){var t=this._.definition;if(!l||!t.ignoreReadonly&&l.isReadOnly()){return !1}var r=l.getName();if("string"==typeof this.element?r==this.element:r in this.element){if(!k&&!l.hasAttributes()){return !0}if(r=t._AC){t=r}else{var r={},q=0,p=t.attributes;if(p){for(var n in p){q++,r[n]=p[n]}}if(n=CKEDITOR.style.getStyleText(t)){r.style||q++,r.style=n}r._length=q;t=t._AC=r}if(t._length){for(var m in t){if("_length"!=m){q=l.getAttribute(m)||"";if("style"==m){l:{r=t[m];"string"==typeof r&&(r=CKEDITOR.tools.parseCssText(r));"string"==typeof q&&(q=CKEDITOR.tools.parseCssText(q,!0));n=void 0;for(n in r){if(!(n in q)||q[n]!=r[n]&&"inherit"!=r[n]&&"inherit"!=q[n]){r=!1;break l}}r=!0}}else{r=t[m]==q}if(r){if(!k){return !0}}else{if(k){return !1}}}}if(k){return !0}}else{return !0}}return !1},checkElementRemovable:function(l,k,p){if(this.checkElementMatch(l,k,p)){return !0}if(k=ab(this)[l.getName()]){var n;if(!(k=k.attributes)){return !0}for(p=0;p<k.length;p++){if(n=k[p][0],n=l.getAttribute(n)){var m=k[p][1];if(null===m){return !0}if("string"==typeof m){if(n==m){return !0}}else{if(m.test(n)){return !0}}}}}return !1},buildPreview:function(l){var k=this._.definition,q=[],p=k.element;"bdo"==p&&(p="span");var q=["\x3c",p],n=k.attributes;if(n){for(var m in n){q.push(" ",m,'\x3d"',n[m],'"')}}(n=CKEDITOR.style.getStyleText(k))&&q.push(' style\x3d"',n,'"');q.push("\x3e",l||k.name,"\x3c/",p,"\x3e");return q.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(l){var k=l._ST;if(k){return k}var k=l.styles,r=l.attributes&&l.attributes.style||"",q="";r.length&&(r=r.replace(J,";"));for(var p in k){var n=k[p],m=(p+":"+n).replace(J,";");"inherit"==n?q+=m:r+=m}r.length&&(r=CKEDITOR.tools.normalizeCssText(r,!0));return l._ST=r+q};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(l){var k=function(m){this._={definition:m};this.setup&&this.setup(m)};k.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},l,!0);return this.customHandlers[l.type]=k};var o=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,j=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(i,j){this.requiredContent=this.allowedContent=this.style=i;CKEDITOR.tools.extend(this,j,!0)};CKEDITOR.styleCommand.prototype.exec=function(i){i.focus();this.state==CKEDITOR.TRISTATE_OFF?i.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&i.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(j,k,i){CKEDITOR.stylesSet.addExternal(j,k,"");CKEDITOR.stylesSet.load(j,i)};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(j,k){var i=this._.styleStateChangeCallbacks;i||(i=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(l){for(var o=0;o<i.length;o++){var n=i[o],m=n.style.checkActive(l.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;n.fn.call(this,m)}}));i.push({style:j,fn:k})},applyStyle:function(i){i.apply(this)},removeStyle:function(i){i.remove(this)},getStylesSet:function(j){if(this._.stylesDefinitions){j(this._.stylesDefinitions)}else{var k=this,i=k.config.stylesCombo_stylesSet||k.config.stylesSet;if(!1===i){j(null)}else{if(i instanceof Array){k._.stylesDefinitions=i,j(i)}else{i||(i="default");var i=i.split(":"),l=i[0];CKEDITOR.stylesSet.addExternal(l,i[1]?i.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(l,function(m){k._.stylesDefinitions=m[l];j(k._.stylesDefinitions)})}}}}});CKEDITOR.dom.comment=function(i,j){"string"==typeof i&&(i=(j?j.$:document).createComment(i));CKEDITOR.dom.domObject.call(this,i)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";(function(){var j={},k={},i;for(i in CKEDITOR.dtd.$blockLimit){i in CKEDITOR.dtd.$list||(j[i]=1)}for(i in CKEDITOR.dtd.$block){i in CKEDITOR.dtd.$blockLimit||i in CKEDITOR.dtd.$empty||(k[i]=1)}CKEDITOR.dom.elementPath=function(w,u){var r=null,p=null,o=[],m=w,x;u=u||w.getDocument().getBody();do{if(m.type==CKEDITOR.NODE_ELEMENT){o.push(m);if(!this.lastElement&&(this.lastElement=m,m.is(CKEDITOR.dtd.$object)||"false"==m.getAttribute("contenteditable"))){continue}if(m.equals(u)){break}if(!p&&(x=m.getName(),"true"==m.getAttribute("contenteditable")?p=m:!r&&k[x]&&(r=m),j[x])){if(x=!r&&"div"==x){j:{x=m.getChildren();for(var s=0,v=x.count();s<v;s++){var n=x.getItem(s);if(n.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[n.getName()]){x=!0;break j}}x=!1}x=!x}x?r=m:p=m}}}while(m=m.getParent());p||(p=u);this.block=r;this.blockLimit=p;this.root=u;this.elements=o}})();CKEDITOR.dom.elementPath.prototype={compare:function(j){var k=this.elements;j=j&&j.elements;if(!j||k.length!=j.length){return !1}for(var i=0;i<k.length;i++){if(!k[i].equals(j[i])){return !1}}return !0},contains:function(j,m,i){var n;"string"==typeof j&&(n=function(o){return o.getName()==j});j instanceof CKEDITOR.dom.element?n=function(o){return o.equals(j)}:CKEDITOR.tools.isArray(j)?n=function(o){return -1<CKEDITOR.tools.indexOf(j,o.getName())}:"function"==typeof j?n=j:"object"==typeof j&&(n=function(o){return o.getName() in j});var l=this.elements,k=l.length;m&&k--;i&&(l=Array.prototype.slice.call(l,0),l.reverse());for(m=0;m<k;m++){if(n(l[m])){return l[m]}}return null},isContextFor:function(i){var j;return i in CKEDITOR.dtd.$block?(j=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!j.getDtd()[i]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};CKEDITOR.dom.text=function(i,j){"string"==typeof i&&(i=(j?j.$:document).createTextNode(i));this.$=i};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(i){this.$.nodeValue=i},split:function(j){var m=this.$.parentNode,i=m.childNodes.length,n=this.getLength(),l=this.getDocument(),k=new CKEDITOR.dom.text(this.$.splitText(j),l);m.childNodes.length==i&&(j>=n?(k=l.createText(""),k.insertAfter(this)):(j=l.createText(""),j.insertAfter(k),j.remove()));return k},substring:function(i,j){return"number"!=typeof j?this.$.nodeValue.substr(i):this.$.nodeValue.substring(i,j)}});(function(){function i(m,s,r){var o=m.serializable,n=s[r?"endContainer":"startContainer"],k=r?"endOffset":"startOffset",p=o?s.document.getById(m.startNode):m.startNode;m=o?s.document.getById(m.endNode):m.endNode;n.equals(p.getPrevious())?(s.startOffset=s.startOffset-n.getLength()-m.getPrevious().getLength(),n=m.getNext()):n.equals(m.getPrevious())&&(s.startOffset-=n.getLength(),n=m.getNext());n.equals(p.getParent())&&s[k]++;n.equals(m.getParent())&&s[k]++;s[r?"endContainer":"startContainer"]=n;return s}CKEDITOR.dom.rangeList=function(k){if(k instanceof CKEDITOR.dom.rangeList){return k}k?k instanceof CKEDITOR.dom.range&&(k=[k]):k=[];return CKEDITOR.tools.extend(k,j)};var j={createIterator:function(){var k=this,n=CKEDITOR.dom.walker.bookmark(),m=[],l;return{getNextRange:function(r){l=void 0===l?0:l+1;var o=k[l];if(o&&1<k.length){if(!l){for(var u=k.length-1;0<=u;u--){m.unshift(k[u].createBookmark(!0))}}if(r){for(var p=0;k[l+p+1];){var s=o.document;r=0;u=s.getById(m[p].endNode);for(s=s.getById(m[p+1].startNode);;){u=u.getNextSourceNode(!1);if(s.equals(u)){r=1}else{if(n(u)||u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){continue}}break}if(!r){break}p++}}for(o.moveToBookmark(m.shift());p--;){u=k[++l],u.moveToBookmark(m.shift()),o.setEnd(u.endContainer,u.endOffset)}}return o}}},createBookmarks:function(k){for(var o=[],n,m=0;m<this.length;m++){o.push(n=this[m].createBookmark(k,!0));for(var l=m+1;l<this.length;l++){this[l]=i(n,this[l]),this[l]=i(n,this[l],!0)}}return o},createBookmarks2:function(k){for(var m=[],l=0;l<this.length;l++){m.push(this[l].createBookmark2(k))}return m},moveToBookmarks:function(k){for(var l=0;l<this.length;l++){this[l].moveToBookmark(k[l])}}}})();(function(){function s(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function o(l){var v=CKEDITOR.skin["ua_"+l],u=CKEDITOR.env;if(v){for(var v=v.split(",").sort(function(x,w){return x>w?-1:1}),t=0,q;t<v.length;t++){if(q=v[t],u.ie&&(q.replace(/^ie/,"")==u.version||u.quirks&&"iequirks"==q)&&(q="ie"),u[q]){l+="_"+v[t];break}}}return CKEDITOR.getUrl(s()+l+".css")}function r(q,l){m[q]||(CKEDITOR.document.appendStyleSheet(o(q)),m[q]=1);l&&l()}function p(q){var l=q.getById(k);l||(l=q.getHead().append("style"),l.setAttribute("id",k),l.setAttribute("type","text/css"));return l}function n(q,l,x){var w,v,u;if(CKEDITOR.env.webkit){for(l=l.split("}").slice(0,-1),v=0;v<l.length;v++){l[v]=l[v].split("{")}}for(var t=0;t<q.length;t++){if(CKEDITOR.env.webkit){for(v=0;v<l.length;v++){u=l[v][1];for(w=0;w<x.length;w++){u=u.replace(x[w][0],x[w][1])}q[t].$.sheet.addRule(l[v][0],u)}}else{u=l;for(w=0;w<x.length;w++){u=u.replace(x[w][0],x[w][1])}CKEDITOR.env.ie&&11>CKEDITOR.env.version?q[t].$.styleSheet.cssText+=u:q[t].$.innerHTML+=u}}}var m={};CKEDITOR.skin={path:s,loadPart:function(q,l){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(s()+"skin.js"),function(){r(q,l)}):r(q,l)},getPath:function(l){return CKEDITOR.getUrl(o(l))},icons:{},addIcon:function(q,l,u,t){q=q.toLowerCase();this.icons[q]||(this.icons[q]={path:l,offset:u||0,bgsize:t||"16px"})},getIconStyle:function(q,l,w,v,u){var t;q&&(q=q.toLowerCase(),l&&(t=this.icons[q+"-rtl"]),t||(t=this.icons[q]));q=w||t&&t.path||"";v=v||t&&t.offset;u=u||t&&t.bgsize||"16px";q&&(q=q.replace(/'/g,"\\'"));return q&&"background-image:url('"+CKEDITOR.getUrl(q)+"');background-position:0 "+v+"px;background-size:"+u+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(q){var l=p(CKEDITOR.document);return(this.setUiColor=function(t){this.uiColor=t;var w=CKEDITOR.skin.chameleon,v="",u="";"function"==typeof w&&(v=w(this,"editor"),u=w(this,"panel"));t=[[i,t]];n([l],v,t);n(j,u,t)}).call(this,q)}});var k="cke_ui_color",j=[],i=/\$color/g;CKEDITOR.on("instanceLoaded",function(q){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var l=q.editor;q=function(t){t=(t.data[0]||t.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!t.getById("cke_ui_color")){t=p(t);j.push(t);var u=l.getUiColor();u&&n([t],CKEDITOR.skin.chameleon(l,"panel"),[[i,u]])}};l.on("panelShow",q);l.on("menuShow",q);l.config.uiColor&&l.setUiColor(l.config.uiColor)}})})();(function(){if(CKEDITOR.env.webkit){CKEDITOR.env.hc=!1}else{var j=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);j.appendTo(CKEDITOR.document.getHead());try{var k=j.getComputedStyle("border-top-color"),i=j.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!k||k!=i)}catch(l){CKEDITOR.env.hc=!1}j.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(j=CKEDITOR._.pending){for(delete CKEDITOR._.pending,k=0;k<j.length;k++){CKEDITOR.editor.prototype.constructor.apply(j[k][0],j[k][1]),CKEDITOR.add(j[k][0])}}})();CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8";CKEDITOR.skin.chameleon=function(){var i=function(){return function(l,o){for(var m=l.match(/[^#]./g),q=0;3>q;q++){var n=q,p;p=parseInt(m[q],16);p=("0"+(0>o?0|p*(1+o):0|p+(255-p)*o).toString(16)).slice(-2);m[n]=p}return"#"+m.join("")}}(),k=function(){var l=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType\x3d0,startColorstr\x3d'{from}',endColorstr\x3d'{to}');");return function(n,m){return l.output({from:n,to:m})}}(),j={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(m,n){var l=m.uiColor,l={id:"."+m.id,defaultBorder:i(l,-0.1),defaultGradient:k(i(l,0.9),l),lightGradient:k(i(l,1),i(l,0.7)),mediumGradient:k(i(l,0.8),i(l,0.5)),ckeButtonOn:k(i(l,0.6),i(l,0.7)),ckeResizer:i(l,-0.4),ckeToolbarSeparator:i(l,0.5),ckeColorauto:i(l,0.8),dialogBody:i(l,0.7),dialogTabSelected:k("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:i(l,-0.6),elementsPathBg:l,menubuttonIcon:i(l,0.5),menubuttonIconHover:i(l,0.3)};return j[n].output(l).replace(/\[/g,"{").replace(/\]/g,"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var m=function(n){this._||(this._={});this._["default"]=this._.initValue=n["default"]||"";this._.required=n.required||!1;for(var q=[this._],r=1;r<arguments.length;r++){q.push(arguments[r])}q.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,q);return this._},k={build:function(n,q,r){return new CKEDITOR.ui.dialog.textInput(n,q,r)}},s={build:function(n,q,r){return new CKEDITOR.ui.dialog[q.type](n,q,r)}},p={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(n){this.setValue(this.getInitValue(),n)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(n,q){this._.domOnChangeRegistered||(n.on("load",function(){this.getInputElement().on("change",function(){n.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",q)}},!0),i=/^on([A-Z]\w+)/,l=function(n){for(var q in n){(i.test(q)||"title"==q||"type"==q)&&delete n[q]}return n},j=function(n){n=n.data.getKeystroke();n==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):n==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(n,q,u,r){if(!(4>arguments.length)){var v=m.call(this,q);v.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];var t={role:q.role||"presentation"};q.includeLabel&&(t["aria-labelledby"]=v.labelId);CKEDITOR.ui.dialog.uiElement.call(this,n,q,u,"div",null,t,function(){var x=[],w=q.required?" cke_required":"";"horizontal"!=q.labelLayout?x.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+w+'" ',' id\x3d"'+v.labelId+'"',v.inputId?' for\x3d"'+v.inputId+'"':"",(q.labelStyle?' style\x3d"'+q.labelStyle+'"':"")+"\x3e",q.label,"\x3c/label\x3e",'\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',q.controlStyle?' style\x3d"'+q.controlStyle+'"':"",' role\x3d"presentation"\x3e',r.call(this,n,q),"\x3c/div\x3e"):(w={type:"hbox",widths:q.widths,padding:0,children:[{type:"html",html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+w+'" id\x3d"'+v.labelId+'" for\x3d"'+v.inputId+'"'+(q.labelStyle?' style\x3d"'+q.labelStyle+'"':"")+"\x3e"+CKEDITOR.tools.htmlEncode(q.label)+"\x3c/label\x3e"},{type:"html",html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(q.controlStyle?' style\x3d"'+q.controlStyle+'"':"")+"\x3e"+r.call(this,n,q)+"\x3c/span\x3e"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(n,w,x));return x.join("")})}},textInput:function(q,r,v){if(!(3>arguments.length)){m.call(this,r);var t=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",w={"class":"cke_dialog_ui_input_"+r.type,id:t,type:r.type};r.validate&&(this.validate=r.validate);r.maxLength&&(w.maxlength=r.maxLength);r.size&&(w.size=r.size);r.inputStyle&&(w.style=r.inputStyle);var u=this,n=!1;q.on("load",function(){u.getInputElement().on("keydown",function(x){13==x.data.getKeystroke()&&(n=!0)});u.getInputElement().on("keyup",function(x){13==x.data.getKeystroke()&&n&&(q.getButton("ok")&&setTimeout(function(){q.getButton("ok").click()},0),n=!1);u.bidi&&j.call(u,x)},null,null,1000)});CKEDITOR.ui.dialog.labeledElement.call(this,q,r,v,function(){var x=['\x3cdiv class\x3d"cke_dialog_ui_input_',r.type,'" role\x3d"presentation"'];r.width&&x.push('style\x3d"width:'+r.width+'" ');x.push("\x3e\x3cinput ");w["aria-labelledby"]=this._.labelId;this._.required&&(w["aria-required"]=this._.required);for(var y in w){x.push(y+'\x3d"'+w[y]+'" ')}x.push(" /\x3e\x3c/div\x3e");return x.join("")})}},textarea:function(n,q,u){if(!(3>arguments.length)){m.call(this,q);var r=this,v=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",t={};q.validate&&(this.validate=q.validate);t.rows=q.rows||5;t.cols=q.cols||20;t["class"]="cke_dialog_ui_input_textarea "+(q["class"]||"");"undefined"!=typeof q.inputStyle&&(t.style=q.inputStyle);q.dir&&(t.dir=q.dir);if(r.bidi){n.on("load",function(){r.getInputElement().on("keyup",j)},r)}CKEDITOR.ui.dialog.labeledElement.call(this,n,q,u,function(){t["aria-labelledby"]=this._.labelId;this._.required&&(t["aria-required"]=this._.required);var x=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',v,'" '],w;for(w in t){x.push(w+'\x3d"'+CKEDITOR.tools.htmlEncode(t[w])+'" ')}x.push("\x3e",CKEDITOR.tools.htmlEncode(r._["default"]),"\x3c/textarea\x3e\x3c/div\x3e");return x.join("")})}},checkbox:function(n,q,t){if(!(3>arguments.length)){var r=m.call(this,q,{"default":!!q["default"]});q.validate&&(this.validate=q.validate);CKEDITOR.ui.dialog.uiElement.call(this,n,q,t,"span",null,null,function(){var x=CKEDITOR.tools.extend({},q,{id:q.id?q.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),v=[],w=CKEDITOR.tools.getNextId()+"_label",u={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":w};l(x);q["default"]&&(u.checked="checked");"undefined"!=typeof x.inputStyle&&(x.style=x.inputStyle);r.checkbox=new CKEDITOR.ui.dialog.uiElement(n,x,v,"input",null,u);v.push(' \x3clabel id\x3d"',w,'" for\x3d"',u.id,'"'+(q.labelStyle?' style\x3d"'+q.labelStyle+'"':"")+"\x3e",CKEDITOR.tools.htmlEncode(q.label),"\x3c/label\x3e");return v.join("")})}},radio:function(n,q,t){if(!(3>arguments.length)){m.call(this,q);this._["default"]||(this._["default"]=this._.initValue=q.items[0][1]);q.validate&&(this.validate=q.validate);var r=[],u=this;q.role="radiogroup";q.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,n,q,t,function(){for(var D=[],E=[],C=(q.id?q.id:CKEDITOR.tools.getNextId())+"_radio",A=0;A<q.items.length;A++){var z=q.items[A],B=void 0!==z[2]?z[2]:z[0],y=void 0!==z[1]?z[1]:z[0],x=CKEDITOR.tools.getNextId()+"_radio_input",w=x+"_label",x=CKEDITOR.tools.extend({},q,{id:x,title:null,type:null},!0),B=CKEDITOR.tools.extend({},x,{title:B},!0),v={type:"radio","class":"cke_dialog_ui_radio_input",name:C,value:y,"aria-labelledby":w},F=[];u._["default"]==y&&(v.checked="checked");l(x);l(B);"undefined"!=typeof x.inputStyle&&(x.style=x.inputStyle);x.keyboardFocusable=!0;r.push(new CKEDITOR.ui.dialog.uiElement(n,x,F,"input",null,v));F.push(" ");new CKEDITOR.ui.dialog.uiElement(n,B,F,"label",null,{id:w,"for":v.id},z[0]);D.push(F.join(""))}new CKEDITOR.ui.dialog.hbox(n,r,D,E);return E.join("")});this._.children=r}},button:function(n,q,u){if(arguments.length){"function"==typeof q&&(q=q(n.getParentEditor()));m.call(this,q,{disabled:q.disabled||!1});CKEDITOR.event.implementOn(this);var r=this;n.on("load",function(){var w=this.getElement();(function(){w.on("click",function(x){r.click();x.data.preventDefault()});w.on("keydown",function(x){x.data.getKeystroke() in {32:1}&&(r.click(),x.data.preventDefault())})})();w.unselectable()},this);var v=CKEDITOR.tools.extend({},q);delete v.style;var t=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,n,v,u,"a",null,{style:q.style,href:"javascript:void(0)",title:q.label,hidefocus:"true","class":q["class"],role:"button","aria-labelledby":t},'\x3cspan id\x3d"'+t+'" class\x3d"cke_dialog_ui_button"\x3e'+CKEDITOR.tools.htmlEncode(q.label)+"\x3c/span\x3e")}},select:function(n,q,t){if(!(3>arguments.length)){var r=m.call(this,q);q.validate&&(this.validate=q.validate);r.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,n,q,t,function(){var z=CKEDITOR.tools.extend({},q,{id:q.id?q.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),x=[],y=[],w={id:r.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};x.push('\x3cdiv class\x3d"cke_dialog_ui_input_',q.type,'" role\x3d"presentation"');q.width&&x.push('style\x3d"width:'+q.width+'" ');x.push("\x3e");void 0!==q.size&&(w.size=q.size);void 0!==q.multiple&&(w.multiple=q.multiple);l(z);for(var v=0,u;v<q.items.length&&(u=q.items[v]);v++){y.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==u[1]?u[1]:u[0]).replace(/"/g,"\x26quot;"),'" /\x3e ',CKEDITOR.tools.htmlEncode(u[0]))}"undefined"!=typeof z.inputStyle&&(z.style=z.inputStyle);r.select=new CKEDITOR.ui.dialog.uiElement(n,z,x,"select",null,w,y.join(""));x.push("\x3c/div\x3e");return x.join("")})}},file:function(n,q,t){if(!(3>arguments.length)){void 0===q["default"]&&(q["default"]="");var r=CKEDITOR.tools.extend(m.call(this,q),{definition:q,buttons:[]});q.validate&&(this.validate=q.validate);n.on("load",function(){CKEDITOR.document.getById(r.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,n,q,t,function(){r.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var u=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',r.frameId,'" title\x3d"',q.label,'" src\x3d"javascript:void('];u.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");u.push(')"\x3e\x3c/iframe\x3e');return u.join("")})}},fileButton:function(n,q,u){var r=this;if(!(3>arguments.length)){m.call(this,q);q.validate&&(this.validate=q.validate);var v=CKEDITOR.tools.extend({},q),t=v.onClick;v.className=(v.className?v.className+" ":"")+"cke_dialog_ui_button";v.onClick=function(x){var w=q["for"];t&&!1===t.call(this,x)||(n.getContentElement(w[0],w[1]).submit(),this.disable())};n.on("load",function(){n.getContentElement(q["for"][0],q["for"][1])._.buttons.push(r)});CKEDITOR.ui.dialog.button.call(this,n,v,u)}},html:function(){var n=/^\s*<[\w:]+\s+([^>]*)?>/,q=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,r=/\/$/;return function(x,z,y){if(!(3>arguments.length)){var t=[],w=z.html;"\x3c"!=w.charAt(0)&&(w="\x3cspan\x3e"+w+"\x3c/span\x3e");var v=z.focus;if(v){var u=this.focus;this.focus=function(){("function"==typeof v?v:u).call(this);this.fire("focus")};z.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,x,z,t,"span",null,null,"");t=t.join("").match(n);w=w.match(q)||["","",""];r.test(w[1])&&(w[1]=w[1].slice(0,-1),w[2]="/"+w[2]);y.push([w[1]," ",t[1]||"",w[2]].join(""))}}}(),fieldset:function(n,q,u,r,v){var t=v.label;this._={children:q};CKEDITOR.ui.dialog.uiElement.call(this,n,v,r,"fieldset",null,null,function(){var x=[];t&&x.push("\x3clegend"+(v.labelStyle?' style\x3d"'+v.labelStyle+'"':"")+"\x3e"+t+"\x3c/legend\x3e");for(var w=0;w<u.length;w++){x.push(u[w])}return x.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(n){var q=CKEDITOR.document.getById(this._.labelId);1>q.getChildCount()?(new CKEDITOR.dom.text(n,CKEDITOR.document)).appendTo(q):q.getChild(0).$.nodeValue=n;return this},getLabel:function(){var n=CKEDITOR.document.getById(this._.labelId);return !n||1>n.getChildCount()?"":n.getChild(0).getText()},eventProcessors:o},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var n=this.getElement();n&&n.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return !this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(n,q){this.on("click",function(){q.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var n=this.selectParentTab();setTimeout(function(){var q=n.getInputElement();q&&q.$.focus()},0)},select:function(){var n=this.selectParentTab();setTimeout(function(){var q=n.getInputElement();q&&(q.$.focus(),q.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(n){if(this.bidi){var q=n&&n.charAt(0);(q=""==q?"ltr":""==q?"rtl":null)&&(n=n.slice(1));this.setDirectionMarker(q)}n||(n="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var n=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&n){var q=this.getDirectionMarker();q&&(n=("ltr"==q?"":"")+n)}return n},setDirectionMarker:function(n){var q=this.getInputElement();n?q.setAttributes({dir:n,"data-cke-dir-marker":n}):this.getDirectionMarker()&&q.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},p,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(n,q,t){var r=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),u=this.getInputElement().$;r.$.text=n;r.$.value=void 0===q||null===q?n:q;void 0===t||null===t?CKEDITOR.env.ie?u.add(r.$):u.add(r.$,null):u.add(r.$,t);return this},remove:function(n){this.getInputElement().$.remove(n);return this},clear:function(){for(var n=this.getInputElement().$;0<n.length;){n.remove(0)}return this},keyboardFocusable:!0},p,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(n,q){this.getInputElement().$.checked=n;!q&&this.fire("change",{value:n})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(n,q){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version){return o.onChange.apply(this,arguments)}n.on("load",function(){var r=this._.checkbox.getElement();r.on("propertychange",function(t){t=t.data.$;"checked"==t.propertyName&&this.fire("change",{value:r.$.checked})},this)},this);this.on("change",q);return null}},keyboardFocusable:!0},p,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(n,q){for(var t=this._.children,r,u=0;u<t.length&&(r=t[u]);u++){r.getElement().$.checked=r.getValue()==n}!q&&this.fire("change",{value:n})},getValue:function(){for(var n=this._.children,q=0;q<n.length;q++){if(n[q].getElement().$.checked){return n[q].getValue()}}return null},accessKeyUp:function(){var n=this._.children,q;for(q=0;q<n.length;q++){if(n[q].getElement().$.checked){n[q].getElement().focus();return}}n[0].getElement().focus()},eventProcessors:{onChange:function(n,q){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version){return o.onChange.apply(this,arguments)}n.on("load",function(){for(var t=this._.children,r=this,u=0;u<t.length;u++){t[u].getElement().on("propertychange",function(v){v=v.data.$;"checked"==v.propertyName&&this.$.checked&&r.fire("change",{value:this.getAttribute("value")})})}},this);this.on("change",q);return null}}},p,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,p,{getInputElement:function(){var n=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<n.$.forms.length?new CKEDITOR.dom.element(n.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(n){var q=/^on([A-Z]\w+)/,t,r=function(w,v,y,x){w.on("formLoaded",function(){w.getInputElement().on(y,x,w)})},u;for(u in n){if(t=u.match(q)){this.eventProcessors[u]?this.eventProcessors[u].call(this,this._.dialog,n[u]):r(this,this._.dialog,t[1].toLowerCase(),n[u])}}return this},reset:function(){function x(){v.$.open();var z="";t.size&&(z=t.size-(CKEDITOR.env.ie?7:0));var A=y.frameId+"_input";v.$.write(['\x3chtml dir\x3d"'+r+'" lang\x3d"'+q+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+r+'" lang\x3d"'+q+'" action\x3d"',CKEDITOR.tools.htmlEncode(t.action),'"\x3e\x3clabel id\x3d"',y.labelId,'" for\x3d"',A,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(t.label),'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',A,'" aria-labelledby\x3d"',y.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(t.id||"cke_upload"),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<z?z:""),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+u+");","window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction("+n+")}","\x3c/script\x3e"].join(""));v.$.close();for(z=0;z<w.length;z++){w[z].enable()}}var y=this._,v=CKEDITOR.document.getById(y.frameId).getFrameDocument(),t=y.definition,w=y.buttons,u=this.formLoadedNumber,n=this.formUnloadNumber,r=y.dialog._.editor.lang.dir,q=y.dialog._.editor.langCode;u||(u=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),n=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(u);CKEDITOR.tools.removeFunction(n)}));CKEDITOR.env.gecko?setTimeout(x,500):x()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(n,q){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",q)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",k);CKEDITOR.dialog.addUIElement("password",k);CKEDITOR.dialog.addUIElement("textarea",s);CKEDITOR.dialog.addUIElement("checkbox",s);CKEDITOR.dialog.addUIElement("radio",s);CKEDITOR.dialog.addUIElement("button",s);CKEDITOR.dialog.addUIElement("select",s);CKEDITOR.dialog.addUIElement("file",s);CKEDITOR.dialog.addUIElement("fileButton",s);CKEDITOR.dialog.addUIElement("html",s);CKEDITOR.dialog.addUIElement("fieldset",{build:function(x,y,v){for(var t=y.children,w,u=[],q=[],r=0;r<t.length&&(w=t[r]);r++){var n=[];u.push(n);q.push(CKEDITOR.dialog._.uiElementBuilders[w.type].build(x,w,n))}return new CKEDITOR.ui.dialog[y.type](x,q,u,v,y)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;(function(){function ae(){for(var v=this._.tabIdList.length,u=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+v,w=u-1;w>u-v;w--){if(this._.tabs[this._.tabIdList[w%v]][0].$.offsetHeight){return this._.tabIdList[w%v]}}return null}function al(){for(var v=this._.tabIdList.length,u=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),w=u+1;w<u+v;w++){if(this._.tabs[this._.tabIdList[w%v]][0].$.offsetHeight){return this._.tabIdList[w%v]}}return null}function ab(v,u){for(var A=v.$.getElementsByTagName("input"),z=0,x=A.length;z<x;z++){var w=new CKEDITOR.dom.element(A[z]);"text"==w.getAttribute("type").toLowerCase()&&(u?(w.setAttribute("value",w.getCustomData("fake_value")||""),w.removeCustomData("fake_value")):(w.setCustomData("fake_value",w.getAttribute("value")),w.setAttribute("value","")))}}function o(v,u){var w=this.getInputElement();w&&(v?w.removeAttribute("aria-invalid"):w.setAttribute("aria-invalid",!0));v||(this.select?this.select():this.focus());u&&alert(u);this.fire("validated",{valid:v,msg:u})}function n(){var u=this.getInputElement();u&&u.removeAttribute("aria-invalid")}function m(v){var u=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",l).output({id:CKEDITOR.tools.getNextNumber(),editorId:v.id,langDir:v.lang.dir,langCode:v.langCode,editorDialogClass:"cke_editor_"+v.name.replace(/\./g,"\\.")+"_dialog",closeTitle:v.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),z=u.getChild([0,0,0,0,0]),x=z.getChild(0),w=z.getChild(1);v.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(z);!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(v="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+v+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(z.getParent()));x.unselectable();w.unselectable();return{element:u,parts:{dialog:u.getChild(0),title:x,close:w,tabs:z.getChild(2),contents:z.getChild([3,0,0,0]),footer:z.getChild([3,0,1,0])}}}function G(v,u,w){this.element=u;this.focusIndex=w;this.tabIndex=0;this.isFocusable=function(){return !u.getAttribute("disabled")&&u.isVisible()};this.focus=function(){v._.currentFocusIndex=this.focusIndex;this.element.focus()};u.on("keydown",function(x){x.data.getKeystroke() in {32:1,13:1}&&this.fire("click")});u.on("focus",function(){this.fire("mouseover")});u.on("blur",function(){this.fire("mouseout")})}function k(v){function u(){v.layout()}var w=CKEDITOR.document.getWindow();w.on("resize",u);v.on("hide",function(){w.removeListener("resize",u)})}function C(v,u){this._={dialog:v};CKEDITOR.tools.extend(this,u)}function j(v){function u(F){var N=v.getSize(),J=CKEDITOR.document.getWindow().getViewPaneSize(),L=F.data.$.screenX,M=F.data.$.screenY,K=L-D.x,I=M-D.y;D={x:L,y:M};A.x+=K;A.y+=I;v.move(A.x+w[3]<x?-w[3]:A.x-w[1]>J.width-N.width-x?J.width-N.width+("rtl"==z.lang.dir?0:w[1]):A.x,A.y+w[0]<x?-w[0]:A.y-w[2]>J.height-N.height-x?J.height-N.height+w[2]:A.y,1);F.data.preventDefault()}function E(){CKEDITOR.document.removeListener("mousemove",u);CKEDITOR.document.removeListener("mouseup",E);if(CKEDITOR.env.ie6Compat){var F=ah.getChild(0).getFrameDocument();F.removeListener("mousemove",u);F.removeListener("mouseup",E)}}var D=null,A=null,z=v.getParentEditor(),x=z.config.dialog_magnetDistance,w=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof x&&(x=20);v.parts.title.on("mousedown",function(F){D={x:F.data.$.screenX,y:F.data.$.screenY};CKEDITOR.document.on("mousemove",u);CKEDITOR.document.on("mouseup",E);A=v.getPosition();if(CKEDITOR.env.ie6Compat){var I=ah.getChild(0).getFrameDocument();I.on("mousemove",u);I.on("mouseup",E)}F.data.preventDefault()},v)}function i(L){function K(M){var T="rtl"==E.lang.dir,S=z.width,P=z.height,O=S+(M.data.$.screenX-x.x)*(T?-1:1)*(L._.moved?1:2),N=P+(M.data.$.screenY-x.y)*(L._.moved?1:2),R=L._.element.getFirst(),R=T&&R.getComputedStyle("right"),Q=L.getPosition();Q.y+N>v.height&&(N=v.height-Q.y);(T?R:Q.x)+O>v.width&&(O=v.width-(T?R:Q.x));if(F==CKEDITOR.DIALOG_RESIZE_WIDTH||F==CKEDITOR.DIALOG_RESIZE_BOTH){S=Math.max(I.minWidth||0,O-D)}if(F==CKEDITOR.DIALOG_RESIZE_HEIGHT||F==CKEDITOR.DIALOG_RESIZE_BOTH){P=Math.max(I.minHeight||0,N-A)}L.resize(S,P);L._.moved||L.layout();M.data.preventDefault()}function J(){CKEDITOR.document.removeListener("mouseup",J);CKEDITOR.document.removeListener("mousemove",K);u&&(u.remove(),u=null);if(CKEDITOR.env.ie6Compat){var M=ah.getChild(0).getFrameDocument();M.removeListener("mouseup",J);M.removeListener("mousemove",K)}}var I=L.definition,F=I.resizable;if(F!=CKEDITOR.DIALOG_RESIZE_NONE){var E=L.getParentEditor(),D,A,v,x,z,u,w=CKEDITOR.tools.addFunction(function(M){z=L.getSize();var N=L.parts.contents;N.$.getElementsByTagName("iframe").length&&(u=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%;"\x3e\x3c/div\x3e'),N.append(u));A=z.height-L.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));D=z.width-L.parts.contents.getSize("width",1);x={x:M.screenX,y:M.screenY};v=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",K);CKEDITOR.document.on("mouseup",J);CKEDITOR.env.ie6Compat&&(N=ah.getChild(0).getFrameDocument(),N.on("mousemove",K),N.on("mouseup",J));M.preventDefault&&M.preventDefault()});L.on("load",function(){var M="";F==CKEDITOR.DIALOG_RESIZE_WIDTH?M=" cke_resizer_horizontal":F==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(M=" cke_resizer_vertical");M=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+M+" cke_resizer_"+E.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(E.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+w+', event )"\x3e'+("ltr"==E.lang.dir?"â¢":"â£")+"\x3c/div\x3e");L.parts.footer.append(M,1)});E.on("destroy",function(){CKEDITOR.tools.removeFunction(w)})}}function ad(u){u.data.preventDefault(1)}function B(F){var E=CKEDITOR.document.getWindow(),D=F.config,A=D.dialog_backgroundCoverColor||"white",z=D.dialog_backgroundCoverOpacity,x=D.baseFloatZIndex,D=CKEDITOR.tools.genKey(A,z,x),w=H[D];w?w.show():(x=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",x,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+A,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(A="\x3chtml\x3e\x3cbody style\x3d\\'background-color:"+A+";\\'\x3e\x3c/body\x3e\x3c/html\x3e",x.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),x.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+A+"' );document.close();")+"})())"),x.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),x.push("\x3c/div\x3e"),w=CKEDITOR.dom.element.createFromHtml(x.join("")),w.setOpacity(void 0!==z?z:0.5),w.on("keydown",ad),w.on("keypress",ad),w.on("keyup",ad),w.appendTo(CKEDITOR.document.getBody()),H[D]=w);F.focusManager.add(w);ah=w;F=function(){var I=E.getViewPaneSize();w.setStyles({width:I.width+"px",height:I.height+"px"})};var v=function(){var I=E.getScrollPosition(),J=CKEDITOR.dialog._.currentTop;w.setStyles({left:I.x+"px",top:I.y+"px"});if(J){do{I=J.getPosition(),J.move(I.x,I.y)}while(J=J._.parentDialog)}};ac=F;E.on("resize",F);F();CKEDITOR.env.mac&&CKEDITOR.env.webkit||w.focus();if(CKEDITOR.env.ie6Compat){var u=function(){v();arguments.callee.prevScrollHandler.apply(this,arguments)};E.$.setTimeout(function(){u.prevScrollHandler=window.onscroll||function(){};window.onscroll=u},0);v()}}function y(u){ah&&(u.focusManager.remove(ah),u=CKEDITOR.document.getWindow(),ah.hide(),u.removeListener("resize",ac),CKEDITOR.env.ie6Compat&&u.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),ac=null)}var ag=CKEDITOR.tools.cssLength,l='\x3cdiv class\x3d"cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"position:absolute" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';CKEDITOR.dialog=function(O,N){function L(){var R=A._.focusList;R.sort(function(U,T){return U.tabIndex!=T.tabIndex?T.tabIndex-U.tabIndex:U.focusIndex-T.focusIndex});for(var Q=R.length,S=0;S<Q;S++){R[S].focusIndex=S}}function K(R){var Q=A._.focusList;R=R||0;if(!(1>Q.length)){var V=A._.currentFocusIndex;A._.tabBarMode&&0>R&&(V=0);try{Q[V].getInputElement().$.blur()}catch(T){}var U=V,S=1<A._.pageCount;do{U+=R;if(S&&!A._.tabBarMode&&(U==Q.length||-1==U)){A._.tabBarMode=!0;A._.tabs[A._.currentTabId][0].focus();A._.currentFocusIndex=-1;return}U=(U+Q.length)%Q.length;if(U==V){break}}while(R&&!Q[U].isFocusable());Q[U].focus();"text"==Q[U].type&&Q[U].select()}}function J(Q){if(A==CKEDITOR.dialog._.currentTop){var T=Q.data.getKeystroke(),S="rtl"==O.lang.dir,R=[37,38,39,40];v=x=0;if(9==T||T==CKEDITOR.SHIFT+9){K(T==CKEDITOR.SHIFT+9?-1:1),v=1}else{if(T==CKEDITOR.ALT+121&&!A._.tabBarMode&&1<A.getPageCount()){A._.tabBarMode=!0,A._.tabs[A._.currentTabId][0].focus(),A._.currentFocusIndex=-1,v=1}else{if(-1!=CKEDITOR.tools.indexOf(R,T)&&A._.tabBarMode){T=-1!=CKEDITOR.tools.indexOf([S?39:37,38],T)?ae.call(A):al.call(A),A.selectPage(T),A._.tabs[T][0].focus(),v=1}else{if(13!=T&&32!=T||!A._.tabBarMode){if(13==T){T=Q.data.getTarget(),T.is("a","button","select","textarea")||T.is("input")&&"button"==T.$.type||((T=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(T.click,0,T),v=1),x=1}else{if(27==T){(T=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(T.click,0,T):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),x=1}else{return}}}else{this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,K(1),v=1}}}}I(Q)}}function I(Q){v?Q.data.preventDefault(1):x&&Q.data.stopPropagation()}var F=CKEDITOR.dialog._.dialogDefinitions[N],E=CKEDITOR.tools.clone(an),w=O.config.dialog_buttonsOrder||"OS",z=O.lang.dir,D={},v,x;("OS"==w&&CKEDITOR.env.mac||"rtl"==w&&"ltr"==z||"ltr"==w&&"rtl"==z)&&E.buttons.reverse();F=CKEDITOR.tools.extend(F(O),E);F=CKEDITOR.tools.clone(F);F=new t(this,F);E=m(O);this._={editor:O,element:E.element,name:N,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=E.parts;CKEDITOR.tools.setTimeout(function(){O.fire("ariaWidget",this.parts.contents)},0,this);E={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};E["rtl"==z?"right":"left"]=0;this.parts.dialog.setStyles(E);CKEDITOR.event.call(this);this.definition=F=CKEDITOR.fire("dialogDefinition",{name:N,definition:F},O).definition;if(!("removeDialogTabs" in O._)&&O.config.removeDialogTabs){E=O.config.removeDialogTabs.split(";");for(z=0;z<E.length;z++){if(w=E[z].split(":"),2==w.length){var u=w[0];D[u]||(D[u]=[]);D[u].push(w[1])}}O._.removeDialogTabs=D}if(O._.removeDialogTabs&&(D=O._.removeDialogTabs[N])){for(z=0;z<D.length;z++){F.removeContents(D[z])}}if(F.onLoad){this.on("load",F.onLoad)}if(F.onShow){this.on("show",F.onShow)}if(F.onHide){this.on("hide",F.onHide)}if(F.onOk){this.on("ok",function(Q){O.fire("saveSnapshot");setTimeout(function(){O.fire("saveSnapshot")},0);!1===F.onOk.call(this,Q)&&(Q.data.hide=!1)})}this.state=CKEDITOR.DIALOG_STATE_IDLE;if(F.onCancel){this.on("cancel",function(Q){!1===F.onCancel.call(this,Q)&&(Q.data.hide=!1)})}var A=this,P=function(R){var Q=A._.contents,U=!1,T;for(T in Q){for(var S in Q[T]){if(U=R.call(this,Q[T][S])){return}}}};this.on("ok",function(Q){P(function(R){if(R.validate){var T=R.validate(this),S="string"==typeof T||!1===T;S&&(Q.data.hide=!1,Q.stop());o.call(R,!S,"string"==typeof T?T:void 0);return S}})},this,null,0);this.on("cancel",function(Q){P(function(R){if(R.isChanged()){return O.config.dialog_noConfirmCancel||confirm(O.lang.common.confirmCancel)||(Q.data.hide=!1),!0}})},this,null,0);this.parts.close.on("click",function(Q){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();Q.data.preventDefault()},this);this.changeFocus=K;var M=this._.element;O.focusManager.add(M,1);this.on("show",function(){M.on("keydown",J,this);if(CKEDITOR.env.gecko){M.on("keypress",I,this)}});this.on("hide",function(){M.removeListener("keydown",J);CKEDITOR.env.gecko&&M.removeListener("keypress",I);P(function(Q){n.apply(Q)})});this.on("iframeAdded",function(Q){(new CKEDITOR.dom.document(Q.data.iframe.$.contentWindow.document)).on("keydown",J,this,null,0)});this.on("show",function(){L();var Q=1<A._.pageCount;O.config.dialog_startupFocusTab&&Q?(A._.tabBarMode=!0,A._.tabs[A._.currentTabId][0].focus(),A._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=Q?-1:this._.focusList.length-1,F.onFocus?(Q=F.onFocus.call(this))&&Q.focus():K(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat){this.on("load",function(){var R=this.getElement(),Q=R.getFirst();Q.remove();Q.appendTo(R)},this)}j(this);i(this);(new CKEDITOR.dom.text(F.title,CKEDITOR.document)).appendTo(this.parts.title);for(z=0;z<F.contents.length;z++){(D=F.contents[z])&&this.addPage(D)}this.parts.tabs.on("click",function(R){var Q=R.data.getTarget();Q.hasClass("cke_dialog_tab")&&(Q=Q.$.id,this.selectPage(Q.substring(4,Q.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,K(1)),R.data.preventDefault())},this);z=[];D=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:F.buttons},z).getChild();this.parts.footer.setHtml(z.join(""));for(z=0;z<D.length;z++){this._.buttons[D[z].id]=D[z]}};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(v,u){this._.contentSize&&this._.contentSize.width==v&&this._.contentSize.height==u||(CKEDITOR.dialog.fire("resize",{dialog:this,width:v,height:u},this._.editor),this.fire("resize",{width:v,height:u},this._.editor),this.parts.contents.setStyles({width:v+"px",height:u+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:v,height:u})}}(),getSize:function(){var u=this._.element.getFirst();return{width:u.$.offsetWidth||0,height:u.$.offsetHeight||0}},move:function(v,u,A){var z=this._.element.getFirst(),x="rtl"==this._.editor.lang.dir,w="fixed"==z.getComputedStyle("position");CKEDITOR.env.ie&&z.setStyle("zoom","100%");w&&this._.position&&this._.position.x==v&&this._.position.y==u||(this._.position={x:v,y:u},w||(w=CKEDITOR.document.getWindow().getScrollPosition(),v+=w.x,u+=w.y),x&&(w=this.getSize(),v=CKEDITOR.document.getWindow().getViewPaneSize().width-w.width-v),u={top:(0<u?u:0)+"px"},u[x?"right":"left"]=(0<v?v:0)+"px",z.setStyles(u),A&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var v=this._.element,u=this.definition;v.getParent()&&v.getParent().equals(CKEDITOR.document.getBody())?v.setStyle("display","block"):v.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||u.width||u.minWidth,this._.contentSize&&this._.contentSize.height||u.height||u.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,B(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);v.on("keydown",r);v.on("keyup",q);this._.hasFocus=!1;for(var E in u.contents){if(u.contents[E]){var v=u.contents[E],D=this._.tabs[v.id],A=v.requiredContent,z=0;if(D){for(var x in this._.contents[v.id]){var w=this._.contents[v.id][x];"hbox"!=w.type&&"vbox"!=w.type&&w.getInputElement()&&(w.requiredContent&&!this._.editor.activeFilter.check(w.requiredContent)?w.disable():(w.enable(),z++))}!z||A&&!this._.editor.activeFilter.check(A)?D[0].addClass("cke_dialog_tab_disabled"):D[0].removeClass("cke_dialog_tab_disabled")}}}CKEDITOR.tools.setTimeout(function(){this.layout();k(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(F){F.setInitValue&&F.setInitValue()})},100,this)},layout:function(){var v=this.parts.dialog,u=this.getSize(),z=CKEDITOR.document.getWindow().getViewPaneSize(),x=(z.width-u.width)/2,w=(z.height-u.height)/2;CKEDITOR.env.ie6Compat||(u.height+(0<w?w:0)>z.height||u.width+(0<x?x:0)>z.width?v.setStyle("position","absolute"):v.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:x,this._.moved?this._.position.y:w)},foreach:function(v){for(var u in this._.contents){for(var w in this._.contents[u]){v.call(this,this._.contents[u][w])}}return this},reset:function(){var u=function(v){v.reset&&v.reset(1)};return function(){this.foreach(u);return this}}(),setupContent:function(){var u=arguments;this.foreach(function(v){v.setup&&v.setup.apply(v,u)})},commitContent:function(){var u=arguments;this.foreach(function(v){CKEDITOR.env.ie&&this._.currentFocusIndex==v.focusIndex&&v.getInputElement().$.blur();v.commit&&v.commit.apply(v,u)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var v=this._.element;v.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(s(this);CKEDITOR.dialog._.currentTop!=this;){CKEDITOR.dialog._.currentTop.hide()}if(this._.parentDialog){var u=this._.parentDialog.getElement().getFirst();u.setStyle("z-index",parseInt(u.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else{y(this._.editor)}if(CKEDITOR.dialog._.currentTop=this._.parentDialog){CKEDITOR.dialog._.currentZIndex-=10}else{CKEDITOR.dialog._.currentZIndex=null;v.removeListener("keydown",r);v.removeListener("keyup",q);var w=this._.editor;w.focus();setTimeout(function(){w.focusManager.unlock();CKEDITOR.env.iOS&&w.window.focus()},0)}delete this._.parentDialog;this.foreach(function(x){x.resetInitValue&&x.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(v){if(!v.requiredContent||this._.editor.filter.check(v.requiredContent)){for(var u=[],D=v.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(v.label)+'"':"",A=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:v.elements,expand:!!v.expand,padding:v.padding,style:v.style||"width: 100%;"},u),z=this._.contents[v.id]={},x=A.getChild(),w=0;A=x.shift();){A.notAllowed||"hbox"==A.type||"vbox"==A.type||w++,z[A.id]=A,"function"==typeof A.getChild&&x.push.apply(x,A.getChild())}w||(v.hidden=!0);u=CKEDITOR.dom.element.createFromHtml(u.join(""));u.setAttribute("role","tabpanel");A=CKEDITOR.env;z="cke_"+v.id+"_"+CKEDITOR.tools.getNextNumber();D=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",D,v.hidden?' style\x3d"display:none"':"",' id\x3d"',z,'"',A.gecko&&!A.hc?"":' href\x3d"javascript:void(0)"',' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',v.label,"\x3c/a\x3e"].join(""));u.setAttribute("aria-labelledby",z);this._.tabs[v.id]=[D,u];this._.tabIdList.push(v.id);!v.hidden&&this._.pageCount++;this._.lastTab=D;this.updateStyle();u.setAttribute("name",v.id);u.appendTo(this.parts.contents);D.unselectable();this.parts.tabs.append(D);v.accessKey&&(p(this,this,"CTRL+"+v.accessKey,am,ao),this._.accessKeyMap["CTRL+"+v.accessKey]=v.id)}},selectPage:function(v){if(this._.currentTabId!=v&&!this._.tabs[v][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:v,currentPage:this._.currentTabId})){for(var u in this._.tabs){var z=this._.tabs[u][0],x=this._.tabs[u][1];u!=v&&(z.removeClass("cke_dialog_tab_selected"),x.hide());x.setAttribute("aria-hidden",u!=v)}var w=this._.tabs[v];w[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(ab(w[1]),w[1].show(),setTimeout(function(){ab(w[1],1)},0)):w[1].show();this._.currentTabId=v;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,v)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(v){var u=this._.tabs[v]&&this._.tabs[v][0];u&&1!=this._.pageCount&&u.isVisible()&&(v==this._.currentTabId&&this.selectPage(ae.call(this)),u.hide(),this._.pageCount--,this.updateStyle())},showPage:function(u){if(u=this._.tabs[u]&&this._.tabs[u][0]){u.show(),this._.pageCount++,this.updateStyle()}},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(v,u){var w=this._.contents[v];return w&&w[u]},getValueOf:function(v,u){return this.getContentElement(v,u).getValue()},setValueOf:function(v,u,w){return this.getContentElement(v,u).setValue(w)},getButton:function(u){return this._.buttons[u]},click:function(u){return this._.buttons[u].click()},disableButton:function(u){return this._.buttons[u].disable()},enableButton:function(u){return this._.buttons[u].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(v,u){if("undefined"==typeof u){u=this._.focusList.length,this._.focusList.push(new G(this,v,u))}else{this._.focusList.splice(u,0,new G(this,v,u));for(var w=u+1;w<this._.focusList.length;w++){this._.focusList[w].focusIndex++}}},setState:function(v){if(this.state!=v){this.state=v;if(v==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var u=this.getParentEditor().lang.dir,w={attributes:{"class":"cke_dialog_spinner"},styles:{"float":"rtl"==u?"right":"left"}};w.styles["margin-"+("rtl"==u?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",w);this.parts.spinner.setHtml("\x26#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else{v==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable())}this.fire("state",v)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(v,u){this._.dialogDefinitions[v]&&"function"!=typeof u||(this._.dialogDefinitions[v]=u)},exists:function(u){return !!this._.dialogDefinitions[u]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(v,u,w){v=v.config.removeDialogTabs;return !(v&&v.match(new RegExp("(?:^|;)"+u+":"+w+"(?:$|;)","i")))},okButton:function(){var u=function(v,w){w=w||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:v.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(x){x=x.data.dialog;!1!==x.fire("ok",{hide:!0}).hide&&x.hide()}},w,!0)};u.type="button";u.override=function(v){return CKEDITOR.tools.extend(function(w){return u(w,v)},{type:"button"},!0)};return u}(),cancelButton:function(){var u=function(v,w){w=w||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:v.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(x){x=x.data.dialog;!1!==x.fire("cancel",{hide:!0}).hide&&x.hide()}},w,!0)};u.type="button";u.override=function(v){return CKEDITOR.tools.extend(function(w){return u(w,v)},{type:"button"},!0)};return u}(),addUIElement:function(v,u){this._.uiElementBuilders[v]=u}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var an={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},ak=function(v,u,z){for(var x=0,w;w=v[x];x++){if(w.id==u||z&&w[z]&&(w=ak(w[z],u,z))){return w}}return null},aj=function(v,u,D,A,z){if(D){for(var x=0,w;w=v[x];x++){if(w.id==D){return v.splice(x,0,u),u}if(A&&w[A]&&(w=aj(w[A],u,D,A,!0))){return w}}if(z){return null}}v.push(u);return u},ai=function(v,u,z){for(var x=0,w;w=v[x];x++){if(w.id==u){return v.splice(x,1)}if(z&&w[z]&&(w=ai(w[z],u,z))){return w}}return null},t=function(v,u){this.dialog=v;for(var z=u.contents,x=0,w;w=z[x];x++){z[x]=w&&new C(v,w)}CKEDITOR.tools.extend(this,u)};t.prototype={getContents:function(u){return ak(this.contents,u)},getButton:function(u){return ak(this.buttons,u)},addContents:function(v,u){return aj(this.contents,v,u)},addButton:function(v,u){return aj(this.buttons,v,u)},removeContents:function(u){ai(this.contents,u)},removeButton:function(u){ai(this.buttons,u)}};C.prototype={get:function(u){return ak(this.elements,u,"children")},add:function(v,u){return aj(this.elements,v,u,"children")},remove:function(u){ai(this.elements,u,"children")}};var ac,H={},ah,af={},r=function(v){var u=v.data.$.ctrlKey||v.data.$.metaKey,z=v.data.$.altKey,x=v.data.$.shiftKey,w=String.fromCharCode(v.data.$.keyCode);(u=af[(u?"CTRL+":"")+(z?"ALT+":"")+(x?"SHIFT+":"")+w])&&u.length&&(u=u[u.length-1],u.keydown&&u.keydown.call(u.uiElement,u.dialog,u.key),v.data.preventDefault())},q=function(v){var u=v.data.$.ctrlKey||v.data.$.metaKey,z=v.data.$.altKey,x=v.data.$.shiftKey,w=String.fromCharCode(v.data.$.keyCode);(u=af[(u?"CTRL+":"")+(z?"ALT+":"")+(x?"SHIFT+":"")+w])&&u.length&&(u=u[u.length-1],u.keyup&&(u.keyup.call(u.uiElement,u.dialog,u.key),v.data.preventDefault()))},p=function(v,u,z,x,w){(af[z]||(af[z]=[])).push({uiElement:v,dialog:u,key:z,keyup:w||v.accessKeyUp,keydown:x||v.accessKeyDown})},s=function(v){for(var u in af){for(var x=af[u],w=x.length-1;0<=w;w--){x[w].dialog!=v&&x[w].uiElement!=v||x.splice(w,1)}0===x.length&&delete af[u]}},ao=function(v,u){v._.accessKeyMap[u]&&v.selectPage(v._.accessKeyMap[u])},am=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(N,M,L,K,J,I,F){if(!(4>arguments.length)){var E=(K.call?K(M):K)||"div",w=["\x3c",E," "],z=(J&&J.call?J(M):J)||{},D=(I&&I.call?I(M):I)||{},v=(F&&F.call?F.call(this,N,M):F)||"",x=this.domId=D.id||CKEDITOR.tools.getNextId()+"_uiElement";M.requiredContent&&!N.getParentEditor().filter.check(M.requiredContent)&&(z.display="none",this.notAllowed=!0);D.id=x;var u={};M.type&&(u["cke_dialog_ui_"+M.type]=1);M.className&&(u[M.className]=1);M.disabled&&(u.cke_disabled=1);for(var A=D["class"]&&D["class"].split?D["class"].split(" "):[],x=0;x<A.length;x++){A[x]&&(u[A[x]]=1)}A=[];for(x in u){A.push(x)}D["class"]=A.join(" ");M.title&&(D.title=M.title);u=(M.style||"").split(";");M.align&&(A=M.align,z["margin-left"]="left"==A?0:"auto",z["margin-right"]="right"==A?0:"auto");for(x in z){u.push(x+":"+z[x])}M.hidden&&u.push("display:none");for(x=u.length-1;0<=x;x--){""===u[x]&&u.splice(x,1)}0<u.length&&(D.style=(D.style?D.style+"; ":"")+u.join("; "));for(x in D){w.push(x+'\x3d"'+CKEDITOR.tools.htmlEncode(D[x])+'" ')}w.push("\x3e",v,"\x3c/",E,"\x3e");L.push(w.join(""));(this._||(this._={})).dialog=N;"boolean"==typeof M.isChanged&&(this.isChanged=function(){return M.isChanged});"function"==typeof M.isChanged&&(this.isChanged=M.isChanged);"function"==typeof M.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(P){return function(Q){P.call(this,M.setValue.call(this,Q))}}));"function"==typeof M.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(P){return function(){return M.getValue.call(this,P.call(this))}}));CKEDITOR.event.implementOn(this);this.registerEvents(M);this.accessKeyUp&&this.accessKeyDown&&M.accessKey&&p(this,N,"CTRL+"+M.accessKey);var O=this;N.on("load",function(){var P=O.getInputElement();if(P){var Q=O.type in {checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";P.on("focus",function(){N._.tabBarMode=!1;N._.hasFocus=!0;O.fire("focus");Q&&this.addClass(Q)});P.on("blur",function(){O.fire("blur");Q&&this.removeClass(Q)})}});CKEDITOR.tools.extend(this,M);this.keyboardFocusable&&(this.tabIndex=M.tabIndex||0,this.focusIndex=N._.focusList.push(this)-1,this.on("focus",function(){N._.currentFocusIndex=O.focusIndex}))}},hbox:function(I,F,E,D,A){if(!(4>arguments.length)){this._||(this._={});var z=this._.children=F,x=A&&A.widths||null,w=A&&A.height||null,u,v={role:"presentation"};A&&A.align&&(v.align=A.align);CKEDITOR.ui.dialog.uiElement.call(this,I,A||{type:"hbox"},D,"table",{},v,function(){var K=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(u=0;u<E.length;u++){var J="cke_dialog_ui_hbox_child",L=[];0===u&&(J="cke_dialog_ui_hbox_first");u==E.length-1&&(J="cke_dialog_ui_hbox_last");K.push('\x3ctd class\x3d"',J,'" role\x3d"presentation" ');x?x[u]&&L.push("width:"+ag(x[u])):L.push("width:"+Math.floor(100/E.length)+"%");w&&L.push("height:"+ag(w));A&&void 0!==A.padding&&L.push("padding:"+ag(A.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&z[u].align&&L.push("text-align:"+z[u].align);0<L.length&&K.push('style\x3d"'+L.join("; ")+'" ');K.push("\x3e",E[u],"\x3c/td\x3e")}K.push("\x3c/tr\x3e\x3c/tbody\x3e");return K.join("")})}},vbox:function(v,u,E,D,A){if(!(3>arguments.length)){this._||(this._={});var z=this._.children=u,x=A&&A.width||null,w=A&&A.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,v,A||{type:"vbox"},D,"div",null,{role:"presentation"},function(){var F=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];F.push('style\x3d"');A&&A.expand&&F.push("height:100%;");F.push("width:"+ag(x||"100%"),";");CKEDITOR.env.webkit&&F.push("float:none;");F.push('"');F.push('align\x3d"',CKEDITOR.tools.htmlEncode(A&&A.align||("ltr"==v.getParentEditor().lang.dir?"left":"right")),'" ');F.push("\x3e\x3ctbody\x3e");for(var J=0;J<E.length;J++){var I=[];F.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');x&&I.push("width:"+ag(x||"100%"));w?I.push("height:"+ag(w[J])):A&&A.expand&&I.push("height:"+Math.floor(100/E.length)+"%");A&&void 0!==A.padding&&I.push("padding:"+ag(A.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&z[J].align&&I.push("text-align:"+z[J].align);0<I.length&&F.push('style\x3d"',I.join("; "),'" ');F.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',E[J],"\x3c/td\x3e\x3c/tr\x3e")}F.push("\x3c/tbody\x3e\x3c/table\x3e");return F.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(v,u){this.getInputElement().setValue(v);!u&&this.fire("change",{value:v});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return !1},selectParentTab:function(){for(var u=this.getInputElement();(u=u.getParent())&&-1==u.$.className.search("cke_dialog_page_contents");){}if(!u){return this}u=u.getAttribute("name");this._.dialog._.currentTabId!=u&&this._.dialog.selectPage(u);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(v){var u=/^on([A-Z]\w+)/,z,x=function(D,A,F,E){A.on("load",function(){D.getInputElement().on(F,E,D)})},w;for(w in v){if(z=w.match(u)){this.eventProcessors[w]?this.eventProcessors[w].call(this,this._.dialog,v[w]):x(this,this._.dialog,z[1].toLowerCase(),v[w])}}return this},eventProcessors:{onLoad:function(v,u){v.on("load",u,this)},onShow:function(v,u){v.on("show",u,this)},onHide:function(v,u){v.on("hide",u,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var u=this.getElement();this.getInputElement().setAttribute("disabled","true");u.addClass("cke_disabled")},enable:function(){var u=this.getElement();this.getInputElement().removeAttribute("disabled");u.removeClass("cke_disabled")},isEnabled:function(){return !this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(u){if(1>arguments.length){return this._.children.concat()}u.splice||(u=[u]);return 2>u.length?this._.children[u[0]]:this._.children[u[0]]&&this._.children[u[0]].getChild?this._.children[u[0]].getChild(u.slice(1,u.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var u={build:function(I,F,E){for(var D=F.children,A,z=[],x=[],v=0;v<D.length&&(A=D[v]);v++){var w=[];z.push(w);x.push(CKEDITOR.dialog._.uiElementBuilders[A.type].build(I,A,w))}return new CKEDITOR.ui.dialog[F.type](I,x,z,E,F)}};CKEDITOR.dialog.addUIElement("hbox",u);CKEDITOR.dialog.addUIElement("vbox",u)})();CKEDITOR.dialogCommand=function(v,u){this.dialogName=v;CKEDITOR.tools.extend(this,u,!0)};CKEDITOR.dialogCommand.prototype={exec:function(u){u.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var v=/^([a]|[^a])+$/,u=/^\d*$/,A=/^\d*(?:\.\d+)?$/,z=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,x=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,w=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var D=arguments;return function(){var E=this&&this.getValue?this.getValue():D[0],L,J=CKEDITOR.VALIDATE_AND,I=[],F;for(F=0;F<D.length;F++){if("function"==typeof D[F]){I.push(D[F])}else{break}}F<D.length&&"string"==typeof D[F]&&(L=D[F],F++);F<D.length&&"number"==typeof D[F]&&(J=D[F]);var K=J==CKEDITOR.VALIDATE_AND?!0:!1;for(F=0;F<I.length;F++){K=J==CKEDITOR.VALIDATE_AND?K&&I[F](E):K||I[F](E)}return K?!0:L}},regex:function(E,D){return function(F){F=this&&this.getValue?this.getValue():F;return E.test(F)?!0:D}},notEmpty:function(D){return this.regex(v,D)},integer:function(D){return this.regex(u,D)},number:function(D){return this.regex(A,D)},cssLength:function(D){return this.functions(function(E){return x.test(CKEDITOR.tools.trim(E))},D)},htmlLength:function(D){return this.functions(function(E){return z.test(CKEDITOR.tools.trim(E))},D)},inlineStyle:function(D){return this.functions(function(E){return w.test(CKEDITOR.tools.trim(E))},D)},equals:function(E,D){return this.functions(function(F){return F==E},D)},notEqual:function(E,D){return this.functions(function(F){return F!=E},D)}};CKEDITOR.on("instanceDestroyed",function(E){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var D;D=CKEDITOR.dialog._.currentTop;){D.hide()}for(var I in H){H[I].remove()}H={}}E=E.editor._.storedDialogs;for(var F in E){E[F].destroy()}})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(v,u){var x=null,w=CKEDITOR.dialog._.dialogDefinitions[v];null===CKEDITOR.dialog._.currentTop&&B(this);if("function"==typeof w){x=this._.storedDialogs||(this._.storedDialogs={}),x=x[v]||(x[v]=new CKEDITOR.dialog(this,v)),u&&u.call(x,x),x.show()}else{if("failed"==w){throw y(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+v+'" failed when loading definition.')}"string"==typeof w&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(w),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[v]&&(CKEDITOR.dialog._.dialogDefinitions[v]="failed");this.openDialog(v,u)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return x}})})();CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(i){i.on("doubleclick",function(j){j.data.dialog&&i.openDialog(j.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(j){var i=j.addCommand("about",new CKEDITOR.dialogCommand("about"));i.modes={wysiwyg:1,source:1};i.canUndo=!1;i.readOnly=1;j.ui.addButton&&j.ui.addButton("About",{label:j.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(i){var j=this;i.addCommand("a11yHelp",{exec:function(){var k=i.langCode,k=j.availableLangs[k]?k:j.availableLangs[k.replace(/-.*/,"")]?k.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(j.path+"dialogs/lang/"+k+".js"),function(){i.lang.a11yhelp=j.langEntries[k];i.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});i.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");i.on("ariaEditorHelpLabel",function(k){k.data.label=i.lang.common.editorHelp})}})})();(function(){function l(m){var k=this.att;m=m&&m.hasAttribute(k)&&m.getAttribute(k)||"";void 0!==m&&this.setValue(m)}function j(){for(var n,m=0;m<arguments.length;m++){if(arguments[m] instanceof CKEDITOR.dom.element){n=arguments[m];break}}if(n){var m=this.att,k=this.getValue();k?n.setAttribute(m,k):n.removeAttribute(m,k)}}var i={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(n){n||(n=i);var m=[];n.id&&m.push("id");n.dir&&m.push("dir");var k="";m.length&&(k+="["+m.join(",")+"]");n.classes&&(k+="(*)");n.styles&&(k+="{*}");return k},createAdvancedTab:function(q,m,k){m||(m=i);var p=q.lang.common,n={id:"advanced",label:p.advancedTab,title:p.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},o=[];if(m.id||m.dir){m.id&&o.push({id:"advId",att:"id",type:"text",requiredContent:k?k+"[id]":null,label:p.id,setup:l,commit:j}),m.dir&&o.push({id:"advLangDir",att:"dir",type:"select",requiredContent:k?k+"[dir]":null,label:p.langDir,"default":"",style:"width:100%",items:[[p.notSet,""],[p.langDirLTR,"ltr"],[p.langDirRTL,"rtl"]],setup:l,commit:j}),n.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(o)})}if(m.styles||m.classes){o=[],m.styles&&o.push({id:"advStyles",att:"style",type:"text",requiredContent:k?k+"{cke-xyz}":null,label:p.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(p.invalidInlineStyle),onChange:function(){},getStyle:function(s,t){var r=this.getValue().match(new RegExp("(?:^|;)\\s*"+s+"\\s*:\\s*([^;]*)","i"));return r?r[1]:t},updateStyle:function(s,r){var u=this.getValue(),t=q.document.createElement("span");t.setAttribute("style",u);t.setStyle(s,r);u=CKEDITOR.tools.normalizeCssText(t.getAttribute("style"));this.setValue(u,1)},setup:l,commit:j}),m.classes&&o.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:k?k+"(cke-xyz)":null,label:p.cssClasses,"default":"",setup:l,commit:j}]}),n.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(o)})}return n}})})();CKEDITOR.plugins.add("basicstyles",{init:function(n){var l=0,m=function(q,s,o,p){if(p){p=new CKEDITOR.style(p);var r=k[o];r.unshift(p);n.attachStyleStateChange(p,function(t){!n.readOnly&&n.getCommand(o).setState(t)});n.addCommand(o,new CKEDITOR.styleCommand(p,{contentForms:r}));n.ui.addButton&&n.ui.addButton(q,{label:s,command:o,toolbar:"basicstyles,"+(l+=10)})}},k={bold:["strong","b",["span",function(o){o=o.styles["font-weight"];return"bold"==o||700<=+o}]],italic:["em","i",["span",function(o){return"italic"==o.styles["font-style"]}]],underline:["u",["span",function(o){return"underline"==o.styles["text-decoration"]}]],strike:["s","strike",["span",function(o){return"line-through"==o.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},i=n.config,j=n.lang.basicstyles;m("Bold",j.bold,"bold",i.coreStyles_bold);m("Italic",j.italic,"italic",i.coreStyles_italic);m("Underline",j.underline,"underline",i.coreStyles_underline);m("Strike",j.strike,"strike",i.coreStyles_strike);m("Subscript",j.subscript,"subscript",i.coreStyles_subscript);m("Superscript",j.superscript,"superscript",i.coreStyles_superscript);n.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function j(m,n,p,l){if(!m.isReadOnly()&&!m.equals(p.editable())){CKEDITOR.dom.element.setMarker(l,m,"bidi_processed",1);l=m;for(var q=p.editable();(l=l.getParent())&&!l.equals(q);){if(l.getCustomData("bidi_processed")){m.removeStyle("direction");m.removeAttribute("dir");return}}l="useComputedState" in p.config?p.config.useComputedState:1;(l?m.getComputedStyle("direction"):m.getStyle("direction")||m.hasAttribute("dir"))!=n&&(m.removeStyle("direction"),l?(m.removeAttribute("dir"),n!=m.getComputedStyle("direction")&&m.setAttribute("dir",n)):m.setAttribute("dir",n),p.forceNextSelectionCheck())}}function z(m,n,p){var l=m.getCommonAncestor(!1,!0);m=m.clone();m.enlarge(p==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(m.checkBoundaryOfElement(l,CKEDITOR.START)&&m.checkBoundaryOfElement(l,CKEDITOR.END)){for(var q;l&&l.type==CKEDITOR.NODE_ELEMENT&&(q=l.getParent())&&1==q.getChildCount()&&!(l.getName() in n);){l=q}return l.type==CKEDITOR.NODE_ELEMENT&&l.getName() in n&&l}}function k(l){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(n,r){var m=n.config.useComputedState,t,m=void 0===m||m;if(!m){t=r.lastElement;for(var p=n.editable();t&&!(t.getName() in A||t.equals(p));){var q=t.getParent();if(!q){break}t=q}}t=t||r.block||r.blockLimit;t.equals(n.editable())&&(p=n.getSelection().getRanges()[0].getEnclosedNode())&&p.type==CKEDITOR.NODE_ELEMENT&&(t=p);t&&(m=m?t.getComputedStyle("direction"):t.getStyle("direction")||t.getAttribute("dir"),n.getCommand("bidirtl").setState("rtl"==m?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),n.getCommand("bidiltr").setState("ltr"==m?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));m=(r.block||r.blockLimit||n.editable()).getDirection(1);m!=(n._.selDir||n.lang.dir)&&(n._.selDir=m,n.fire("contentDirChanged",m))},exec:function(D){var F=D.getSelection(),H=D.config.enterMode,G=F.getRanges();if(G&&G.length){for(var w={},E=F.createBookmarks(),G=G.createIterator(),C,u=0;C=G.getNextRange(1);){var v=C.getEnclosedNode();v&&(!v||v.type==CKEDITOR.NODE_ELEMENT&&v.getName() in i)||(v=z(C,B,H));v&&j(v,l,D,w);var t=new CKEDITOR.dom.walker(C),r=E[u].startNode,q=E[u++].endNode;t.evaluator=function(m){var p=H==CKEDITOR.ENTER_P?"p":"div",n;if(n=(m?m.type==CKEDITOR.NODE_ELEMENT:!1)&&m.getName() in B){if(p=m.is(p)){p=(p=m.getParent())?p.type==CKEDITOR.NODE_ELEMENT:!1}n=!(p&&m.getParent().is("blockquote"))}return !!(n&&m.getPosition(r)&CKEDITOR.POSITION_FOLLOWING&&(m.getPosition(q)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;v=t.next();){j(v,l,D,w)}C=C.createIterator();for(C.enlargeBr=H!=CKEDITOR.ENTER_BR;v=C.getNextParagraph(H==CKEDITOR.ENTER_P?"p":"div");){j(v,l,D,w)}}CKEDITOR.dom.element.clearAllMarkers(w);D.forceNextSelectionCheck();F.selectBookmarks(E);D.focus()}}}}function y(m){var n=m==x.setAttribute,p=m==x.removeAttribute,l=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(u,q){if(!this.isReadOnly()){var t;if(t=u==(n||p?"dir":"direction")||"style"==u&&(p||l.test(q))){m:{t=this;for(var r=t.getDocument().getBody().getParent();t;){if(t.equals(r)){t=!1;break m}t=t.getParent()}t=!0}t=!t}if(t&&(t=this.getDirection(1),r=m.apply(this,arguments),t!=this.getDirection(1))){return this.getDocument().fire("dirChanged",this),r}}return m.apply(this,arguments)}}var B={table:1,ul:1,ol:1,blockquote:1,div:1},i={},A={};CKEDITOR.tools.extend(i,B,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(A,i,{td:1});CKEDITOR.plugins.add("bidi",{init:function(l){function m(p,u,t,r,q){l.addCommand(t,new CKEDITOR.command(l,r));l.ui.addButton&&l.ui.addButton(p,{label:u,command:t,toolbar:"bidi,"+q})}if(!l.blockless){var n=l.lang.bidi;m("BidiLtr",n.ltr,"bidiltr",k("ltr"),10);m("BidiRtl",n.rtl,"bidirtl",k("rtl"),20);l.on("contentDom",function(){l.document.on("dirChanged",function(p){l.fire("dirChanged",{node:p.data,dir:p.data.getDirection(1)})})});l.on("contentDirChanged",function(p){p=(l.lang.dir!=p.data?"add":"remove")+"Class";var q=l.ui.space(l.config.toolbarLocation);if(q){q[p]("cke_mixed_dir_content")}})}}});for(var x=CKEDITOR.dom.element.prototype,o=["setStyle","removeStyle","setAttribute","removeAttribute"],s=0;s<o.length;s++){x[o[s]]=CKEDITOR.tools.override(x[o[s]],y)}})();(function(){var i={exec:function(q){var w=q.getCommand("blockquote").state,o=q.getSelection(),u=o&&o.getRanges()[0];if(u){var p=o.createBookmarks();if(CKEDITOR.env.ie){var s=p[0].startNode,v=p[0].endNode,t;if(s&&"blockquote"==s.getParent().getName()){for(t=s;t=t.getNext();){if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()){s.move(t,!0);break}}}if(v&&"blockquote"==v.getParent().getName()){for(t=v;t=t.getPrevious();){if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()){v.move(t);break}}}}var r=u.createIterator();r.enlargeBr=q.config.enterMode!=CKEDITOR.ENTER_BR;if(w==CKEDITOR.TRISTATE_OFF){for(s=[];w=r.getNextParagraph();){s.push(w)}1>s.length&&(w=q.document.createElement(q.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),v=p.shift(),u.insertNode(w),w.append(new CKEDITOR.dom.text("",q.document)),u.moveToBookmark(v),u.selectNodeContents(w),u.collapse(!0),v=u.createBookmark(),s.push(w),p.unshift(v));t=s[0].getParent();u=[];for(v=0;v<s.length;v++){w=s[v],t=t.getCommonAncestor(w.getParent())}for(w={table:1,tbody:1,tr:1,ol:1,ul:1};w[t.getName()];){t=t.getParent()}for(v=null;0<s.length;){for(w=s.shift();!w.getParent().equals(t);){w=w.getParent()}w.equals(v)||u.push(w);v=w}for(;0<u.length;){if(w=u.shift(),"blockquote"==w.getName()){for(v=new CKEDITOR.dom.documentFragment(q.document);w.getFirst();){v.append(w.getFirst().remove()),s.push(v.getLast())}v.replace(w)}else{s.push(w)}}u=q.document.createElement("blockquote");for(u.insertBefore(s[0]);0<s.length;){w=s.shift(),u.append(w)}}else{if(w==CKEDITOR.TRISTATE_ON){v=[];for(t={};w=r.getNextParagraph();){for(s=u=null;w.getParent();){if("blockquote"==w.getParent().getName()){u=w.getParent();s=w;break}w=w.getParent()}u&&s&&!s.getCustomData("blockquote_moveout")&&(v.push(s),CKEDITOR.dom.element.setMarker(t,s,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(t);w=[];s=[];for(t={};0<v.length;){r=v.shift(),u=r.getParent(),r.getPrevious()?r.getNext()?(r.breakParent(r.getParent()),s.push(r.getNext())):r.remove().insertAfter(u):r.remove().insertBefore(u),u.getCustomData("blockquote_processed")||(s.push(u),CKEDITOR.dom.element.setMarker(t,u,"blockquote_processed",!0)),w.push(r)}CKEDITOR.dom.element.clearAllMarkers(t);for(v=s.length-1;0<=v;v--){u=s[v];w:{t=u;for(var r=0,j=t.getChildCount(),n=void 0;r<j&&(n=t.getChild(r));r++){if(n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()){t=!1;break w}}t=!0}t&&u.remove()}if(q.config.enterMode==CKEDITOR.ENTER_BR){for(u=!0;w.length;){if(r=w.shift(),"div"==r.getName()){v=new CKEDITOR.dom.documentFragment(q.document);!u||!r.getPrevious()||r.getPrevious().type==CKEDITOR.NODE_ELEMENT&&r.getPrevious().isBlockBoundary()||v.append(q.document.createElement("br"));for(u=r.getNext()&&!(r.getNext().type==CKEDITOR.NODE_ELEMENT&&r.getNext().isBlockBoundary());r.getFirst();){r.getFirst().remove().appendTo(v)}u&&v.append(q.document.createElement("br"));v.replace(r);u=!1}}}}}o.selectBookmarks(p);q.focus()}},refresh:function(k,j){this.setState(k.elementPath(j.block||j.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(j){j.blockless||(j.addCommand("blockquote",i),j.ui.addButton&&j.ui.addButton("Blockquote",{label:j.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})})();(function(){function j(p,r,u){r.type||(r.type="auto");if(u&&!1===p.fire("beforePaste",r)||!r.dataValue&&r.dataTransfer.isEmpty()){return !1}r.dataValue||(r.dataValue="");if(CKEDITOR.env.gecko&&"drop"==r.method&&p.toolbox){p.once("afterPaste",function(){p.toolbox.focus()})}return p.fire("paste",r)}function o(N){function O(){var p=N.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var u=function(w){N.readOnly&&"cut"==w.name||E.initPasteDataTransfer(w,N);w.data.preventDefault()};p.on("copy",u);p.on("cut",u);p.on("cut",function(){N.readOnly||N.extractSelectedHtml()},null,null,999)}p.on(E.mainPasteEvent,function(w){"beforepaste"==E.mainPasteEvent&&D||G(w)});"beforepaste"==E.mainPasteEvent&&(p.on("paste",function(w){y||(K(),w.data.preventDefault(),G(w),J("paste")||N.openDialog("paste"))}),p.on("contextmenu",I,null,null,0),p.on("beforepaste",function(w){!w.data||w.data.$.ctrlKey||w.data.$.shiftKey||I()},null,null,0));p.on("beforecut",function(){!D&&H(N)});var v;p.attachListener(CKEDITOR.env.ie?p:N.document.getDocumentElement(),"mouseup",function(){v=setTimeout(function(){B()},0)});N.on("destroy",function(){clearTimeout(v)});p.on("keyup",B)}function M(p){return{type:p,canUndo:"cut"==p,startDisabled:!0,exec:function(){"cut"==this.type&&H();var u;var v=this.type;if(CKEDITOR.env.ie){u=J(v)}else{try{u=N.document.$.execCommand(v,!1,null)}catch(w){u=!1}}u||N.showNotification(N.lang.clipboard[this.type+"Error"]);return u}}}function L(){return{canUndo:!1,async:!0,exec:function(p,u){var v=function(z,P){z&&j(p,z,!!P);p.fire("afterCommandExec",{name:"paste",command:w,returnValue:!!z})},w=this;"string"==typeof u?v({dataValue:u,method:"paste",dataTransfer:E.initPasteDataTransfer()},1):p.getClipboardData(v)}}}function K(){y=1;setTimeout(function(){y=0},100)}function I(){D=1;setTimeout(function(){D=0},10)}function J(p){var w=N.document,z=w.getBody(),v=!1,u=function(){v=!0};z.on(p,u);7<CKEDITOR.env.version?w.$.execCommand(p):w.$.selection.createRange().execCommand(p);z.removeListener(p,u);return v}function H(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var p=N.getSelection(),v,w,u;p.getType()==CKEDITOR.SELECTION_ELEMENT&&(v=p.getSelectedElement())&&(w=p.getRanges()[0],u=N.document.createText(""),u.insertBefore(v),w.setStartBefore(u),w.setEndAfter(v),p.selectRanges([w]),setTimeout(function(){v.getParent()&&(u.remove(),p.selectElement(v))},0))}}function F(U,S){var T=N.document,R=N.editable(),Q=function(W){W.cancel()},p;if(!T.getById("cke_pastebin")){var P=N.getSelection(),z=P.createBookmarks();CKEDITOR.env.ie&&P.root.fire("selectionchange");var u=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!R.is("body")||CKEDITOR.env.ie?"div":"body",T);u.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var w=0,T=T.getWindow();CKEDITOR.env.webkit?(R.append(u),u.addClass("cke_editable"),R.is("body")||(w="static"!=R.getComputedStyle("position")?R:CKEDITOR.dom.element.get(R.$.offsetParent),w=w.getDocumentPosition().y)):R.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(u);u.setStyles({position:"absolute",top:T.getScrollPosition().y-w+10+"px",width:"1px",height:Math.max(1,T.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&u.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(w=u.getParent().isReadOnly())?(u.setOpacity(0),u.setAttribute("contenteditable",!0)):u.setStyle("ltr"==N.config.contentsLangDirection?"left":"right","-1000px");N.on("selectionChange",Q,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko){p=R.once("blur",Q,null,null,-100)}w&&u.focus();w=new CKEDITOR.dom.range(u);w.selectNodeContents(u);var V=w.select();CKEDITOR.env.ie&&(p=R.once("blur",function(){N.lockSelection(V)}));var v=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=v);p&&p.removeListener();CKEDITOR.env.ie&&R.focus();P.selectBookmarks(z);u.remove();var W;CKEDITOR.env.webkit&&(W=u.getFirst())&&W.is&&W.hasClass("Apple-style-span")&&(u=W);N.removeListener("selectionChange",Q);S(u.getHtml())},0)}}function r(){if("paste"==E.mainPasteEvent){return N.fire("beforePaste",{type:"auto",method:"paste"}),!1}N.focus();K();var p=N.focusManager;p.lock();if(N.editable().fire(E.mainPasteEvent)&&!J("paste")){return p.unlock(),!1}p.unlock();return !0}function C(p){if("wysiwyg"==N.mode){switch(p.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:p=N.editable();K();"paste"==E.mainPasteEvent&&p.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:N.fire("saveSnapshot"),setTimeout(function(){N.fire("saveSnapshot")},50)}}}function G(p){var u={type:"auto",method:"paste",dataTransfer:E.initPasteDataTransfer(p)};u.dataTransfer.cacheData();var v=!1!==N.fire("beforePaste",u);v&&E.canClipboardApiBeTrusted(u.dataTransfer,N)?(p.data.preventDefault(),setTimeout(function(){j(N,u)},0)):F(p,function(w){u.dataValue=w.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");v&&j(N,u)})}function B(){if("wysiwyg"==N.mode){var p=A("paste");N.getCommand("cut").setState(A("cut"));N.getCommand("copy").setState(A("copy"));N.getCommand("paste").setState(p);N.fire("pasteState",p)}}function A(p){if(x&&p in {paste:1,cut:1}){return CKEDITOR.TRISTATE_DISABLED}if("paste"==p){return CKEDITOR.TRISTATE_OFF}p=N.getSelection();var u=p.getRanges();return p.getType()==CKEDITOR.SELECTION_NONE||1==u.length&&u[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var E=CKEDITOR.plugins.clipboard,D=0,y=0,x=0;(function(){N.on("key",C);N.on("contentDom",O);N.on("selectionChange",function(p){x=p.data.selection.getRanges()[0].checkReadOnly();B()});N.contextMenu&&N.contextMenu.addListener(function(p,u){x=u.getRanges()[0].checkReadOnly();return{cut:A("cut"),copy:A("copy"),paste:A("paste")}})})();(function(){function p(P,Q,z,w,v){var u=N.lang.clipboard[Q];N.addCommand(Q,z);N.ui.addButton&&N.ui.addButton(P,{label:u,command:Q,toolbar:"clipboard,"+w});N.addMenuItems&&N.addMenuItem(Q,{label:u,command:Q,group:"clipboard",order:v})}p("Cut","cut",M("cut"),10,1);p("Copy","copy",M("copy"),20,4);p("Paste","paste",L(),30,8)})();N.getClipboardData=function(p,Q){function R(S){S.removeListener();S.cancel();Q(S.data)}function P(S){S.removeListener();S.cancel();u=!0;Q({type:v,dataValue:S.data.dataValue,dataTransfer:S.data.dataTransfer,method:"paste"})}function z(){this.customTitle=p&&p.title}var w=!1,v="auto",u=!1;Q||(Q=p,p=null);N.on("paste",R,null,null,0);N.on("beforePaste",function(S){S.removeListener();w=!0;v=S.data.type},null,null,1000);!1===r()&&(N.removeListener("paste",R),w&&N.fire("pasteDialog",z)?(N.on("pasteDialogCommit",P),N.on("dialogHide",function(S){S.removeListener();S.data.removeListener("pasteDialogCommit",P);setTimeout(function(){u||Q(null)},10)})):Q(null))}}function n(p){if(CKEDITOR.env.webkit){if(!p.match(/^[^<]*$/g)&&!p.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi)){return"html"}}else{if(CKEDITOR.env.ie){if(!p.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!p.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi)){return"html"}}else{if(CKEDITOR.env.gecko){if(!p.match(/^([^<]|<br( ?\/)?>)*$/gi)){return"html"}}else{return"html"}}}return"htmlifiedtext"}function m(p,r){function u(v){return CKEDITOR.tools.repeat("\x3c/p\x3e\x3cp\x3e",~~(v/2))+(1==v%2?"\x3cbr\x3e":"")}r=r.replace(/\s+/g," ").replace(/> +</g,"\x3e\x3c").replace(/<br ?\/>/gi,"\x3cbr\x3e");r=r.replace(/<\/?[A-Z]+>/g,function(v){return v.toLowerCase()});if(r.match(/^[^<]$/)){return r}CKEDITOR.env.webkit&&-1<r.indexOf("\x3cdiv\x3e")&&(r=r.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"\x3cbr\x3e").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"\x3cdiv\x3e\x3c/div\x3e"),r.match(/<div>(<br>|)<\/div>/)&&(r="\x3cp\x3e"+r.replace(/(<div>(<br>|)<\/div>)+/g,function(v){return u(v.split("\x3c/div\x3e\x3cdiv\x3e").length+1)})+"\x3c/p\x3e"),r=r.replace(/<\/div><div>/g,"\x3cbr\x3e"),r=r.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&p.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(r=r.replace(/^<br><br>$/,"\x3cbr\x3e")),-1<r.indexOf("\x3cbr\x3e\x3cbr\x3e")&&(r="\x3cp\x3e"+r.replace(/(<br>){2,}/g,function(v){return u(v.length/4)})+"\x3c/p\x3e"));return k(p,r)}function i(){function p(){var v={},u;for(u in CKEDITOR.dtd){"$"!=u.charAt(0)&&"div"!=u&&"span"!=u&&(v[u]=1)}return v}var r={};return{get:function(u){return"plain-text"==u?r.plainText||(r.plainText=new CKEDITOR.filter("br")):"semantic-content"==u?((u=r.semanticContent)||(u=new CKEDITOR.filter,u.allow({$1:{elements:p(),attributes:!0,styles:!1,classes:!1}}),u=r.semanticContent=u),u):u?new CKEDITOR.filter(u):null}}}function q(p,r,v){r=CKEDITOR.htmlParser.fragment.fromHtml(r);var u=new CKEDITOR.htmlParser.basicWriter;v.applyTo(r,!0,!1,p.activeEnterMode);r.writeHtml(u);return u.getHtml()}function k(p,r){p.enterMode==CKEDITOR.ENTER_BR?r=r.replace(/(<\/p><p>)+/g,function(u){return CKEDITOR.tools.repeat("\x3cbr\x3e",u.length/7*2)}).replace(/<\/?p>/g,""):p.enterMode==CKEDITOR.ENTER_DIV&&(r=r.replace(/<(\/)?p>/g,"\x3c$1div\x3e"));return r}function t(p){p.data.preventDefault();p.data.$.dataTransfer.dropEffect="none"}function s(p){var r=CKEDITOR.plugins.clipboard;p.on("contentDom",function(){function B(C,D,E){D.select();j(p,{dataTransfer:E,method:"drop"},1);E.sourceEditor.fire("saveSnapshot");E.sourceEditor.editable().extractHtmlFromRange(C);E.sourceEditor.getSelection().selectRanges([C]);E.sourceEditor.fire("saveSnapshot")}function A(C,D){C.select();j(p,{dataTransfer:D,method:"drop"},1);r.resetDragDataTransfer()}function z(C,E,F){var D={$:C.data.$,target:C.data.getTarget()};E&&(D.dragRange=E);F&&(D.dropRange=F);!1===p.fire(C.name,D)&&C.data.preventDefault()}function w(C){C.type!=CKEDITOR.NODE_ELEMENT&&(C=C.getParent());return C.getChildCount()}var x=p.editable(),v=CKEDITOR.plugins.clipboard.getDropTarget(p),u=p.ui.space("top"),y=p.ui.space("bottom");r.preventDefaultDropOnElement(u);r.preventDefaultDropOnElement(y);x.attachListener(v,"dragstart",z);x.attachListener(p,"dragstart",r.resetDragDataTransfer,r,null,1);x.attachListener(p,"dragstart",function(C){r.initDragDataTransfer(C,p)},null,null,2);x.attachListener(p,"dragstart",function(){var C=r.dragRange=p.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(r.dragStartContainerChildCount=C?w(C.startContainer):null,r.dragEndContainerChildCount=C?w(C.endContainer):null)},null,null,100);x.attachListener(v,"dragend",z);x.attachListener(p,"dragend",r.initDragDataTransfer,r,null,1);x.attachListener(p,"dragend",r.resetDragDataTransfer,r,null,100);x.attachListener(v,"dragover",function(D){var C=D.data.getTarget();C&&C.is&&C.is("html")?D.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&D.data.$.dataTransfer.types.contains("Files")&&D.data.preventDefault()});x.attachListener(v,"drop",function(D){if(!D.data.$.defaultPrevented){D.data.preventDefault();var E=D.data.getTarget();if(!E.isReadOnly()||E.type==CKEDITOR.NODE_ELEMENT&&E.is("html")){var E=r.getRangeAtDropPosition(D,p),C=r.dragRange;E&&z(D,C,E)}}},null,null,9999);x.attachListener(p,"drop",r.initDragDataTransfer,r,null,1);x.attachListener(p,"drop",function(F){if(F=F.data){var E=F.dropRange,D=F.dragRange,C=F.dataTransfer;C.getTransferType(p)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){r.internalDrop(D,E,C,p)},0):C.getTransferType(p)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?B(D,E,C):A(E,C)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(p){var r,u=i();p.config.forcePasteAsPlainText?r="plain-text":p.config.pasteFilter?r=p.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter" in p.config||(r="semantic-content");p.pasteFilter=u.get(r);o(p);s(p);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));p.on("paste",function(v){v.data.dataTransfer||(v.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!v.data.dataValue){var x=v.data.dataTransfer,w=x.getData("text/html");if(w){v.data.dataValue=w,v.data.type="html"}else{if(w=x.getData("text/plain")){v.data.dataValue=p.editable().transformPlainTextToHtml(w),v.data.type="text"}}}},null,null,1);p.on("paste",function(x){var v=x.data.dataValue,A=CKEDITOR.dtd.$block;-1<v.indexOf("Apple-")&&(v=v.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=x.data.type&&(v=v.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(C,B){return B.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;")})),-1<v.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&(x.data.startsWithEOL=1,x.data.preSniffing="html",v=v.replace(/<br class="Apple-interchange-newline">/,"")),v=v.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(v.match(/^<[^<]+cke_(editable|contents)/i)){var z,y,w=new CKEDITOR.dom.element("div");for(w.setHtml(v);1==w.getChildCount()&&(z=w.getFirst())&&z.type==CKEDITOR.NODE_ELEMENT&&(z.hasClass("cke_editable")||z.hasClass("cke_contents"));){w=y=z}y&&(v=y.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?v=v.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(B,C){return C.toLowerCase() in A?(x.data.preSniffing="html","\x3c"+C):B}):CKEDITOR.env.webkit?v=v.replace(/<\/(\w+)><div><br><\/div>$/,function(B,C){return C in A?(x.data.endsWithEOL=1,"\x3c/"+C+"\x3e"):B}):CKEDITOR.env.gecko&&(v=v.replace(/(\s)<br>$/,"$1"));x.data.dataValue=v},null,null,3);p.on("paste",function(w){w=w.data;var A=w.type,y=w.dataValue,z,x=p.config.clipboard_defaultContentType||"html",v=w.dataTransfer.getTransferType(p);z="html"==A||"html"==w.preSniffing?"html":n(y);"htmlifiedtext"==z&&(y=m(p.config,y));"text"==A&&"html"==z?y=q(p,y,u.get("plain-text")):v==CKEDITOR.DATA_TRANSFER_EXTERNAL&&p.pasteFilter&&!w.dontFilter&&(y=q(p,y,p.pasteFilter));w.startsWithEOL&&(y='\x3cbr data-cke-eol\x3d"1"\x3e'+y);w.endsWithEOL&&(y+='\x3cbr data-cke-eol\x3d"1"\x3e');"auto"==A&&(A="html"==z||"html"==x?"html":"text");w.type=A;w.dataValue=y;delete w.preSniffing;delete w.startsWithEOL;delete w.endsWithEOL},null,null,6);p.on("paste",function(v){v=v.data;v.dataValue&&(p.insertHtml(v.dataValue,v.type,v.range),setTimeout(function(){p.fire("afterPaste")},0))},null,null,1000);p.on("pasteDialog",function(v){setTimeout(function(){p.openDialog("paste",v.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(p,r){return p.getTransferType(r)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!p.isEmpty()||CKEDITOR.env.gecko&&(p.getData("text/html")||p.getFilesCount())?!0:!1},getDropTarget:function(p){var r=p.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||r.isInline()?r:p.document},fixSplitNodesAfterDrop:function(p,r,x,w){function v(y,B,A){var z=y;z.type==CKEDITOR.NODE_TEXT&&(z=y.getParent());if(z.equals(B)&&A!=B.getChildCount()){return y=r.startContainer.getChild(r.startOffset-1),B=r.startContainer.getChild(r.startOffset),y&&y.type==CKEDITOR.NODE_TEXT&&B&&B.type==CKEDITOR.NODE_TEXT&&(A=y.getLength(),y.setText(y.getText()+B.getText()),B.remove(),r.setStart(y,A),r.collapse(!0)),!0}}var u=r.startContainer;"number"==typeof w&&"number"==typeof x&&u.type==CKEDITOR.NODE_ELEMENT&&(v(p.startContainer,u,x)||v(p.endContainer,u,w))},isDropRangeAffectedByDragRange:function(p,r){var v=r.startContainer,u=r.endOffset;return p.endContainer.equals(v)&&p.endOffset<=u||p.startContainer.getParent().equals(v)&&p.startContainer.getIndex()<u||p.endContainer.getParent().equals(v)&&p.endContainer.getIndex()<u?!0:!1},internalDrop:function(p,r,z,y){var x=CKEDITOR.plugins.clipboard,v=y.editable(),w,u;y.fire("saveSnapshot");y.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(p,r,x.dragStartContainerChildCount,x.dragEndContainerChildCount);(u=this.isDropRangeAffectedByDragRange(p,r))||(w=p.createBookmark(!1));x=r.clone().createBookmark(!1);u&&(w=p.createBookmark(!1));p=w.startNode;r=w.endNode;u=x.startNode;r&&p.getPosition(u)&CKEDITOR.POSITION_PRECEDING&&r.getPosition(u)&CKEDITOR.POSITION_FOLLOWING&&u.insertBefore(p);p=y.createRange();p.moveToBookmark(w);v.extractHtmlFromRange(p,1);r=y.createRange();r.moveToBookmark(x);j(y,{dataTransfer:z,method:"drop",range:r},1);y.fire("unlockSnapshot")},getRangeAtDropPosition:function(I,J){var H=I.data.$,G=H.clientX,F=H.clientY,D=J.getSelection(!0).getRanges()[0],E=J.createRange();if(I.data.testRange){return I.data.testRange}if(document.caretRangeFromPoint){H=J.document.$.caretRangeFromPoint(G,F),E.setStart(CKEDITOR.dom.node(H.startContainer),H.startOffset),E.collapse(!0)}else{if(H.rangeParent){E.setStart(CKEDITOR.dom.node(H.rangeParent),H.rangeOffset),E.collapse(!0)}else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&D&&J.editable().hasFocus){return D}if(document.body.createTextRange){J.focus();H=J.document.getBody().$.createTextRange();try{for(var C=!1,A=0;20>A&&!C;A++){if(!C){try{H.moveToPoint(G,F-A),C=!0}catch(y){}}if(!C){try{H.moveToPoint(G,F+A),C=!0}catch(x){}}}if(C){var B="cke-temp-"+(new Date).getTime();H.pasteHTML('\x3cspan id\x3d"'+B+'"\x3e\x3c/span\x3e');var M=J.document.getById(B);E.moveToPosition(M,CKEDITOR.POSITION_BEFORE_START);M.remove()}else{var L=J.document.$.elementFromPoint(G,F),z=new CKEDITOR.dom.element(L),w;if(z.equals(J.editable())||"html"==z.getName()){return D&&D.startContainer&&!D.startContainer.equals(J.editable())?D:null}w=z.getClientRect();G<w.left?E.setStartAt(z,CKEDITOR.POSITION_AFTER_START):E.setStartAt(z,CKEDITOR.POSITION_BEFORE_END);E.collapse(!0)}}catch(K){return null}}else{return null}}}return E},initDragDataTransfer:function(p,r){var v=p.data.$?p.data.$.dataTransfer:null,u=new this.dataTransfer(v,r);v?this.dragData&&u.id==this.dragData.id?u=this.dragData:this.dragData=u:this.dragData?u=this.dragData:this.dragData=u;p.data.dataTransfer=u},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(p,r){if(this.isCustomCopyCutSupported&&p&&p.data&&p.data.$){var u=new this.dataTransfer(p.data.$.clipboardData,r);this.copyCutData&&u.id==this.copyCutData.id?(u=this.copyCutData,u.$=p.data.$.clipboardData):this.copyCutData=u;return u}return new this.dataTransfer(null,r)},preventDefaultDropOnElement:function(p){p&&p.on("dragover",t)}};var l=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(p,r){p&&(this.$=p);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(v){v=v.toLowerCase();return"text"==v||"text/plain"==v?"Text":"url"==v?"URL":v}};this.id=this.getData(l);this.id||(this.id="Text"==l?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=l){try{this.$.setData(l,this.id)}catch(u){}}r&&(this.sourceEditor=r,this.setData("text/html",r.getSelectedHtml(1)),"Text"==l||this.getData("text/plain")||this.setData("text/plain",r.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(p){p=this._.normalizeType(p);var r=this._.data[p];if(void 0===r||null===r||""===r){try{r=this.$.getData(p)}catch(u){}}if(void 0===r||null===r||""===r){r=""}"text/html"==p?(r=r.replace(this._.metaRegExp,""),(p=this._.bodyRegExp.exec(r))&&p.length&&(r=p[1],r=r.replace(this._.fragmentRegExp,""))):"Text"==p&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==r.substring(0,7)&&(r="");return r},setData:function(p,r){p=this._.normalizeType(p);this._.data[p]=r;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==p||"Text"==p){"Text"==l&&"Text"==p&&(this.id=r);try{this.$.setData(p,r)}catch(u){}}},getTransferType:function(p){return this.sourceEditor?this.sourceEditor==p?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function p(w){w=r._.normalizeType(w);var x=r.getData(w);x&&(r._.data[w]=x)}if(this.$){var r=this,v,u;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types){for(v=0;v<this.$.types.length;v++){p(this.$.types[v])}}}else{p("Text"),p("URL")}u=this._getImageFromClipboard();if(this.$&&this.$.files||u){this._.files=[];for(v=0;v<this.$.files.length;v++){this._.files.push(this.$.files[v])}0===this._.files.length&&u&&this._.files.push(u)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(p){return this._.files.length?this._.files[p]:this.$&&this.$.files&&this.$.files.length?this.$.files[p]:0===p?this._getImageFromClipboard():void 0},isEmpty:function(){var p={},r;if(this.getFilesCount()){return !1}for(r in this._.data){p[r]=1}if(this.$){if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types){for(var u=0;u<this.$.types.length;u++){p[this.$.types[u]]=1}}}else{p.Text=1,p.URL=1}}"Text"!=l&&(p[l]=0);for(r in p){if(p[r]&&""!==this.getData(r)){return !1}}return !0},_getImageFromClipboard:function(){var p;if(this.$&&this.$.items&&this.$.items[0]){try{if((p=this.$.items[0].getAsFile())&&p.type){return p}}catch(r){}}}}})();(function(){var k='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(k+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(k+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var k=k+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"'),k=k+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',j=CKEDITOR.addTemplate("buttonArrow",'\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":"")+"\x3c/span\x3e"),i=CKEDITOR.addTemplate("button",k);CKEDITOR.plugins.add("button",{beforeInit:function(l){l.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(l){CKEDITOR.tools.extend(this,l,{title:l.label,click:l.click||function(m){m.execCommand(l.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(l){return new CKEDITOR.ui.button(l)}};CKEDITOR.ui.button.prototype={render:function(E,D){function C(){var l=E.mode;l&&(l=this.modes[l]?void 0!==x[l]?x[l]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,l=E.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:l,this.setState(l),this.refresh&&this.refresh())}var w=CKEDITOR.env,t=this._.id=CKEDITOR.tools.getNextId(),A="",z=this.command,s;this._.editor=E;var B={id:t,button:this,editor:E,focus:function(){CKEDITOR.document.getById(t).focus()},execute:function(){this.button.click(E)},attach:function(l){this.button.attach(l)}},G=CKEDITOR.tools.addFunction(function(l){if(B.onkey){return l=new CKEDITOR.dom.event(l),!1!==B.onkey(B,l.getKeystroke())}}),F=CKEDITOR.tools.addFunction(function(m){var l;B.onfocus&&(l=!1!==B.onfocus(B,new CKEDITOR.dom.event(m)));return l}),r=0;B.clickFn=s=CKEDITOR.tools.addFunction(function(){r&&(E.unlockSelection(1),r=0);B.execute();w.iOS&&E.focus()});if(this.modes){var x={};E.on("beforeModeUnload",function(){E.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(x[E.mode]=this._.state)},this);E.on("activeFilterChange",C,this);E.on("mode",C,this);!this.readOnly&&E.on("readOnly",C,this)}else{z&&(z=E.getCommand(z))&&(z.on("state",function(){this.setState(z.state)},this),A+=z.state==CKEDITOR.TRISTATE_ON?"on":z.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off")}if(this.directional){E.on("contentDirChanged",function(l){var n=CKEDITOR.document.getById(this._.id),m=n.getFirst();l=l.data;l!=E.lang.dir?n.addClass("cke_"+l):n.removeClass("cke_ltr").removeClass("cke_rtl");m.setAttribute("style",CKEDITOR.skin.getIconStyle(y,"rtl"==l,this.icon,this.iconOffset))},this)}z||(A+="off");var o=this.name||this.command,y=o;this.icon&&!/\./.test(this.icon)&&(y=this.icon,this.icon=null);A={id:t,name:o,iconName:y,label:this.label,cls:this.className||"",state:A,ariaDisabled:"disabled"==A?"true":"false",title:this.title,titleJs:w.gecko&&!w.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:G,focusFn:F,clickFn:s,style:CKEDITOR.skin.getIconStyle(y,"rtl"==E.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?j.output():""};i.output(A,D);if(this.onRender){this.onRender()}return B},setState:function(m){if(this._.state==m){return !1}this._.state=m;var l=CKEDITOR.document.getById(this._.id);return l?(l.setState(m,"cke_button"),m==CKEDITOR.TRISTATE_DISABLED?l.setAttribute("aria-disabled",!0):l.removeAttribute("aria-disabled"),this.hasArrow?(m=m==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(m)):m==CKEDITOR.TRISTATE_ON?l.setAttribute("aria-pressed",!0):l.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(m){if(this._.feature){return this._.feature}var l=this;this.allowedContent||this.requiredContent||!this.command||(l=m.getCommand(this.command)||l);return this._.feature=l}};CKEDITOR.ui.prototype.addButton=function(m,l){this.add(m,CKEDITOR.UI_BUTTON,l)}})();CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function i(k){var j=this._;j.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(k),j.on?j.panel.hide():j.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(k){var j=k.panel||{};delete k.panel;this.base(k);this.document=j.parent&&j.parent.getDocument()||CKEDITOR.document;j.block={attributes:j.attributes};this.hasArrow=j.toolbarRelated=!0;this.click=i;this._={panelDefinition:j}},statics:{handler:{create:function(j){return new CKEDITOR.ui.panelButton(j)}}},proto:{createPanel:function(p){var k=this._;if(!k.panel){var m=this._.panelDefinition,n=this._.panelDefinition.block,l=m.parent||CKEDITOR.document.getBody(),o=this._.panel=new CKEDITOR.ui.floatPanel(p,l,m),m=o.addBlock(k.id,n),j=this;o.onShow=function(){j.className&&this.element.addClass(j.className+"_panel");j.setState(CKEDITOR.TRISTATE_ON);k.on=1;j.editorFocus&&p.focus();if(j.onOpen){j.onOpen()}};o.onHide=function(q){j.className&&this.element.getFirst().removeClass(j.className+"_panel");j.setState(j.modes&&j.modes[p.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);k.on=0;if(!q&&j.onClose){j.onClose()}};o.onEscape=function(){o.hide(1);j.document.getById(k.id).focus()};if(this.onBlock){this.onBlock(o,m)}m.onHide=function(){k.on=0;j.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(i){i.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});CKEDITOR.UI_PANELBUTTON="panelbutton";(function(){CKEDITOR.plugins.add("panel",{beforeInit:function(l){l.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(m,l){l&&CKEDITOR.tools.extend(this,l);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=m;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(l){return new CKEDITOR.ui.panel(l)}};var k=CKEDITOR.addTemplate("panel",'\x3cdiv lang\x3d"{langCode}" id\x3d"{id}" dir\x3d{dir} class\x3d"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style\x3d"z-index:{z-index}" role\x3d"presentation"\x3e{frame}\x3c/div\x3e'),j=CKEDITOR.addTemplate("panel-frame",'\x3ciframe id\x3d"{id}" class\x3d"cke_panel_frame" role\x3d"presentation" frameborder\x3d"0" src\x3d"{src}"\x3e\x3c/iframe\x3e'),i=CKEDITOR.addTemplate("panel-frame-inner",'\x3c!DOCTYPE html\x3e\x3chtml class\x3d"cke_panel_container {env}" dir\x3d"{dir}" lang\x3d"{langCode}"\x3e\x3chead\x3e{css}\x3c/head\x3e\x3cbody class\x3d"cke_{dir}" style\x3d"margin:0;padding:0" onload\x3d"{onload}"\x3e\x3c/body\x3e\x3c/html\x3e');CKEDITOR.ui.panel.prototype={render:function(m,l){this.getHolderElement=function(){var q=this._.holder;if(!q){if(this.isFramed){var q=this.document.getById(this.id+"_frame"),p=q.getParent(),q=q.getFrameDocument();CKEDITOR.env.iOS&&p.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});p=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad){this.onLoad()}},this));q.write(i.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+p+");"},o)));q.getWindow().$.CKEDITOR=CKEDITOR;q.on("keydown",function(s){var r=s.data.getKeystroke(),t=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(r)?s.data.preventDefault():(27==r||r==("rtl"==t?39:37))&&this.onEscape&&!1===this.onEscape(r)&&s.data.preventDefault()},this);q=q.getBody();q.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(p)}else{q=this.document.getById(this.id)}this._.holder=q}return q};var o={editorId:m.id,id:this.id,langCode:m.langCode,dir:m.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":m.config.baseFloatZIndex+1};if(this.isFramed){var n=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";o.frame=j.output({id:this.id+"_frame",src:n})}n=k.output(o);l&&l.push(n);return n},addBlock:function(m,l){l=this._.blocks[m]=l instanceof CKEDITOR.ui.panel.block?l:new CKEDITOR.ui.panel.block(this.getHolderElement(),l);this._.currentBlock||this.showBlock(m);return l},getBlock:function(l){return this._.blocks[l]},showBlock:function(m){m=this._.blocks[m];var l=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");l&&l.hide();this._.currentBlock=m;CKEDITOR.fire("ariaWidget",n);m._.focusIndex=-1;this._.onKeyDown=m.onKeyDown&&CKEDITOR.tools.bind(m.onKeyDown,m);m.show();return m},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(m,l){this.element=m.append(m.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));l&&CKEDITOR.tools.extend(this,l);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(l){-1!=l&&(l=this.element.getElementsByTag("a").getItem(this._.focusIndex=l),CKEDITOR.env.webkit&&l.getDocument().getWindow().focus(),l.focus(),this.onMark&&this.onMark(l))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(m,l){var o=this.keys[m];switch(o){case"next":for(var n=this._.focusIndex,o=this.element.getElementsByTag("a"),p;p=o.getItem(++n);){if(p.getAttribute("_cke_focus")&&p.$.offsetWidth){this._.focusIndex=n;p.focus();break}}return p||l?!1:(this._.focusIndex=-1,this.onKeyDown(m,1));case"prev":n=this._.focusIndex;for(o=this.element.getElementsByTag("a");0<n&&(p=o.getItem(--n));){if(p.getAttribute("_cke_focus")&&p.$.offsetWidth){this._.focusIndex=n;p.focus();break}p=null}return p||l?!1:(this._.focusIndex=o.count(),this.onKeyDown(m,1));case"click":case"mouseup":return n=this._.focusIndex,(p=0<=n&&this.element.getElementsByTag("a").getItem(n))&&(p.$[o]?p.$[o]():p.$["on"+o]()),!1}return !0}}})})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});(function(){function i(n,k,q,m,o){o=CKEDITOR.tools.genKey(k.getUniqueId(),q.getUniqueId(),n.lang.dir,n.uiColor||"",m.css||"",o||"");var p=j[o];p||(p=j[o]=new CKEDITOR.ui.panel(k,m),p.element=q.append(CKEDITOR.dom.element.createFromHtml(p.render(n),k)),p.element.setStyles({display:"none",position:"absolute"}));return p}var j={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(v,u,t,o){function q(){s.hide()}t.forceIFrame=1;t.toolbarRelated&&v.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(u=CKEDITOR.document.getById("cke_"+v.name));var r=u.getDocument();o=i(v,r,u,t,o||0);var n=o.element,k=n.getFirst(),s=this;n.disableContextMenu();this.element=n;this._={editor:v,panel:o,parentElement:u,definition:t,document:r,iframe:k,children:[],dir:v.lang.dir,showBlockParams:null};v.on("mode",q);v.on("resize",q);r.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(l,k){return this._.panel.addBlock(l,k)},addListBlock:function(l,k){return this._.panel.addListBlock(l,k)},getBlock:function(k){return this._.panel.getBlock(k)},showBlock:function(G,F,E,x,z,A){var w=this._.panel,u=w.showBlock(G);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var C=this._.editor.editable();this._.returnFocus=C.hasFocus?C:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var y=this.element,C=this._.iframe,C=CKEDITOR.env.ie&&!CKEDITOR.env.edge?C:new CKEDITOR.dom.window(C.$.contentWindow),B=y.getDocument(),o=this._.parentElement.getPositionedAncestor(),H=F.getDocumentPosition(B),B=o?o.getDocumentPosition(B):{x:0,y:0},s="rtl"==this._.dir,D=H.x+(x||0)-B.x,v=H.y+(z||0)-B.y;!s||1!=E&&4!=E?s||2!=E&&3!=E||(D+=F.$.offsetWidth-1):D+=F.$.offsetWidth;if(3==E||4==E){v+=F.$.offsetHeight-1}this._.panel._.offsetParentId=F.getId();y.setStyles({top:v+"px",left:0,display:""});y.setOpacity(0);y.getFirst().removeStyle("width");this._.editor.focusManager.add(C);this._.blurSet||(CKEDITOR.event.useCapture=!0,C.on("blur",function(k){function l(){delete this._.returnFocus;this.hide()}this.allowBlur()&&k.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(l,0,this)):l.call(this))},this),C.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(C.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),C.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1);w.onEscape=CKEDITOR.tools.bind(function(k){if(this.onEscape&&!1===this.onEscape(k)){return !1}},this);CKEDITOR.tools.setTimeout(function(){var k=CKEDITOR.tools.bind(function(){var p=y;p.removeStyle("width");if(u.autoSize){var m=u.element.getDocument(),m=(CKEDITOR.env.webkit?u.element:m.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<m&&(m+=(p.$.offsetWidth||0)-(p.$.clientWidth||0)+3);p.setStyle("width",m+10+"px");m=u.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<m&&(m+=(p.$.offsetHeight||0)-(p.$.clientHeight||0)+3);p.setStyle("height",m+"px");w._.currentBlock.element.setStyle("display","none").removeStyle("display")}else{p.removeStyle("height")}s&&(D-=y.$.offsetWidth);y.setStyle("left",D+"px");var m=w.element.getWindow(),p=y.$.getBoundingClientRect(),m=m.getViewPaneSize(),I=p.width||p.right-p.left,t=p.height||p.bottom-p.top,n=s?p.right:m.width-p.left,q=s?m.width-p.right:p.left;s?n<I&&(D=q>I?D+I:m.width>I?D-p.left:D-p.right+m.width):n<I&&(D=q>I?D-I:m.width>I?D-p.right+m.width:D-p.left);I=p.top;m.height-p.top<t&&(v=I>t?v-t:m.height>t?v-p.bottom+m.height:v-p.top);CKEDITOR.env.ie&&(m=p=new CKEDITOR.dom.element(y.$.offsetParent),"html"==m.getName()&&(m=m.getDocument().getBody()),"rtl"==m.getComputedStyle("direction")&&(D=CKEDITOR.env.ie8Compat?D-2*y.getDocument().getDocumentElement().$.scrollLeft:D-(p.$.scrollWidth-p.$.clientWidth)));var p=y.getFirst(),r;(r=p.getCustomData("activePanel"))&&r.onHide&&r.onHide.call(this,1);p.setCustomData("activePanel",this);y.setStyles({top:v+"px",left:D+"px"});y.setOpacity(1);A&&A()},this);w.isLoaded?k():w.onLoad=k;CKEDITOR.tools.setTimeout(function(){var l=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();u.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=l);this.allowBlur(!0);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var k=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,k))},focus:function(){if(CKEDITOR.env.webkit){var k=CKEDITOR.document.getActive();k&&!k.equals(this._.iframe)&&k.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var k=this._.iframe.getFrameDocument().getActive();k&&k.is("a")&&(this._.lastFocused=k)},hide:function(k){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(k=k&&this._.returnFocus){CKEDITOR.env.webkit&&k.type&&k.getWindow().$.focus(),k.focus()}delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire("panelHide",this)}},allowBlur:function(l){var k=this._.panel;void 0!==l&&(k.allowBlur=l);return k.allowBlur},showAsChild:function(l,k,p,o,m,n){if(this._.activeChild!=l||l._.panel._.offsetParentId!=p.getId()){this.hideChild(),l.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=l,this._.focused=!1,l.showBlock(k,p,o,m,n),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){l.element.getChild(0).$.style.cssText+=""},100)}},hideChild:function(l){var k=this._.activeChild;k&&(delete k.onHide,delete this._.activeChild,k.hide(),l&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var l=CKEDITOR.tools.isEmpty(CKEDITOR.instances),k;for(k in j){var m=j[k];l?m.destroy():m.element.hide()}l&&(j={})})})();CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(o){function m(u,s,t,r){var q=new CKEDITOR.style(i["colorButton_"+s+"Style"]),l=CKEDITOR.tools.getNextId()+"_colorBox";o.ui.add(u,CKEDITOR.UI_PANELBUTTON,{label:t,title:t,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+r,allowedContent:q,requiredContent:q,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":n.panelTitle}},onBlock:function(v,p){p.autoSize=!0;p.element.addClass("cke_colorblock");p.element.setHtml(j(v,s,l));p.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var x=p.keys,w="rtl"==o.lang.dir;x[w?37:39]="next";x[40]="next";x[9]="next";x[w?39:37]="prev";x[38]="prev";x[CKEDITOR.SHIFT+9]="prev";x[32]="click"},refresh:function(){o.activeFilter.check(q)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var v=o.getSelection(),v=v&&v.getStartElement(),v=o.elementPath(v),p;if(v){v=v.block||v.blockLimit||o.document.getBody();do{p=v&&v.getComputedStyle("back"==s?"background-color":"color")||"transparent"}while("back"==s&&"transparent"==p&&v&&(v=v.getParent()));p&&"transparent"!=p||(p="#ffffff");this._.panel._.iframe.getFrameDocument().getById(l).setStyle("background-color",p);return p}}})}function j(r,w,x){var v=[],u=i.colorButton_colors.split(","),t=o.plugins.colordialog&&!1!==i.colorButton_enableMore,A=u.length+(t?2:1),z=CKEDITOR.tools.addFunction(function(q,p){function D(E){this.removeListener("ok",D);this.removeListener("cancel",D);"ok"==E.name&&C(this.getContentElement("picker","selectedColor").getValue(),p)}var C=arguments.callee;if("?"==q){o.openDialog("colordialog",function(){this.on("ok",D);this.on("cancel",D)})}else{o.focus();r.hide();o.fire("saveSnapshot");o.removeStyle(new CKEDITOR.style(i["colorButton_"+p+"Style"],{color:"inherit"}));if(q){var B=i["colorButton_"+p+"Style"];B.childRule="back"==p?function(E){return k(E)}:function(E){return !(E.is("a")||E.getElementsByTag("a").count())||k(E)};o.applyStyle(new CKEDITOR.style(B,{color:q}))}o.fire("saveSnapshot")}});v.push('\x3ca class\x3d"cke_colorauto" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',n.auto,'" onclick\x3d"CKEDITOR.tools.callFunction(',z,",null,'",w,"');return false;\" href\x3d\"javascript:void('",n.auto,'\')" role\x3d"option" aria-posinset\x3d"1" aria-setsize\x3d"',A,'"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"cke_colorbox" id\x3d"',x,'"\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd colspan\x3d7 align\x3dcenter\x3e',n.auto,'\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/a\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e');for(x=0;x<u.length;x++){0===x%8&&v.push("\x3c/tr\x3e\x3ctr\x3e");var y=u[x].split("/"),s=y[0],l=y[1]||s;y[1]||(s="#"+s.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));y=o.lang.colorbutton.colors[l]||l;v.push('\x3ctd\x3e\x3ca class\x3d"cke_colorbox" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',y,'" onclick\x3d"CKEDITOR.tools.callFunction(',z,",'",s,"','",w,"'); return false;\" href\x3d\"javascript:void('",y,'\')" role\x3d"option" aria-posinset\x3d"',x+2,'" aria-setsize\x3d"',A,'"\x3e\x3cspan class\x3d"cke_colorbox" style\x3d"background-color:#',l,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')}t&&v.push('\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d8 align\x3dcenter\x3e\x3ca class\x3d"cke_colormore" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',n.more,'" onclick\x3d"CKEDITOR.tools.callFunction(',z,",'?','",w,"');return false;\" href\x3d\"javascript:void('",n.more,"')\"",' role\x3d"option" aria-posinset\x3d"',A,'" aria-setsize\x3d"',A,'"\x3e',n.more,"\x3c/a\x3e\x3c/td\x3e");v.push("\x3c/tr\x3e\x3c/table\x3e");return v.join("")}function k(l){return"false"==l.getAttribute("contentEditable")||l.getAttribute("data-nostyle")}var i=o.config,n=o.lang.colorbutton;CKEDITOR.env.hc||(m("TextColor","fore",n.textColorTitle,10),m("BGColor","back",n.bgColorTitle,20))}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function(i){var j=new CKEDITOR.dialogCommand("colordialog");j.editorFocus=!1;i.addCommand("colordialog",j);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");i.getColorFromDialog=function(n,k){var m=function(o){this.removeListener("ok",m);this.removeListener("cancel",m);o="ok"==o.name?this.getValueOf("picker","selectedColor"):null;n.call(k,o)},l=function(o){o.on("ok",m);o.on("cancel",m)};i.execCommand("colordialog");if(i._.storedDialogs&&i._.storedDialogs.colordialog){l(i._.storedDialogs.colordialog)}else{CKEDITOR.on("dialogDefinition",function(p){if("colordialog"==p.data.name){var o=p.data.definition;p.removeListener();o.onLoad=CKEDITOR.tools.override(o.onLoad,function(q){return function(){l(this);o.onLoad=q;"function"==typeof q&&q.call(this)}})}})}}}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(k){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));k.addCommand("templates",new CKEDITOR.dialogCommand("templates"));k.ui.addButton&&k.ui.addButton("Templates",{label:k.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var j={},i={};CKEDITOR.addTemplates=function(k,l){j[k]=l};CKEDITOR.getTemplates=function(k){return j[k]};CKEDITOR.loadTemplates=function(l,n){for(var m=[],k=0,o=l.length;k<o;k++){i[l[k]]||(m.push(l[k]),i[l[k]]=1)}m.length?CKEDITOR.scriptLoader.load(m,n):setTimeout(n,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(k){for(var j=k.config.menu_groups.split(","),l=k._.menuGroups={},m=k._.menuItems={},i=0;i<j.length;i++){l[j[i]]=i+1}k.addMenuGroup=function(n,o){l[n]=o||100};k.addMenuItem=function(n,o){l[o.group]&&(m[n]=new CKEDITOR.menuItem(this,n,o))};k.addMenuItems=function(n){for(var o in n){this.addMenuItem(o,n[o])}};k.getMenuItem=function(n){return m[n]};k.removeMenuItem=function(n){delete m[n]}}});(function(){function j(m){m.sort(function(n,o){return n.group<o.group?-1:n.group>o.group?1:n.order<o.order?-1:n.order>o.order?1:0})}var i='\x3cspan class\x3d"cke_menuitem"\x3e\x3ca id\x3d"{id}" class\x3d"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href\x3d"{href}" title\x3d"{title}" tabindex\x3d"-1"_cke_focus\x3d1 hidefocus\x3d"true" role\x3d"{role}" aria-haspopup\x3d"{hasPopup}" aria-disabled\x3d"{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(i+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(i+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var i=i+(' onmouseover\x3d"CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout\x3d"CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;"\x3e'),k=CKEDITOR.addTemplate("menuItem",i+'\x3cspan class\x3d"cke_menubutton_inner"\x3e\x3cspan class\x3d"cke_menubutton_icon"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{iconStyle}"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"cke_menubutton_label"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e'),l=CKEDITOR.addTemplate("menuArrow",'\x3cspan class\x3d"cke_menuarrow"\x3e\x3cspan\x3e{label}\x3c/span\x3e\x3c/span\x3e');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(p,o){o=this._.definition=o||{};this.id=CKEDITOR.tools.getNextId();this.editor=p;this.items=[];this._.listeners=[];this._.level=o.level||1;var q=CKEDITOR.tools.extend({},o.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),n=q.block.attributes=q.attributes||{};!n.role&&(n.role="menu");this._.panelDefinition=q},_:{onShow:function(){var q=this.editor.getSelection(),o=q&&q.getStartElement(),u=this.editor.elementPath(),n=this._.listeners;this.removeAll();for(var t=0;t<n.length;t++){var p=n[t](o,q,u);if(p){for(var r in p){var s=this.editor.getMenuItem(r);!s||s.command&&!this.editor.getCommand(s.command).state||(s.state=p[r],this.add(s))}}}},onClick:function(m){this.hide();if(m.onClick){m.onClick()}else{m.command&&this.editor.execCommand(m.command)}},onEscape:function(n){var m=this.parent;m?m._.panel.hideChild(1):27==n&&this.hide(1);return !1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(q){var o=this._.subMenu,s=this.items[q];if(s=s.getItems&&s.getItems()){o?o.removeAll():(o=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),o.parent=this,o._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var n in s){var r=this.editor.getMenuItem(n);r&&(r.state=s[n],o.add(r))}var p=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(q));setTimeout(function(){o.show(p,2)},0)}else{this._.panel.hideChild(1)}}},proto:{add:function(m){m.order||(m.order=this.items.length);this.items.push(m)},removeAll:function(){this.items=[]},show:function(C,B,A,t){if(!this.parent&&(this._.onShow(),!this.items.length)){return}B=B||("rtl"==this.editor.lang.dir?2:1);var y=this.items,u=this.editor,v=this._.panel,x=this._.element;if(!v){v=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);v.onEscape=CKEDITOR.tools.bind(function(m){if(!1===this._.onEscape(m)){return !1}},this);v.onShow=function(){v._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};v.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);x=v.addBlock(this.id,this._.panelDefinition.block);x.autoSize=!0;var z=x.keys;z[40]="next";z[9]="next";z[38]="prev";z[CKEDITOR.SHIFT+9]="prev";z["rtl"==u.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";z[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(z[13]="mouseup");x=this._.element=x.element;z=x.getDocument();z.getBody().setStyle("overflow","hidden");z.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(m){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,u.config.menu_subMenuDelay||400,this,[m])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(n){var m=this.items[n];if(m.state==CKEDITOR.TRISTATE_DISABLED){this.hide(1)}else{if(m.getItems){this._.showSubMenu(n)}else{this._.onClick(m)}}},this)}j(y);for(var z=u.elementPath(),z=['\x3cdiv class\x3d"cke_menu'+(z&&z.direction()!=u.lang.dir?" cke_mixed_dir_content":"")+'" role\x3d"presentation"\x3e'],w=y.length,r=w&&y[0].group,s=0;s<w;s++){var o=y[s];r!=o.group&&(z.push('\x3cdiv class\x3d"cke_menuseparator" role\x3d"separator"\x3e\x3c/div\x3e'),r=o.group);o.render(this,s,z)}z.push("\x3c/div\x3e");x.setHtml(z.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(v,this.id,C,B,A,t):v.showBlock(this.id,C,B,A,t);u.fire("menuShow",[v])},addListener:function(m){this._.listeners.push(m)},hide:function(m){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(m)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(n,m,o){CKEDITOR.tools.extend(this,o,{order:0,className:"cke_menubutton__"+m});this.group=n._.menuGroups[this.group];this.editor=n;this.name=m},proto:{render:function(v,u,t){var o=v.id+String(u),r="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,m="",n=r==CKEDITOR.TRISTATE_ON?"on":r==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in {menuitemcheckbox:1,menuitemradio:1}&&(m=' aria-checked\x3d"'+(r==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var q=this.getItems,s="\x26#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",p=this.name;this.icon&&!/\./.test(this.icon)&&(p=this.icon);v={id:o,name:this.name,iconName:p,label:this.label,cls:this.className||"",state:n,hasPopup:q?"true":"false",disabled:r==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:v._.itemOverFn,moveOutFn:v._.itemOutFn,clickFn:v._.itemClickFn,index:u,iconStyle:CKEDITOR.skin.getIconStyle(p,"rtl"==this.editor.lang.dir,p==this.icon?null:this.icon,this.iconOffset),arrowHtml:q?l.output({label:s}):"",role:this.role?this.role:"menuitem",ariaChecked:m};k.output(v,t)}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(i){this.base.call(this,i,{panel:{className:"cke_menu_panel",attributes:{"aria-label":i.lang.contextmenu.options}}})},proto:{addTarget:function(i,k){i.on("contextmenu",function(n){n=n.data;var r=CKEDITOR.env.webkit?j:CKEDITOR.env.mac?n.$.metaKey:n.$.ctrlKey;if(!k||!r){n.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var r=this.editor,m=(new CKEDITOR.dom.elementPath(n.getTarget(),r.editable())).contains(function(s){return s.hasAttribute("contenteditable")},!0);m&&"false"==m.getAttribute("contenteditable")&&r.getSelection().fake(m)}var m=n.getTarget().getDocument(),q=n.getTarget().getDocument().getDocumentElement(),r=!m.equals(CKEDITOR.document),m=m.getWindow().getScrollPosition(),p=r?n.$.clientX:n.$.pageX||m.x+n.$.clientX,o=r?n.$.clientY:n.$.pageY||m.y+n.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(q,null,p,o)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var j,l=function(){j=0};i.on("keydown",function(m){j=CKEDITOR.env.mac?m.data.$.metaKey:m.data.$.ctrlKey});i.on("keyup",l);i.on("contextmenu",l)}},open:function(i,k,j,l){this.editor.focus();i=i||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(i,k,j,l)}}})},beforeInit:function(i){var j=i.contextMenu=new CKEDITOR.plugins.contextMenu(i);i.on("contentDom",function(){j.addTarget(i.editable(),!1!==i.config.browserContextMenuOnCtrl)});i.addCommand("contextMenu",{exec:function(){i.contextMenu.open(i.document.getBody())}});i.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");i.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});(function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(j){if(!j.blockless){var k=j.lang.div,i="div(*)";CKEDITOR.dialog.isTabEnabled(j,"editdiv","advanced")&&(i+=";div[dir,id,lang,title]{*}");j.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:i,requiredContent:"div",contextSensitive:!0,refresh:function(l,m){this.setState("div" in (l.config.div_wrapTable?m.root:m.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));j.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));j.addCommand("removediv",{requiredContent:"div",exec:function(m){function s(t){(t=CKEDITOR.plugins.div.getSurroundDiv(m,t))&&!t.data("cke-div-added")&&(p.push(t),t.data("cke-div-added"))}for(var l=m.getSelection(),o=l&&l.getRanges(),q,n=l.createBookmarks(),p=[],r=0;r<o.length;r++){q=o[r],q.collapsed?s(l.getStartElement()):(q=new CKEDITOR.dom.walker(q),q.evaluator=s,q.lastForward())}for(r=0;r<p.length;r++){p[r].remove(!0)}l.selectBookmarks(n)}});j.ui.addButton&&j.ui.addButton("CreateDiv",{label:k.toolbar,command:"creatediv",toolbar:"blocks,50"});j.addMenuItems&&(j.addMenuItems({editdiv:{label:k.edit,command:"editdiv",group:"div",order:1},removediv:{label:k.remove,command:"removediv",group:"div",order:5}}),j.contextMenu&&j.contextMenu.addListener(function(l){return !l||l.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(j)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(j,k){var i=j.elementPath(k);return j.elementPath(i.blockLimit).contains(function(l){return l.is("div")&&!l.isReadOnly()},1)}}})();CKEDITOR.plugins.add("resize",{init:function(y){function w(p){var n=x.width,k=x.height,l=n+(p.data.$.screenX-o.x)*("rtl"==v?-1:1);p=k+(p.data.$.screenY-o.y);u&&(n=Math.max(z.resize_minWidth,Math.min(l,z.resize_maxWidth)));m&&(k=Math.max(z.resize_minHeight,Math.min(p,z.resize_maxHeight)));y.resize(u?n:null,k)}function t(){CKEDITOR.document.removeListener("mousemove",w);CKEDITOR.document.removeListener("mouseup",t);y.document&&(y.document.removeListener("mousemove",w),y.document.removeListener("mouseup",t))}var z=y.config,i=y.ui.spaceId("resizer"),v=y.element?y.element.getDirection(1):"ltr";!z.resize_dir&&(z.resize_dir="vertical");void 0===z.resize_maxWidth&&(z.resize_maxWidth=3000);void 0===z.resize_maxHeight&&(z.resize_maxHeight=3000);void 0===z.resize_minWidth&&(z.resize_minWidth=750);void 0===z.resize_minHeight&&(z.resize_minHeight=250);if(!1!==z.resize_enabled){var s=null,o,x,u=("both"==z.resize_dir||"horizontal"==z.resize_dir)&&z.resize_minWidth!=z.resize_maxWidth,m=("both"==z.resize_dir||"vertical"==z.resize_dir)&&z.resize_minHeight!=z.resize_maxHeight,j=CKEDITOR.tools.addFunction(function(k){s||(s=y.getResizable());x={width:s.$.offsetWidth||0,height:s.$.offsetHeight||0};o={x:k.screenX,y:k.screenY};z.resize_minWidth>x.width&&(z.resize_minWidth=x.width);z.resize_minHeight>x.height&&(z.resize_minHeight=x.height);CKEDITOR.document.on("mousemove",w);CKEDITOR.document.on("mouseup",t);y.document&&(y.document.on("mousemove",w),y.document.on("mouseup",t));k.preventDefault&&k.preventDefault()});y.on("destroy",function(){CKEDITOR.tools.removeFunction(j)});y.on("uiSpace",function(k){if("bottom"==k.data.space){var l="";u&&!m&&(l=" cke_resizer_horizontal");!u&&m&&(l=" cke_resizer_vertical");var n='\x3cspan id\x3d"'+i+'" class\x3d"cke_resizer'+l+" cke_resizer_"+v+'" title\x3d"'+CKEDITOR.tools.htmlEncode(y.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+j+', event)"\x3e'+("ltr"==v?"â¢":"â£")+"\x3c/span\x3e";"ltr"==v&&"ltr"==l?k.data.html+=n:k.data.html=n+k.data.html}},y,null,100);y.on("maximize",function(k){y.ui.space("resizer")[k.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});(function(){function l(n){function r(){for(var u=p(),y=CKEDITOR.tools.clone(n.config.toolbarGroups)||i(n),x=0;x<y.length;x++){var v=y[x];if("/"!=v){"string"==typeof v&&(v=y[x]={name:v});var t,z=v.groups;if(z){for(var w=0;w<z.length;w++){t=z[w],(t=u[t])&&s(v,t)}}(t=u[v.name])&&s(v,t)}}return y}function p(){var t={},w,u,v;for(w in n.ui.items){u=n.ui.items[w],v=u.toolbar||"others",v=v.split(","),u=v[0],v=parseInt(v[1]||-1,10),t[u]||(t[u]=[]),t[u].push({name:w,order:v})}for(u in t){t[u]=t[u].sort(function(x,y){return x.order==y.order?0:0>y.order?-1:0>x.order?1:x.order<y.order?-1:1})}return t}function s(v,u){if(u.length){v.items?v.items.push(n.ui.create("-")):v.items=[];for(var t;t=u.shift();){t="string"==typeof t?t:t.name,m&&-1!=CKEDITOR.tools.indexOf(m,t)||(t=n.ui.create(t))&&n.addFeature(t)&&v.items.push(t)}}}function o(t){var u=[],w,x,v;for(w=0;w<t.length;++w){x=t[w],v={},"/"==x?u.push(x):CKEDITOR.tools.isArray(x)?(s(v,CKEDITOR.tools.clone(x)),u.push(v)):x.items&&(s(v,CKEDITOR.tools.clone(x.items)),v.name=x.name,u.push(v))}return u}var m=n.config.removeButtons,m=m&&m.split(","),q=n.config.toolbar;"string"==typeof q&&(q=n.config["toolbar_"+q]);return n.toolbar=q?o(q):r()}function i(m){return m._.toolbarGroups||(m._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var k=function(){this.toolbars=[];this.focusCommandExecuted=!1};k.prototype.focus=function(){for(var m=0,o;o=this.toolbars[m++];){for(var n=0,p;p=o.items[n++];){if(p.focus){p.focus();return}}}};var j={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(m){m.toolbox&&(m.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){m.toolbox.focus()},100):m.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(m){var o,n=function(v,s){var p,u="rtl"==m.lang.dir,q=m.config.toolbarGroupCycling,t=u?37:39,u=u?39:37,q=void 0===q||q;switch(s){case 9:case CKEDITOR.SHIFT+9:for(;!p||!p.items.length;){if(p=9==s?(p?p.next:v.toolbar.next)||m.toolbox.toolbars[0]:(p?p.previous:v.toolbar.previous)||m.toolbox.toolbars[m.toolbox.toolbars.length-1],p.items.length){for(v=p.items[o?p.items.length-1:0];v&&!v.focus;){(v=o?v.previous:v.next)||(p=0)}}}v&&v.focus();return !1;case t:p=v;do{p=p.next,!p&&q&&(p=v.toolbar.items[0])}while(p&&!p.focus);p?p.focus():n(v,9);return !1;case 40:return v.button&&v.button.hasArrow?(m.once("panelShow",function(r){r.data._.panel._.currentBlock.onKeyDown(40)}),v.execute()):n(v,40==s?t:u),!1;case u:case 38:p=v;do{p=p.previous,!p&&q&&(p=v.toolbar.items[v.toolbar.items.length-1])}while(p&&!p.focus);p?p.focus():(o=1,n(v,CKEDITOR.SHIFT+9),o=0);return !1;case 27:return m.focus(),!1;case 13:case 32:return v.execute(),!1}return !0};m.on("uiSpace",function(Q){if(Q.data.space==m.config.toolbarLocation){Q.removeListener();m.toolbox=new k;var P=CKEDITOR.tools.getNextId(),R=['\x3cspan id\x3d"',P,'" class\x3d"cke_voice_label"\x3e',m.lang.toolbar.toolbars,"\x3c/span\x3e",'\x3cspan id\x3d"'+m.ui.spaceId("toolbox")+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',P,'" onmousedown\x3d"return false;"\x3e'],P=!1!==m.config.toolbarStartupExpanded,O,M;m.config.toolbarCanCollapse&&m.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&R.push('\x3cspan class\x3d"cke_toolbox_main"'+(P?"\x3e":' style\x3d"display:none"\x3e'));for(var F=m.toolbox.toolbars,N=l(m),L=0;L<N.length;L++){var K,J=0,C,I=N[L],B;if(I){if(O&&(R.push("\x3c/span\x3e"),M=O=0),"/"===I){R.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e')}else{B=I.items||I;for(var y=0;y<B.length;y++){var E=B[y],G;if(E){var s=function(p){p=p.render(m,R);D=J.items.push(p)-1;0<D&&(p.previous=J.items[D-1],p.previous.next=p);p.toolbar=J;p.onkey=n;p.onfocus=function(){m.toolbox.focusCommandExecuted||m.focus()}};if(E.type==CKEDITOR.UI_SEPARATOR){M=O&&E}else{G=!1!==E.canGroup;if(!J){K=CKEDITOR.tools.getNextId();J={id:K,items:[]};C=I.name&&(m.lang.toolbar.toolbarGroups[I.name]||I.name);R.push('\x3cspan id\x3d"',K,'" class\x3d"cke_toolbar"',C?' aria-labelledby\x3d"'+K+'_label"':"",' role\x3d"toolbar"\x3e');C&&R.push('\x3cspan id\x3d"',K,'_label" class\x3d"cke_voice_label"\x3e',C,"\x3c/span\x3e");R.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var D=F.push(J)-1;0<D&&(J.previous=F[D-1],J.previous.next=J)}G?O||(R.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),O=1):O&&(R.push("\x3c/span\x3e"),O=0);M&&(s(M),M=0);s(E)}}}O&&(R.push("\x3c/span\x3e"),M=O=0);J&&R.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}}}m.config.toolbarCanCollapse&&R.push("\x3c/span\x3e");if(m.config.toolbarCanCollapse&&m.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var H=CKEDITOR.tools.addFunction(function(){m.execCommand("toolbarCollapse")});m.on("destroy",function(){CKEDITOR.tools.removeFunction(H)});m.addCommand("toolbarCollapse",{readOnly:1,exec:function(p){var q=p.ui.space("toolbar_collapser"),x=q.getPrevious(),v=p.ui.space("contents"),w=x.getParent(),u=parseInt(v.$.style.height,10),r=w.$.offsetHeight,t=q.hasClass("cke_toolbox_collapser_min");t?(x.show(),q.removeClass("cke_toolbox_collapser_min"),q.setAttribute("title",p.lang.toolbar.toolbarCollapse)):(x.hide(),q.addClass("cke_toolbox_collapser_min"),q.setAttribute("title",p.lang.toolbar.toolbarExpand));q.getFirst().setText(t?"â²":"â");v.setStyle("height",u-(w.$.offsetHeight-r)+"px");p.fire("resize",{outerHeight:p.container.$.offsetHeight,contentsHeight:v.$.offsetHeight,outerWidth:p.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});m.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");R.push('\x3ca title\x3d"'+(P?m.lang.toolbar.toolbarCollapse:m.lang.toolbar.toolbarExpand)+'" id\x3d"'+m.ui.spaceId("toolbar_collapser")+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');P||R.push(" cke_toolbox_collapser_min");R.push('" onclick\x3d"CKEDITOR.tools.callFunction('+H+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e',"\x3c/a\x3e")}R.push("\x3c/span\x3e");Q.data.html+=R.join("")}});m.on("destroy",function(){if(this.toolbox){var q,t=0,p,s,r;for(q=this.toolbox.toolbars;t<q.length;t++){for(s=q[t].items,p=0;p<s.length;p++){r=s[p],r.clickFn&&CKEDITOR.tools.removeFunction(r.clickFn),r.keyDownFn&&CKEDITOR.tools.removeFunction(r.keyDownFn)}}}});m.on("uiReady",function(){var p=m.ui.space("toolbox");p&&m.focusManager.add(p,1)});m.addCommand("toolbarFocus",j);m.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");m.ui.add("-",CKEDITOR.UI_SEPARATOR,{});m.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(p,q){q.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(n,q,p){var r=i(this.editor),o=0===q,m={name:n};if(p){if(p=CKEDITOR.tools.search(r,function(s){return s.name==p})){!p.groups&&(p.groups=[]);if(q&&(q=CKEDITOR.tools.indexOf(p.groups,q),0<=q)){p.groups.splice(q+1,0,n);return}o?p.groups.splice(0,0,n):p.groups.push(n);return}q=null}q&&(q=CKEDITOR.tools.indexOf(r,function(s){return s.name==q}));o?r.splice(0,0,n):"number"==typeof q?r.splice(q+1,0,m):r.push(n)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){function j(z,y){function u(n){n=x.list[n];if(n.equals(z.editable())||"true"==n.getAttribute("contenteditable")){var m=z.createRange();m.selectNodeContents(n);m.select()}else{z.getSelection().selectElement(n)}z.focus()}function t(){s&&s.setHtml('\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');delete x.list}var r=z.ui.spaceId("path"),s,x=z._.elementsPath,o=x.idBase;y.html+='\x3cspan id\x3d"'+r+'_label" class\x3d"cke_voice_label"\x3e'+z.lang.elementspath.eleLabel+'\x3c/span\x3e\x3cspan id\x3d"'+r+'" class\x3d"cke_path" role\x3d"group" aria-labelledby\x3d"'+r+'_label"\x3e\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e';z.on("uiReady",function(){var m=z.ui.space("path");m&&z.focusManager.add(m,1)});x.onClick=u;var B=CKEDITOR.tools.addFunction(u),A=CKEDITOR.tools.addFunction(function(q,p){var n=x.idBase,m;p=new CKEDITOR.dom.event(p);m="rtl"==z.lang.dir;switch(p.getKeystroke()){case m?39:37:case 9:return(m=CKEDITOR.document.getById(n+(q+1)))||(m=CKEDITOR.document.getById(n+"0")),m.focus(),!1;case m?37:39:case CKEDITOR.SHIFT+9:return(m=CKEDITOR.document.getById(n+(q-1)))||(m=CKEDITOR.document.getById(n+(x.list.length-1))),m.focus(),!1;case 27:return z.focus(),!1;case 13:case 32:return u(q),!1}return !0});z.on("selectionChange",function(){for(var F=[],D=x.list=[],w=[],G=x.filters,E=!0,q=z.elementPath().elements,C,H=q.length;H--;){var v=q[H],n=0;C=v.data("cke-display-name")?v.data("cke-display-name"):v.data("cke-real-element-type")?v.data("cke-real-element-type"):v.getName();(E=v.hasAttribute("contenteditable")?"true"==v.getAttribute("contenteditable"):E)||v.hasAttribute("contenteditable")||(n=1);for(var I=0;I<G.length;I++){var p=G[I](v,C);if(!1===p){n=1;break}C=p||C}n||(D.unshift(v),w.unshift(C))}D=D.length;for(G=0;G<D;G++){C=w[G],E=z.lang.elementspath.eleTitle.replace(/%1/,C),C=i.output({id:o+G,label:E,text:C,jsTitle:"javascript:void('"+C+"')",index:G,keyDownFn:A,clickFn:B}),F.unshift(C)}s||(s=CKEDITOR.document.getById(r));w=s;w.setHtml(F.join("")+'\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');z.fire("elementsPathUpdate",{space:w})});z.on("readOnly",t);z.on("contentDomUnload",t);z.addCommand("elementsPathFocus",l.toolbarFocus);z.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var l={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(m){(m=CKEDITOR.document.getById(m._.elementsPath.idBase+"0"))&&m.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},k="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(k+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(k+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var i=CKEDITOR.addTemplate("pathItem",'\x3ca id\x3d"{id}" href\x3d"{jsTitle}" tabindex\x3d"-1" class\x3d"cke_path_item" title\x3d"{label}"'+k+' hidefocus\x3d"true"  onkeydown\x3d"return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role\x3d"button" aria-label\x3d"{label}"\x3e{text}\x3c/a\x3e');CKEDITOR.plugins.add("elementspath",{init:function(m){m._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]};m.on("uiSpace",function(n){"bottom"==n.data.space&&j(m,n.data)})}})})();(function(){function i(q,t,s){s=q.config.forceEnterMode||s;"wysiwyg"==q.mode&&(t||(t=q.activeEnterMode),q.elementPath().isContextFor("p")||(t=CKEDITOR.ENTER_BR,s=1),q.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?r(q,t,null,s):p(q,t,null,s),q.fire("saveSnapshot"))}function o(q){q=q.getSelection().getRanges(!0);for(var s=q.length-1;0<s;s--){q[s].deleteContents()}return q[0]}function l(q){var s=q.startContainer.getAscendant(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&"true"==t.getAttribute("contenteditable")},!0);if(q.root.equals(s)){return q}s=new CKEDITOR.dom.range(s);s.moveToRange(q);return s}CKEDITOR.plugins.add("enterkey",{init:function(q){q.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(s){i(s)}});q.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(s){i(s,s.activeShiftEnterMode,1)}});q.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var k=CKEDITOR.dom.walker.whitespaces(),j=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(F,D,G,z){if(G=G||o(F)){G=l(G);var B=G.document,y=G.checkStartOfBlock(),w=G.checkEndOfBlock(),x=F.elementPath(G.startContainer),E=x.block,v=D==CKEDITOR.ENTER_DIV?"div":"p",C;if(y&&w){if(E&&(E.is("li")||E.getParent().is("li"))){E.is("li")||(E=E.getParent());G=E.getParent();C=G.getParent();z=!E.hasPrevious();var u=!E.hasNext(),v=F.getSelection(),A=v.createBookmarks(),y=E.getDirection(1),w=E.getAttribute("class"),s=E.getAttribute("style"),t=C.getDirection(1)!=y;F=F.enterMode!=CKEDITOR.ENTER_BR||t||s||w;if(C.is("li")){z||u?(z&&u&&G.remove(),E[u?"insertAfter":"insertBefore"](C)):E.breakParent(C)}else{if(F){if(x.block.is("li")?(C=B.createElement(D==CKEDITOR.ENTER_P?"p":"div"),t&&C.setAttribute("dir",y),s&&C.setAttribute("style",s),w&&C.setAttribute("class",w),E.moveChildren(C)):C=x.block,z||u){C[z?"insertBefore":"insertAfter"](G)}else{E.breakParent(G),C.insertAfter(G)}}else{if(E.appendBogus(!0),z||u){for(;B=E[z?"getFirst":"getLast"]();){B[z?"insertBefore":"insertAfter"](G)}}else{for(E.breakParent(G);B=E.getLast();){B.insertAfter(G)}}}E.remove()}v.selectBookmarks(A);return}if(E&&E.getParent().is("blockquote")){E.breakParent(E.getParent());E.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||E.getPrevious().remove();E.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||E.getNext().remove();G.moveToElementEditStart(E);G.select();return}}else{if(E&&E.is("pre")&&!w){r(F,D,G,z);return}}if(y=G.splitBlock(v)){D=y.previousBlock;E=y.nextBlock;x=y.wasStartOfBlock;F=y.wasEndOfBlock;E?(A=E.getParent(),A.is("li")&&(E.breakParent(A),E.move(E.getNext(),1))):D&&(A=D.getParent())&&A.is("li")&&(D.breakParent(A),A=D.getNext(),G.moveToElementEditStart(A),D.move(D.getPrevious()));if(x||F){if(D){if(D.is("li")||!n.test(D.getName())&&!D.is("pre")){C=D.clone()}}else{E&&(C=E.clone())}C?z&&!C.is("li")&&C.renameNode(v):A&&A.is("li")?C=A:(C=B.createElement(v),D&&(u=D.getDirection())&&C.setAttribute("dir",u));if(B=y.elementPath){for(z=0,v=B.elements.length;z<v;z++){A=B.elements[z];if(A.equals(B.block)||A.equals(B.blockLimit)){break}CKEDITOR.dtd.$removeEmpty[A.getName()]&&(A=A.clone(),C.moveChildren(A),C.append(A))}}C.appendBogus();C.getParent()||G.insertNode(C);C.is("li")&&C.removeAttribute("value");!CKEDITOR.env.ie||!x||F&&D.getChildCount()||(G.moveToElementEditStart(F?D:C),G.select());G.moveToElementEditStart(x&&!F?E:C)}else{E.is("li")&&(C=G.clone(),C.selectNodeContents(E),C=new CKEDITOR.dom.walker(C),C.evaluator=function(q){return !(j(q)||k(q)||q.type==CKEDITOR.NODE_ELEMENT&&q.getName() in CKEDITOR.dtd.$inline&&!(q.getName() in CKEDITOR.dtd.$empty))},(A=C.next())&&A.type==CKEDITOR.NODE_ELEMENT&&A.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?B.createElement("br"):B.createText("Â ")).insertBefore(A)),E&&G.moveToElementEditStart(E)}G.select();G.scrollIntoView()}}},enterBr:function(y,w,z,u){if(z=z||o(y)){var v=z.document,t=z.checkEndOfBlock(),q=new CKEDITOR.dom.elementPath(y.getSelection().getStartElement()),s=q.block,x=s&&q.block.getName();u||"li"!=x?(!u&&t&&n.test(x)?(t=s.getDirection())?(v=v.createElement("div"),v.setAttribute("dir",t),v.insertAfter(s),z.setStart(v,0)):(v.createElement("br").insertAfter(s),CKEDITOR.env.gecko&&v.createText("").insertAfter(s),z.setStartAt(s.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(y="pre"==x&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?v.createText("\r"):v.createElement("br"),z.deleteContents(),z.insertNode(y),CKEDITOR.env.needsBrFiller?(v.createText("").insertAfter(y),t&&(s||q.blockLimit).appendBogus(),y.getNext().$.nodeValue="",z.setStartAt(y.getNext(),CKEDITOR.POSITION_AFTER_START)):z.setStartAt(y,CKEDITOR.POSITION_AFTER_END)),z.collapse(!0),z.select(),z.scrollIntoView()):p(y,w,z,u)}}};var m=CKEDITOR.plugins.enterkey,r=m.enterBr,p=m.enterBlock,n=/^h[1-6]$/})();(function(){function i(j,n){var m={},q=[],o={nbsp:"Â ",shy:"",gt:"\x3e",lt:"\x3c",amp:"\x26",apos:"'",quot:'"'};j=j.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(r,s){var t=n?"\x26"+s+";":o[s];m[t]=n?o[s]:"\x26"+s+";";q.push(t);return""});if(!n&&j){j=j.split(",");var k=document.createElement("div"),p;k.innerHTML="\x26"+j.join(";\x26")+";";p=k.innerHTML;k=null;for(k=0;k<p.length;k++){var l=p.charAt(k);m[l]="\x26"+j[k]+";";q.push(l)}}m.regex=q.join(n?"|":"");return m}CKEDITOR.plugins.add("entities",{afterInit:function(r){function n(l){return k[l]}function m(l){return"force"!=q.entities_processNumerical&&s[l]?s[l]:"\x26#"+l.charCodeAt(0)+";"}var q=r.config;if(r=(r=r.dataProcessor)&&r.htmlFilter){var o=[];!1!==q.basicEntities&&o.push("nbsp,gt,lt,amp");q.entities&&(o.length&&o.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),q.entities_latin&&o.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),q.entities_greek&&o.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),q.entities_additional&&o.push(q.entities_additional));var s=i(o.join(",")),p=s.regex?"["+s.regex+"]":"a^";delete s.regex;q.entities&&q.entities_processNumerical&&(p="[^ -~]|"+p);var p=new RegExp(p,"g"),k=i("nbsp,gt,lt,amp,shy",!0),j=new RegExp(k.regex,"g");r.addRules({text:function(l){return l.replace(j,n).replace(p,m)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(n,j,i,o){j=j||"80%";i=i||"70%";"string"==typeof j&&1<j.length&&"%"==j.substr(j.length-1,1)&&(j=parseInt(window.screen.width*parseInt(j,10)/100,10));"string"==typeof i&&1<i.length&&"%"==i.substr(i.length-1,1)&&(i=parseInt(window.screen.height*parseInt(i,10)/100,10));640>j&&(j=640);420>i&&(i=420);var m=parseInt((window.screen.height-i)/2,10),l=parseInt((window.screen.width-j)/2,10);o=(o||"location\x3dno,menubar\x3dno,toolbar\x3dno,dependent\x3dyes,minimizable\x3dno,modal\x3dyes,alwaysRaised\x3dyes,resizable\x3dyes,scrollbars\x3dyes")+",width\x3d"+j+",height\x3d"+i+",top\x3d"+m+",left\x3d"+l;var p=window.open("",null,o,!0);if(!p){return !1}try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(p.moveTo(l,m),p.resizeTo(j,i)),p.focus(),p.location.href=n}catch(k){window.open(n,null,o,!0)}return !0}});(function(){function s(l,n){var m=[];if(n){for(var k in n){m.push(k+"\x3d"+encodeURIComponent(n[k]))}}else{return l}return l+(-1!=l.indexOf("?")?"\x26":"?")+m.join("\x26")}function o(k){k+="";return k.charAt(0).toUpperCase()+k.substr(1)}function i(){var l=this.getDialog(),n=l.getParentEditor();n._.filebrowserSe=this;var m=n.config["filebrowser"+o(l.getName())+"WindowWidth"]||n.config.filebrowserWindowWidth||"80%",l=n.config["filebrowser"+o(l.getName())+"WindowHeight"]||n.config.filebrowserWindowHeight||"70%",k=this.filebrowser.params||{};k.CKEditor=n.name;k.CKEditorFuncNum=n._.filebrowserFn;k.langCode||(k.langCode=n.langCode);k=s(this.filebrowser.url,k);n.popup(k,m,l,n.config.filebrowserWindowFeatures||n.config.fileBrowserWindowFeatures)}function v(){var k=this.getDialog();k.getParentEditor()._.filebrowserSe=this;return k.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&k.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function u(l,n,m){var k=m.params||{};k.CKEditor=l.name;k.CKEditorFuncNum=l._.filebrowserFn;k.langCode||(k.langCode=l.langCode);n.action=s(m.url,k);n.filebrowser=m}function j(l,x,w,k){if(k&&k.length){for(var q,n=k.length;n--;){if(q=k[n],"hbox"!=q.type&&"vbox"!=q.type&&"fieldset"!=q.type||j(l,x,w,q.children),q.filebrowser){if("string"==typeof q.filebrowser&&(q.filebrowser={action:"fileButton"==q.type?"QuickUpload":"Browse",target:q.filebrowser}),"Browse"==q.filebrowser.action){var p=q.filebrowser.url;void 0===p&&(p=l.config["filebrowser"+o(x)+"BrowseUrl"],void 0===p&&(p=l.config.filebrowserBrowseUrl));p&&(q.onClick=i,q.filebrowser.url=p,q.hidden=!1)}else{if("QuickUpload"==q.filebrowser.action&&q["for"]&&(p=q.filebrowser.url,void 0===p&&(p=l.config["filebrowser"+o(x)+"UploadUrl"],void 0===p&&(p=l.config.filebrowserUploadUrl)),p)){var m=q.onClick;q.onClick=function(z){var y=z.sender;if(m&&!1===m.call(y,z)){return !1}if(v.call(y,z)){z=y.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement();if(y=new CKEDITOR.dom.element(z.$.form)){(z=y.$.elements.ckCsrfToken)?z=new CKEDITOR.dom.element(z):(z=new CKEDITOR.dom.element("input"),z.setAttributes({name:"ckCsrfToken",type:"hidden"}),y.append(z)),z.setAttribute("value",CKEDITOR.tools.getCsrfToken())}return !0}return !1};q.filebrowser.url=p;q.hidden=!1;u(l,w.getContents(q["for"][0]).get(q["for"][1]),q.filebrowser)}}}}}}function r(l,n,m){if(-1!==m.indexOf(";")){m=m.split(";");for(var k=0;k<m.length;k++){if(r(l,n,m[k])){return !0}}return !1}return(l=l.getContents(n).get(m).filebrowser)&&l.url}function t(l,p){var n=this._.filebrowserSe.getDialog(),k=this._.filebrowserSe["for"],m=this._.filebrowserSe.filebrowser.onSelect;k&&n.getContentElement(k[0],k[1]).reset();if("function"!=typeof p||!1!==p.call(this._.filebrowserSe)){if(!m||!1!==m.call(this._.filebrowserSe,l,p)){if("string"==typeof p&&p&&alert(p),l&&(k=this._.filebrowserSe,n=k.getDialog(),k=k.filebrowser.target||null)){if(k=k.split(":"),m=n.getContentElement(k[0],k[1])){m.setValue(l),n.selectPage(k[0])}}}}}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(k){k._.filebrowserFn=CKEDITOR.tools.addFunction(t,k);k.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(l){if(l.editor.plugins.filebrowser){for(var n=l.data.definition,m,k=0;k<n.contents.length;++k){if(m=n.contents[k]){j(l.editor,l.data.name,n,m.elements),m.hidden&&m.filebrowser&&(m.hidden=!r(n,m.id,m.filebrowser))}}}})})();CKEDITOR.plugins.add("find",{requires:"dialog",init:function(j){var i=j.addCommand("find",new CKEDITOR.dialogCommand("find"));i.canUndo=!1;i.readOnly=1;j.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;j.ui.addButton&&(j.ui.addButton("Find",{label:j.lang.find.find,command:"find",toolbar:"find,10"}),j.ui.addButton("Replace",{label:j.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};(function(){function p(l,k){var q=j.exec(l),m=j.exec(k);if(q){if(!q[2]&&"px"==m[2]){return m[1]}if("px"==q[2]&&!m[2]){return m[1]+"px"}}return k}var n=CKEDITOR.htmlParser.cssStyle,o=CKEDITOR.tools.cssLength,j=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,i={elements:{$:function(l){var k=l.attributes;if((k=(k=(k=k&&k["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(k)))&&k.children[0])&&l.attributes["data-cke-resizable"]){var q=(new n(l)).rules;l=k.attributes;var m=q.width,q=q.height;m&&(l.width=p(l.width,m));q&&(l.height=p(l.height,q))}return k}}};CKEDITOR.plugins.add("fakeobjects",{init:function(k){k.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(k){(k=(k=k.dataProcessor)&&k.htmlFilter)&&k.addRules(i,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(l,k,r,q){var m=this.lang.fakeobjects,m=m[r]||m.unknown;k={"class":k,"data-cke-realelement":encodeURIComponent(l.getOuterHtml()),"data-cke-real-node-type":l.type,alt:m,title:m,align:l.getAttribute("align")||""};CKEDITOR.env.hc||(k.src=CKEDITOR.tools.transparentImageData);r&&(k["data-cke-real-element-type"]=r);q&&(k["data-cke-resizable"]=q,r=new n,q=l.getAttribute("width"),l=l.getAttribute("height"),q&&(r.rules.width=o(q)),l&&(r.rules.height=o(l)),r.populate(k));return this.document.createElement("img",{attributes:k})};CKEDITOR.editor.prototype.createFakeParserElement=function(l,k,s,r){var q=this.lang.fakeobjects,q=q[s]||q.unknown,m;m=new CKEDITOR.htmlParser.basicWriter;l.writeHtml(m);m=m.getHtml();k={"class":k,"data-cke-realelement":encodeURIComponent(m),"data-cke-real-node-type":l.type,alt:q,title:q,align:l.attributes.align||""};CKEDITOR.env.hc||(k.src=CKEDITOR.tools.transparentImageData);s&&(k["data-cke-real-element-type"]=s);r&&(k["data-cke-resizable"]=r,r=l.attributes,l=new n,s=r.width,r=r.height,void 0!==s&&(l.rules.width=o(s)),void 0!==r&&(l.rules.height=o(r)),l.populate(k));return new CKEDITOR.htmlParser.element("img",k)};CKEDITOR.editor.prototype.restoreRealElement=function(l){if(l.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT){return null}var k=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(l.data("cke-realelement")),this.document);if(l.data("cke-resizable")){var m=l.getStyle("width");l=l.getStyle("height");m&&k.setAttribute("width",p(k.getAttribute("width"),m));l&&k.setAttribute("height",p(k.getAttribute("height"),l))}return k}})();(function(){function k(l){l=l.attributes;return"application/x-shockwave-flash"==l.type||i.test(l.src||"")}function j(m,l){return m.createFakeParserElement(l,"cke_flash","flash",!0)}var i=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(m){var l="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(m,"flash","properties")&&(l+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(m,"flash","advanced")&&(l+=";object[id]{*}; embed[bgcolor]{*}(*)");m.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:l,requiredContent:"embed"}));m.ui.addButton&&m.ui.addButton("Flash",{label:m.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");m.addMenuItems&&m.addMenuItems({flash:{label:m.lang.flash.properties,command:"flash",group:"flash"}});m.on("doubleclick",function(o){var n=o.data.element;n.is("img")&&"flash"==n.data("cke-real-element-type")&&(o.data.dialog="flash")});m.contextMenu&&m.contextMenu.addListener(function(n){if(n&&n.is("img")&&!n.isReadOnly()&&"flash"==n.data("cke-real-element-type")){return{flash:CKEDITOR.TRISTATE_OFF}}})},afterInit:function(m){var l=m.dataProcessor;(l=l&&l.dataFilter)&&l.addRules({elements:{"cke:object":function(n){var o=n.attributes;if(!(o.classid&&String(o.classid).toLowerCase()||k(n))){for(o=0;o<n.children.length;o++){if("cke:embed"==n.children[o].name){if(!k(n.children[o])){break}return j(m,n)}}return null}return j(m,n)},"cke:embed":function(n){return k(n)?j(m,n):null}}},5)}})})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function j(o){var n=o.config,w=o.fire("uiSpace",{space:"top",html:""}).html,s=function(){function E(k,u,p){m.setStyle(u,i(p));m.setStyle("position",k)}function F(p){var k=C.getDocumentPosition();switch(p){case"top":E("absolute","top",k.y-y-t);break;case"pin":E("fixed","top",H);break;case"bottom":E("absolute","top",k.y+(G.height||G.bottom-G.top)+t)}B=p}var B,C,A,G,D,y,I,z=n.floatSpaceDockedOffsetX||0,t=n.floatSpaceDockedOffsetY||0,J=n.floatSpacePinnedOffsetX||0,H=n.floatSpacePinnedOffsetY||0;return function(p){if(C=o.editable()){var k=p&&"focus"==p.name;k&&m.show();o.fire("floatingSpaceLayout",{show:k});m.removeStyle("left");m.removeStyle("right");A=m.getClientRect();G=C.getClientRect();D=l.getViewPaneSize();y=A.height;I="pageXOffset" in l.$?l.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;B?(y+t<=G.top?F("top"):y+t>D.height-G.bottom?F("pin"):F("bottom"),p=D.width/2,p=n.floatSpacePreferRight?"right":0<G.left&&G.right<D.width&&G.width>A.width?"rtl"==n.contentsLangDirection?"right":"left":p-G.left>G.right-p?"left":"right",A.width>D.width?(p="left",k=0):(k="left"==p?0<G.left?G.left:0:G.right<D.width?D.width-G.right:0,k+A.width>D.width&&(p="left"==p?"right":"left",k=0)),m.setStyle(p,i(("pin"==B?J:z)+k+("pin"==B?0:"left"==p?I:-I)))):(B="pin",F("pin"),s(p))}}}();if(w){var q=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?" ":"")+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(o.title?' aria-labelledby\x3d"cke_{name}_arialbl"':" ")+"\x3e"+(o.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':" ")+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),m=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(q.output({content:w,id:o.id,langDir:o.lang.dir,langCode:o.langCode,name:o.name,style:"display:none;z-index:"+(n.baseFloatZIndex-1),topId:o.ui.spaceId("top"),voiceLabel:o.title}))),r=CKEDITOR.tools.eventsBuffer(500,s),v=CKEDITOR.tools.eventsBuffer(100,s);m.unselectable();m.on("mousedown",function(k){k=k.data;k.getTarget().hasAscendant("a",1)||k.preventDefault()});o.on("focus",function(k){s(k);o.on("change",r.input);l.on("scroll",v.input);l.on("resize",v.input)});o.on("blur",function(){m.hide();o.removeListener("change",r.input);l.removeListener("scroll",v.input);l.removeListener("resize",v.input)});o.on("destroy",function(){l.removeListener("scroll",v.input);l.removeListener("resize",v.input);m.clearCustomData();m.remove()});o.focusManager.hasFocus&&m.show();o.focusManager.add(m,1)}}var l=CKEDITOR.document.getWindow(),i=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(k){k.on("loaded",function(){j(this)},null,null,20)}})})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var m=CKEDITOR.addTemplate("panel-list",'\x3cul role\x3d"presentation" class\x3d"cke_panel_list"\x3e{items}\x3c/ul\x3e'),l=CKEDITOR.addTemplate("panel-list-item",'\x3cli id\x3d"{id}" class\x3d"cke_panel_listItem" role\x3dpresentation\x3e\x3ca id\x3d"{id}_option" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"{title}" href\x3d"javascript:void(\'{val}\')"  {onclick}\x3d"CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role\x3d"option"\x3e{text}\x3c/a\x3e\x3c/li\x3e'),j=CKEDITOR.addTemplate("panel-list-group",'\x3ch1 id\x3d"{id}" class\x3d"cke_panel_grouptitle" role\x3d"presentation" \x3e{label}\x3c/h1\x3e'),i=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(n,k){return this.addBlock(n,new CKEDITOR.ui.listBlock(this.getHolderElement(),k))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(n,k){k=k||{};var o=k.attributes||(k.attributes={});(this.multiSelect=!!k.multiSelect)&&(o["aria-multiselectable"]=!0);!o.role&&(o.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",o.role);o=this.keys;o[40]="next";o[9]="next";o[38]="prev";o[CKEDITOR.SHIFT+9]="prev";o[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(o[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var k=m.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(k);delete this._.started}},getClick:function(){this._.click||(this._.click=CKEDITOR.tools.addFunction(function(n){var k=this.toggle(n);if(this.onClick){this.onClick(n,k)}},this));return this._.click}},proto:{add:function(n,k,q){var p=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[n]=p;var o;o=CKEDITOR.tools.htmlEncodeAttr(n).replace(i,"\\'");n={id:p,val:o,onclick:CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(q||n),text:k||n};this._.pendingList.push(l.output(n))},startGroup:function(n){this._.close();var k=CKEDITOR.tools.getNextId();this._.groups[n]=k;this._.pendingHtml.push(j.output({id:k,label:n}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(n){var k=this.isMarked(n);k?this.unmark(n):this.mark(n);return !k},hideGroup:function(n){var k=(n=this.element.getDocument().getById(this._.groups[n]))&&n.getNext();n&&(n.setStyle("display","none"),k&&"ul"==k.getName()&&k.setStyle("display","none"))},hideItem:function(k){this.element.getDocument().getById(this._.items[k]).setStyle("display","none")},showAll:function(){var n=this._.items,k=this._.groups,q=this.element.getDocument(),p;for(p in n){q.getById(n[p]).setStyle("display","")}for(var o in k){n=q.getById(k[o]),p=n.getNext(),n.setStyle("display",""),p&&"ul"==p.getName()&&p.setStyle("display","")}},mark:function(n){this.multiSelect||this.unmarkAll();n=this._.items[n];var k=this.element.getDocument().getById(n);k.addClass("cke_selected");this.element.getDocument().getById(n+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(k)},unmark:function(n){var k=this.element.getDocument();n=this._.items[n];var o=k.getById(n);o.removeClass("cke_selected");k.getById(n+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(o)},unmarkAll:function(){var n=this._.items,k=this.element.getDocument(),p;for(p in n){var o=n[p];k.getById(o).removeClass("cke_selected");k.getById(o+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(k){return this.element.getDocument().getById(this._.items[k]).hasClass("cke_selected")},focus:function(n){this._.focusIndex=-1;var k=this.element.getElementsByTag("a"),p,o=-1;if(n){for(p=this.element.getDocument().getById(this._.items[n]).getFirst();n=k.getItem(++o);){if(n.equals(p)){this._.focusIndex=o;break}}}else{this.element.focus()}p&&setTimeout(function(){p.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(i){i.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});(function(){var j='\x3cspan id\x3d"{id}" class\x3d"cke_combo cke_combo__{name} {cls}" role\x3d"presentation"\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_combo_label"\x3e{label}\x3c/span\x3e\x3ca class\x3d"cke_combo_button" title\x3d"{title}" tabindex\x3d"-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(j+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(j+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var j=j+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan id\x3d"{id}_text" class\x3d"cke_combo_text cke_combo_inlinelabel"\x3e{label}\x3c/span\x3e\x3cspan class\x3d"cke_combo_open"\x3e\x3cspan class\x3d"cke_combo_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":CKEDITOR.env.air?"\x26nbsp;":"")+"\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e"),i=CKEDITOR.addTemplate("combo",j);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(k){CKEDITOR.tools.extend(this,k,{canGroup:!1,title:k.label,modes:{wysiwyg:1},editorFocus:1});k=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=k.parent&&k.parent.getDocument()||CKEDITOR.document;k.className="cke_combopanel";k.block={multiSelect:k.multiSelect,attributes:k.attributes};k.toolbarRelated=!0;this._={panelDefinition:k,items:{}}},proto:{renderHtml:function(l){var k=[];this.render(l,k);return k.join("")},render:function(x,w){function r(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var l=this.modes[x.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;x.readOnly&&!this.readOnly&&(l=CKEDITOR.TRISTATE_DISABLED);this.setState(l);this.setValue("");l!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var u=CKEDITOR.env,q="cke_"+this.id,t=CKEDITOR.tools.addFunction(function(l){p&&(x.unlockSelection(1),p=0);v.execute(l)},this),s=this,v={id:q,combo:this,focus:function(){CKEDITOR.document.getById(q).getChild(1).focus()},execute:function(n){var l=s._;if(l.state!=CKEDITOR.TRISTATE_DISABLED){if(s.createPanel(x),l.on){l.panel.hide()}else{s.commit();var m=s.getValue();m?l.list.mark(m):l.list.unmarkAll();l.panel.showBlock(s.id,new CKEDITOR.dom.element(n),4)}}},clickFn:t};x.on("activeFilterChange",r,this);x.on("mode",r,this);x.on("selectionChange",r,this);!this.readOnly&&x.on("readOnly",r,this);var o=CKEDITOR.tools.addFunction(function(l,n){l=new CKEDITOR.dom.event(l);var m=l.getKeystroke();if(40==m){x.once("panelShow",function(y){y.data._.panel._.currentBlock.onKeyDown(40)})}switch(m){case 13:case 32:case 40:CKEDITOR.tools.callFunction(t,n);break;default:v.onkey(v,m)}l.preventDefault()}),k=CKEDITOR.tools.addFunction(function(){v.onfocus&&v.onfocus()}),p=0;v.keyDownFn=o;u={id:q,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:u.gecko&&!u.hc?"":(this.title||"").replace("'",""),keydownFn:o,focusFn:k,clickFn:t};i.output(u,w);if(this.onRender){this.onRender()}return v},createPanel:function(m){if(!this._.panel){var l=this._.panelDefinition,r=this._.panelDefinition.block,n=l.parent||CKEDITOR.document.getBody(),o="cke_combopanel__"+this.name,q=new CKEDITOR.ui.floatPanel(m,n,l),p=q.addListBlock(this.id,r),s=this;q.onShow=function(){this.element.addClass(o);s.setState(CKEDITOR.TRISTATE_ON);s._.on=1;s.editorFocus&&!m.focusManager.hasFocus&&m.focus();if(s.onOpen){s.onOpen()}m.once("panelShow",function(){p.focus(!p.multiSelect&&s.getValue())})};q.onHide=function(k){this.element.removeClass(o);s.setState(s.modes&&s.modes[m.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);s._.on=0;if(!k&&s.onClose){s.onClose()}};q.onEscape=function(){q.hide(1)};p.onClick=function(t,k){s.onClick&&s.onClick.call(s,t,k);q.hide()};this._.panel=q;this._.list=p;q.getBlock(this.id).onHide=function(){s._.on=0;s.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(l,k){this._.value=l;var m=this.document.getById("cke_"+this.id+"_text");m&&(l||k?m.removeClass("cke_combo_inlinelabel"):(k=this.label,m.addClass("cke_combo_inlinelabel")),m.setText("undefined"!=typeof k?k:l))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(k){this._.list.mark(k)},hideItem:function(k){this._.list.hideItem(k)},hideGroup:function(k){this._.list.hideGroup(k)},showAll:function(){this._.list.showAll()},add:function(l,k,m){this._.items[l]=m||l;this._.list.add(l,k,m)},startGroup:function(k){this._.list.startGroup(k)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(l){if(this._.state!=l){var k=this.document.getById("cke_"+this.id);k.setState(l,"cke_combo");l==CKEDITOR.TRISTATE_DISABLED?k.setAttribute("aria-disabled",!0):k.removeAttribute("aria-disabled");this._.state=l}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(k){return new CKEDITOR.ui.richCombo(k)}}}});CKEDITOR.ui.prototype.addRichCombo=function(l,k){this.add(l,CKEDITOR.UI_RICHCOMBO,k)}})();(function(){function i(F,E,D,B,r,y,J,H){var G=F.config,o=new CKEDITOR.style(J),z=r.split(";");r=[];for(var x={},C=0;C<z.length;C++){var A=z[C];if(A){var A=A.split("/"),I={},s=z[C]=A[0];I[D]=r[C]=A[1]||s;x[s]=new CKEDITOR.style(J,I);x[s]._.definition.name=s}else{z.splice(C--,1)}}F.ui.addRichCombo(E,{label:B.label,title:B.panelTitle,toolbar:"styles,"+H,allowedContent:o,requiredContent:o,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(G.contentsCss),multiSelect:!1,attributes:{"aria-label":B.panelTitle}},init:function(){this.startGroup(B.panelTitle);for(var l=0;l<z.length;l++){var k=z[l];this.add(k,x[k].buildPreview(),k)}},onClick:function(K){F.focus();F.fire("saveSnapshot");var w=this.getValue(),t=x[K];if(w&&K!=w){var n=x[w],u=F.getSelection().getRanges()[0];if(u.collapsed){var v=F.elementPath(),q=v.contains(function(k){return n.checkElementRemovable(k)});if(q){var p=u.checkBoundaryOfElement(q,CKEDITOR.START),m=u.checkBoundaryOfElement(q,CKEDITOR.END);if(p&&m){for(p=u.createBookmark();v=q.getFirst();){v.insertBefore(q)}q.remove();u.moveToBookmark(p)}else{p?u.moveToPosition(q,CKEDITOR.POSITION_BEFORE_START):m?u.moveToPosition(q,CKEDITOR.POSITION_AFTER_END):(u.splitElement(q),u.moveToPosition(q,CKEDITOR.POSITION_AFTER_END),j(u,v.elements.slice(),q))}F.getSelection().selectRanges([u])}}else{F.removeStyle(n)}}F[w==K?"removeStyle":"applyStyle"](t);F.fire("saveSnapshot")},onRender:function(){F.on("selectionChange",function(k){var p=this.getValue();k=k.data.path.elements;for(var n=0,l;n<k.length;n++){l=k[n];for(var m in x){if(x[m].checkElementMatch(l,!0,F)){m!=p&&this.setValue(m);return}}}this.setValue("",y)},this)},refresh:function(){F.activeFilter.check(o)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function j(l,k,n){var m=k.pop();if(m){if(n){return j(l,k,m.equals(n)?null:n)}n=m.clone();l.insertNode(n);l.moveToPosition(n,CKEDITOR.POSITION_AFTER_START);j(l,k)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(l){var k=l.config;i(l,"Font","family",l.lang.font,k.font_names,k.font_defaultLabel,k.font_style,30);i(l,"FontSize","size",l.lang.font.fontSize,k.fontSize_sizes,k.fontSize_defaultLabel,k.fontSize_style,40)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(t){var s=t.lang,p=0,o={email:1,password:1,search:1,tel:1,text:1,url:1},j={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},i={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},r=function(m,u,l){var k={allowedContent:j[u],requiredContent:i[u]};"form"==u&&(k.context="form");t.addCommand(u,new CKEDITOR.dialogCommand(u,k));t.ui.addButton&&t.ui.addButton(m,{label:s.common[m.charAt(0).toLowerCase()+m.slice(1)],command:u,toolbar:"forms,"+(p+=10)});CKEDITOR.dialog.add(u,l)},q=this.path+"dialogs/";!t.blockless&&r("Form","form",q+"form.js");r("Checkbox","checkbox",q+"checkbox.js");r("Radio","radio",q+"radio.js");r("TextField","textfield",q+"textfield.js");r("Textarea","textarea",q+"textarea.js");r("Select","select",q+"select.js");r("Button","button",q+"button.js");var n=t.plugins.image;n&&!t.plugins.image2&&r("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");r("HiddenField","hiddenfield",q+"hiddenfield.js");t.addMenuItems&&(r={checkbox:{label:s.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:s.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:s.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:s.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:s.forms.button.title,command:"button",group:"button"},select:{label:s.forms.select.title,command:"select",group:"select"},textarea:{label:s.forms.textarea.title,command:"textarea",group:"textarea"}},n&&(r.imagebutton={label:s.image.titleButton,command:"imagebutton",group:"imagebutton"}),!t.blockless&&(r.form={label:s.forms.form.menu,command:"form",group:"form"}),t.addMenuItems(r));t.contextMenu&&(!t.blockless&&t.contextMenu.addListener(function(l,m,k){if((l=k.contains("form",1))&&!l.isReadOnly()){return{form:CKEDITOR.TRISTATE_OFF}}}),t.contextMenu.addListener(function(l){if(l&&!l.isReadOnly()){var m=l.getName();if("select"==m){return{select:CKEDITOR.TRISTATE_OFF}}if("textarea"==m){return{textarea:CKEDITOR.TRISTATE_OFF}}if("input"==m){var k=l.getAttribute("type")||"text";switch(k){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return n?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(o[k]){return{textfield:CKEDITOR.TRISTATE_OFF}}}if("img"==m&&"hiddenfield"==l.data("cke-real-element-type")){return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}}));t.on("doubleclick",function(k){var l=k.data.element;if(!t.blockless&&l.is("form")){k.data.dialog="form"}else{if(l.is("select")){k.data.dialog="select"}else{if(l.is("textarea")){k.data.dialog="textarea"}else{if(l.is("img")&&"hiddenfield"==l.data("cke-real-element-type")){k.data.dialog="hiddenfield"}else{if(l.is("input")){l=l.getAttribute("type")||"text";switch(l){case"button":case"submit":case"reset":k.data.dialog="button";break;case"checkbox":k.data.dialog="checkbox";break;case"radio":k.data.dialog="radio";break;case"image":k.data.dialog="imagebutton"}o[l]&&(k.data.dialog="textfield")}}}}}})},afterInit:function(j){var i=j.dataProcessor,k=i&&i.htmlFilter,i=i&&i.dataFilter;CKEDITOR.env.ie&&k&&k.addRules({elements:{input:function(m){m=m.attributes;var l=m.type;l||(m.type="text");"checkbox"!=l&&"radio"!=l||"on"!=m.value||delete m.value}}},{applyToAll:!0});i&&i.addRules({elements:{input:function(l){if("hidden"==l.attributes.type){return j.createFakeParserElement(l,"cke_hidden","hiddenfield")}}}},{applyToAll:!0})}});CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(v){if(!v.blockless){for(var s=v.config,u=v.lang.format,o=s.format_tags.split(";"),t={},j=0,i=[],r=0;r<o.length;r++){var q=o[r],p=new CKEDITOR.style(s["format_"+q]);if(!v.filter.customConfig||v.filter.check(p)){j++,t[q]=p,t[q]._.enterMode=v.config.enterMode,i.push(p)}}0!==j&&v.ui.addRichCombo("Format",{label:u.label,title:u.panelTitle,toolbar:"styles,20",allowedContent:i,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(s.contentsCss),multiSelect:!1,attributes:{"aria-label":u.panelTitle}},init:function(){this.startGroup(u.panelTitle);for(var k in t){var l=u["tag_"+k];this.add(k,t[k].buildPreview(l),l)}},onClick:function(k){v.focus();v.fire("saveSnapshot");k=t[k];var l=v.elementPath();v[k.checkActive(l,v)?"removeStyle":"applyStyle"](k);setTimeout(function(){v.fire("saveSnapshot")},0)},onRender:function(){v.on("selectionChange",function(k){var l=this.getValue();k=k.data.path;this.refresh();for(var m in t){if(t[m].checkActive(k,v)){m!=l&&this.setValue(m,v.lang.format["tag_"+m]);return}}this.setValue("")},this)},onOpen:function(){this.showAll();for(var k in t){v.activeFilter.check(t[k])||this.hideItem(k)}},refresh:function(){var k=v.elementPath();if(k){if(k.isContextFor("p")){for(var l in t){if(v.activeFilter.check(t[l])){return}}}this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var i={canUndo:!1,exec:function(k){var j=k.document.createElement("hr");k.insertElement(j)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(j){j.blockless||(j.addCommand("horizontalrule",i),j.ui.addButton&&j.ui.addButton("HorizontalRule",{label:j.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})})();CKEDITOR.plugins.add("htmlwriter",{init:function(i){var j=new CKEDITOR.htmlWriter;j.forceSimpleAmpersand=i.config.forceSimpleAmpersand;j.indentationChars=i.config.dataIndentationChars||"\t";i.dataProcessor.writer=j}});CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" /\x3e";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var i=CKEDITOR.dtd,j;for(j in CKEDITOR.tools.extend({},i.$nonBodyContent,i.$block,i.$listItem,i.$tableContent)){this.setRules(j,{indent:!i[j]["#"],breakBeforeOpen:1,breakBeforeClose:!i[j]["#"],breakAfterClose:1,needsSpace:j in i.$block&&!(j in {li:1,dt:1,dd:1})})}this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(i){var j=this._.rules[i];this._.afterCloser&&j&&j.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():j&&j.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("\x3c",i);this._.afterCloser=0},openTagClose:function(i,j){var k=this._.rules[i];j?(this._.output.push(this.selfClosingEnd),k&&k.breakAfterClose&&(this._.needsSpace=k.needsSpace)):(this._.output.push("\x3e"),k&&k.indent&&(this._.indentation+=this.indentationChars));k&&k.breakAfterOpen&&this.lineBreak();"pre"==i&&(this._.inPre=1)},attribute:function(i,j){"string"==typeof j&&(this.forceSimpleAmpersand&&(j=j.replace(/&amp;/g,"\x26")),j=CKEDITOR.tools.htmlEncodeAttr(j));this._.output.push(" ",i,'\x3d"',j,'"')},closeTag:function(i){var j=this._.rules[i];j&&j.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():j&&j.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("\x3c/",i,"\x3e");"pre"==i&&(this._.inPre=0);j&&j.breakAfterClose&&(this.lineBreak(),this._.needsSpace=j.needsSpace);this._.afterCloser=1},text:function(i){this._.indent&&(this.indentation(),!this._.inPre&&(i=CKEDITOR.tools.ltrim(i)));this._.output.push(i)},comment:function(i){this._.indent&&this.indentation();this._.output.push("\x3c!--",i,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0},setRules:function(i,j){var k=this._.rules[i];k?CKEDITOR.tools.extend(k,j,!0):this._.rules[i]=j}}});(function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(j){var i=j.lang.iframe,k="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";j.plugins.dialogadvtab&&(k+=";iframe"+j.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");j.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:k,requiredContent:"iframe"}));j.ui.addButton&&j.ui.addButton("Iframe",{label:i.toolbar,command:"iframe",toolbar:"insert,80"});j.on("doubleclick",function(m){var l=m.data.element;l.is("img")&&"iframe"==l.data("cke-real-element-type")&&(m.data.dialog="iframe")});j.addMenuItems&&j.addMenuItems({iframe:{label:i.title,command:"iframe",group:"image"}});j.contextMenu&&j.contextMenu.addListener(function(l){if(l&&l.is("img")&&"iframe"==l.data("cke-real-element-type")){return{iframe:CKEDITOR.TRISTATE_OFF}}})},afterInit:function(j){var i=j.dataProcessor;(i=i&&i.dataFilter)&&i.addRules({elements:{iframe:function(k){return j.createFakeParserElement(k,"cke_iframe","iframe",!0)}}})}})})();(function(){function i(m){function q(v){var u=!1;p.attachListener(p,"keydown",function(){var x=t.getBody().getElementsByTag(v);if(!u){for(var w=0;w<x.count();w++){x.getItem(w).setCustomData("retain",!0)}u=!0}},null,null,1);p.attachListener(p,"keyup",function(){var w=t.getElementsByTag(v);u&&(1!=w.count()||w.getItem(0).getCustomData("retain")||w.getItem(0).remove(1),u=!1)})}var l=this.editor,t=m.document,s=t.body,r=t.getElementById("cke_actscrpt");r&&r.parentNode.removeChild(r);(r=t.getElementById("cke_shimscrpt"))&&r.parentNode.removeChild(r);(r=t.getElementById("cke_basetagscrpt"))&&r.parentNode.removeChild(r);s.contentEditable=!0;CKEDITOR.env.ie&&(s.hideFocus=!0,s.disabled=!0,s.removeAttribute("disabled"));delete this._.isLoadingData;this.$=s;t=new CKEDITOR.dom.document(t);this.setup();this.fixInitialSelection();var p=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&t.getDocumentElement().addClass(t.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&l.enterMode!=CKEDITOR.ENTER_P?q("p"):CKEDITOR.env.edge&&l.enterMode!=CKEDITOR.ENTER_DIV&&q("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version){t.getDocumentElement().on("mousedown",function(u){u.data.getTarget().is("html")&&setTimeout(function(){l.editable().focus()})})}o(l);try{l.document.$.execCommand("2D-position",!1,!0)}catch(n){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==l.document.$.compatMode)&&this.attachListener(this,"keydown",function(u){var w=u.data.getKeystroke();if(33==w||34==w){if(CKEDITOR.env.ie){setTimeout(function(){l.getSelection().scrollIntoView()},0)}else{if(l.window.$.innerHeight>this.$.offsetHeight){var v=l.createRange();v[33==w?"moveToElementEditStart":"moveToElementEditEnd"](this);v.select();u.data.preventDefault()}}}});CKEDITOR.env.ie&&this.attachListener(t,"blur",function(){try{t.$.selection.empty()}catch(u){}});CKEDITOR.env.iOS&&this.attachListener(t,"touchend",function(){m.focus()});s=l.document.getElementsByTag("title").getItem(0);s.data("cke-title",s.getText());CKEDITOR.env.ie&&(l.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready");l.fire("contentDom");this._.isPendingFocus&&(l.focus(),this._.isPendingFocus=!1);setTimeout(function(){l.fire("dataReady")},0)},0,this)}function o(m){function n(){var r;m.editable().attachListener(m,"selectionChange",function(){var s=m.getSelection().getSelectedElement();s&&(r&&(r.detachEvent("onresizestart",l),r=null),s.$.attachEvent("onresizestart",l),r=s.$)})}function l(r){r.returnValue=!1}if(CKEDITOR.env.gecko){try{var q=m.document.$;q.execCommand("enableObjectResizing",!1,!m.config.disableObjectResizing);q.execCommand("enableInlineTableEditing",!1,!m.config.disableNativeTableHandles)}catch(p){}}else{CKEDITOR.env.ie&&11>CKEDITOR.env.version&&m.config.disableObjectResizing&&n(m)}}function k(){var m=[];if(8<=CKEDITOR.document.$.documentMode){m.push("html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}");var n=[],l;for(l in CKEDITOR.dtd.$removeEmpty){n.push("html.CSS1Compat "+l+"[contenteditable\x3dfalse]")}m.push(n.join(",")+"{display:inline-block}")}else{CKEDITOR.env.gecko&&(m.push("html{height:100% !important}"),m.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"))}m.push("html{cursor:text;*cursor:auto}");m.push("img,input,textarea{cursor:default}");return m.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(l){l.config.fullPage&&l.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});l.addMode("wysiwyg",function(r){function m(v){v&&v.removeListener();l.editable(new j(l,t.$.contentWindow.document.body));l.setData(l.getData(1),r)}var u="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",u=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(u)+"}())":"",t=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+u+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');t.setStyles({width:"100%",height:"100%"});t.addClass("cke_wysiwyg_frame").addClass("cke_reset");u=l.ui.space("contents");u.append(t);var s=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(s){t.on("load",m)}var q=l.title,p=l.fire("ariaEditorHelpLabel",{}).label;q&&(CKEDITOR.env.ie&&p&&(q+=", "+p),t.setAttribute("title",q));if(p){var q=CKEDITOR.tools.getNextId(),n=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+q+'" class\x3d"cke_voice_label"\x3e'+p+"\x3c/span\x3e");u.append(n,1);t.setAttribute("aria-describedby",q)}l.on("beforeModeUnload",function(v){v.removeListener();n&&n.remove()});t.setAttributes({tabIndex:l.tabIndex,allowTransparency:"true"});!s&&m();l.fire("ariaWidget",t)})}});CKEDITOR.editor.prototype.addContentsCss=function(m){var n=this.config,l=n.contentsCss;CKEDITOR.tools.isArray(l)||(n.contentsCss=l?[l]:[]);n.contentsCss.push(m)};var j=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(l){CKEDITOR.tools.setTimeout(i,0,this,l)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(w,r){var v=this.editor;if(r){this.setHtml(w),this.fixInitialSelection(),v.fire("dataReady")}else{this._.isLoadingData=!0;v._.dataStore={id:1};var u=v.config,t=u.fullPage,s=u.docType,q=CKEDITOR.tools.buildStyleHtml(k()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');t||(q+=CKEDITOR.tools.buildStyleHtml(v.config.contentsCss));var p=u.baseHref?'\x3cbase href\x3d"'+u.baseHref+'" data-cke-temp\x3d"1" /\x3e':"";t&&(w=w.replace(/<!DOCTYPE[^>]*>/i,function(l){v.docType=s=l;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(l){v.xmlDeclaration=l;return""}));w=v.dataProcessor.toHtml(w);t?(/<body[\s|>]/.test(w)||(w="\x3cbody\x3e"+w),/<html[\s|>]/.test(w)||(w="\x3chtml\x3e"+w+"\x3c/html\x3e"),/<head[\s|>]/.test(w)?/<title[\s|>]/.test(w)||(w=w.replace(/<head[^>]*>/,"$\x26\x3ctitle\x3e\x3c/title\x3e")):w=w.replace(/<html[^>]*>/,"$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e"),p&&(w=w.replace(/<head[^>]*?>/,"$\x26"+p)),w=w.replace(/<\/head\s*>/,q+"$\x26"),w=s+w):w=u.docType+'\x3chtml dir\x3d"'+u.contentsLangDirection+'" lang\x3d"'+(u.contentsLanguage||v.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+this._.docTitle+"\x3c/title\x3e"+p+q+"\x3c/head\x3e\x3cbody"+(u.bodyId?' id\x3d"'+u.bodyId+'"':"")+(u.bodyClass?' class\x3d"'+u.bodyClass+'"':"")+"\x3e"+w+"\x3c/body\x3e\x3c/html\x3e";CKEDITOR.env.gecko&&(w=w.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),20000>CKEDITOR.env.version&&(w=w.replace(/<body[^>]*>/,"$\x26\x3c!-- cke-content-start --\x3e")));u='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':"")+"\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded\x3d1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script\x3e";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(u+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');p&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(u+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');w=w.replace(/(?=\s*<\/(:?head)>)/,u);this.clearCustomData();this.clearListeners();v.fire("contentDomUnload");var n=this.getDocument();try{n.write(w)}catch(m){setTimeout(function(){n.write(w)},0)}}},getData:function(m){if(m){return this.getHtml()}m=this.editor;var n=m.config,l=n.fullPage,r=l&&m.docType,q=l&&m.xmlDeclaration,p=this.getDocument(),l=l?p.getDocumentElement().getOuterHtml():p.getBody().getHtml();CKEDITOR.env.gecko&&n.enterMode!=CKEDITOR.ENTER_BR&&(l=l.replace(/<br>(?=\s*(:?$|<\/body>))/,""));l=m.dataProcessor.toDataFormat(l);q&&(l=q+"\n"+l);r&&(l=r+"\n"+l);return l},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:j.baseProto.focus.call(this)},detach:function(){var m=this.editor,n=m.document,l;try{l=m.window.getFrame()}catch(p){}j.baseProto.detach.call(this);this.clearCustomData();n.getDocumentElement().clearCustomData();CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);l&&l.getParent()?(l.clearCustomData(),(m=l.removeCustomData("onResize"))&&m.removeListener(),l.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function j(k,l){l||(l=k.getSelection().getSelectedElement());if(l&&l.is("img")&&!l.data("cke-realelement")&&!l.isReadOnly()){return l}}function i(k){var l=k.getStyle("float");if("inherit"==l||"none"==l){l=0}l||(l=k.getAttribute("align"));return l}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(k){if(!k.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var l="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(k,"image","advanced")&&(l="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");k.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:l,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));k.ui.addButton&&k.ui.addButton("Image",{label:k.lang.common.image,command:"image",toolbar:"insert,10"});k.on("doubleclick",function(m){var n=m.data.element;!n.is("img")||n.data("cke-realelement")||n.isReadOnly()||(m.data.dialog="image")});k.addMenuItems&&k.addMenuItems({image:{label:k.lang.image.menu,command:"image",group:"image"}});k.contextMenu&&k.contextMenu.addListener(function(m){if(j(k,m)){return{image:CKEDITOR.TRISTATE_OFF}}})}},afterInit:function(k){function l(m){var n=k.getCommand("justify"+m);if(n){if("left"==m||"right"==m){n.on("exec",function(p){var q=j(k),o;q&&(o=i(q),o==m?(q.removeStyle("float"),m==i(q)&&q.removeAttribute("align")):q.setStyle("float",m),p.cancel())})}n.on("refresh",function(o){var p=j(k);p&&(p=i(p),this.setState(p==m?CKEDITOR.TRISTATE_ON:"right"==m||"left"==m?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),o.cancel())})}}k.plugins.image2||(l("left"),l("right"),l("center"),l("block"))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function i(m,k){var o,n;k.on("refresh",function(q){var p=[j],r;for(r in q.data.states){p.push(q.data.states[r])}this.setState(CKEDITOR.tools.search(p,l)?l:j)},k,null,100);k.on("exec",function(p){o=m.getSelection();n=o.createBookmarks(1);p.data||(p.data={});p.data.done=!1},k,null,0);k.on("exec",function(){m.forceNextSelectionCheck();o.selectBookmarks(n)},k,null,100)}var j=CKEDITOR.TRISTATE_DISABLED,l=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(m){var k=CKEDITOR.plugins.indent.genericDefinition;i(m,m.addCommand("indent",new k(!0)));i(m,m.addCommand("outdent",new k));m.ui.addButton&&(m.ui.addButton("Indent",{label:m.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),m.ui.addButton("Outdent",{label:m.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));m.on("dirChanged",function(o){var s=m.createRange(),p=o.data.node;s.setStartBefore(p);s.setEndAfter(p);for(var v=new CKEDITOR.dom.walker(s),u;u=v.next();){if(u.type==CKEDITOR.NODE_ELEMENT){if(!u.equals(p)&&u.getDirection()){s.setStartAfter(u),v=new CKEDITOR.dom.walker(s)}else{var t=m.config.indentClasses;if(t){for(var r="ltr"==o.data.dir?["_rtl",""]:["","_rtl"],q=0;q<t.length;q++){u.hasClass(t[q]+r[0])&&(u.removeClass(t[q]+r[0]),u.addClass(t[q]+r[1]))}}t=u.getStyle("margin-right");r=u.getStyle("margin-left");t?u.setStyle("margin-left",t):u.removeStyle("margin-left");r?u.setStyle("margin-right",r):u.removeStyle("margin-right")}}}})}});CKEDITOR.plugins.indent={genericDefinition:function(k){this.isIndent=!!k;this.startDisabled=!this.isIndent},specificDefinition:function(m,k,n){this.name=k;this.editor=m;this.jobs={};this.enterBr=m.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!n;this.relatedGlobal=n?"indent":"outdent";this.indentKey=n?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(m,k){m.on("pluginsLoaded",function(){for(var n in k){(function(p,o){var q=p.getCommand(o.relatedGlobal),r;for(r in o.jobs){q.on("exec",function(s){s.data.done||(p.fire("lockSnapshot"),o.execJob(p,r)&&(s.data.done=!0),p.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(o.database))},this,null,r),q.on("refresh",function(s){s.data.states||(s.data.states={});s.data.states[o.name+"@"+r]=o.refreshJob(p,r,s.data.path)},this,null,r)}p.addFeature(o)})(this,k[n])}})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(m,k){var n=this.jobs[k];if(n.state!=j){return n.exec.call(this,m)}},refreshJob:function(m,k,n){k=this.jobs[k];m.activeFilter.checkFeature(this)?k.state=k.refresh.call(this,m,n):k.state=j;return k.state},getContext:function(k){return k.contains(this.context)}}})();(function(){function o(k,t,n){if(!k.getCustomData("indent_processed")){var s=this.editor,m=this.isIndent;if(t){s=k.$.className.match(this.classNameRegex);n=0;s&&(s=s[1],n=CKEDITOR.tools.indexOf(t,s)+1);if(0>(n+=m?1:-1)){return}n=Math.min(n,t.length);n=Math.max(n,0);k.$.className=CKEDITOR.tools.ltrim(k.$.className.replace(this.classNameRegex,""));0<n&&k.addClass(t[n-1])}else{t=i(k,n);n=parseInt(k.getStyle(t),10);var p=s.config.indentOffset||40;isNaN(n)&&(n=0);n+=(m?1:-1)*p;if(0>n){return}n=Math.max(n,0);n=Math.ceil(n/p)*p;k.setStyle(t,n?n+(s.config.indentUnit||"px"):"");""===k.getAttribute("style")&&k.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,k,"indent_processed",1)}}function i(k,m){return"ltr"==(m||k.getComputedStyle("direction"))?"margin-left":"margin-right"}var l=CKEDITOR.dtd.$listItem,q=CKEDITOR.dtd.$list,j=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(k){function p(){m.specificDefinition.apply(this,arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:n?null:"margin-left,margin-right",classes:n||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(n?"("+n.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(t,s){var v=s.block||s.blockLimit;if(!v.is(l)){var w=v.getAscendant(l),v=w&&s.contains(w)||v}v.is(l)&&(v=v.getParent());if(this.enterBr||this.getContext(s)){if(n){var w=n,v=v.$.className.match(this.classNameRegex),u=this.isIndent,w=v?u?v[1]!=w.slice(-1):!0:u;return w?r:j}return this.isIndent?r:v?CKEDITOR[0>=(parseInt(v.getStyle(i(v)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:j}return j},exec:function(t){var s=t.getSelection(),s=s&&s.getRanges()[0],u;if(u=t.elementPath().contains(q)){o.call(this,u,n)}else{for(s=s.createIterator(),t=t.config.enterMode,s.enforceRealBlocks=!0,s.enlargeBr=t!=CKEDITOR.ENTER_BR;u=s.getNextParagraph(t==CKEDITOR.ENTER_P?"p":"div");){u.isReadOnly()||o.call(this,u,n)}}return !0}}}}var m=CKEDITOR.plugins.indent,n=k.config.indentClasses;m.registerCommands(k,{indentblock:new p(k,"indentblock",!0),outdentblock:new p(k,"outdentblock")});CKEDITOR.tools.extend(p.prototype,m.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:n?new RegExp("(?:^|\\s+)("+n.join("|")+")(?\x3d$|\\s)"):null})}})})();(function(){function j(y){function w(G){for(var F=x.startContainer,H=x.endContainer;F&&!F.getParent().equals(G);){F=F.getParent()}for(;H&&!H.getParent().equals(G);){H=H.getParent()}if(!F||!H){return !1}for(var D=F,F=[],B=!1;!B;){D.equals(H)&&(B=!0),F.push(D),D=D.getNext()}if(1>F.length){return !1}D=G.getParents(!0);for(H=0;H<D.length;H++){if(D[H].getName&&s[D[H].getName()]){G=D[H];break}}for(var D=u.isIndent?1:-1,H=F[0],F=F[F.length-1],B=CKEDITOR.plugins.list.listToArray(G,r),q=B[F.getCustomData("listarray_index")].indent,H=H.getCustomData("listarray_index");H<=F.getCustomData("listarray_index");H++){if(B[H].indent+=D,0<D){var C=B[H].parent;B[H].parent=new CKEDITOR.dom.element(C.getName(),C.getDocument())}}for(H=F.getCustomData("listarray_index")+1;H<B.length&&B[H].indent>q;H++){B[H].indent+=D}F=CKEDITOR.plugins.list.arrayToList(B,r,null,y.config.enterMode,G.getDirection());if(!u.isIndent){var E;if((E=G.getParent())&&E.is("li")){for(var D=F.listNode.getChildren(),p=[],A,H=D.count()-1;0<=H;H--){(A=D.getItem(H))&&A.is&&A.is("li")&&p.push(A)}}}F&&F.listNode.replace(G);if(p&&p.length){for(H=0;H<p.length;H++){for(A=G=p[H];(A=A.getNext())&&A.is&&A.getName() in s;){CKEDITOR.env.needsNbspFiller&&!G.getFirst(i)&&G.append(x.document.createText("Â ")),G.append(A)}G.insertAfter(E)}}F&&y.fire("contentDomInvalidated");return !0}for(var u=this,r=this.database,s=this.context,t=y.getSelection(),t=(t&&t.getRanges()).createIterator(),x;x=t.getNextRange();){for(var z=x.getCommonAncestor();z&&(z.type!=CKEDITOR.NODE_ELEMENT||!s[z.getName()]);){if(y.editable().equals(z)){z=!1;break}z=z.getParent()}z||(z=x.startPath().contains(s))&&x.setEndAt(z,CKEDITOR.POSITION_BEFORE_END);if(!z){var v=x.getEnclosedNode();v&&v.type==CKEDITOR.NODE_ELEMENT&&v.getName() in s&&(x.setStartAt(v,CKEDITOR.POSITION_AFTER_START),x.setEndAt(v,CKEDITOR.POSITION_BEFORE_END),z=v)}z&&x.startContainer.type==CKEDITOR.NODE_ELEMENT&&x.startContainer.getName() in s&&(v=new CKEDITOR.dom.walker(x),v.evaluator=m,x.startContainer=v.next());z&&x.endContainer.type==CKEDITOR.NODE_ELEMENT&&x.endContainer.getName() in s&&(v=new CKEDITOR.dom.walker(x),v.evaluator=m,x.endContainer=v.previous());if(z){return w(z)}}return 0}function m(p){return p.type==CKEDITOR.NODE_ELEMENT&&p.is("li")}function i(p){return o(p)&&n(p)}var o=CKEDITOR.dom.walker.whitespaces(!0),n=CKEDITOR.dom.walker.bookmark(!1,!0),l=CKEDITOR.TRISTATE_DISABLED,k=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(r){function q(s){p.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];s.on("key",function(t){if("wysiwyg"==s.mode&&t.data.keyCode==this.indentKey){var u=this.getContext(s.elementPath());!u||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,s.elementPath(),u)||(s.execCommand(this.relatedGlobal),t.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(w,u){var v=this.getContext(u),t=CKEDITOR.plugins.indentList.firstItemInPath(this.context,u,v);return v&&this.isIndent&&!t?k:l}:function(u,t){return !this.getContext(t)||this.isIndent?l:k},exec:CKEDITOR.tools.bind(j,this)}}var p=CKEDITOR.plugins.indent;p.registerCommands(r,{indentlist:new q(r,"indentlist",!0),outdentlist:new q(r,"outdentlist")});CKEDITOR.tools.extend(q.prototype,p.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(t,s,p){var r=s.contains(m);p||(p=s.contains(t));return p&&r&&r.equals(p.getFirst(m))}})();CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(i){i.config.smiley_path=i.config.smiley_path||this.path+"images/";i.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));i.ui.addButton&&i.ui.addButton("Smiley",{label:i.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");(function(){function k(m,n){n=void 0===n||n;var l;if(n){l=m.getComputedStyle("text-align")}else{for(;!m.hasAttribute||!m.hasAttribute("align")&&!m.getStyle("text-align");){l=m.getParent();if(!l){break}m=l}l=m.getStyle("text-align")||m.getAttribute("align")||""}l&&(l=l.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!l&&n&&(l="rtl"==m.getComputedStyle("direction")?"right":"left");return l}function j(m,o,l){this.editor=m;this.name=o;this.value=l;this.context="p";o=m.config.justifyClasses;var n=m.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(o){switch(l){case"left":this.cssClassName=o[0];break;case"center":this.cssClassName=o[1];break;case"right":this.cssClassName=o[2];break;case"justify":this.cssClassName=o[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+o.join("|")+")(?\x3d$|\\s)");this.requiredContent=n+"("+this.cssClassName+")"}else{this.requiredContent=n+"{text-align}"}this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}};m.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function i(m){var q=m.editor,l=q.createRange();l.setStartBefore(m.data.node);l.setEndAfter(m.data.node);for(var n=new CKEDITOR.dom.walker(l),p;p=n.next();){if(p.type==CKEDITOR.NODE_ELEMENT){if(!p.equals(m.data.node)&&p.getDirection()){l.setStartAfter(p),n=new CKEDITOR.dom.walker(l)}else{var o=q.config.justifyClasses;o&&(p.hasClass(o[0])?(p.removeClass(o[0]),p.addClass(o[2])):p.hasClass(o[2])&&(p.removeClass(o[2]),p.addClass(o[0])));o=p.getStyle("text-align");"left"==o?p.setStyle("text-align","right"):"right"==o&&p.setStyle("text-align","left")}}}}j.prototype={exec:function(z){var x=z.getSelection(),y=z.config.enterMode;if(x){for(var s=x.createBookmarks(),w=x.getRanges(),v=this.cssClassName,t,u,r=z.config.useComputedState,r=void 0===r||r,o=w.length-1;0<=o;o--){for(t=w[o].createIterator(),t.enlargeBr=y!=CKEDITOR.ENTER_BR;u=t.getNextParagraph(y==CKEDITOR.ENTER_P?"p":"div");){if(!u.isReadOnly()){u.removeAttribute("align");u.removeStyle("text-align");var q=v&&(u.$.className=CKEDITOR.tools.ltrim(u.$.className.replace(this.cssClassRegex,""))),n=this.state==CKEDITOR.TRISTATE_OFF&&(!r||k(u,!0)!=this.value);v?n?u.addClass(v):q||u.removeAttribute("class"):n&&u.setStyle("text-align",this.value)}}}z.focus();z.forceNextSelectionCheck();x.selectBookmarks(s)}},refresh:function(m,n){var l=n.block||n.blockLimit;this.setState("body"!=l.getName()&&k(l,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("justify",{init:function(m){if(!m.blockless){var p=new j(m,"justifyleft","left"),l=new j(m,"justifycenter","center"),n=new j(m,"justifyright","right"),o=new j(m,"justifyblock","justify");m.addCommand("justifyleft",p);m.addCommand("justifycenter",l);m.addCommand("justifyright",n);m.addCommand("justifyblock",o);m.ui.addButton&&(m.ui.addButton("JustifyLeft",{label:m.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),m.ui.addButton("JustifyCenter",{label:m.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),m.ui.addButton("JustifyRight",{label:m.lang.justify.right,command:"justifyright",toolbar:"align,30"}),m.ui.addButton("JustifyBlock",{label:m.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));m.on("dirChanged",i)}}})})();CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var i=function(l){var k=this._,j=k.menu;k.state!==CKEDITOR.TRISTATE_DISABLED&&(k.on&&j?j.hide():(k.previousState=k.state,j||(j=k.menu=new CKEDITOR.menu(l,{panel:{className:"cke_menu_panel",attributes:{"aria-label":l.lang.common.options}}}),j.onHide=CKEDITOR.tools.bind(function(){var m=this.command?l.getCommand(this.command).modes:this.modes;this.setState(!m||m[l.mode]?k.previousState:CKEDITOR.TRISTATE_DISABLED);k.on=0},this),this.onMenu&&j.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),k.on=1,setTimeout(function(){j.show(CKEDITOR.document.getById(k.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(j){delete j.panel;this.base(j);this.hasArrow=!0;this.click=i},statics:{handler:{create:function(j){return new CKEDITOR.ui.menuButton(j)}}}})},beforeInit:function(i){i.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON="menubutton";(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(r){var q=r.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],p=this,o=r.lang.language,n={},l,j,i,m;r.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(s,k){var t=n["language_"+k];if(t){s[t.style.checkActive(s.elementPath(),s)?"removeStyle":"applyStyle"](t.style)}},refresh:function(k){this.setState(p.getCurrentLangElement(k)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}});for(m=0;m<q.length;m++){l=q[m].split(":"),j=l[0],i="language_"+j,n[i]={label:l[1],langId:j,group:"language",order:m,ltr:"rtl"!=(""+l[2]).toLowerCase(),onClick:function(){r.execCommand("language",this.langId)},role:"menuitemcheckbox"},n[i].style=new CKEDITOR.style({element:"span",attributes:{lang:j,dir:n[i].ltr?"ltr":"rtl"}})}n.language_remove={label:o.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:n.length,onClick:function(){var k=p.getCurrentLangElement(r);k&&r.execCommand("language",k.getAttribute("lang"))}};r.addMenuGroup("language",1);r.addMenuGroup("language_remove");r.addMenuItems(n);r.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:o.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var k={},t=p.getCurrentLangElement(r),s;for(s in n){k[s]=CKEDITOR.TRISTATE_OFF}k.language_remove=t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;t&&(k["language_"+t.getAttribute("lang")]=CKEDITOR.TRISTATE_ON);return k}})},getCurrentLangElement:function(j){var i=j.elementPath();j=i&&i.elements;var l;if(i){for(var k=0;k<j.length;k++){i=j[k],!l&&"span"==i.getName()&&i.hasAttribute("dir")&&i.hasAttribute("lang")&&(l=i)}}return l}})})();(function(){function s(m){return m.replace(/'/g,"\\$\x26")}function l(r){for(var m,n=r.length,p=[],q=0;q<n;q++){m=r.charCodeAt(q),p.push(m)}return"String.fromCharCode("+p.join(",")+")"}function j(u,m){var n=u.plugins.link,q=n.compiledProtectionFunction.params,r,t;t=[n.compiledProtectionFunction.name,"("];for(var p=0;p<q.length;p++){n=q[p].toLowerCase(),r=m[n],0<p&&t.push(","),t.push("'",r?s(encodeURIComponent(m[n])):"","'")}t.push(")");return t.join("")}function F(n){n=n.config.emailProtection||"";var m;n&&"encode"!=n&&(m={},n.replace(/^([^(]+)\(([^)]+)\)$/,function(p,r,q){m.name=r;m.params=[];q.replace(/[^,\s]+/g,function(t){m.params.push(t)})}));return m}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function p(q){return n.replace(/%1/g,"rtl"==q?"right":"left").replace(/%2/g,"cke_contents_"+q)}var m="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+m+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+m+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(p("ltr")+p("rtl"))},init:function(n){var m="a[!href]";CKEDITOR.dialog.isTabEnabled(n,"link","advanced")&&(m=m.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(n,"link","target")&&(m=m.replace("]",",target,onclick]"));n.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:m,requiredContent:"a[href]"}));n.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));n.addCommand("unlink",new CKEDITOR.unlinkCommand);n.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);n.setKeystroke(CKEDITOR.CTRL+76,"link");n.ui.addButton&&(n.ui.addButton("Link",{label:n.lang.link.toolbar,command:"link",toolbar:"links,10"}),n.ui.addButton("Unlink",{label:n.lang.link.unlink,command:"unlink",toolbar:"links,20"}),n.ui.addButton("Anchor",{label:n.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");n.on("doubleclick",function(q){var p=CKEDITOR.plugins.link.getSelectedLink(n)||q.data.element;p.isReadOnly()||(p.is("a")?(q.data.dialog=!p.getAttribute("name")||p.getAttribute("href")&&p.getChildCount()?"link":"anchor",q.data.link=p):CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,p)&&(q.data.dialog="anchor"))},null,null,0);n.on("doubleclick",function(p){p.data.dialog in {link:1,anchor:1}&&p.data.link&&n.getSelection().selectElement(p.data.link)},null,null,20);n.addMenuItems&&n.addMenuItems({anchor:{label:n.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:n.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:n.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:n.lang.link.unlink,command:"unlink",group:"link",order:5}});n.contextMenu&&n.contextMenu.addListener(function(q){if(!q||q.isReadOnly()){return null}q=CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,q);if(!q&&!(q=CKEDITOR.plugins.link.getSelectedLink(n))){return null}var p={};q.getAttribute("href")&&q.getChildCount()&&(p={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});q&&q.hasAttribute("name")&&(p.anchor=p.removeAnchor=CKEDITOR.TRISTATE_OFF);return p});this.compiledProtectionFunction=F(n)},afterInit:function(n){n.dataProcessor.dataFilter.addRules({elements:{a:function(p){return p.attributes.name?p.children.length?null:n.createFakeParserElement(p,"cke_anchor","anchor"):null}}});var m=n._.elementsPath&&n._.elementsPath.filters;m&&m.push(function(q,p){if("a"==p&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,q)||q.getAttribute("name")&&(!q.getAttribute("href")||!q.getChildCount()))){return"anchor"}})}});var N=/^javascript:/,M=/^mailto:([^?]+)(?:\?(.+))?$/,L=/subject=([^;?:@&=$,\/]*)/i,K=/body=([^;?:@&=$,\/]*)/i,J=/^#(.*)$/,I=/^((?:http|https|ftp|news):\/\/)?(.*)$/,H=/^(_(?:self|top|parent|blank))$/,E=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,o=/^javascript:([^(]+)\(([^)]+)\)$/,k=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,i=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,G={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(p){var m=p.getSelection(),n=m.getSelectedElement();return n&&n.is("a")?n:(m=m.getRanges()[0])?(m.shrink(CKEDITOR.SHRINK_TEXT),p.elementPath(m.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(t){for(var m=t.editable(),n=m.isInline()&&!t.plugins.divarea?t.document:m,m=n.getElementsByTag("a"),n=n.getElementsByTag("img"),p=[],q=0,r;r=m.getItem(q++);){(r.data("cke-saved-name")||r.hasAttribute("name"))&&p.push({name:r.data("cke-saved-name")||r.getAttribute("name"),id:r.getAttribute("id")})}for(q=0;r=n.getItem(q++);){(r=this.tryRestoreFakeAnchor(t,r))&&p.push({name:r.getAttribute("name"),id:r.getAttribute("id")})}return p},fakeAnchor:!0,tryRestoreFakeAnchor:function(p,m){if(m&&m.data("cke-real-element-type")&&"anchor"==m.data("cke-real-element-type")){var n=p.restoreRealElement(m);if(n.data("cke-saved-name")){return n}}},parseLinkAttributes:function(u,v){var w=v&&(v.data("cke-saved-href")||v.getAttribute("href"))||"",q=u.plugins.link.compiledProtectionFunction,r=u.config.emailProtection,t,p={};w.match(N)&&("encode"==r?w=w.replace(E,function(y,x,z){z=z||"";return"mailto:"+String.fromCharCode.apply(String,x.split(","))+z.replace(/\\'/g,"'")}):r&&w.replace(o,function(y,x,D){if(x==q.name){p.type="email";y=p.email={};x=/(^')|('$)/g;D=D.match(/[^,\s]+/g);for(var C=D.length,B,A,z=0;z<C;z++){B=decodeURIComponent,A=D[z].replace(x,"").replace(/\\'/g,"'"),A=B(A),B=q.params[z].toLowerCase(),y[B]=A}y.address=[y.name,y.domain].join("@")}}));if(!p.type){if(r=w.match(J)){p.type="anchor",p.anchor={},p.anchor.name=p.anchor.id=r[1]}else{if(r=w.match(M)){t=w.match(L);w=w.match(K);p.type="email";var m=p.email={};m.address=r[1];t&&(m.subject=decodeURIComponent(t[1]));w&&(m.body=decodeURIComponent(w[1]))}else{w&&(t=w.match(I))&&(p.type="url",p.url={},p.url.protocol=t[1],p.url.url=t[2])}}}if(v){if(w=v.getAttribute("target")){p.target={type:w.match(H)?w:"frame",name:w}}else{if(w=(w=v.data("cke-pa-onclick")||v.getAttribute("onclick"))&&w.match(k)){for(p.target={type:"popup",name:w[1]};r=i.exec(w[2]);){"yes"!=r[2]&&"1"!=r[2]||r[1] in {height:1,width:1,top:1,left:1}?isFinite(r[2])&&(p.target[r[1]]=r[2]):p.target[r[1]]=!0}}}var w={},n;for(n in G){(r=v.getAttribute(n))&&(w[G[n]]=r)}if(n=v.data("cke-saved-name")||w.advName){w.advName=n}CKEDITOR.tools.isEmpty(w)||(p.advanced=w)}return p},getLinkAttributes:function(x,y){var z=x.config.emailProtection||"",u={};switch(y.type){case"url":var z=y.url&&void 0!==y.url.protocol?y.url.protocol:"http://",v=y.url&&CKEDITOR.tools.trim(y.url.url)||"";u["data-cke-saved-href"]=0===v.indexOf("/")?v:z+v;break;case"anchor":z=y.anchor&&y.anchor.id;u["data-cke-saved-href"]="#"+(y.anchor&&y.anchor.name||z||"");break;case"email":var w=y.email,v=w.address;switch(z){case"":case"encode":var t=encodeURIComponent(w.subject||""),q=encodeURIComponent(w.body||""),w=[];t&&w.push("subject\x3d"+t);q&&w.push("body\x3d"+q);w=w.length?"?"+w.join("\x26"):"";"encode"==z?(z=["javascript:void(location.href\x3d'mailto:'+",l(v)],w&&z.push("+'",s(w),"'"),z.push(")")):z=["mailto:",v,w];break;default:z=v.split("@",2),w.name=z[0],w.domain=z[1],z=["javascript:",j(x,w)]}u["data-cke-saved-href"]=z.join("")}if(y.target){if("popup"==y.target.type){for(var z=["window.open(this.href, '",y.target.name||"","', '"],r="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),v=r.length,t=function(n){y.target[n]&&r.push(n+"\x3d"+y.target[n])},w=0;w<v;w++){r[w]+=y.target[r[w]]?"\x3dyes":"\x3dno"}t("width");t("left");t("height");t("top");z.push(r.join(","),"'); return false;");u["data-cke-pa-onclick"]=z.join("")}else{"notSet"!=y.target.type&&y.target.name&&(u.target=y.target.name)}}if(y.advanced){for(var p in G){(z=y.advanced[G[p]])&&(u[p]=z)}u.name&&(u["data-cke-saved-name"]=u.name)}u["data-cke-saved-href"]&&(u.href=u["data-cke-saved-href"]);p={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1};y.advanced&&CKEDITOR.tools.extend(p,G);for(var m in u){delete p[m]}return{set:u,removed:CKEDITOR.tools.objectKeys(p)}}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(n){var m=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});n.removeStyle(m)},refresh:function(p,m){var n=m.lastElement&&m.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(q){var m=q.getSelection(),n=m.createBookmarks(),p;if(m&&(p=m.getSelectedElement())&&(p.getChildCount()?p.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(q,p))){p.remove(1)}else{if(p=CKEDITOR.plugins.link.getSelectedLink(q)){p.hasAttribute("href")?(p.removeAttributes({name:1,"data-cke-saved-name":1}),p.removeClass("cke_anchor")):p.remove(1)}}m.selectBookmarks(n)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function p(F,v,C){function E(H){if(!(!(G=D[H?"getFirst":"getLast"]())||G.is&&G.isBlockBoundary()||!(u=v.root[H?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||u.is&&u.isBlockBoundary({br:1}))){F.document.createElement("br")[H?"insertBefore":"insertAfter"](G)}}for(var B=CKEDITOR.plugins.list.listToArray(v.root,C),A=[],y=0;y<v.contents.length;y++){var z=v.contents[y];(z=z.getAscendant("li",!0))&&!z.getCustomData("list_item_processed")&&(A.push(z),CKEDITOR.dom.element.setMarker(C,z,"list_item_processed",!0))}z=null;for(y=0;y<A.length;y++){z=A[y].getCustomData("listarray_index"),B[z].indent=-1}for(y=z+1;y<B.length;y++){if(B[y].indent>B[y-1].indent+1){A=B[y-1].indent+1-B[y].indent;for(z=B[y].indent;B[y]&&B[y].indent>=z;){B[y].indent+=A,y++}y--}}var D=CKEDITOR.plugins.list.arrayToList(B,C,null,F.config.enterMode,v.root.getAttribute("dir")).listNode,G,u;E(!0);E();D.replace(v.root);F.fire("contentDomInvalidated")}function j(v,u){this.name=v;this.context=this.type=u;this.allowedContent=u+" li";this.requiredContent=u}function x(v,u,A,B){for(var z,y;z=v[B?"getLast":"getFirst"](o);){(y=z.getDirection(1))!==u.getDirection(1)&&z.setAttribute("dir",y),z.remove(),A?z[B?"insertBefore":"insertAfter"](A):u.append(z,B)}}function w(v){function u(y){var z=v[y?"getPrevious":"getNext"](s);z&&z.type==CKEDITOR.NODE_ELEMENT&&z.is(v.getName())&&(x(v,z,null,!y),v.remove(),v=z)}u();u(1)}function t(u){return u.type==CKEDITOR.NODE_ELEMENT&&(u.getName() in CKEDITOR.dtd.$block||u.getName() in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[u.getName()]["#"]}function i(E,u,B){E.fire("saveSnapshot");B.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var D=B.extractContents();u.trim(!1,!0);var A=u.createBookmark(),z=new CKEDITOR.dom.elementPath(u.startContainer),v=z.block,z=z.lastElement.getAscendant("li",1)||v,y=new CKEDITOR.dom.elementPath(B.startContainer),C=y.contains(CKEDITOR.dtd.$listItem),y=y.contains(CKEDITOR.dtd.$list);v?(v=v.getBogus())&&v.remove():y&&(v=y.getPrevious(s))&&m(v)&&v.remove();(v=D.getLast())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("br")&&v.remove();(v=u.startContainer.getChild(u.startOffset))?D.insertBefore(v):u.startContainer.append(D);C&&(D=k(C))&&(z.contains(C)?(x(D,C.getParent(),C),D.remove()):z.append(D));for(;B.checkStartOfBlock()&&B.checkEndOfBlock();){y=B.startPath();D=y.block;if(!D){break}D.is("li")&&(z=D.getParent(),D.equals(z.getLast(s))&&D.equals(z.getFirst(s))&&(D=z));B.moveToPosition(D,CKEDITOR.POSITION_BEFORE_START);D.remove()}B=B.clone();D=E.editable();B.setEndAt(D,CKEDITOR.POSITION_BEFORE_END);B=new CKEDITOR.dom.walker(B);B.evaluator=function(F){return s(F)&&!m(F)};(B=B.next())&&B.type==CKEDITOR.NODE_ELEMENT&&B.getName() in CKEDITOR.dtd.$list&&w(B);u.moveToBookmark(A);u.select();E.fire("saveSnapshot")}function k(u){return(u=u.getLast(s))&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName() in r?u:null}var r={ol:1,ul:1},n=CKEDITOR.dom.walker.whitespaces(),q=CKEDITOR.dom.walker.bookmark(),s=function(u){return !(n(u)||q(u))},m=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(G,v,D,F,C){if(!r[G.getName()]){return[]}F||(F=0);D||(D=[]);for(var B=0,z=G.getChildCount();B<z;B++){var A=G.getChild(B);A.type==CKEDITOR.NODE_ELEMENT&&A.getName() in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(A,v,D,F+1);if("li"==A.$.nodeName.toLowerCase()){var E={parent:G,indent:F,element:A,contents:[]};C?E.grandparent=C:(E.grandparent=G.getParent(),E.grandparent&&"li"==E.grandparent.$.nodeName.toLowerCase()&&(E.grandparent=E.grandparent.getParent()));v&&CKEDITOR.dom.element.setMarker(v,A,"listarray_index",D.length);D.push(E);for(var H=0,u=A.getChildCount(),y;H<u;H++){y=A.getChild(H),y.type==CKEDITOR.NODE_ELEMENT&&r[y.getName()]?CKEDITOR.plugins.list.listToArray(y,v,D,F+1,E.grandparent):E.contents.push(y)}}}return D},arrayToList:function(Y,P,V,X,U){V||(V=0);if(!Y||Y.length<V+1){return null}for(var T,R=Y[V].parent.getDocument(),S=new CKEDITOR.dom.documentFragment(R),W=null,Z=V,N=Math.max(Y[V].indent,0),Q=null,L,O,G=X==CKEDITOR.ENTER_P?"p":"div";;){var J=Y[Z];T=J.grandparent;L=J.element.getDirection(1);if(J.indent==N){W&&Y[Z].parent.getName()==W.getName()||(W=Y[Z].parent.clone(!1,1),U&&W.setAttribute("dir",U),S.append(W));Q=W.append(J.element.clone(0,1));L!=W.getDirection(1)&&Q.setAttribute("dir",L);for(T=0;T<J.contents.length;T++){Q.append(J.contents[T].clone(1,1))}Z++}else{if(J.indent==Math.max(N,0)+1){J=Y[Z-1].element.getDirection(1),Z=CKEDITOR.plugins.list.arrayToList(Y,null,Z,X,J!=L?L:null),!Q.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=R.$.documentMode&&Q.append(R.createText("Â ")),Q.append(Z.listNode),Z=Z.nextIndex}else{if(-1==J.indent&&!V&&T){r[T.getName()]?(Q=J.element.clone(!1,!0),L!=T.getDirection(1)&&Q.setAttribute("dir",L)):Q=new CKEDITOR.dom.documentFragment(R);var W=T.getDirection(1)!=L,v=J.element,H=v.getAttribute("class"),u=v.getAttribute("style"),M=Q.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(X!=CKEDITOR.ENTER_BR||W||u||H),F,K=J.contents.length,E;for(T=0;T<K;T++){if(F=J.contents[T],q(F)&&1<K){M?E=F.clone(1,1):Q.append(F.clone(1,1))}else{if(F.type==CKEDITOR.NODE_ELEMENT&&F.isBlockBoundary()){W&&!F.getDirection()&&F.setAttribute("dir",L);O=F;var I=v.getAttribute("style");I&&O.setAttribute("style",I.replace(/([^;])$/,"$1;")+(O.getAttribute("style")||""));H&&F.addClass(H);O=null;E&&(Q.append(E),E=null);Q.append(F.clone(1,1))}else{M?(O||(O=R.createElement(G),Q.append(O),W&&O.setAttribute("dir",L)),u&&O.setAttribute("style",u),H&&O.setAttribute("class",H),E&&(O.append(E),E=null),O.append(F.clone(1,1))):Q.append(F.clone(1,1))}}}E&&((O||Q).append(E),E=null);Q.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&Z!=Y.length-1&&(CKEDITOR.env.needsBrFiller&&(L=Q.getLast())&&L.type==CKEDITOR.NODE_ELEMENT&&L.is("br")&&L.remove(),(L=Q.getLast(s))&&L.type==CKEDITOR.NODE_ELEMENT&&L.is(CKEDITOR.dtd.$block)||Q.append(R.createElement("br")));L=Q.$.nodeName.toLowerCase();"div"!=L&&"p"!=L||Q.appendBogus();S.append(Q);W=null;Z++}else{return null}}}O=null;if(Y.length<=Z||Math.max(Y[Z].indent,0)<N){break}}if(P){for(Y=S.getFirst();Y;){if(Y.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(P,Y),Y.getName() in CKEDITOR.dtd.$listItem&&(V=Y,R=U=X=void 0,X=V.getDirection()))){for(U=V.getParent();U&&!(R=U.getDirection());){U=U.getParent()}X==R&&V.removeAttribute("dir")}Y=Y.getNextSourceNode()}}return{listNode:S,nextIndex:Z}}};var l=/^h[1-6]$/,o=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);j.prototype={exec:function(L){this.refresh(L,L.elementPath());var B=L.config,H=L.getSelection(),J=H&&H.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var G=L.editable();if(G.getFirst(s)){var F=1==J.length&&J[0];(B=F&&F.getEnclosedNode())&&B.is&&this.type==B.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else{B.enterMode==CKEDITOR.ENTER_BR?G.appendBogus():J[0].fixBlock(1,B.enterMode==CKEDITOR.ENTER_P?"p":"div"),H.selectRanges(J)}}for(var B=H.createBookmarks(!0),G=[],D={},J=J.createIterator(),E=0;(F=J.getNextRange())&&++E;){var I=F.getBoundaryNodes(),M=I.startNode,z=I.endNode;M.type==CKEDITOR.NODE_ELEMENT&&"td"==M.getName()&&F.setStartAt(I.startNode,CKEDITOR.POSITION_AFTER_START);z.type==CKEDITOR.NODE_ELEMENT&&"td"==z.getName()&&F.setEndAt(I.endNode,CKEDITOR.POSITION_BEFORE_END);F=F.createIterator();for(F.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;I=F.getNextParagraph();){if(!I.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(D,I,"list_block",1);for(var C=L.elementPath(I),M=C.elements,z=0,C=C.blockLimit,v,A=M.length-1;0<=A&&(v=M[A]);A--){if(r[v.getName()]&&C.contains(v)){C.removeCustomData("list_group_object_"+E);(M=v.getCustomData("list_group_object"))?M.contents.push(I):(M={root:v,contents:[I]},G.push(M),CKEDITOR.dom.element.setMarker(D,v,"list_group_object",M));z=1;break}}z||(z=C,z.getCustomData("list_group_object_"+E)?z.getCustomData("list_group_object_"+E).contents.push(I):(M={root:z,contents:[I]},CKEDITOR.dom.element.setMarker(D,z,"list_group_object_"+E,M),G.push(M)))}}}for(v=[];0<G.length;){if(M=G.shift(),this.state==CKEDITOR.TRISTATE_OFF){if(r[M.root.getName()]){J=L;E=M;M=D;F=v;z=CKEDITOR.plugins.list.listToArray(E.root,M);C=[];for(I=0;I<E.contents.length;I++){A=E.contents[I],(A=A.getAscendant("li",!0))&&!A.getCustomData("list_item_processed")&&(C.push(A),CKEDITOR.dom.element.setMarker(M,A,"list_item_processed",!0))}for(var A=E.root.getDocument(),N=void 0,u=void 0,I=0;I<C.length;I++){var K=C[I].getCustomData("listarray_index"),N=z[K].parent;N.is(this.type)||(u=A.createElement(this.type),N.copyAttributes(u,{start:1,type:1}),u.removeStyle("list-style-type"),z[K].parent=u)}M=CKEDITOR.plugins.list.arrayToList(z,M,null,J.config.enterMode);z=void 0;C=M.listNode.getChildCount();for(I=0;I<C&&(z=M.listNode.getChild(I));I++){z.getName()==this.type&&F.push(z)}M.listNode.replace(E.root);J.fire("contentDomInvalidated")}else{z=L;F=M;I=v;C=F.contents;J=F.root.getDocument();E=[];1==C.length&&C[0].equals(F.root)&&(M=J.createElement("div"),C[0].moveChildren&&C[0].moveChildren(M),C[0].append(M),C[0]=M);F=F.contents[0].getParent();for(A=0;A<C.length;A++){F=F.getCommonAncestor(C[A].getParent())}N=z.config.useComputedState;z=M=void 0;N=void 0===N||N;for(A=0;A<C.length;A++){for(u=C[A];K=u.getParent();){if(K.equals(F)){E.push(u);!z&&u.getDirection()&&(z=1);u=u.getDirection(N);null!==M&&(M=M&&M!=u?null:u);break}u=K}}if(!(1>E.length)){C=E[E.length-1].getNext();A=J.createElement(this.type);I.push(A);for(N=I=void 0;E.length;){I=E.shift(),N=J.createElement("li"),u=I,u.is("pre")||l.test(u.getName())||"false"==u.getAttribute("contenteditable")?I.appendTo(N):(I.copyAttributes(N),M&&I.getDirection()&&(N.removeStyle("direction"),N.removeAttribute("dir")),I.moveChildren(N),I.remove()),N.appendTo(A)}M&&z&&A.setAttribute("dir",M);C?A.insertBefore(C):A.appendTo(F)}}}else{this.state==CKEDITOR.TRISTATE_ON&&r[M.root.getName()]&&p.call(this,L,M,D)}}for(A=0;A<v.length;A++){w(v[A])}CKEDITOR.dom.element.clearAllMarkers(D);H.selectBookmarks(B);L.focus()},refresh:function(v,u){var y=u.contains(r,1),z=u.blockLimit||u.root;y&&z.contains(y)?this.setState(y.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(u){u.blockless||(u.addCommand("numberedlist",new j("numberedlist","ol")),u.addCommand("bulletedlist",new j("bulletedlist","ul")),u.ui.addButton&&(u.ui.addButton("NumberedList",{label:u.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),u.ui.addButton("BulletedList",{label:u.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),u.on("key",function(y){var D=y.data.domEvent.getKey(),F;if("wysiwyg"==u.mode&&D in {8:1,46:1}){var C=u.getSelection().getRanges()[0],B=C&&C.startPath();if(C&&C.collapsed){var z=8==D,A=u.editable(),E=new CKEDITOR.dom.walker(C.clone());E.evaluator=function(H){return s(H)&&!m(H)};E.guard=function(I,H){return !(H&&I.type==CKEDITOR.NODE_ELEMENT&&I.is("table"))};D=C.clone();if(z){var G;(G=B.contains(r))&&C.checkBoundaryOfElement(G,CKEDITOR.START)&&(G=G.getParent())&&G.is("li")&&(G=k(G))?(F=G,G=G.getPrevious(s),D.moveToPosition(G&&m(G)?G:F,CKEDITOR.POSITION_BEFORE_START)):(E.range.setStartAt(A,CKEDITOR.POSITION_AFTER_START),E.range.setEnd(C.startContainer,C.startOffset),(G=E.previous())&&G.type==CKEDITOR.NODE_ELEMENT&&(G.getName() in r||G.is("li"))&&(G.is("li")||(E.range.selectNodeContents(G),E.reset(),E.evaluator=t,G=E.previous()),F=G,D.moveToElementEditEnd(F),D.moveToPosition(D.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(F){i(u,D,C),y.cancel()}else{var v=B.contains(r);v&&C.checkBoundaryOfElement(v,CKEDITOR.START)&&(F=v.getFirst(s),C.checkBoundaryOfElement(F,CKEDITOR.START)&&(G=v.getPrevious(s),k(F)?G&&(C.moveToElementEditEnd(G),C.select()):u.execCommand("outdent"),y.cancel()))}}else{if(F=B.contains("li")){if(E.range.setEndAt(A,CKEDITOR.POSITION_BEFORE_END),z=(A=F.getLast(s))&&t(A)?A:F,B=0,(G=E.next())&&G.type==CKEDITOR.NODE_ELEMENT&&G.getName() in r&&G.equals(A)?(B=1,G=E.next()):C.checkBoundaryOfElement(z,CKEDITOR.END)&&(B=2),B&&G){C=C.clone();C.moveToElementEditStart(G);if(1==B&&(D.optimize(),!D.startContainer.equals(F))){for(F=D.startContainer;F.is(CKEDITOR.dtd.$inline);){v=F,F=F.getParent()}v&&D.moveToPosition(v,CKEDITOR.POSITION_AFTER_END)}2==B&&(D.moveToPosition(D.endPath().block,CKEDITOR.POSITION_BEFORE_END),C.endPath().block&&C.moveToPosition(C.endPath().block,CKEDITOR.POSITION_AFTER_START));i(u,D,C);y.cancel()}}else{E.range.setEndAt(A,CKEDITOR.POSITION_BEFORE_END),(G=E.next())&&G.type==CKEDITOR.NODE_ELEMENT&&G.is(r)&&(G=G.getFirst(s),B.block&&C.checkStartOfBlock()&&C.checkEndOfBlock()?(B.block.remove(),C.moveToElementEditStart(G),C.select()):k(G)?(C.moveToElementEditStart(G),C.select()):(C=C.clone(),C.moveToElementEditStart(G),i(u,D,C)),y.cancel())}}setTimeout(function(){u.selectionChange(1)})}}}))}})})();(function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(j){if(!j.blockless){var i;i=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"});i=j.addCommand("numberedListStyle",i);j.addFeature(i);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");i=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"});i=j.addCommand("bulletedListStyle",i);j.addFeature(i);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");j.addMenuGroup("list",108);j.addMenuItems({numberedlist:{label:j.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:j.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});j.contextMenu.addListener(function(l){if(!l||l.isReadOnly()){return null}for(;l;){var k=l.getName();if("ol"==k){return{numberedlist:CKEDITOR.TRISTATE_OFF}}if("ul"==k){return{bulletedlist:CKEDITOR.TRISTATE_OFF}}l=l.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)})();(function(){function ab(n,r,q){return aS(r)&&aS(q)&&q.equals(r.getNext(function(t){return !(at(t)||ar(t)||aO(t))}))}function aH(n){this.upper=n[0];this.lower=n[1];this.set.apply(this,n.slice(2))}function ai(n){var r=n.element;if(r&&aS(r)&&(r=r.getAscendant(n.triggers,!0))&&n.editable.contains(r)){var q=ah(r);if("true"==q.getAttribute("contenteditable")){return r}if(q.is(n.triggers)){return q}}return null}function l(n,r,q){aQ(n,r);aQ(n,q);n=r.size.bottom;q=q.size.top;return n&&q?0|(n+q)/2:n||q}function aL(n,r,q){return r=r[q?"getPrevious":"getNext"](function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!at(t)||aS(t)&&!aO(t)&&!ax(n,t)})}function aR(n,r,q){return n>r&&n<q}function ah(n,q){if(n.data("cke-editable")){return null}for(q||(n=n.getParent());n&&!n.data("cke-editable");){if(n.hasAttribute("contenteditable")){return n}n=n.getParent()}return null}function aK(q){var t=q.doc,r=aq('\x3cspan contenteditable\x3d"false" style\x3d"'+ag+"position:absolute;border-top:1px dashed "+q.boxColor+'"\x3e\x3c/span\x3e',t),n=CKEDITOR.getUrl(this.path+"images/"+(aP.hidpi?"hidpi/":"")+"icon"+(q.rtl?"-rtl":"")+".png");aN(r,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(q.editable,!0);return this},lineChildren:[aN(aq('\x3cspan title\x3d"'+q.editor.lang.magicline.title+'" contenteditable\x3d"false"\x3e\x26#8629;\x3c/span\x3e',t),{base:ag+"height:17px;width:17px;"+(q.rtl?"left":"right")+":17px;background:url("+n+") center no-repeat "+q.boxColor+";cursor:pointer;"+(aP.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(aP.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),aN(aq(p,t),{base:o+"left:0px;border-left-color:"+q.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),aN(aq(p,t),{base:o+"right:0px;border-right-color:"+q.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){aQ(q,this);var u=q.holdDistance,v=this.size;return v&&aR(q.mouse.y,v.top-u,v.bottom+u)&&aR(q.mouse.x,v.left-u,v.right+u)?!0:!1},place:function(){var C=q.view,B=q.editable,A=q.trigger,y=A.upper,z=A.lower,x=y||z,u=x.getParent(),w={};this.trigger=A;y&&aQ(q,y,!0);z&&aQ(q,z,!0);aQ(q,u,!0);q.inInlineMode&&ap(q,!0);u.equals(B)?(w.left=C.scroll.x,w.right=-C.scroll.x,w.width=""):(w.left=x.size.left-x.size.margin.left+C.scroll.x-(q.inInlineMode?C.editable.left+C.editable.border.left:0),w.width=x.size.outerWidth+x.size.margin.left+x.size.margin.right+C.scroll.x,w.right="");y&&z?w.top=y.size.margin.bottom===z.size.margin.top?0|y.size.bottom+y.size.margin.bottom/2:y.size.margin.bottom<z.size.margin.top?y.size.bottom+y.size.margin.bottom:y.size.bottom+y.size.margin.bottom-z.size.margin.top:y?z||(w.top=y.size.bottom+y.size.margin.bottom):w.top=z.size.top-z.size.margin.top;A.is(av)||aR(w.top,C.scroll.y-15,C.scroll.y+5)?(w.top=q.inInlineMode?0:C.scroll.y,this.look(av)):A.is(au)||aR(w.top,C.pane.bottom-5,C.pane.bottom+15)?(w.top=q.inInlineMode?C.editable.height+C.editable.padding.top+C.editable.padding.bottom:C.pane.bottom-1,this.look(au)):(q.inInlineMode&&(w.top-=C.editable.top+C.editable.border.top),this.look(aJ));q.inInlineMode&&(w.top--,w.top+=C.editable.scroll.top,w.left+=C.editable.scroll.left);for(var v in w){w[v]=CKEDITOR.tools.cssLength(w[v])}this.setStyles(w)},look:function(v){if(this.oldLook!=v){for(var u=this.lineChildren.length,w;u--;){(w=this.lineChildren[u]).setAttribute("style",w.base+w.looks[0|v/2])}this.oldLook=v}},wrap:new af("span",q.doc)});for(t=r.lineChildren.length;t--;){r.lineChildren[t].appendTo(r)}r.look(aJ);r.appendTo(r.wrap);r.unselectable();r.lineChildren[0].on("mouseup",function(u){r.detach();ae(q,function(v){var w=q.line.trigger;v[w.is(ao)?"insertBefore":"insertAfter"](w.is(ao)?w.lower:w.upper)},!0);q.editor.focus();aP.ie||q.enterMode==CKEDITOR.ENTER_BR||q.hotNode.scrollIntoView();u.data.preventDefault(!0)});r.on("mousedown",function(u){u.data.preventDefault(!0)});q.line=r}function ae(q,v,u){var n=new CKEDITOR.dom.range(q.doc),t=q.editor,r;aP.ie&&q.enterMode==CKEDITOR.ENTER_BR?r=q.doc.createText(an):(r=(r=ah(q.element,!0))&&r.data("cke-enter-mode")||q.enterMode,r=new af(am[r],q.doc),r.is("br")||q.doc.createText(an).appendTo(r));u&&t.fire("saveSnapshot");v(r);n.moveToPosition(r,CKEDITOR.POSITION_AFTER_START);t.getSelection().selectRanges([n]);q.hotNode=r;u&&t.fire("saveSnapshot")}function m(n,q){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function r(t){var v=aP.ie&&9>aP.version?" ":an,u=n.hotNode&&n.hotNode.getText()==v&&n.element.equals(n.hotNode)&&n.lastCmdDirection===!!q;ae(n,function(w){u&&n.hotNode&&n.hotNode.remove();w[q?"insertAfter":"insertBefore"](t);w.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!q});n.lastCmdDirection=!!q});aP.ie||n.enterMode==CKEDITOR.ENTER_BR||n.hotNode.scrollIntoView();n.line.detach()}return function(t){t=t.getSelection().getStartElement();var v;t=t.getAscendant(k,1);if(!ay(n,t)&&t&&!t.equals(n.editable)&&!t.contains(n.editable)){(v=ah(t))&&"false"==v.getAttribute("contenteditable")&&(t=v);n.element=t;v=aL(n,t,!q);var u;aS(v)&&v.is(n.triggers)&&v.is(aC)&&(!aL(n,v,!q)||(u=aL(n,v,!q))&&aS(u)&&u.is(n.triggers))?r(v):(u=ai(n,t),aS(u)&&(aL(n,u,!q)?(t=aL(n,u,!q))&&aS(t)&&t.is(n.triggers)&&r(u):r(u)))}}}()}}function ax(n,r){if(!r||r.type!=CKEDITOR.NODE_ELEMENT||!r.$){return !1}var q=n.line;return q.wrap.equals(r)||q.wrap.contains(r)}function aS(n){return n&&n.type==CKEDITOR.NODE_ELEMENT&&n.$}function aO(n){if(!aS(n)){return !1}var q;(q=aT(n))||(aS(n)?(q={left:1,right:1,center:1},q=!(!q[n.getComputedStyle("float")]&&!q[n.getAttribute("align")])):q=!1);return q}function aT(n){return !!{absolute:1,fixed:1}[n.getComputedStyle("position")]}function al(n,q){return aS(q)?q.is(n.triggers):null}function ay(q,u){if(!u){return !1}for(var t=u.getParents(1),n=t.length;n--;){for(var r=q.tabuList.length;r--;){if(t[n].hasAttribute(q.tabuList[r])){return !0}}}return !1}function s(n,r,q){r=r[q?"getLast":"getFirst"](function(t){return n.isRelevant(t)&&!t.is(aM)});if(!r){return !1}aQ(n,r);return q?r.size.top>n.mouse.y:r.size.bottom<n.mouse.y}function aE(q){var v=q.editable,u=q.mouse,n=q.view,t=q.triggerOffset;ap(q);var r=u.y>(q.inInlineMode?n.editable.top+n.editable.height/2:Math.min(n.editable.height,n.pane.height)/2),v=v[r?"getLast":"getFirst"](function(w){return !(at(w)||ar(w))});if(!v){return null}ax(q,v)&&(v=q.line.wrap[r?"getPrevious":"getNext"](function(w){return !(at(w)||ar(w))}));if(!aS(v)||aO(v)||!al(q,v)){return null}aQ(q,v);return !r&&0<=v.size.top&&aR(u.y,0,v.size.top+t)?(q=q.inInlineMode||0===n.scroll.y?av:aJ,new aH([null,v,ao,ak,q])):r&&v.size.bottom<=n.pane.height&&aR(u.y,v.size.bottom-t,n.pane.height)?(q=q.inInlineMode||aR(v.size.bottom,n.pane.height-t,n.pane.height)?au:aJ,new aH([v,null,az,ak,q])):null}function i(y){var w=y.mouse,v=y.view,x=y.triggerOffset,u=ai(y);if(!u){return null}aQ(y,u);var x=Math.min(x,0|u.size.outerHeight/2),t=[],n,q;if(aR(w.y,u.size.top-1,u.size.top+x)){q=!1}else{if(aR(w.y,u.size.bottom-x,u.size.bottom+1)){q=!0}else{return null}}if(aO(u)||s(y,u,q)||u.getParent().is(aF)){return null}var r=aL(y,u,!q);if(r){if(r&&r.type==CKEDITOR.NODE_TEXT){return null}if(aS(r)){if(aO(r)||!al(y,r)||r.getParent().is(aF)){return null}t=[r,u][q?"reverse":"concat"]().concat([ad,ak])}}else{u.equals(y.editable[q?"getLast":"getFirst"](y.isRelevant))?(ap(y),q&&aR(w.y,u.size.bottom-x,v.pane.height)&&aR(u.size.bottom,v.pane.height-x,v.pane.height)?n=au:aR(w.y,0,u.size.top+x)&&(n=av)):n=aJ,t=[null,u][q?"reverse":"concat"]().concat([q?az:ao,ak,n,u.equals(y.editable[q?"getLast":"getFirst"](y.isRelevant))?q?au:av:aJ])}return 0 in t?new aH(t):null}function ac(z,x,w,y){for(var v=x.getDocumentPosition(),u={},q={},r={},t={},n=aI.length;n--;){u[aI[n]]=parseInt(x.getComputedStyle.call(x,"border-"+aI[n]+"-width"),10)||0,r[aI[n]]=parseInt(x.getComputedStyle.call(x,"padding-"+aI[n]),10)||0,q[aI[n]]=parseInt(x.getComputedStyle.call(x,"margin-"+aI[n]),10)||0}w&&!y||aj(z,y);t.top=v.y-(w?0:z.view.scroll.y);t.left=v.x-(w?0:z.view.scroll.x);t.outerWidth=x.$.offsetWidth;t.outerHeight=x.$.offsetHeight;t.height=t.outerHeight-(r.top+r.bottom+u.top+u.bottom);t.width=t.outerWidth-(r.left+r.right+u.left+u.right);t.bottom=t.top+t.outerHeight;t.right=t.left+t.outerWidth;z.inInlineMode&&(t.scroll={top:x.$.scrollTop,left:x.$.scrollLeft});return aN({border:u,padding:r,margin:q,ignoreScroll:w},t,!0)}function aQ(n,r,q){if(!aS(r)){return r.size=null}if(!r.size){r.size={}}else{if(r.size.ignoreScroll==q&&r.size.date>new Date-aA){return null}}return aN(r.size,ac(n,r,q),{date:+new Date},!0)}function ap(n,q){n.view.editable=ac(n,n.editable,q,!0)}function aj(q,t){q.view||(q.view={});var r=q.view;if(!(!t&&r&&r.date>new Date-aA)){var n=q.win,r=n.getScrollPosition(),n=n.getViewPaneSize();aN(q.view,{scroll:{x:r.x,y:r.y,width:q.doc.$.documentElement.scrollWidth-n.width,height:q.doc.$.documentElement.scrollHeight-n.height},pane:{width:n.width,height:n.height,bottom:n.height+r.y},date:+new Date},!0)}}function aD(A,y,x,z){for(var w=z,v=z,r=0,t=!1,u=!1,q=A.view.pane.height,n=A.mouse;n.y+r<q&&0<n.y-r;){t||(t=y(w,z));u||(u=y(v,z));!t&&0<n.y-r&&(w=x(A,{x:n.x,y:n.y-r}));!u&&n.y+r<q&&(v=x(A,{x:n.x,y:n.y+r}));if(t&&u){break}r+=2}return new aH([w,v,null,null])}CKEDITOR.plugins.add("magicline",{init:function(q){var w=q.config,v=w.magicline_triggerOffset||30,n={editor:q,enterMode:w.enterMode,triggerOffset:v,holdDistance:0|v*(w.magicline_holdDistance||0.5),boxColor:w.magicline_color||"#ff0000",rtl:"rtl"==w.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(w.magicline_tabuList||[]),triggers:w.magicline_everywhere?k:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},u,t,r;n.isRelevant=function(x){return aS(x)&&!ax(n,x)&&!aO(x)};q.on("contentDom",function(){var z=q.editable(),y=q.document,x=q.window;aN(n,{editable:z,inInlineMode:z.isInline(),doc:y,win:x,hotNode:null},!0);n.boundary=n.inInlineMode?n.editable:n.doc.getDocumentElement();z.is(aw.$inline)||(n.inInlineMode&&!aT(z)&&z.setStyles({position:"relative",top:null,left:null}),aK.call(this,n),aj(n),z.attachListener(q,"beforeUndoImage",function(){n.line.detach()}),z.attachListener(q,"beforeGetData",function(){n.line.wrap.getParent()&&(n.line.detach(),q.once("getData",function(){n.line.attach()},null,null,1000))},null,null,0),z.attachListener(n.inInlineMode?y:y.getWindow().getFrame(),"mouseout",function(D){if("wysiwyg"==q.mode){if(n.inInlineMode){var C=D.data.$.clientX;D=D.data.$.clientY;aj(n);ap(n,!0);var B=n.view.editable,A=n.view.scroll;C>B.left-A.x&&C<B.right-A.x&&D>B.top-A.y&&D<B.bottom-A.y||(clearTimeout(r),r=null,n.line.detach())}else{clearTimeout(r),r=null,n.line.detach()}}}),z.attachListener(z,"keyup",function(){n.hiddenMode=0}),z.attachListener(z,"keydown",function(A){if("wysiwyg"==q.mode){switch(A.data.getKeystroke()){case 2228240:case 16:n.hiddenMode=1,n.line.detach()}}}),z.attachListener(n.inInlineMode?z:y,"mousemove",function(B){t=!0;if("wysiwyg"==q.mode&&!q.readOnly&&!r){var A={x:B.data.$.clientX,y:B.data.$.clientY};r=setTimeout(function(){n.mouse=A;r=n.trigger=null;aj(n);t&&!n.hiddenMode&&q.focusManager.hasFocus&&!n.line.mouseNear()&&(n.element=j(n,!0))&&((n.trigger=aE(n)||i(n)||aG(n))&&!ay(n,n.trigger.upper||n.trigger.lower)?n.line.attach().place():(n.trigger=null,n.line.detach()),t=!1)},30)}}),z.attachListener(x,"scroll",function(){"wysiwyg"==q.mode&&(n.line.detach(),aP.webkit&&(n.hiddenMode=1,clearTimeout(u),u=setTimeout(function(){n.mouseDown||(n.hiddenMode=0)},50)))}),z.attachListener(aB?y:x,"mousedown",function(){"wysiwyg"==q.mode&&(n.line.detach(),n.hiddenMode=1,n.mouseDown=1)}),z.attachListener(aB?y:x,"mouseup",function(){n.hiddenMode=0;n.mouseDown=0}),q.addCommand("accessPreviousSpace",m(n)),q.addCommand("accessNextSpace",m(n,!0)),q.setKeystroke([[w.magicline_keystrokePrevious,"accessPreviousSpace"],[w.magicline_keystrokeNext,"accessNextSpace"]]),q.on("loadSnapshot",function(){var D,C,B,A;for(A in {p:1,br:1,div:1}){for(D=q.document.getElementsByTag(A),B=D.count();B--;){if((C=D.getItem(B)).data("cke-magicline-hot")){n.hotNode=C;n.lastCmdDirection="true"===C.data("cke-magicline-dir")?!0:!1;return}}}}),this.backdoor={accessFocusSpace:ae,boxTrigger:aH,isLine:ax,getAscendantTrigger:ai,getNonEmptyNeighbour:aL,getSize:ac,that:n,triggerEdge:i,triggerEditable:aE,triggerExpand:aG})},this)}});var aN=CKEDITOR.tools.extend,af=CKEDITOR.dom.element,aq=af.createFromHtml,aP=CKEDITOR.env,aB=CKEDITOR.env.ie&&9>CKEDITOR.env.version,aw=CKEDITOR.dtd,am={},ao=128,az=64,ad=32,ak=16,av=4,au=2,aJ=1,an="Â ",aF=aw.$listItem,aM=aw.$tableContent,aC=aN({},aw.$nonEditable,aw.$empty),k=aw.$block,aA=100,ag="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",o=ag+"border-color:transparent;display:block;border-style:solid;",p="\x3cspan\x3e"+an+"\x3c/span\x3e";am[CKEDITOR.ENTER_BR]="br";am[CKEDITOR.ENTER_P]="p";am[CKEDITOR.ENTER_DIV]="div";aH.prototype={set:function(n,r,q){this.properties=n+r+(q||aJ);return this},is:function(n){return(this.properties&n)==n}};var j=function(){function n(r,t){var q=r.$.elementFromPoint(t.x,t.y);return q&&q.nodeType?new CKEDITOR.dom.element(q):null}return function(w,v,q){if(!w.mouse){return null}var u=w.doc,t=w.line.wrap;q=q||w.mouse;var r=n(u,q);v&&ax(w,r)&&(t.hide(),r=n(u,q),t.show());return !r||r.type!=CKEDITOR.NODE_ELEMENT||!r.$||aP.ie&&9>aP.version&&!w.boundary.equals(r)&&!w.boundary.contains(r)?null:r}}(),at=CKEDITOR.dom.walker.whitespaces(),ar=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),aG=function(){function n(A){var z=A.element,y,x,u;if(!aS(z)||z.contains(A.editable)||z.isReadOnly()){return null}u=aD(A,function(C,B){return !B.equals(C)},function(C,B){return j(C,!0,B)},z);y=u.upper;x=u.lower;if(ab(A,y,x)){return u.set(ad,8)}if(y&&z.contains(y)){for(;!y.getParent().equals(z);){y=y.getParent()}}else{y=z.getFirst(function(B){return q(A,B)})}if(x&&z.contains(x)){for(;!x.getParent().equals(z);){x=x.getParent()}}else{x=z.getLast(function(B){return q(A,B)})}if(!y||!x){return null}aQ(A,y);aQ(A,x);if(!aR(A.mouse.y,y.size.top,x.size.bottom)){return null}for(var z=Number.MAX_VALUE,v,w,t,r;x&&!x.equals(y)&&(w=y.getNext(A.isRelevant));){v=Math.abs(l(A,y,w)-A.mouse.y),v<z&&(z=v,t=y,r=w),y=w,aQ(A,y)}if(!t||!r||!aR(A.mouse.y,t.size.top,r.size.bottom)){return null}u.upper=t;u.lower=r;return u.set(ad,8)}function q(t,r){return !(r&&r.type==CKEDITOR.NODE_TEXT||ar(r)||aO(r)||ax(t,r)||r.type==CKEDITOR.NODE_ELEMENT&&r.$&&r.is("br"))}return function(v){var r=n(v),u;if(u=r){u=r.upper;var t=r.lower;u=!u||!t||aO(t)||aO(u)||t.equals(u)||u.equals(t)||t.contains(u)||u.contains(t)?!1:al(v,u)&&al(v,t)&&ab(v,u,t)?!0:!1}return u?r:null}}(),aI=["top","left","right","bottom"]})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function m(o){if(!o||o.type!=CKEDITOR.NODE_ELEMENT||"form"!=o.getName()){return[]}for(var q=[],p=["style","className"],n=0;n<p.length;n++){var r=o.$.elements.namedItem(p[n]);r&&(r=new CKEDITOR.dom.element(r),q.push([r,r.nextSibling]),r.remove())}return q}function k(o,q){if(o&&o.type==CKEDITOR.NODE_ELEMENT&&"form"==o.getName()&&0<q.length){for(var p=q.length-1;0<=p;p--){var n=q[p][0],r=q[p][1];r?n.insertBefore(r):n.appendTo(o)}}}function l(o,q){var p=m(o),n={},r=o.$;q||(n["class"]=r.className||"",r.className="");n.inline=r.style.cssText||"";q||(r.style.cssText="position: static; overflow: visible");k(p);return n}function j(o,q){var p=m(o),n=o.$;"class" in q&&(n.className=q["class"]);"inline" in q&&(n.style.cssText=q.inline);k(p)}function i(o){if(!o.editable().isInline()){var q=CKEDITOR.instances,p;for(p in q){var n=q[p];"wysiwyg"!=n.mode||n.readOnly||(n=n.document.getBody(),n.setAttribute("contentEditable",!1),n.setAttribute("contentEditable",!0))}o.editable().hasFocus&&(o.toolbox.focus(),o.focus())}}CKEDITOR.plugins.add("maximize",{init:function(x){function u(){var n=v.getViewPaneSize();x.resize(n.width,n.height,null,!0)}if(x.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var t=x.lang,w=CKEDITOR.document,v=w.getWindow(),s,r,o,q=CKEDITOR.TRISTATE_OFF;x.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var p=x.container.getFirst(function(B){return B.type==CKEDITOR.NODE_ELEMENT&&B.hasClass("cke_inner")}),y=x.ui.space("contents");if("wysiwyg"==x.mode){var A=x.getSelection();s=A&&A.getRanges();r=v.getScrollPosition()}else{var n=x.editable().$;s=!CKEDITOR.env.ie&&[n.selectionStart,n.selectionEnd];r=[n.scrollLeft,n.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){v.on("resize",u);o=v.getScrollPosition();for(A=x.container;A=A.getParent();){A.setCustomData("maximize_saved_styles",l(A)),A.setStyle("z-index",x.config.baseFloatZIndex-5)}y.setCustomData("maximize_saved_styles",l(y,!0));p.setCustomData("maximize_saved_styles",l(p,!0));y={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};w.getDocumentElement().setStyles(y);!CKEDITOR.env.gecko&&w.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||w.getBody().setStyles(y);CKEDITOR.env.ie?setTimeout(function(){v.$.scrollTo(0,0)},0):v.$.scrollTo(0,0);p.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");p.$.offsetLeft;p.setStyles({"z-index":x.config.baseFloatZIndex-5,left:"0px",top:"0px"});p.addClass("cke_maximized");u();y=p.getDocumentPosition();p.setStyles({left:-1*y.x+"px",top:-1*y.y+"px"});CKEDITOR.env.gecko&&i(x)}else{if(this.state==CKEDITOR.TRISTATE_ON){v.removeListener("resize",u);for(var A=[y,p],z=0;z<A.length;z++){j(A[z],A[z].getCustomData("maximize_saved_styles")),A[z].removeCustomData("maximize_saved_styles")}for(A=x.container;A=A.getParent();){j(A,A.getCustomData("maximize_saved_styles")),A.removeCustomData("maximize_saved_styles")}CKEDITOR.env.ie?setTimeout(function(){v.$.scrollTo(o.x,o.y)},0):v.$.scrollTo(o.x,o.y);p.removeClass("cke_maximized");CKEDITOR.env.webkit&&(p.setStyle("display","inline"),setTimeout(function(){p.setStyle("display","block")},0));x.fire("resize",{outerHeight:x.container.$.offsetHeight,contentsHeight:y.$.offsetHeight,outerWidth:x.container.$.offsetWidth})}}this.toggleState();if(A=this.uiItems[0]){y=this.state==CKEDITOR.TRISTATE_OFF?t.maximize.maximize:t.maximize.minimize,A=CKEDITOR.document.getById(A._.id),A.getChild(1).setHtml(y),A.setAttribute("title",y),A.setAttribute("href",'javascript:void("'+y+'");')}"wysiwyg"==x.mode?s?(CKEDITOR.env.gecko&&i(x),x.getSelection().selectRanges(s),(n=x.getSelection().getStartElement())&&n.scrollIntoView(!0)):v.$.scrollTo(r.x,r.y):(s&&(n.selectionStart=s[0],n.selectionEnd=s[1]),n.scrollLeft=r[0],n.scrollTop=r[1]);s=r=null;q=this.state;x.fire("maximize",this.state)},canUndo:!1});x.ui.addButton&&x.ui.addButton("Maximize",{label:t.maximize.maximize,command:"maximize",toolbar:"tools,10"});x.on("mode",function(){var n=x.getCommand("maximize");n.setState(n.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:q)},null,null,100)}}})})();CKEDITOR.plugins.add("newpage",{init:function(i){i.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(j){var k=this;j.setData(j.config.newpage_html||"",function(){j.focus();setTimeout(function(){j.fire("afterCommandExec",{name:"newpage",command:k});j.selectionChange()},200)})},async:!0});i.ui.addButton&&i.ui.addButton("NewPage",{label:i.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}});(function(){function i(j){return{"aria-label":j,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:j}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var j=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+j+"}")},init:function(j){j.blockless||(j.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),j.ui.addButton&&j.ui.addButton("PageBreak",{label:j.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&j.on("contentDom",function(){j.document.on("click",function(k){k=k.data.getTarget();k.is("div")&&k.hasClass("cke_pagebreak")&&j.getSelection().selectElement(k)})}))},afterInit:function(l){function j(k){CKEDITOR.tools.extend(k.attributes,i(l.lang.pagebreak.alt),!0);k.children.length=0}var p=l.dataProcessor,o=p&&p.dataFilter,p=p&&p.htmlFilter,n=/page-break-after\s*:\s*always/i,m=/display\s*:\s*none/i;p&&p.addRules({attributes:{"class":function(q,k){var s=q.replace("cke_pagebreak","");if(s!=q){var r=CKEDITOR.htmlParser.fragment.fromHtml('\x3cspan style\x3d"display: none;"\x3e\x26nbsp;\x3c/span\x3e').children[0];k.children.length=0;k.add(r);r=k.attributes;delete r["aria-label"];delete r.contenteditable;delete r.title}return s}}},{applyToAll:!0,priority:5});o&&o.addRules({elements:{div:function(k){if(k.attributes["data-cke-pagebreak"]){j(k)}else{if(n.test(k.attributes.style)){var q=k.children[0];q&&"span"==q.name&&m.test(q.attributes.style)&&j(k)}}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(k){var j=k.document.createElement("div",{attributes:i(k.lang.pagebreak.alt)});k.insertElement(j)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(j){return(j=j.parent)&&"div"==j.name&&j.styles&&j.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"}})();(function(){var i={canUndo:!1,async:!0,exec:function(j){j.getClipboardData({title:j.lang.pastetext.title},function(k){k&&j.fire("paste",{type:"text",dataValue:k.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});j.fire("afterCommandExec",{name:"pastetext",command:i,returnValue:!!k})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(j){j.addCommand("pastetext",i);j.ui.addButton&&j.ui.addButton("PasteText",{label:j.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"});if(j.config.forcePasteAsPlainText){j.on("beforePaste",function(k){"html"!=k.data.type&&(k.data.type="text")})}j.on("pasteState",function(k){j.getCommand("pastetext").setState(k.data)})}})})();(function(){function j(l,n,m){var k=CKEDITOR.cleanWord;k?m():(l=CKEDITOR.getUrl(l.config.pasteFromWordCleanupFile||n+"filter/default.js"),CKEDITOR.scriptLoader.load(l,m,null,!0));return !k}function i(k){k.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(k){var m=0,l=this.path;k.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(n){var o=this;m=1;n.once("beforePaste",i);n.getClipboardData({title:n.lang.pastefromword.title},function(p){p&&n.fire("paste",{type:"html",dataValue:p.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});n.fire("afterCommandExec",{name:"pastefromword",command:o,returnValue:!!p})})}});k.ui.addButton&&k.ui.addButton("PasteFromWord",{label:k.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});k.on("pasteState",function(n){k.getCommand("pastefromword").setState(n.data)});k.on("paste",function(n){var p=n.data,q=p.dataValue;if(q&&(m||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(q))){p.dontFilter=!0;var o=j(k,l,function(){if(o){k.fire("paste",p)}else{if(!k.config.pasteFromWordPromptCleanup||m||confirm(k.lang.pastefromword.confirmCleanup)){p.dataValue=CKEDITOR.cleanWord(q,k)}}m=0});o&&n.cancel()}},null,null,3)}})})();(function(){var j,i={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(m){var o,l=m.config,p=l.baseHref?'\x3cbase href\x3d"'+l.baseHref+'"/\x3e':"";if(l.fullPage){o=m.getData().replace(/<head>/,"$\x26"+p).replace(/[^>]*(?=<\/title>)/,"$\x26 \x26mdash; "+m.lang.preview.preview)}else{var l="\x3cbody ",r=m.document&&m.document.getBody();r&&(r.getAttribute("id")&&(l+='id\x3d"'+r.getAttribute("id")+'" '),r.getAttribute("class")&&(l+='class\x3d"'+r.getAttribute("class")+'" '));l+="\x3e";o=m.config.docType+'\x3chtml dir\x3d"'+m.config.contentsLangDirection+'"\x3e\x3chead\x3e'+p+"\x3ctitle\x3e"+m.lang.preview.preview+"\x3c/title\x3e"+CKEDITOR.tools.buildStyleHtml(m.config.contentsCss)+"\x3c/head\x3e"+l+m.getData()+"\x3c/body\x3e\x3c/html\x3e"}p=640;l=420;r=80;try{var s=window.screen,p=Math.round(0.8*s.width),l=Math.round(0.7*s.height),r=Math.round(0.1*s.width)}catch(n){}if(!1===m.fire("contentPreview",m={dataValue:o})){return !1}var s="",q;CKEDITOR.env.ie&&(window._cke_htmlToLoad=m.dataValue,q="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad \x3d null;})() )",s="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=m.dataValue,s=CKEDITOR.getUrl(j+"preview.html"));s=window.open(s,null,"toolbar\x3dyes,location\x3dno,status\x3dyes,menubar\x3dyes,scrollbars\x3dyes,resizable\x3dyes,width\x3d"+p+",height\x3d"+l+",left\x3d"+r);CKEDITOR.env.ie&&s&&(s.location=q);CKEDITOR.env.ie||CKEDITOR.env.gecko||(q=s.document,q.open(),q.write(m.dataValue),q.close());return !0}};CKEDITOR.plugins.add("preview",{init:function(k){k.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(j=this.path,k.addCommand("preview",i),k.ui.addButton&&k.ui.addButton("Preview",{label:k.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})})();CKEDITOR.plugins.add("print",{init:function(i){i.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(i.addCommand("print",CKEDITOR.plugins.print),i.ui.addButton&&i.ui.addButton("Print",{label:i.lang.print.toolbar,command:"print",toolbar:"document,50"}))}});CKEDITOR.plugins.print={exec:function(i){CKEDITOR.env.gecko?i.window.$.print():i.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add("removeformat",{init:function(i){i.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);i.ui.addButton&&i.ui.addButton("RemoveFormat",{label:i.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(y){for(var s=y._.removeFormatRegex||(y._.removeFormatRegex=new RegExp("^(?:"+y.config.removeFormatTags.replace(/,/g,"|")+")$","i")),u=y._.removeAttributes||(y._.removeAttributes=y.config.removeFormatAttributes.split(",")),t=CKEDITOR.plugins.removeformat.filter,o=y.getSelection().getRanges(),j=o.createIterator(),i=function(k){return k.type==CKEDITOR.NODE_ELEMENT},w;w=j.getNextRange();){w.collapsed||w.enlarge(CKEDITOR.ENLARGE_ELEMENT);var q=w.createBookmark(),x=q.startNode,v=q.endNode,r=function(k){for(var p=y.elementPath(k),m=p.elements,n=1,l;(l=m[n])&&!l.equals(p.block)&&!l.equals(p.blockLimit);n++){s.test(l.getName())&&t(y,l)&&k.breakParent(l)}};r(x);if(v){for(r(v),x=x.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);x&&!x.equals(v);){if(x.isReadOnly()){if(x.getPosition(v)&CKEDITOR.POSITION_CONTAINS){break}x=x.getNext(i)}else{r=x.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==x.getName()&&x.data("cke-realelement")||!t(y,x)||(s.test(x.getName())?x.remove(1):(x.removeAttributes(u),y.fire("removeFormatCleanup",x))),x=r}}}w.moveToBookmark(q)}y.forceNextSelectionCheck();y.getSelection().selectRanges(o)}}},filter:function(i,j){for(var l=i._.removeFormatFilters||[],k=0;k<l.length;k++){if(!1===l[k](j)){return !1}}return !0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(i){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(i)};CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var i={readOnly:1,exec:function(k){if(k.fire("save")&&(k=k.element.$.form)){try{k.submit()}catch(j){k.submit.click&&k.submit.click()}}}};CKEDITOR.plugins.add("save",{init:function(j){j.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(j.addCommand("save",i).modes={wysiwyg:!!j.element.$.form},j.ui.addButton&&j.ui.addButton("Save",{label:j.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})})();(function(){CKEDITOR.plugins.add("selectall",{init:function(i){i.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(k){var j=k.editable();if(j.is("textarea")){k=j.$,CKEDITOR.env.ie?k.createTextRange().execCommand("SelectAll"):(k.selectionStart=0,k.selectionEnd=k.value.length),k.focus()}else{if(j.is("body")){k.document.$.execCommand("SelectAll",!1,null)}else{var l=k.createRange();l.selectNodeContents(j);l.select()}k.forceNextSelectionCheck();k.selectionChange()}},canUndo:!1});i.ui.addButton&&i.ui.addButton("SelectAll",{label:i.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})})();(function(){var i={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(j){this.toggleState();this.refresh(j)},refresh:function(j){if(j.document){var k=this.state!=CKEDITOR.TRISTATE_ON||j.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!j.focusManager.hasFocus?"removeClass":"attachClass";j.editable()[k]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var u="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),s,t,q,p,m=CKEDITOR.getUrl(this.path),j=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),o=j?":not([contenteditable\x3dfalse]):not(.cke_show_blocks_off)":"",r,n;for(s=t=q=p="";r=u.pop();){n=u.length?",":"",s+=".cke_show_blocks "+r+o+n,q+=".cke_show_blocks.cke_contents_ltr "+r+o+n,p+=".cke_show_blocks.cke_contents_rtl "+r+o+n,t+=".cke_show_blocks "+r+o+"{background-image:url("+CKEDITOR.getUrl(m+"images/block_"+r+".png")+")}"}CKEDITOR.addCss((s+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(t,q+"{background-position:top left;padding-left:8px}",p+"{background-position:top right;padding-right:8px}"));j||CKEDITOR.addCss(".cke_show_blocks [contenteditable\x3dfalse],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(k){function l(){j.refresh(k)}if(!k.blockless){var j=k.addCommand("showblocks",i);j.canUndo=!1;k.config.startupOutlineBlocks&&j.setState(CKEDITOR.TRISTATE_ON);k.ui.addButton&&k.ui.addButton("ShowBlocks",{label:k.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});k.on("mode",function(){j.state!=CKEDITOR.TRISTATE_DISABLED&&j.refresh(k)});k.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(k.on("focus",l),k.on("blur",l));k.on("contentDom",function(){j.state!=CKEDITOR.TRISTATE_DISABLED&&j.refresh(k)})}}})})();(function(){var i={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(j){this.toggleState();this.refresh(j)},refresh:function(k){if(k.document){var j=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";k.editable()[j]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var j;j=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 \x3e tr \x3e td, .%1 table.%2 \x3e tr \x3e th,;.%1 table.%2 \x3e tbody \x3e tr \x3e td, .%1 table.%2 \x3e tbody \x3e tr \x3e th,;.%1 table.%2 \x3e thead \x3e tr \x3e td, .%1 table.%2 \x3e thead \x3e tr \x3e th,;.%1 table.%2 \x3e tfoot \x3e tr \x3e td, .%1 table.%2 \x3e tfoot \x3e tr \x3e th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(j)},init:function(k){var j=k.addCommand("showborders",i);j.canUndo=!1;!1!==k.config.startupShowBorders&&j.setState(CKEDITOR.TRISTATE_ON);k.on("mode",function(){j.state!=CKEDITOR.TRISTATE_DISABLED&&j.refresh(k)},null,null,100);k.on("contentDom",function(){j.state!=CKEDITOR.TRISTATE_DISABLED&&j.refresh(k)});k.on("removeFormatCleanup",function(l){l=l.data;k.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&l.is("table")&&(!l.hasAttribute("border")||0>=parseInt(l.getAttribute("border"),10))&&l.addClass("cke_show_border")})},afterInit:function(k){var j=k.dataProcessor;k=j&&j.dataFilter;j=j&&j.htmlFilter;k&&k.addRules({elements:{table:function(m){m=m.attributes;var l=m["class"],n=parseInt(m.border,10);n&&!(0>=n)||l&&-1!=l.indexOf("cke_show_border")||(m["class"]=(l||"")+" cke_show_border")}}});j&&j.addRules({elements:{table:function(m){m=m.attributes;var l=m["class"];l&&(m["class"]=l.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",function(k){var j=k.data.name;if("table"==j||"tableProperties"==j){if(k=k.data.definition,j=k.getContents("info").get("txtBorder"),j.commit=CKEDITOR.tools.override(j.commit,function(l){return function(m,o){l.apply(this,arguments);var n=parseInt(this.getValue(),10);o[!n||0>=n?"addClass":"removeClass"]("cke_show_border")}}),k=(k=k.getContents("advanced"))&&k.get("advCSSClasses")){k.setup=CKEDITOR.tools.override(k.setup,function(l){return function(){l.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),k.commit=CKEDITOR.tools.override(k.commit,function(l){return function(m,n){l.apply(this,arguments);parseInt(n.getAttribute("border"),10)||n.addClass("cke_show_border")}})}}})})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function(j){function m(){var n=l&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();n&&this.focus()}if(j.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var k=CKEDITOR.plugins.sourcearea;j.addMode("source",function(o){var n=j.ui.space("contents").getDocument().createElement("textarea");n.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",j.config.sourceAreaTabSize||4)));n.setAttribute("dir","ltr");n.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");j.ui.space("contents").append(n);n=j.editable(new i(j,n));n.setData(j.getData(1));CKEDITOR.env.ie&&(n.attachListener(j,"resize",m,n),n.attachListener(CKEDITOR.document.getWindow(),"resize",m,n),CKEDITOR.tools.setTimeout(m,0,n));j.fire("ariaWidget",this);o()});j.addCommand("source",k.commands.source);j.ui.addButton&&j.ui.addButton("Source",{label:j.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});j.on("mode",function(){j.getCommand("source").setState("source"==j.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var l=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var i=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(j){this.setValue(j);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(j){this[(j?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){i.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(i){"wysiwyg"==i.mode&&i.fire("saveSnapshot");i.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);i.setMode("source"==i.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(i){var j=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");i.addCommand("specialchar",{exec:function(){var k=i.langCode,k=j.availableLangs[k]?k:j.availableLangs[k.replace(/-.*/,"")]?k.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(j.path+"dialogs/lang/"+k+".js"),function(){CKEDITOR.tools.extend(i.lang.specialchar,j.langEntries[k]);i.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});i.ui.addButton&&i.ui.addButton("SpecialChar",{label:i.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! \x26quot; # $ % \x26amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; \x26lt; \x3d \x26gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ \x26euro; \x26lsquo; \x26rsquo; \x26ldquo; \x26rdquo; \x26ndash; \x26mdash; \x26iexcl; \x26cent; \x26pound; \x26curren; \x26yen; \x26brvbar; \x26sect; \x26uml; \x26copy; \x26ordf; \x26laquo; \x26not; \x26reg; \x26macr; \x26deg; \x26sup2; \x26sup3; \x26acute; \x26micro; \x26para; \x26middot; \x26cedil; \x26sup1; \x26ordm; \x26raquo; \x26frac14; \x26frac12; \x26frac34; \x26iquest; \x26Agrave; \x26Aacute; \x26Acirc; \x26Atilde; \x26Auml; \x26Aring; \x26AElig; \x26Ccedil; \x26Egrave; \x26Eacute; \x26Ecirc; \x26Euml; \x26Igrave; \x26Iacute; \x26Icirc; \x26Iuml; \x26ETH; \x26Ntilde; \x26Ograve; \x26Oacute; \x26Ocirc; \x26Otilde; \x26Ouml; \x26times; \x26Oslash; \x26Ugrave; \x26Uacute; \x26Ucirc; \x26Uuml; \x26Yacute; \x26THORN; \x26szlig; \x26agrave; \x26aacute; \x26acirc; \x26atilde; \x26auml; \x26aring; \x26aelig; \x26ccedil; \x26egrave; \x26eacute; \x26ecirc; \x26euml; \x26igrave; \x26iacute; \x26icirc; \x26iuml; \x26eth; \x26ntilde; \x26ograve; \x26oacute; \x26ocirc; \x26otilde; \x26ouml; \x26divide; \x26oslash; \x26ugrave; \x26uacute; \x26ucirc; \x26uuml; \x26yacute; \x26thorn; \x26yuml; \x26OElig; \x26oelig; \x26#372; \x26#374 \x26#373 \x26#375; \x26sbquo; \x26#8219; \x26bdquo; \x26hellip; \x26trade; \x26#9658; \x26bull; \x26rarr; \x26rArr; \x26hArr; \x26diams; \x26asymp;".split(" ");CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(j){var m=this,l=CKEDITOR.plugins.scayt;this.bindEvents(j);this.parseConfig(j);this.addRule(j);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(j);var i=j.lang.scayt,k=CKEDITOR.env;j.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:i.text_title,title:j.plugins.wsc?j.lang.wsc.title:i.text_title,modes:{wysiwyg:!(k.ie&&(8>k.version||k.quirks))},toolbar:"spellchecker,20",refresh:function(){var n=j.ui.instances.Scayt.getState();j.scayt&&(n=l.state.scayt[j.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);j.fire("scaytButtonState",n)},onRender:function(){var n=this;j.on("scaytButtonState",function(o){void 0!==typeof o.data&&n.setState(o.data)})},onMenu:function(){var n=j.scayt;j.getMenuItem("scaytToggle").label=j.lang.scayt[n&&l.state.scayt[j.name]?"btn_disable":"btn_enable"];n={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:n?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:n?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:n?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:n?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:j.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};j.config.scayt_uiTabs[0]||delete n.scaytOptions;j.config.scayt_uiTabs[1]||delete n.scaytLangs;j.config.scayt_uiTabs[2]||delete n.scaytDict;return n}});j.contextMenu&&j.addMenuItems&&(j.contextMenu.addListener(function(n,r){var q=j.scayt,p,o;q&&(o=q.getSelectionNode())&&(p=m.menuGenerator(j,o),q.showBanner("."+j.contextMenu._.definition.panel.className.split(" ").join(" .")));return p}),j.contextMenu._.onHide=CKEDITOR.tools.override(j.contextMenu._.onHide,function(n){return function(){var o=j.scayt;o&&o.hideBanner();return n.apply(this)}}))},addMenuItems:function(j){var m=this,l=CKEDITOR.plugins.scayt;j.addMenuGroup("scaytButton");for(var i=j.config.scayt_contextMenuItemsOrder.split("|"),k=0;k<i.length;k++){i[k]="scayt_"+i[k]}if((i=["grayt_description","grayt_suggest","grayt_control"].concat(i))&&i.length){for(k=0;k<i.length;k++){j.addMenuGroup(i[k],k-10)}}j.addCommand("scaytToggle",{exec:function(o){var n=o.scayt;l.state.scayt[o.name]=!l.state.scayt[o.name];!0===l.state.scayt[o.name]?n||l.createScayt(o):n&&l.destroy(o)}});j.addCommand("scaytAbout",{exec:function(n){n.scayt.tabToOpen="about";n.lockSelection();n.openDialog(m.dialogName)}});j.addCommand("scaytOptions",{exec:function(n){n.scayt.tabToOpen="options";n.lockSelection();n.openDialog(m.dialogName)}});j.addCommand("scaytLangs",{exec:function(n){n.scayt.tabToOpen="langs";n.lockSelection();n.openDialog(m.dialogName)}});j.addCommand("scaytDict",{exec:function(n){n.scayt.tabToOpen="dictionaries";n.lockSelection();n.openDialog(m.dialogName)}});i={scaytToggle:{label:j.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:j.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:j.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:j.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:j.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}};j.plugins.wsc&&(i.WSC={label:j.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var n=CKEDITOR.plugins.scayt,o=j.scayt,p=j.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?j.container.getText():j.document.getBody().getText();(p=p.replace(/\s/g,""))?(o&&n.state.scayt[j.name]&&o.setMarkupPaused&&o.setMarkupPaused(!0),j.lockSelection(),j.execCommand("checkspell")):alert("Nothing to check!")}});j.addMenuItems(i)},bindEvents:function(j){var o=CKEDITOR.plugins.scayt,n=j.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,i=function(){o.destroy(j)},m=function(){!o.state.scayt[j.name]||j.readOnly||j.scayt||o.createScayt(j)},l=function(){var p=j.editable();p.attachListener(p,"focus",function(q){CKEDITOR.plugins.scayt&&!j.scayt&&setTimeout(m,0);q=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[j.name]&&j.scayt;var t,r;if((n||q)&&j._.savedSelection){q=j._.savedSelection.getSelectedElement();q=!q&&j._.savedSelection.getRanges();for(var s=0;s<q.length;s++){r=q[s],"string"===typeof r.startContainer.$.nodeValue&&(t=r.startContainer.getText().length,(t<r.startOffset||t<r.endOffset)&&j.unlockSelection(!1))}}},this,null,-10)},k=function(){n?j.config.scayt_inlineModeImmediateMarkup?m():(j.on("blur",function(){setTimeout(i,0)}),j.on("focus",m),j.focusManager.hasFocus&&m()):m();l();var p=j.editable();p.attachListener(p,"mousedown",function(q){q=q.data.getTarget();var r=j.widgets&&j.widgets.getByElement(q);r&&(r.wrapper=q.getAscendant(function(s){return s.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};j.on("contentDom",k);j.on("beforeCommandExec",function(p){var t=j.scayt,s=null,r=!1,q=!0;p.data.name in o.options.disablingCommandExec&&"wysiwyg"==j.mode?t&&(o.destroy(j),j.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==p.data.name&&"italic"!==p.data.name&&"underline"!==p.data.name&&"strike"!==p.data.name&&"subscript"!==p.data.name&&"superscript"!==p.data.name&&"enter"!==p.data.name&&"cut"!==p.data.name&&"language"!==p.data.name||!t||("cut"===p.data.name&&(q=!1,r=!0),"language"===p.data.name&&(s=(s=j.plugins.language.getCurrentLangElement(j))&&s.$,r=!0),j.fire("reloadMarkupScayt",{removeOptions:{removeInside:q,forceBookmark:r,selectionNode:s},timeout:0}))});j.on("beforeSetMode",function(p){if("source"==p.data){if(p=j.scayt){o.destroy(j),j.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)}j.document&&j.document.getBody().removeAttribute("_jquid")}});j.on("afterCommandExec",function(p){"wysiwyg"!=j.mode||"undo"!=p.data.name&&"redo"!=p.data.name||setTimeout(function(){var q=j.scayt,r=q&&q.getScaytLangList();r&&r.ltr&&r.rtl&&q.fire("startSpellCheck, startGrammarCheck")},250)});j.on("readOnly",function(p){var q;p&&(q=j.scayt,!0===p.editor.readOnly?q&&q.fire("removeMarkupInDocument",{}):q?q.fire("startSpellCheck, startGrammarCheck"):"wysiwyg"==p.editor.mode&&!0===o.state.scayt[p.editor.name]&&(o.createScayt(j),p.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))});j.on("beforeDestroy",i);j.on("setData",function(){i();(j.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||j.plugins.divarea)&&k()},this,null,50);j.on("reloadMarkupScayt",function(p){var q=p.data&&p.data.removeOptions;setTimeout(function(){var r=j.scayt,s=r&&r.getScaytLangList();s&&s.ltr&&s.rtl&&(j.document.fire("keydown",new CKEDITOR.dom.event({keyCode:37})),r.removeMarkupInSelectionNode(q),r.fire("startSpellCheck, startGrammarCheck"))},p.data&&p.data.timeout||0)});j.on("insertElement",function(){j.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50);j.on("insertHtml",function(){j.fire("reloadMarkupScayt")},this,null,50);j.on("insertText",function(){j.fire("reloadMarkupScayt")},this,null,50);j.on("scaytDialogShown",function(p){p.data.selectPage(j.scayt.tabToOpen)})},parseConfig:function(j){var p=CKEDITOR.plugins.scayt;p.replaceOldOptionsNames(j.config);"boolean"!==typeof j.config.scayt_autoStartup&&(j.config.scayt_autoStartup=!1);p.state.scayt[j.name]=j.config.scayt_autoStartup;"boolean"!==typeof j.config.grayt_autoStartup&&(j.config.grayt_autoStartup=!1);"boolean"!==typeof j.config.scayt_inlineModeImmediateMarkup&&(j.config.scayt_inlineModeImmediateMarkup=!1);p.state.grayt[j.name]=j.config.grayt_autoStartup;j.config.scayt_contextCommands||(j.config.scayt_contextCommands="ignore|ignoreall|add");j.config.scayt_contextMenuItemsOrder||(j.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");j.config.scayt_sLang||(j.config.scayt_sLang="en_US");if(void 0===j.config.scayt_maxSuggestions||"number"!=typeof j.config.scayt_maxSuggestions||0>j.config.scayt_maxSuggestions){j.config.scayt_maxSuggestions=5}if(void 0===j.config.scayt_minWordLength||"number"!=typeof j.config.scayt_minWordLength||1>j.config.scayt_minWordLength){j.config.scayt_minWordLength=4}if(void 0===j.config.scayt_customDictionaryIds||"string"!==typeof j.config.scayt_customDictionaryIds){j.config.scayt_customDictionaryIds=""}if(void 0===j.config.scayt_userDictionaryName||"string"!==typeof j.config.scayt_userDictionaryName){j.config.scayt_userDictionaryName=null}if("string"===typeof j.config.scayt_uiTabs&&3===j.config.scayt_uiTabs.split(",").length){var o=[],i=[];j.config.scayt_uiTabs=j.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(j.config.scayt_uiTabs,function(q){1===Number(q)||0===Number(q)?(i.push(!0),o.push(Number(q))):i.push(!1)});null===CKEDITOR.tools.search(i,!1)?j.config.scayt_uiTabs=o:j.config.scayt_uiTabs=[1,1,1]}else{j.config.scayt_uiTabs=[1,1,1]}"string"!=typeof j.config.scayt_serviceProtocol&&(j.config.scayt_serviceProtocol=null);"string"!=typeof j.config.scayt_serviceHost&&(j.config.scayt_serviceHost=null);"string"!=typeof j.config.scayt_servicePort&&(j.config.scayt_servicePort=null);"string"!=typeof j.config.scayt_servicePath&&(j.config.scayt_servicePath=null);j.config.scayt_moreSuggestions||(j.config.scayt_moreSuggestions="on");"string"!==typeof j.config.scayt_customerId&&(j.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");"string"!==typeof j.config.scayt_srcUrl&&(p=document.location.protocol,p=-1!=p.search(/https?:/)?p:"http:",j.config.scayt_srcUrl=p+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=CKEDITOR.plugins.undo?CKEDITOR.config.scayt_handleUndoRedo:!1;"boolean"!==typeof j.config.scayt_multiLanguageMode&&(j.config.scayt_multiLanguageMode=!1);"object"!==typeof j.config.scayt_multiLanguageStyles&&(j.config.scayt_multiLanguageStyles={});j.config.scayt_ignoreAllCapsWords&&"boolean"!==typeof j.config.scayt_ignoreAllCapsWords&&(j.config.scayt_ignoreAllCapsWords=!1);j.config.scayt_ignoreDomainNames&&"boolean"!==typeof j.config.scayt_ignoreDomainNames&&(j.config.scayt_ignoreDomainNames=!1);j.config.scayt_ignoreWordsWithMixedCases&&"boolean"!==typeof j.config.scayt_ignoreWordsWithMixedCases&&(j.config.scayt_ignoreWordsWithMixedCases=!1);j.config.scayt_ignoreWordsWithNumbers&&"boolean"!==typeof j.config.scayt_ignoreWordsWithNumbers&&(j.config.scayt_ignoreWordsWithNumbers=!1);if(j.config.scayt_disableOptionsStorage){var p=CKEDITOR.tools.isArray(j.config.scayt_disableOptionsStorage)?j.config.scayt_disableOptionsStorage:"string"===typeof j.config.scayt_disableOptionsStorage?[j.config.scayt_disableOptionsStorage]:void 0,n="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),m=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],l=CKEDITOR.tools.search,k=CKEDITOR.tools.indexOf;j.config.scayt_disableOptionsStorage=function(s){for(var r=[],t=0;t<s.length;t++){var u=s[t],q=!!l(s,"options");if(!l(n,u)||q&&l(m,function(v){if("lang"===v){return !1}})){return}l(m,u)&&m.splice(k(m,u),1);if("all"===u||q&&l(s,"lang")){return[]}"options"===u&&(m=["lang"])}return r=r.concat(m)}(p)}},addRule:function(j){var p=CKEDITOR.plugins.scayt,o=j.dataProcessor,i=o&&o.htmlFilter,n=j._.elementsPath&&j._.elementsPath.filters,o=o&&o.dataFilter,m=j.addRemoveFormatFilter,l=function(q){if(j.scayt&&(q.hasAttribute(p.options.data_attribute_name)||q.hasAttribute(p.options.problem_grammar_data_attribute))){return !1}},k=function(q){var r=!0;j.scayt&&(q.hasAttribute(p.options.data_attribute_name)||q.hasAttribute(p.options.problem_grammar_data_attribute))&&(r=!1);return r};n&&n.push(l);o&&o.addRules({elements:{span:function(r){var q=r.hasClass(p.options.misspelled_word_class)&&r.attributes[p.options.data_attribute_name],s=r.hasClass(p.options.problem_grammar_class)&&r.attributes[p.options.problem_grammar_data_attribute];p&&(q||s)&&delete r.name;return r}}});i&&i.addRules({elements:{span:function(r){var q=r.hasClass(p.options.misspelled_word_class)&&r.attributes[p.options.data_attribute_name],s=r.hasClass(p.options.problem_grammar_class)&&r.attributes[p.options.problem_grammar_data_attribute];p&&(q||s)&&delete r.name;return r}}});m&&m.call(j,k)},scaytMenuDefinition:function(i){var j=this;i=i.scayt;return{scayt:{scayt_ignore:{label:i.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(k){k.scayt.ignoreWord()}},scayt_ignoreall:{label:i.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(k){k.scayt.ignoreAllWords()}},scayt_add:{label:i.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(l){var k=l.scayt;setTimeout(function(){k.addWordToUserDictionary()},10)}},scayt_option:{label:i.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(k){k.scayt.tabToOpen="options";k.lockSelection();k.openDialog(j.dialogName)},verification:function(k){return 1==k.config.scayt_uiTabs[0]?!0:!1}},scayt_language:{label:i.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(k){k.scayt.tabToOpen="langs";k.lockSelection();k.openDialog(j.dialogName)},verification:function(k){return 1==k.config.scayt_uiTabs[1]?!0:!1}},scayt_dictionary:{label:i.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(k){k.scayt.tabToOpen="dictionaries";k.lockSelection();k.openDialog(j.dialogName)},verification:function(k){return 1==k.config.scayt_uiTabs[2]?!0:!1}},scayt_about:{label:i.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(k){k.scayt.tabToOpen="about";k.lockSelection();k.openDialog(j.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(k){}},grayt_ignore:{label:i.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(k){k.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(r,p,o){var q={},n={},m=o?"word":"phrase",l=o?"startGrammarCheck":"startSpellCheck",j=r.scayt;if(0<p.length&&"no_any_suggestions"!==p[0]){if(o){for(o=0;o<p.length;o++){var i="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[o].replace(" ","_");r.addCommand(i,this.createCommand(CKEDITOR.plugins.scayt.suggestions[o],m,l));o<r.config.scayt_maxSuggestions?(r.addMenuItem(i,{label:p[o],command:i,group:"scayt_suggest",order:o+1}),q[i]=CKEDITOR.TRISTATE_OFF):(r.addMenuItem(i,{label:p[o],command:i,group:"scayt_moresuggest",order:o+1}),n[i]=CKEDITOR.TRISTATE_OFF,"on"===r.config.scayt_moreSuggestions&&(r.addMenuItem("scayt_moresuggest",{label:j.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return n}}),q.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}}else{for(o=0;o<p.length;o++){i="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[o].replace(" ","_"),r.addCommand(i,this.createCommand(CKEDITOR.plugins.scayt.suggestions[o],m,l)),r.addMenuItem(i,{label:p[o],command:i,group:"grayt_suggest",order:o+1}),q[i]=CKEDITOR.TRISTATE_OFF}}}else{q.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,r.addCommand("no_scayt_suggest",{exec:function(){}}),r.addMenuItem("no_scayt_suggest",{label:j.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0})}return q},menuGenerator:function(t,r){var q=t.scayt,s=this.scaytMenuDefinition(t),p={},o=t.config.scayt_contextCommands.split("|"),n=r.getAttribute(q.getLangAttribute())||q.getLang(),m,j;m=q.isScaytNode(r);j=q.isGraytNode(r);m?(s=s.scayt,p=r.getAttribute(q.getScaytNodeAttributeName()),q.fire("getSuggestionsList",{lang:n,word:p}),p=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,m)):j&&(s=s.grayt,p=r.getAttribute(q.getGraytNodeAttributeName()),j=q.getProblemDescriptionText(p,n),s.grayt_problemdescription&&j&&(s.grayt_problemdescription.label=j),q.fire("getGrammarSuggestionsList",{lang:n,phrase:p}),p=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,m));if(m&&"off"==t.config.scayt_contextCommands){return p}for(var i in s){m&&-1==CKEDITOR.tools.indexOf(o,i.replace("scayt_",""))&&"all"!=t.config.scayt_contextCommands||(p[i]="undefined"!=typeof s[i].state?s[i].state:CKEDITOR.TRISTATE_OFF,"function"!==typeof s[i].verification||s[i].verification(t)||delete p[i],t.addCommand(i,{exec:s[i].exec}),t.addMenuItem(i,{label:t.lang.scayt[s[i].label]||s[i].label,command:i,group:s[i].group,order:s[i].order}))}return p},createCommand:function(i,k,j){return{exec:function(l){l=l.scayt;var m={};m[k]=i;l.replaceSelectionNode(m);"startGrammarCheck"===j&&l.removeMarkupInSelectionNode({grammarOnly:!0});l.fire(j)}}}});CKEDITOR.plugins.scayt={state:{scayt:{},grayt:{}},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(i){for(var j in i){j in this.backCompatibilityMap&&(i[this.backCompatibilityMap[j]]=i[j],delete i[j])}},createScayt:function(i){var k=this,j=CKEDITOR.plugins.scayt;this.loadScaytLibrary(i,function(l){var m=l.window&&l.window.getFrame()||l.editable();m?(m={lang:l.config.scayt_sLang,container:m.$,customDictionary:l.config.scayt_customDictionaryIds,userDictionaryName:l.config.scayt_userDictionaryName,localization:l.langCode,customer_id:l.config.scayt_customerId,debug:l.config.scayt_debug,data_attribute_name:k.options.data_attribute_name,misspelled_word_class:k.options.misspelled_word_class,problem_grammar_data_attribute:k.options.problem_grammar_data_attribute,problem_grammar_class:k.options.problem_grammar_class,"options-to-restore":l.config.scayt_disableOptionsStorage,focused:l.editable().hasFocus,ignoreElementsRegex:l.config.scayt_elementsToIgnore,minWordLength:l.config.scayt_minWordLength,multiLanguageMode:l.config.scayt_multiLanguageMode,multiLanguageStyles:l.config.scayt_multiLanguageStyles,graytAutoStartup:j.state.grayt[l.name]},l.config.scayt_serviceProtocol&&(m.service_protocol=l.config.scayt_serviceProtocol),l.config.scayt_serviceHost&&(m.service_host=l.config.scayt_serviceHost),l.config.scayt_servicePort&&(m.service_port=l.config.scayt_servicePort),l.config.scayt_servicePath&&(m.service_path=l.config.scayt_servicePath),"boolean"===typeof l.config.scayt_ignoreAllCapsWords&&(m["ignore-all-caps-words"]=l.config.scayt_ignoreAllCapsWords),"boolean"===typeof l.config.scayt_ignoreDomainNames&&(m["ignore-domain-names"]=l.config.scayt_ignoreDomainNames),"boolean"===typeof l.config.scayt_ignoreWordsWithMixedCases&&(m["ignore-words-with-mixed-cases"]=l.config.scayt_ignoreWordsWithMixedCases),"boolean"===typeof l.config.scayt_ignoreWordsWithNumbers&&(m["ignore-words-with-numbers"]=l.config.scayt_ignoreWordsWithNumbers),m=new SCAYT.CKSCAYT(m,function(){},function(){}),m.subscribe("suggestionListSend",function(o){for(var n={},p=[],q=0;q<o.suggestionList.length;q++){n["word_"+o.suggestionList[q]]||(n["word_"+o.suggestionList[q]]=o.suggestionList[q],p.push(o.suggestionList[q]))}CKEDITOR.plugins.scayt.suggestions=p}),m.subscribe("selectionIsChanged",function(n){l.getSelection().isLocked&&l.lockSelection()}),m.subscribe("graytStateChanged",function(n){j.state.grayt[l.name]=n.state}),l.scayt=m,l.fire("scaytButtonState",l.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)):j.state.scayt[l.name]=!1})},destroy:function(i){i.scayt&&i.scayt.destroy();delete i.scayt;i.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(j,m){var l=this,i,k;this.loadingHelper[j.name]||("undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[j.name]=m,this.loadingHelper.loadOrder.push(j.name),i=new Date,i=i.getTime(),k=j.config.scayt_srcUrl,k+=0<=k.indexOf("?")?"":"?"+i,this.loadingHelper.ckscaytLoading||(CKEDITOR.scriptLoader.load(k,function(o){if(o){CKEDITOR.fireOnce("scaytReady");for(var n=0;n<l.loadingHelper.loadOrder.length;n++){o=l.loadingHelper.loadOrder[n];if("function"===typeof l.loadingHelper[o]){l.loadingHelper[o](CKEDITOR.instances[o])}delete l.loadingHelper[o]}l.loadingHelper.loadOrder=[]}}),this.loadingHelper.ckscaytLoading=!0)):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),j.scayt||"function"===typeof m&&m(j)))}};CKEDITOR.on("dialogDefinition",function(i){var j=i.data.name;i=i.data.definition.dialog;if("scaytDialog"===j){i.on("cancel",function(k){return !1},this,null,-1)}if("checkspell"===j){i.on("cancel",function(l){l=l.sender&&l.sender.getParentEditor();var k=CKEDITOR.plugins.scayt,m=l.scayt;m&&k.state.scayt[l.name]&&m.setMarkupPaused&&m.setMarkupPaused(!1);l.unlockSelection()},this,null,-2)}if("link"===j){i.on("ok",function(l){var k=l.sender&&l.sender.getParentEditor();k&&setTimeout(function(){k.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})}});CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var i=CKEDITOR.editor.prototype;i.checkDirty=CKEDITOR.tools.override(i.checkDirty,function(k){return function(){var l=null,n=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(l="ready"==this.status){var m=n.removeMarkupFromString(this.getSnapshot()),n=n.removeMarkupFromString(this._.previousValue),l=l&&n!==m}}else{l=k.call(this)}return l}});i.resetDirty=CKEDITOR.tools.override(i.resetDirty,function(k){return function(){var l=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=l.removeMarkupFromString(this.getSnapshot()):k.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var i=CKEDITOR.plugins.undo.Image.prototype,j="function"==typeof i.equalsContent?"equalsContent":"equals";i[j]=CKEDITOR.tools.override(i[j],function(k){return function(l){var p=l.editor.scayt,o=this.contents,n=l.contents,m=null;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[l.editor.name]&&l.editor.scayt&&(this.contents=p.removeMarkupFromString(o)||"",l.contents=p.removeMarkupFromString(n)||"");m=k.apply(this,arguments);this.contents=o;l.contents=n;return m}})}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(q){var j=q.config,o=q.lang.stylescombo,p={},n=[],i=[];q.on("stylesSet",function(k){if(k=k.data.styles){for(var l,m,s,r=0,t=k.length;r<t;r++){(l=k[r],q.blockless&&l.element in CKEDITOR.dtd.$block||(m=l.name,l=new CKEDITOR.style(l),q.filter.customConfig&&!q.filter.check(l)))||(l._name=m,l._.enterMode=j.enterMode,l._.type=s=l.assignedTo||l.type,l._.weight=r+1000*(s==CKEDITOR.STYLE_OBJECT?1:s==CKEDITOR.STYLE_BLOCK?2:3),p[m]=l,n.push(l),i.push(l))}n.sort(function(v,u){return v._.weight-u._.weight})}});q.ui.addRichCombo("Styles",{label:o.label,title:o.panelTitle,toolbar:"styles,10",allowedContent:i,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(j.contentsCss),multiSelect:!0,attributes:{"aria-label":o.panelTitle}},init:function(){var k,l,t,s,r,m;r=0;for(m=n.length;r<m;r++){k=n[r],l=k._name,s=k._.type,s!=t&&(this.startGroup(o["panelTitle"+String(s)]),t=s),this.add(l,k.type==CKEDITOR.STYLE_OBJECT?l:k.buildPreview(),l)}this.commit()},onClick:function(k){q.focus();q.fire("saveSnapshot");k=p[k];var l=q.elementPath();q[k.checkActive(l,q)?"removeStyle":"applyStyle"](k);q.fire("saveSnapshot")},onRender:function(){q.on("selectionChange",function(k){var l=this.getValue();k=k.data.path.elements;for(var m=0,t=k.length,s;m<t;m++){s=k[m];for(var r in p){if(p[r].checkElementRemovable(s,!0,q)){r!=l&&this.setValue(r);return}}}this.setValue("")},this)},onOpen:function(){var k=q.getSelection().getSelectedElement(),k=q.elementPath(k),l=[0,0,0,0];this.showAll();this.unmarkAll();for(var m in p){var s=p[m],r=s._.type;s.checkApplicable(k,q,q.activeFilter)?l[r]++:this.hideItem(m);s.checkActive(k,q)&&this.mark(m)}l[CKEDITOR.STYLE_BLOCK]||this.hideGroup(o["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);l[CKEDITOR.STYLE_INLINE]||this.hideGroup(o["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);l[CKEDITOR.STYLE_OBJECT]||this.hideGroup(o["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var k=q.elementPath();if(k){for(var l in p){if(p[l].checkApplicable(k,q,q.activeFilter)){return}}this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){p={};n=[]}})}})})();(function(){function i(k){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var s=t.getSelection(),n;if(n=(new CKEDITOR.dom.elementPath(s.getCommonAncestor(),s.root)).contains({td:1,th:1},1)){var s=t.createRange(),o=CKEDITOR.tools.tryThese(function(){var u=n.getParent().$.cells[n.$.cellIndex+(k?-1:1)];u.parentNode.parentNode;return u},function(){var u=n.getParent(),u=u.getAscendant("table").$.rows[u.$.rowIndex+(k?-1:1)];return u.cells[k?u.cells.length-1:0]});if(o||k){if(o){o=new CKEDITOR.dom.element(o),s.moveToElementEditStart(o),s.checkStartOfBlock()&&s.checkEndOfBlock()||s.selectNodeContents(o)}else{return !0}}else{for(var r=n.getAscendant("table").$,o=n.getParent().$.cells,r=new CKEDITOR.dom.element(r.insertRow(-1),t.document),q=0,p=o.length;q<p;q++){r.append((new CKEDITOR.dom.element(o[q],t.document)).clone(!1,!1)).appendBogus()}s.moveToElementEditStart(r)}s.select(!0);return !0}}return !1}}}var j={editorFocus:!1,modes:{wysiwyg:1,source:1}},l={exec:function(k){k.container.focusNext(!0,k.tabIndex)}},m={exec:function(k){k.container.focusPrevious(!0,k.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(p){for(var o=!1!==p.config.enableTabKeyTools,n=p.config.tabSpaces||0,k="";n--;){k+="Â "}if(k){p.on("key",function(q){9==q.data.keyCode&&(p.insertText(k),q.cancel())})}if(o){p.on("key",function(q){(9==q.data.keyCode&&p.execCommand("selectNextCell")||q.data.keyCode==CKEDITOR.SHIFT+9&&p.execCommand("selectPreviousCell"))&&q.cancel()})}p.addCommand("blur",CKEDITOR.tools.extend(l,j));p.addCommand("blurBack",CKEDITOR.tools.extend(m,j));p.addCommand("selectNextCell",i());p.addCommand("selectPreviousCell",i(!0))}})})();CKEDITOR.dom.element.prototype.focusNext=function(i,j){var l=void 0===j?this.getTabIndex():j,m,p,o,n,q,r;if(0>=l){for(q=this.getNextSourceNode(i,CKEDITOR.NODE_ELEMENT);q;){if(q.isVisible()&&0===q.getTabIndex()){o=q;break}q=q.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}}else{for(q=this.getDocument().getBody().getFirst();q=q.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!m){if(!p&&q.equals(this)){if(p=!0,i){if(!(q=q.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT))){break}m=1}}else{p&&!this.contains(q)&&(m=1)}}if(q.isVisible()&&!(0>(r=q.getTabIndex()))){if(m&&r==l){o=q;break}r>l&&(!o||!n||r<n)?(o=q,n=r):o||0!==r||(o=q,n=r)}}}o&&o.focus()};CKEDITOR.dom.element.prototype.focusPrevious=function(i,j){for(var l=void 0===j?this.getTabIndex():j,m,p,o,n=0,q,r=this.getDocument().getBody().getLast();r=r.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!m){if(!p&&r.equals(this)){if(p=!0,i){if(!(r=r.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT))){break}m=1}}else{p&&!this.contains(r)&&(m=1)}}if(r.isVisible()&&!(0>(q=r.getTabIndex()))){if(0>=l){if(m&&0===q){o=r;break}q>n&&(o=r,n=q)}else{if(m&&q==l){o=r;break}q<l&&(!o||q>n)&&(o=r,n=q)}}}o&&o.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(i){function j(l){return CKEDITOR.tools.extend(l||{},{contextSensitive:1,refresh:function(m,n){this.setState(n.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!i.blockless){var k=i.lang.table;i.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(i.plugins.dialogadvtab?"table"+i.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));i.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",j()));i.addCommand("tableDelete",j({exec:function(m){var l=m.elementPath().contains("table",1);if(l){var n=l.getParent(),o=m.editable();1!=n.getChildCount()||n.is("td","th")||n.equals(o)||(l=n);m=m.createRange();m.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START);l.remove();m.select()}}}));i.ui.addButton&&i.ui.addButton("Table",{label:k.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");i.addMenuItems&&i.addMenuItems({table:{label:k.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:k.deleteTable,command:"tableDelete",group:"table",order:1}});i.on("doubleclick",function(l){l.data.element.is("table")&&(l.data.dialog="tableProperties")});i.contextMenu&&i.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function H(u){function v(x){0<m.length||x.type!=CKEDITOR.NODE_ELEMENT||!i.test(x.getName())||x.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(w,x,"selected_cell",!0),m.push(x))}u=u.getRanges();for(var m=[],w={},p=0;p<u.length;p++){var t=u[p];if(t.collapsed){t=t.getCommonAncestor(),(t=t.getAscendant("td",!0)||t.getAscendant("th",!0))&&m.push(t)}else{var t=new CKEDITOR.dom.walker(t),q;for(t.guard=v;q=t.next();){q.type==CKEDITOR.NODE_ELEMENT&&q.is(CKEDITOR.dtd.table)||(q=q.getAscendant("td",!0)||q.getAscendant("th",!0))&&!q.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(w,q,"selected_cell",!0),m.push(q))}}}CKEDITOR.dom.element.clearAllMarkers(w);return m}function l(u,v){for(var x=H(u),w=x[0],y=w.getAscendant("table"),w=w.getDocument(),t=x[0].getParent(),q=t.$.rowIndex,x=x[x.length-1],p=x.getParent().$.rowIndex+x.$.rowSpan-1,x=new CKEDITOR.dom.element(y.$.rows[p]),q=v?q:p,t=v?t:x,x=CKEDITOR.tools.buildTableMap(y),y=x[q],q=v?x[q-1]:x[q+1],x=x[0].length,w=w.createElement("tr"),p=0;y[p]&&p<x;p++){var m;1<y[p].rowSpan&&q&&y[p]==q[p]?(m=y[p],m.rowSpan+=1):(m=(new CKEDITOR.dom.element(y[p])).clone(),m.removeAttribute("rowSpan"),m.appendBogus(),w.append(m),m=m.$);p+=m.colSpan-1}v?w.insertBefore(t):w.insertAfter(t)}function G(w){if(w instanceof CKEDITOR.dom.selection){var x=H(w),z=x[0].getAscendant("table"),y=CKEDITOR.tools.buildTableMap(z);w=x[0].getParent().$.rowIndex;for(var x=x[x.length-1],A=x.getParent().$.rowIndex+x.$.rowSpan-1,x=[],v=w;v<=A;v++){for(var u=y[v],t=new CKEDITOR.dom.element(z.$.rows[v]),q=0;q<u.length;q++){var p=new CKEDITOR.dom.element(u[q]),m=p.getParent().$.rowIndex;1==p.$.rowSpan?p.remove():(--p.$.rowSpan,m==v&&(m=y[v+1],m[q-1]?p.insertAfter(new CKEDITOR.dom.element(m[q-1])):(new CKEDITOR.dom.element(z.$.rows[v+1])).append(p,1)));q+=p.$.colSpan-1}x.push(t)}y=z.$.rows;z=new CKEDITOR.dom.element(y[A+1]||(0<w?y[w-1]:null)||z.$.parentNode);for(v=x.length;0<=v;v--){G(x[v])}return z}w instanceof CKEDITOR.dom.element&&(z=w.getAscendant("table"),1==z.$.rows.length?z.remove():w.remove());return null}function F(v,w){for(var y=w?Infinity:0,x=0;x<v.length;x++){var z;z=v[x];for(var u=w,t=z.getParent().$.cells,q=0,p=0;p<t.length;p++){var m=t[p],q=q+(u?1:m.colSpan);if(m==z.$){break}}z=q-1;if(w?z<y:z>y){y=z}}return y}function o(v,w){for(var m=H(v),x=m[0].getAscendant("table"),p=F(m,1),m=F(m),p=w?p:m,u=CKEDITOR.tools.buildTableMap(x),x=[],m=[],t=u.length,q=0;q<t;q++){x.push(u[q][p]),m.push(w?u[q][p-1]:u[q][p+1])}for(q=0;q<t;q++){x[q]&&(1<x[q].colSpan&&m[q]==x[q]?(p=x[q],p.colSpan+=1):(p=(new CKEDITOR.dom.element(x[q])).clone(),p.removeAttribute("colSpan"),p.appendBogus(),p[w?"insertBefore":"insertAfter"].call(p,new CKEDITOR.dom.element(x[q])),p=p.$),q+=p.rowSpan-1)}}function s(p,q){var m=p.getStartElement();if(m=m.getAscendant("td",1)||m.getAscendant("th",1)){var t=m.clone();t.appendBogus();q?t.insertBefore(m):t.insertAfter(m)}}function D(u){if(u instanceof CKEDITOR.dom.selection){u=H(u);var v=u[0]&&u[0].getAscendant("table"),m;p:{var w=0;m=u.length-1;for(var p={},t,q;t=u[w++];){CKEDITOR.dom.element.setMarker(p,t,"delete_cell",!0)}for(w=0;t=u[w++];){if((q=t.getPrevious())&&!q.getCustomData("delete_cell")||(q=t.getNext())&&!q.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(p);m=q;break p}}CKEDITOR.dom.element.clearAllMarkers(p);q=u[0].getParent();(q=q.getPrevious())?m=q.getLast():(q=u[m].getParent(),m=(q=q.getNext())?q.getChild(0):null)}for(q=u.length-1;0<=q;q--){D(u[q])}m?j(m,!0):v&&v.remove()}else{u instanceof CKEDITOR.dom.element&&(v=u.getParent(),1==v.getChildCount()?v.remove():u.remove())}}function j(p,q){var m=p.getDocument(),t=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(t.focus(),m.focus());m=new CKEDITOR.dom.range(m);m["moveToElementEdit"+(q?"End":"Start")](p)||(m.selectNodeContents(p),m.collapse(q?!1:!0));m.select(!0)}function r(p,q,m){p=p[q];if("undefined"==typeof m){return p}for(q=0;p&&q<p.length;q++){if(m.is&&p[q]==m.$){return q}if(q==m){return new CKEDITOR.dom.element(p[q])}}return m.is?-1:null}function E(V,W,Y){var X=H(V),Z;if((W?1!=X.length:2>X.length)||(Z=V.getCommonAncestor())&&Z.type==CKEDITOR.NODE_ELEMENT&&Z.is("table")){return !1}var U;V=X[0];Z=V.getAscendant("table");var T=CKEDITOR.tools.buildTableMap(Z),S=T.length,R=T[0].length,Q=V.getParent().$.rowIndex,O=r(T,Q,V);if(W){var K;try{var L=parseInt(V.getAttribute("rowspan"),10)||1;U=parseInt(V.getAttribute("colspan"),10)||1;K=T["up"==W?Q-L:"down"==W?Q+L:Q]["left"==W?O-U:"right"==W?O+U:O]}catch(J){return !1}if(!K||V.$==K){return !1}X["up"==W||"left"==W?"unshift":"push"](new CKEDITOR.dom.element(K))}W=V.getDocument();var N=Q,L=K=0,I=!Y&&new CKEDITOR.dom.documentFragment(W),B=0;for(W=0;W<X.length;W++){U=X[W];var P=U.getParent(),z=U.getFirst(),C=U.$.colSpan,t=U.$.rowSpan,P=P.$.rowIndex,M=r(T,P,U),B=B+C*t,L=Math.max(L,M-O+C);K=Math.max(K,P-Q+t);Y||(C=U,(t=C.getBogus())&&t.remove(),C.trim(),U.getChildren().count()&&(P==N||!z||z.isBlockBoundary&&z.isBlockBoundary({br:1})||(N=I.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!N||N.is&&N.is("br")||I.append("br")),U.moveChildren(I)),W?U.remove():U.setHtml(""));N=P}if(Y){return K*L==B}I.moveChildren(V);V.appendBogus();L>=R?V.removeAttribute("rowSpan"):V.$.rowSpan=K;K>=S?V.removeAttribute("colSpan"):V.$.colSpan=L;Y=new CKEDITOR.dom.nodeList(Z.$.rows);X=Y.count();for(W=X-1;0<=W;W--){Z=Y.getItem(W),Z.$.cells.length||(Z.remove(),X++)}return V}function n(w,x){var z=H(w);if(1<z.length){return !1}if(x){return !0}var z=z[0],y=z.getParent(),A=y.getAscendant("table"),v=CKEDITOR.tools.buildTableMap(A),u=y.$.rowIndex,t=r(v,u,z),q=z.$.rowSpan,p;if(1<q){p=Math.ceil(q/2);for(var q=Math.floor(q/2),y=u+p,A=new CKEDITOR.dom.element(A.$.rows[y]),v=r(v,y),m,y=z.clone(),u=0;u<v.length;u++){if(m=v[u],m.parentNode==A.$&&u>t){y.insertBefore(new CKEDITOR.dom.element(m));break}else{m=null}}m||A.append(y)}else{for(q=p=1,A=y.clone(),A.insertAfter(y),A.append(y=z.clone()),m=r(v,u),t=0;t<m.length;t++){m[t].rowSpan++}}y.appendBogus();z.$.rowSpan=p;y.$.rowSpan=q;1==p&&z.removeAttribute("rowSpan");1==q&&y.removeAttribute("rowSpan");return y}function k(v,w){var y=H(v);if(1<y.length){return !1}if(w){return !0}var y=y[0],x=y.getParent(),z=x.getAscendant("table"),z=CKEDITOR.tools.buildTableMap(z),u=r(z,x.$.rowIndex,y),t=y.$.colSpan;if(1<t){x=Math.ceil(t/2),t=Math.floor(t/2)}else{for(var t=x=1,q=[],p=0;p<z.length;p++){var m=z[p];q.push(m[u]);1<m[u].rowSpan&&(p+=m[u].rowSpan-1)}for(z=0;z<q.length;z++){q[z].colSpan++}}z=y.clone();z.insertAfter(y);z.appendBogus();y.$.colSpan=x;z.$.colSpan=t;1==x&&y.removeAttribute("colSpan");1==t&&z.removeAttribute("colSpan");return z}var i=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(p){function q(u){return CKEDITOR.tools.extend(u||{},{contextSensitive:1,refresh:function(w,v){this.setState(v.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function m(v,u){var w=p.addCommand(v,u);p.addFeature(w)}var t=p.lang.table;m("cellProperties",new CKEDITOR.dialogCommand("cellProperties",q({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");m("rowDelete",q({requiredContent:"table",exec:function(u){u=u.getSelection();j(G(u))}}));m("rowInsertBefore",q({requiredContent:"table",exec:function(u){u=u.getSelection();l(u,!0)}}));m("rowInsertAfter",q({requiredContent:"table",exec:function(u){u=u.getSelection();l(u)}}));m("columnDelete",q({requiredContent:"table",exec:function(J){J=J.getSelection();J=H(J);var I=J[0],C=J[J.length-1];J=I.getAscendant("table");for(var B=CKEDITOR.tools.buildTableMap(J),A,z,x=[],v=0,w=B.length;v<w;v++){for(var y=0,K=B[v].length;y<K;y++){B[v][y]==I.$&&(A=y),B[v][y]==C.$&&(z=y)}}for(v=A;v<=z;v++){for(y=0;y<B.length;y++){C=B[y],I=new CKEDITOR.dom.element(J.$.rows[y]),C=new CKEDITOR.dom.element(C[v]),C.$&&(1==C.$.colSpan?C.remove():--C.$.colSpan,y+=C.$.rowSpan-1,I.$.cells.length||x.push(I))}}z=J.$.rows[0]&&J.$.rows[0].cells;A=new CKEDITOR.dom.element(z[A]||(A?z[A-1]:J.$.parentNode));x.length==w&&J.remove();A&&j(A,!0)}}));m("columnInsertBefore",q({requiredContent:"table",exec:function(u){u=u.getSelection();o(u,!0)}}));m("columnInsertAfter",q({requiredContent:"table",exec:function(u){u=u.getSelection();o(u)}}));m("cellDelete",q({requiredContent:"table",exec:function(u){u=u.getSelection();D(u)}}));m("cellMerge",q({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(u){j(E(u.getSelection()),!0)}}));m("cellMergeRight",q({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(u){j(E(u.getSelection(),"right"),!0)}}));m("cellMergeDown",q({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(u){j(E(u.getSelection(),"down"),!0)}}));m("cellVerticalSplit",q({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(u){j(k(u.getSelection()))}}));m("cellHorizontalSplit",q({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(u){j(n(u.getSelection()))}}));m("cellInsertBefore",q({requiredContent:"table",exec:function(u){u=u.getSelection();s(u,!0)}}));m("cellInsertAfter",q({requiredContent:"table",exec:function(u){u=u.getSelection();s(u)}}));p.addMenuItems&&p.addMenuItems({tablecell:{label:t.cell.menu,group:"tablecell",order:1,getItems:function(){var v=p.getSelection(),u=H(v);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:E(v,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:E(v,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:E(v,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:k(v,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:n(v,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<u.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:t.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:t.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:t.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:t.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:t.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:t.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:t.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:t.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:t.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:t.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:t.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:t.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:t.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:t.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:t.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:t.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:t.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});p.contextMenu&&p.contextMenu.addListener(function(v,u,w){return(v=w.contains({td:1,th:1},1))&&!v.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:H};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(B){B=B.$.rows;for(var j=-1,A=[],s=0;s<B.length;s++){j++;!A[j]&&(A[j]=[]);for(var k=-1,n=0;n<B[s].cells.length;n++){var o=B[s].cells[n];for(k++;A[j][k];){k++}for(var i=isNaN(o.colSpan)?1:o.colSpan,o=isNaN(o.rowSpan)?1:o.rowSpan,l=0;l<o;l++){A[j+l]||(A[j+l]=[]);for(var r=0;r<i;r++){A[j+l][k+r]=B[s].cells[n]}}k+=i-1}}return A};(function(){var o=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],r={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(n){function k(w){u.enabled&&!1!==w.data.command.canUndo&&u.save()}function v(){u.enabled=n.readOnly?!1:"wysiwyg"==n.mode;u.onChange()}var u=n.undoManager=new q(n),m=u.editingHandler=new j(u),t=n.addCommand("undo",{exec:function(){u.undo()&&(n.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),s=n.addCommand("redo",{exec:function(){u.redo()&&(n.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});n.setKeystroke([[o[0],"undo"],[o[1],"redo"],[o[2],"redo"]]);u.onChange=function(){t.setState(u.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);s.setState(u.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};n.on("beforeCommandExec",k);n.on("afterCommandExec",k);n.on("saveSnapshot",function(w){u.save(w.data&&w.data.contentOnly)});n.on("contentDom",m.attachListeners,m);n.on("instanceReady",function(){n.fire("saveSnapshot")});n.on("beforeModeUnload",function(){"wysiwyg"==n.mode&&u.save(!0)});n.on("mode",v);n.on("readOnly",v);n.ui.addButton&&(n.ui.addButton("Undo",{label:n.lang.undo.undo,command:"undo",toolbar:"undo,10"}),n.ui.addButton("Redo",{label:n.lang.undo.redo,command:"redo",toolbar:"undo,20"}));n.resetUndo=function(){u.reset();n.fire("saveSnapshot")};n.on("updateSnapshot",function(){u.currentImage&&u.update()});n.on("lockSnapshot",function(w){w=w.data;u.lock(w&&w.dontUpdate,w&&w.forceUpdate)});n.on("unlockSnapshot",u.unlock,u)}});CKEDITOR.plugins.undo={};var q=CKEDITOR.plugins.undo.UndoManager=function(k){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=k.config.undoStackSize||20;this.strokesLimit=25;this.editor=k;this.reset()};q.prototype={type:function(m,k){var s=q.getKeyGroup(m),n=this.strokesRecorded[s]+1;k=k||n>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());k?(n=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[s]=n;this.previousKeyGroup=s},keyGroupChanged:function(k){return q.getKeyGroup(k)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(m,k,t){var s=this.editor;if(this.locked||"ready"!=s.status||"wysiwyg"!=s.mode){return !1}var n=s.editable();if(!n||"ready"!=n.status){return !1}n=this.snapshots;k||(k=new p(s));if(!1===k.contents){return !1}if(this.currentImage){if(k.equalsContent(this.currentImage)){if(m||k.equalsSelection(this.currentImage)){return !1}}else{!1!==t&&s.fire("change")}}n.splice(this.index+1,n.length-this.index-1);n.length==this.limit&&n.shift();this.index=n.push(k)-1;this.currentImage=k;!1!==t&&this.refreshState();return !0},restoreImage:function(m){var k=this.editor,n;m.bookmarks&&(k.focus(),n=k.getSelection());this.locked={level:999};this.editor.loadSnapshot(m.contents);m.bookmarks?n.selectBookmarks(m.bookmarks):CKEDITOR.env.ie&&(n=this.editor.document.getBody().$.createTextRange(),n.collapse(!0),n.select());this.locked=null;this.index=m.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();k.fire("change")},getNextImage:function(m){var k=this.snapshots,s=this.currentImage,n;if(s){if(m){for(n=this.index-1;0<=n;n--){if(m=k[n],!s.equalsContent(m)){return m.index=n,m}}}else{for(n=this.index+1;n<k.length;n++){if(m=k[n],!s.equalsContent(m)){return m.index=n,m}}}}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var k=this.getNextImage(!0);if(k){return this.restoreImage(k),!0}}return !1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var k=this.getNextImage(!1);if(k){return this.restoreImage(k),!0}}return !1},update:function(m){if(!this.locked){m||(m=new p(this.editor));for(var k=this.index,n=this.snapshots;0<k&&this.currentImage.equalsContent(n[k-1]);){--k}n.splice(k,this.index-k+1,m);this.index=k;this.currentImage=m}},updateSelection:function(m){if(!this.snapshots.length){return !1}var k=this.snapshots,n=k[k.length-1];return n.equalsContent(m)&&!n.equalsSelection(m)?(this.currentImage=k[k.length-1]=m,!0):!1},lock:function(m,k){if(this.locked){this.locked.level++}else{if(m){this.locked={level:1}}else{var s=null;if(k){s=!0}else{var n=new p(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(n)&&(s=n)}this.locked={update:s,level:1}}}},unlock:function(){if(this.locked&&!--this.locked.level){var m=this.locked.update;this.locked=null;if(!0===m){this.update()}else{if(m){var k=new p(this.editor,!0);m.equalsContent(k)||this.update()}}}}};q.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};q.keyGroups={PRINTABLE:0,FUNCTIONAL:1};q.isNavigationKey=function(k){return !!q.navigationKeyCodes[k]};q.getKeyGroup=function(m){var k=q.keyGroups;return r[m]?k.FUNCTIONAL:k.PRINTABLE};q.getOppositeKeyGroup=function(m){var k=q.keyGroups;return m==k.FUNCTIONAL?k.PRINTABLE:k.FUNCTIONAL};q.ieFunctionalKeysBug=function(k){return CKEDITOR.env.ie&&q.getKeyGroup(k)==q.keyGroups.FUNCTIONAL};var p=CKEDITOR.plugins.undo.Image=function(m,k){this.editor=m;m.fire("beforeUndoImage");var n=m.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=n;k||(this.bookmarks=(n=n&&m.getSelection())&&n.createBookmarks2(!0));m.fire("afterUndoImage")},l=/\b(?:href|src|name)="[^"]*?"/gi;p.prototype={equalsContent:function(m){var k=this.contents;m=m.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(k=k.replace(l,""),m=m.replace(l,""));return k!=m?!1:!0},equalsSelection:function(m){var k=this.bookmarks;m=m.bookmarks;if(k||m){if(!k||!m||k.length!=m.length){return !1}for(var t=0;t<k.length;t++){var s=k[t],n=m[t];if(s.startOffset!=n.startOffset||s.endOffset!=n.endOffset||!CKEDITOR.tools.arrayCompare(s.start,n.start)||!CKEDITOR.tools.arrayCompare(s.end,n.end)){return !1}}}return !0}};var j=CKEDITOR.plugins.undo.NativeEditingHandler=function(k){this.undoManager=k;this.ignoreInputEvent=!1;this.keyEventsStack=new i;this.lastKeydownImage=null};j.prototype={onKeydown:function(m){var k=m.data.getKey();if(229!==k){if(-1<CKEDITOR.tools.indexOf(o,m.data.getKeystroke())){m.data.preventDefault()}else{if(this.keyEventsStack.cleanUp(m),m=this.undoManager,this.keyEventsStack.getLast(k)||this.keyEventsStack.push(k),this.lastKeydownImage=new p(m.editor),q.isNavigationKey(k)||this.undoManager.keyGroupChanged(k)){if(m.strokesRecorded[0]||m.strokesRecorded[1]){m.save(!1,this.lastKeydownImage,!1),m.resetType()}}}}},onInput:function(){if(this.ignoreInputEvent){this.ignoreInputEvent=!1}else{var k=this.keyEventsStack.getLast();k||(k=this.keyEventsStack.push(0));this.keyEventsStack.increment(k.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(k.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(m){var k=this.undoManager;m=m.data.getKey();var n=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(m);if(!(q.ieFunctionalKeysBug(m)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new p(k.editor,!0)))){if(0<n){k.type(m)}else{if(q.isNavigationKey(m)){this.onNavigationKey(!0)}}}},onNavigationKey:function(m){var k=this.undoManager;!m&&k.save(!0,null,!1)||k.updateSelection(new p(k.editor));k.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var m=this.undoManager.editor,k=m.editable(),n=this;k.attachListener(k,"keydown",function(s){n.onKeydown(s);if(q.ieFunctionalKeysBug(s.data.getKey())){n.onInput()}},null,null,999);k.attachListener(k,CKEDITOR.env.ie?"keypress":"input",n.onInput,n,null,999);k.attachListener(k,"keyup",n.onKeyup,n,null,999);k.attachListener(k,"paste",n.ignoreInputEventListener,n,null,999);k.attachListener(k,"drop",n.ignoreInputEventListener,n,null,999);k.attachListener(k.isInline()?k:m.document.getDocumentElement(),"click",function(){n.onNavigationKey()},null,null,999);k.attachListener(this.undoManager.editor,"blur",function(){n.keyEventsStack.remove(9)},null,null,999)}};var i=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};i.prototype={push:function(k){k=this.stack.push({keyCode:k,inputs:0});return this.stack[k-1]},getLastIndex:function(m){if("number"!=typeof m){return this.stack.length-1}for(var k=this.stack.length;k--;){if(this.stack[k].keyCode==m){return k}}return -1},getLast:function(k){k=this.getLastIndex(k);return -1!=k?this.stack[k]:null},increment:function(k){this.getLast(k).inputs++},remove:function(k){k=this.getLastIndex(k);-1!=k&&this.stack.splice(k,1)},resetInputs:function(k){if("number"==typeof k){this.getLast(k).inputs=0}else{for(k=this.stack.length;k--;){this.stack[k].inputs=0}}},getTotalInputs:function(){for(var m=this.stack.length,k=0;m--;){k+=this.stack[m].inputs}return k},cleanUp:function(k){k=k.data.$;k.ctrlKey||k.metaKey||this.remove(17);k.shiftKey||this.remove(16);k.altKey||this.remove(18)}}})();CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(i){i.config.wsc_onFinish="function"===typeof i.config.wsc_onFinish?i.config.wsc_onFinish:function(){};i.config.wsc_onClose="function"===typeof i.config.wsc_onClose?i.config.wsc_onClose:function(){}},parseConfig:function(i){i.config.wsc_customerId=i.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";i.config.wsc_customDictionaryIds=i.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"";i.config.wsc_userDictionaryName=i.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";i.config.wsc_customLoaderScript=i.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=i.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-master-d769233";CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(j){var i=CKEDITOR.env;this.parseConfig(j);this.parseApi(j);j.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(i.ie&&(8>i.version||i.quirks))};"undefined"==typeof j.plugins.scayt&&j.ui.addButton&&j.ui.addButton("SpellChecker",{label:j.lang.wsc.toolbar,click:function(l){var k=l.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?l.container.getText():l.document.getBody().getText();(k=k.replace(/\s/g,""))?l.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});(function(){CKEDITOR.plugins.add("youtube",{lang:"en pt ja hu it fr tr ru de ar nl pl vi zh el he es nb nn fi et sk cs".split(" "),init:function(i){i.addCommand("youtube",new CKEDITOR.dialogCommand("youtube",{allowedContent:"div{*}; iframe{*}[!width,!height,!src,!frameborder,!allowfullscreen]; object param[*]"}));i.ui.addButton("Youtube",{label:i.lang.youtube.button,toolbar:"insert",command:"youtube",icon:this.path+"images/icon.png"});CKEDITOR.dialog.add("youtube",function(){var j;return{title:i.lang.youtube.title,minWidth:500,minHeight:200,contents:[{id:"youtubePlugin",expand:!0,elements:[{id:"txtEmbed",type:"textarea",label:i.lang.youtube.txtEmbed,autofocus:"autofocus",onChange:function(k){a(this,k)},onKeyUp:function(k){a(this,k)},validate:function(){if(this.isEnabled()){if(this.getValue()){if(0===this.getValue().length||-1===this.getValue().indexOf("//")){return alert(i.lang.youtube.invalidEmbed),!1}}else{return alert(i.lang.youtube.noCode),!1}}}},{type:"html",html:i.lang.youtube.or+"<hr>"},{type:"hbox",widths:["70%","15%","15%"],children:[{id:"txtUrl",type:"text",label:i.lang.youtube.txtUrl,onChange:function(k){c(this,k)},onKeyUp:function(k){c(this,k)},validate:function(){if(this.isEnabled()){if(this.getValue()){if(j=g(this.getValue()),0===this.getValue().length||!1===j){return alert(i.lang.youtube.invalidUrl),!1}}else{return alert(i.lang.youtube.noCode),!1}}}},{type:"text",id:"txtWidth",width:"60px",label:i.lang.youtube.txtWidth,"default":null!=i.config.youtube_width?i.config.youtube_width:"640",validate:function(){if(this.getValue()){if(0===(parseInt(this.getValue())||0)){return alert(i.lang.youtube.invalidWidth),!1}}else{return alert(i.lang.youtube.noWidth),!1}}},{type:"text",id:"txtHeight",width:"60px",label:i.lang.youtube.txtHeight,"default":null!=i.config.youtube_height?i.config.youtube_height:"360",validate:function(){if(this.getValue()){if(0===(parseInt(this.getValue())||0)){return alert(i.lang.youtube.invalidHeight),!1}}else{return alert(i.lang.youtube.noHeight),!1}}}]},{type:"hbox",widths:["100%"],children:[{id:"chkResponsive",type:"checkbox",label:i.lang.youtube.txtResponsive,"default":null!=i.config.youtube_responsive?i.config.youtube_responsive:!1}]},{type:"hbox",widths:["55%","45%"],children:[{id:"chkRelated",type:"checkbox","default":null!=i.config.youtube_related?i.config.youtube_related:!0,label:i.lang.youtube.chkRelated},{id:"chkOlderCode",type:"checkbox","default":null!=i.config.youtube_older?i.config.youtube_older:!1,label:i.lang.youtube.chkOlderCode}]},{type:"hbox",widths:["55%","45%"],children:[{id:"chkPrivacy",type:"checkbox",label:i.lang.youtube.chkPrivacy,"default":null!=i.config.youtube_privacy?i.config.youtube_privacy:!1},{id:"chkAutoplay",type:"checkbox","default":null!=i.config.youtube_autoplay?i.config.youtube_autoplay:!1,label:i.lang.youtube.chkAutoplay}]},{type:"hbox",widths:["55%","45%"],children:[{id:"txtStartAt",type:"text",label:i.lang.youtube.txtStartAt,validate:function(){if(this.getValue()&&!/^(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)$/i.test(this.getValue())){return alert(i.lang.youtube.invalidTime),!1}}},{id:"empty",type:"html",html:""}]}]}],onOk:function(){var l="",p="";if(this.getContentElement("youtubePlugin","txtEmbed").isEnabled()){l=this.getValueOf("youtubePlugin","txtEmbed")}else{var k="//",q=[],o,n=this.getValueOf("youtubePlugin","txtWidth"),m=this.getValueOf("youtubePlugin","txtHeight"),k=!0===this.getContentElement("youtubePlugin","chkPrivacy").getValue()?k+"www.youtube-nocookie.com/":k+"www.youtube.com/",k=k+("embed/"+j);!1===this.getContentElement("youtubePlugin","chkRelated").getValue()&&q.push("rel=0");!0===this.getContentElement("youtubePlugin","chkAutoplay").getValue()&&q.push("autoplay=1");if(o=this.getValueOf("youtubePlugin","txtStartAt")){o=b(o),q.push("start="+o)}0<q.length&&(k=k+"?"+q.join("&"));!0===this.getContentElement("youtubePlugin","chkResponsive").getValue()&&(l+='<div class="youtube-embed-wrapper" style="position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden;">',p='style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;"');!0===this.getContentElement("youtubePlugin","chkOlderCode").getValue()?(k=k.replace("embed/","v/"),k=k.replace(/&/g,"&amp;"),k=-1===k.indexOf("?")?k+"?":k+"&amp;",k+="hl="+(this.getParentEditor().config.language?this.getParentEditor().config.language:"en")+"&amp;version=3",l=l+('<object width="'+n+'" height="'+m+'" '+p+">")+('<param name="movie" value="'+k+'"></param>')+'<param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param>'+('<embed src="'+k+'" type="application/x-shockwave-flash" ')+('width="'+n+'" height="'+m+'" '+p+' allowscriptaccess="always" ')+'allowfullscreen="true"></embed></object>'):l=l+('<iframe width="'+n+'" height="'+m+'" src="'+k+'" '+p)+'frameborder="0" allowfullscreen></iframe>';!0===this.getContentElement("youtubePlugin","chkResponsive").getValue()&&(l+="</div>")}l=CKEDITOR.dom.element.createFromHtml(l);this.getParentEditor().insertElement(l)}}})}})})();function c(i){0<i.getValue().length?i.getDialog().getContentElement("youtubePlugin","txtEmbed").disable():i.getDialog().getContentElement("youtubePlugin","txtEmbed").enable()}function a(i){0<i.getValue().length?i.getDialog().getContentElement("youtubePlugin","txtUrl").disable():i.getDialog().getContentElement("youtubePlugin","txtUrl").enable()}function g(i){return i.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)?RegExp.$1:!1}function b(i){for(var i=i.split(":"),k=0,j=1;0<i.length;){k+=j*parseInt(i.pop(),10),j*=60}return k}(function(){function i(l,m){CKEDITOR.tools.extend(this,{editor:l,editable:l.editable(),doc:l.document,win:l.window},m,!0);this.inline=this.editable.isInline();this.inline||(this.frame=this.win.getFrame());this.target=this[this.inline?"editable":"doc"]}function x(l,m){CKEDITOR.tools.extend(this,m,{editor:l},!0)}function w(m,q){var l=m.editable();CKEDITOR.tools.extend(this,{editor:m,editable:l,inline:l.isInline(),doc:m.document,win:m.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},q,!0);this.hidden={};this.visible={};this.inline||(this.frame=this.win.getFrame());this.queryViewport();var r=CKEDITOR.tools.bind(this.queryViewport,this),p=CKEDITOR.tools.bind(this.hideVisible,this),n=CKEDITOR.tools.bind(this.removeAll,this);l.attachListener(this.winTop,"resize",r);l.attachListener(this.winTop,"scroll",r);l.attachListener(this.winTop,"resize",p);l.attachListener(this.win,"scroll",p);l.attachListener(this.inline?l:this.frame,"mouseout",function(u){var t=u.data.$.clientX;u=u.data.$.clientY;this.queryViewport();(t<=this.rect.left||t>=this.rect.right||u<=this.rect.top||u>=this.rect.bottom)&&this.hideVisible();(0>=t||t>=this.winTopPane.width||0>=u||u>=this.winTopPane.height)&&this.hideVisible()},this);l.attachListener(m,"resize",r);l.attachListener(m,"mode",n);m.on("destroy",n);this.lineTpl=(new CKEDITOR.template('\x3cdiv data-cke-lineutils-line\x3d"1" class\x3d"cke_reset_all" style\x3d"{lineStyle}"\x3e\x3cspan style\x3d"{tipLeftStyle}"\x3e\x26nbsp;\x3c/span\x3e\x3cspan style\x3d"{tipRightStyle}"\x3e\x26nbsp;\x3c/span\x3e\x3c/div\x3e')).output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},v,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},v,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function j(l){var m;if(m=l&&l.type==CKEDITOR.NODE_ELEMENT){m=!(s[l.getComputedStyle("float")]||s[l.getAttribute("align")])}return m&&!k[l.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils");CKEDITOR.LINEUTILS_BEFORE=1;CKEDITOR.LINEUTILS_AFTER=2;CKEDITOR.LINEUTILS_INSIDE=4;i.prototype={start:function(y){var r=this,u=this.editor,t=this.doc,q,n,p,m,l=CKEDITOR.tools.eventsBuffer(50,function(){u.readOnly||"wysiwyg"!=u.mode||(r.relations={},(n=t.$.elementFromPoint(p,m))&&n.nodeType&&(q=new CKEDITOR.dom.element(n),r.traverseSearch(q),isNaN(p+m)||r.pixelSearch(q,p,m),y&&y(r.relations,p,m)))});this.listener=this.editable.attachListener(this.target,"mousemove",function(z){p=z.data.$.clientX;m=z.data.$.clientY;l.input()});this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){l.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var l={};l[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START;l[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END;l[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START;return function(n){var m=this.editor.createRange();m.moveToPosition(this.relations[n.uid].element,l[n.type]);return m}}(),store:function(){function l(n,m,q){var p=n.getUniqueId();p in q?q[p].type|=m:q[p]={element:n,type:m}}return function(n,m){var p;m&CKEDITOR.LINEUTILS_AFTER&&j(p=n.getNext())&&p.isVisible()&&(l(p,CKEDITOR.LINEUTILS_BEFORE,this.relations),m^=CKEDITOR.LINEUTILS_AFTER);m&CKEDITOR.LINEUTILS_INSIDE&&j(p=n.getFirst())&&p.isVisible()&&(l(p,CKEDITOR.LINEUTILS_BEFORE,this.relations),m^=CKEDITOR.LINEUTILS_INSIDE);l(n,m,this.relations)}}(),traverseSearch:function(m){var n,l,p;do{if(p=m.$["data-cke-expando"],!(p&&p in this.relations)){if(m.equals(this.editable)){break}if(j(m)){for(n in this.lookups){(l=this.lookups[n](m))&&this.store(m,l)}}}}while((!m||m.type!=CKEDITOR.NODE_ELEMENT||"true"!=m.getAttribute("contenteditable"))&&(m=m.getParent()))},pixelSearch:function(){function l(n,y,u,r,t){for(var q=0,p;t(u);){u+=r;if(25==++q){break}if(p=this.doc.$.elementFromPoint(y,u)){if(p==n){q=0}else{if(m(n,p)&&(q=0,j(p=new CKEDITOR.dom.element(p)))){return p}}}}}var m=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(n,p){return n.contains(p)}:function(n,p){return !!(n.compareDocumentPosition(p)&16)};return function(n,t,r){var p=this.win.getViewPaneSize().height,q=l.call(this,n.$,t,r,-1,function(u){return 0<u});t=l.call(this,n.$,t,r,1,function(u){return u<p});if(q){for(this.traverseSearch(q);!q.getParent().equals(n);){q=q.getParent()}}if(t){for(this.traverseSearch(t);!t.getParent().equals(n);){t=t.getParent()}}for(;q||t;){q&&(q=q.getNext(j));if(!q||q.equals(t)){break}this.traverseSearch(q);t&&(t=t.getPrevious(j));if(!t||t.equals(q)){break}this.traverseSearch(t)}}}(),greedySearch:function(){this.relations={};for(var m=this.editable.getElementsByTag("*"),p=0,l,q,n;l=m.getItem(p++);){if(!l.equals(this.editable)&&l.type==CKEDITOR.NODE_ELEMENT&&(l.hasAttribute("contenteditable")||!l.isReadOnly())&&j(l)&&l.isVisible()){for(n in this.lookups){(q=this.lookups[n](l))&&this.store(l,q)}}}return this.relations}};x.prototype={locate:function(){function l(n,m){var p=n.element[m===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return p&&j(p)?(n.siblingRect=p.getClientRect(),m==CKEDITOR.LINEUTILS_BEFORE?(n.siblingRect.bottom+n.elementRect.top)/2:(n.elementRect.bottom+n.siblingRect.top)/2):m==CKEDITOR.LINEUTILS_BEFORE?n.elementRect.top:n.elementRect.bottom}return function(n){var m;this.locations={};for(var p in n){m=n[p],m.elementRect=m.element.getClientRect(),m.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(p,CKEDITOR.LINEUTILS_BEFORE,l(m,CKEDITOR.LINEUTILS_BEFORE)),m.type&CKEDITOR.LINEUTILS_AFTER&&this.store(p,CKEDITOR.LINEUTILS_AFTER,l(m,CKEDITOR.LINEUTILS_AFTER)),m.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(p,CKEDITOR.LINEUTILS_INSIDE,(m.elementRect.top+m.elementRect.bottom)/2)}return this.locations}}(),sort:function(){var m,n,l,p;return function(u,r){m=this.locations;n=[];for(var t in m){for(var q in m[t]){if(l=Math.abs(u-m[t][q]),n.length){for(p=0;p<n.length;p++){if(l<n[p].dist){n.splice(p,0,{uid:+t,type:q,dist:l});break}}p==n.length&&n.push({uid:+t,type:q,dist:l})}else{n.push({uid:+t,type:q,dist:l})}}}return"undefined"!=typeof r?n.slice(0,r):n}}(),store:function(m,n,l){this.locations[m]||(this.locations[m]={});this.locations[m][n]=l}};var v={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},o={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};w.prototype={removeAll:function(){for(var l in this.hidden){this.hidden[l].remove(),delete this.hidden[l]}for(l in this.visible){this.visible[l].remove(),delete this.visible[l]}},hideLine:function(l){var m=l.getUniqueId();l.hide();this.hidden[m]=l;delete this.visible[m]},showLine:function(l){var m=l.getUniqueId();l.show();this.visible[m]=l;delete this.hidden[m]},hideVisible:function(){for(var l in this.visible){this.hideLine(this.visible[l])}},placeLine:function(m,p){var l,q,n;if(l=this.getStyle(m.uid,m.type)){for(n in this.visible){if(this.visible[n].getCustomData("hash")!==this.hash){q=this.visible[n];break}}if(!q){for(n in this.hidden){if(this.hidden[n].getCustomData("hash")!==this.hash){this.showLine(q=this.hidden[n]);break}}}q||this.showLine(q=this.addLine());q.setCustomData("hash",this.hash);this.visible[q.getUniqueId()]=q;q.setStyles(l);p&&p(q)}},getStyle:function(m,q){var l=this.relations[m],r=this.locations[m][q],p={};p.width=l.siblingRect?Math.max(l.siblingRect.width,l.elementRect.width):l.elementRect.width;p.top=this.inline?r+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+r;if(p.top-this.winTopScroll.y<this.rect.top||p.top-this.winTopScroll.y>this.rect.bottom){return !1}this.inline?p.left=l.elementRect.left-this.rect.relativeX:(0<l.elementRect.left?p.left=this.rect.left+l.elementRect.left:(p.width+=l.elementRect.left,p.left=this.rect.left),0<(l=p.left+p.width-(this.rect.left+this.winPane.width))&&(p.width-=l));p.left+=this.winTopScroll.x;for(var n in p){p[n]=CKEDITOR.tools.cssLength(p[n])}return p},addLine:function(){var l=CKEDITOR.dom.element.createFromHtml(this.lineTpl);l.appendTo(this.container);return l},prepare:function(l,m){this.relations=l;this.locations=m;this.hash=Math.random()},cleanup:function(){var l,m;for(m in this.visible){l=this.visible[m],l.getCustomData("hash")!==this.hash&&this.hideLine(l)}},queryViewport:function(){this.winPane=this.win.getViewPaneSize();this.winTopScroll=this.winTop.getScrollPosition();this.winTopPane=this.winTop.getViewPaneSize();this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(m){m=m.getClientRect();var n=this.container.getDocumentPosition(),l=this.container.getComputedStyle("position");m.relativeX=m.relativeY=0;"static"!=l&&(m.relativeY=n.y,m.relativeX=n.x,m.top-=m.relativeY,m.bottom-=m.relativeY,m.left-=m.relativeX,m.right-=m.relativeX);return m}};var s={left:1,right:1,center:1},k={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:i,locator:x,liner:w}})();(function(){function aG(n){this.editor=n;this.registered={};this.instances={};this.selected=[];this.widgetHoldingFocusedEditable=this.focused=null;this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}};ao(this);an(this);this.on("checkWidgets",am);this.editor.on("contentDomInvalidated",this.checkWidgets,this);al(this);ak(this);aj(this);ai(this);ah(this)}function aI(p,n,u,t,r){var q=p.editor;CKEDITOR.tools.extend(this,t,{editor:q,id:n,inline:"span"==u.getParent().getName(),element:u,data:CKEDITOR.tools.extend({},"function"==typeof t.defaults?t.defaults():t.defaults),dataReady:!1,inited:!1,ready:!1,edit:aI.prototype.edit,focusedEditable:null,definition:t,repository:p,draggable:!1!==t.draggable,_:{downcastFn:t.downcast&&"string"==typeof t.downcast?t.downcasts[t.downcast]:t.downcast}},!0);p.fire("instanceCreated",this);ag(this,t);this.init&&this.init();this.inited=!0;(p=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(p)));r&&this.setData(r);this.data.classes||this.setData("classes",this.getClasses());this.dataReady=!0;aE(this);this.fire("data",this.data);this.isInited()&&q.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function aF(p,n,q){CKEDITOR.dom.element.call(this,n.$);this.editor=p;this._={};n=this.filter=q.filter;CKEDITOR.dtd[this.getName()].p?(this.enterMode=n?n.getAllowedEnterMode(p.enterMode):p.enterMode,this.shiftEnterMode=n?n.getAllowedEnterMode(p.shiftEnterMode,!0):p.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function af(p,n){p.addCommand(n.name,{exec:function(r,x){function w(){r.widgets.finalizeCreation(t)}var v=r.widgets.focused;if(v&&v.name==n.name){v.edit()}else{if(n.insert){n.insert()}else{if(n.template){var v="function"==typeof n.defaults?n.defaults():n.defaults,v=CKEDITOR.dom.element.createFromHtml(n.template.output(v)),u,q=r.widgets.wrapElement(v,n.name),t=new CKEDITOR.dom.documentFragment(q.getDocument());t.append(q);(u=r.widgets.initOn(v,n,x&&x.startupData))?(v=u.once("edit",function(y){if(y.data.dialog){u.once("dialog",function(z){z=z.data;var B,A;B=z.once("ok",w,null,null,20);A=z.once("cancel",function(C){C.data&&!1===C.data.hide||r.widgets.destroy(u,!0)});z.once("hide",function(){B.removeListener();A.removeListener()})})}else{w()}},null,null,999),u.edit(),v.removeListener()):w()}}}},allowedContent:n.allowedContent,requiredContent:n.requiredContent,contentForms:n.contentForms,contentTransformations:n.contentTransformations})}function ae(p,n){function t(x,u,w){var v=CKEDITOR.tools.getIndex(p._.upcasts,function(y){return y[2]>w});0>v&&(v=p._.upcasts.length);p._.upcasts.splice(v,0,[x,u,w])}var r=n.upcast,q=n.upcastPriority||10;if(r){if("string"==typeof r){for(r=r.split(",");r.length;){t(n.upcasts[r.pop()],n.name,q)}}else{t(r,n.name,q)}}}function aD(p,n){p.focused=null;if(n.isInited()){var q=n.editor.checkDirty();p.fire("widgetBlurred",{widget:n});n.setFocused(!1);!q&&n.editor.resetDirty()}}function am(x){x=x.data;if("wysiwyg"==this.editor.mode){var w=this.editor.editable(),v=this.instances,u,t,r,q;if(w){for(u in v){v[u].isReady()&&!w.contains(v[u].wrapper)&&this.destroy(v[u],!0)}if(x&&x.initOnlyNew){v=this.initOnAll()}else{var n=w.find(".cke_widget_wrapper"),v=[];u=0;for(t=n.count();u<t;u++){r=n.getItem(u);if(q=!this.getByElement(r,!0)){x:{q=ad;for(var p=r;p=p.getParent();){if(q(p)){q=!0;break x}}q=!1}q=!q}q&&w.contains(r)&&(r.addClass("cke_widget_new"),v.push(this.initOn(r.getFirst(aI.isDomWidgetElement))))}}x&&x.focusInited&&1==v.length&&v[0].focus()}}}function aC(p,n,r){if(!r.allowedContent){return null}var q=this._.filters[p];q||(this._.filters[p]=q={});(p=q[n])||(q[n]=p=new CKEDITOR.filter(r.allowedContent));return p}function ac(p){var n=[],r=p._.upcasts,q=p._.upcastCallbacks;return{toBeWrapped:n,iterator:function(v){var y,x,u,w,t;if("data-cke-widget-wrapper" in v.attributes){return(v=v.getFirst(aI.isParserWidgetElement))&&n.push([v]),!1}if("data-widget" in v.attributes){return n.push([v]),!1}if(t=r.length){if(v.attributes["data-cke-widget-upcasted"]){return !1}w=0;for(y=q.length;w<y;++w){if(!1===q[w](v)){return}}for(w=0;w<t;++w){if(y=r[w],u={},x=y[0](v,u)){return x instanceof CKEDITOR.htmlParser.element&&(v=x),v.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(u)),v.attributes["data-cke-widget-upcasted"]=1,n.push([v,y[1]]),!1}}}}}}function aB(n){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off","class":"cke_widget_wrapper cke_widget_new cke_widget_"+(n?"inline":"block")}}function aA(p,n,t){if(p.type==CKEDITOR.NODE_ELEMENT){var r=CKEDITOR.dtd[p.name];if(r&&!r[t.name]){var r=p.split(n),q=p.parent;n=r.getIndex();p.children.length||(--n,p.remove());r.children.length||r.remove();return aA(q,n,t)}}p.add(t,n)}function az(p,n){return"boolean"==typeof p.inline?p.inline:!!CKEDITOR.dtd.$inline[n]}function ad(n){return n.hasAttribute("data-cke-temp")}function aH(p,n,t,r){var q=p.editor;q.fire("lockSnapshot");t?(r=t.data("cke-widget-editable"),r=n.editables[r],p.widgetHoldingFocusedEditable=n,n.focusedEditable=r,t.addClass("cke_widget_editable_focused"),r.filter&&q.setActiveFilter(r.filter),q.setActiveEnterMode(r.enterMode,r.shiftEnterMode)):(r||n.focusedEditable.removeClass("cke_widget_editable_focused"),n.focusedEditable=null,p.widgetHoldingFocusedEditable=null,q.setActiveFilter(null),q.setActiveEnterMode(null,null));q.fire("unlockSnapshot")}function ab(n){n.contextMenu&&n.contextMenu.addListener(function(p){if(p=n.widgets.getByElement(p,!0)){return p.fire("contextMenu",{})}})}function s(p,n){return CKEDITOR.tools.trim(n)}function ai(p){var n=p.editor,q=CKEDITOR.plugins.lineutils;n.on("dragstart",function(t){var r=t.data.target;aI.isDomDragHandler(r)&&(r=p.getByElement(r),t.data.dataTransfer.setData("cke/widget-id",r.id),n.focus(),r.focus())});n.on("drop",function(v){var u=v.data.dataTransfer,t=u.getData("cke/widget-id"),r=u.getTransferType(n),u=n.createRange();""!==t&&r===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?v.cancel():""!==t&&r==CKEDITOR.DATA_TRANSFER_INTERNAL&&(t=p.instances[t])&&(u.setStartBefore(t.wrapper),u.setEndAfter(t.wrapper),v.data.dragRange=u,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,v.data.dataTransfer.setData("text/html",n.editable().getHtmlFromRange(u).getHtml()),n.widgets.destroy(t,!0))});n.on("contentDom",function(){var r=n.editable();CKEDITOR.tools.extend(p,{finder:new q.finder(n,{lookups:{"default":function(u){if(!u.is(CKEDITOR.dtd.$listItem)&&u.is(CKEDITOR.dtd.$block)&&!aI.isDomNestedEditable(u)&&!p._.draggedWidget.wrapper.contains(u)){var t=aI.getNestedEditable(r,u);if(t){u=p._.draggedWidget;if(p.getByElement(t)==u){return}t=CKEDITOR.filter.instances[t.data("cke-filter")];u=u.requiredContent;if(t&&u&&!t.check(u)){return}}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new q.locator(n),liner:new q.liner(n,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function ak(p){var n=p.editor;n.on("contentDom",function(){var u=n.editable(),t=u.isInline()?u:n.document,r,q;u.attachListener(t,"mousedown",function(w){var v=w.data.getTarget();if(!v.type){return !1}r=p.getByElement(v);q=0;r&&(r.inline&&v.type==CKEDITOR.NODE_ELEMENT&&v.hasAttribute("data-cke-widget-drag-handler")?(q=1,p.focused!=r&&n.getSelection().removeAllRanges()):aI.getNestedEditable(r.wrapper,v)?r=null:(w.data.preventDefault(),CKEDITOR.env.ie||r.focus()))});u.attachListener(t,"mouseup",function(){q&&r&&r.wrapper&&(q=0,r.focus())});CKEDITOR.env.ie&&u.attachListener(t,"mouseup",function(){setTimeout(function(){r&&r.wrapper&&u.contains(r.wrapper)&&(r.focus(),r=null)})})});n.on("doubleclick",function(r){var q=p.getByElement(r.data.element);if(q&&!aI.getNestedEditable(q.wrapper,r.data.element)){return q.fire("doubleclick",{element:r.data.element})}},null,null,1)}function aj(n){n.editor.on("key",function(p){var t=n.focused,r=n.widgetHoldingFocusedEditable,q;t?q=t.fire("key",{keyCode:p.data.keyCode}):r&&(t=p.data.keyCode,p=r.focusedEditable,t==CKEDITOR.CTRL+65?(t=p.getBogus(),r=r.editor.createRange(),r.selectNodeContents(p),t&&r.setEndAt(t,CKEDITOR.POSITION_BEFORE_START),r.select(),q=!1):8==t||46==t?(q=r.editor.getSelection().getRanges(),r=q[0],q=!(1==q.length&&r.collapsed&&r.checkBoundaryOfElement(p,CKEDITOR[8==t?"START":"END"]))):q=void 0);return q},null,null,1)}function ah(p){function n(r){p.focused&&ay(p.focused,"cut"==r.name)}var q=p.editor;q.on("contentDom",function(){var r=q.editable();r.attachListener(r,"copy",n);r.attachListener(r,"cut",n)})}function al(p){var n=p.editor;n.on("selectionCheck",function(){p.fire("checkSelection")});p.on("checkSelection",p.checkSelection,p);n.on("selectionChange",function(t){var r=(t=aI.getNestedEditable(n.editable(),t.data.selection.getStartElement()))&&p.getByElement(t),q=p.widgetHoldingFocusedEditable;q?q===r&&q.focusedEditable.equals(t)||(aH(p,q,null),r&&t&&aH(p,r,t)):r&&t&&aH(p,r,t)});n.on("dataReady",function(){ax(p).commit()});n.on("blur",function(){var q;(q=p.focused)&&aD(p,q);(q=p.widgetHoldingFocusedEditable)&&aH(p,q,null)})}function an(p){var n=p.editor,q={};n.on("toDataFormat",function(r){var u=CKEDITOR.tools.getNextNumber(),t=[];r.data.downcastingSessionId=u;q[u]=t;r.data.dataValue.forEach(function(x){var v=x.attributes,w;if("data-cke-widget-id" in v){if(v=p.instances[v["data-cke-widget-id"]]){w=x.getFirst(aI.isParserWidgetElement),t.push({wrapper:x,element:w,widget:v,editables:{}}),"1"!=w.attributes["data-cke-widget-keep-attr"]&&delete w.attributes["data-widget"]}}else{if("data-cke-widget-editable" in v){return t[t.length-1].editables[v["data-cke-widget-editable"]]=x,!1}}},CKEDITOR.NODE_ELEMENT,!0)},null,null,8);n.on("toDataFormat",function(v){if(v.data.downcastingSessionId){v=q[v.data.downcastingSessionId];for(var t,y,w,u,x,r;t=v.shift();){y=t.widget;w=t.element;u=y._.downcastFn&&y._.downcastFn.call(y,w);for(r in t.editables){x=t.editables[r],delete x.attributes.contenteditable,x.setHtml(y.editables[r].getData())}u||(u=w);t.wrapper.replaceWith(u)}}},null,null,13);n.on("contentDomUnload",function(){p.destroyAll(!0)})}function ao(p){var n=p.editor,r,q;n.on("toHtml",function(t){var x=ac(p),w;for(t.data.dataValue.forEach(x.iterator,CKEDITOR.NODE_ELEMENT,!0);w=x.toBeWrapped.pop();){var u=w[0],v=u.parent;v.type==CKEDITOR.NODE_ELEMENT&&v.attributes["data-cke-widget-wrapper"]&&v.replaceWith(u);p.wrapElement(w[0],w[1])}r=t.data.protectedWhitespaces?3==t.data.dataValue.children.length&&aI.isParserWidgetWrapper(t.data.dataValue.children[1]):1==t.data.dataValue.children.length&&aI.isParserWidgetWrapper(t.data.dataValue.children[0])},null,null,8);n.on("dataReady",function(){if(q){for(var x=n.editable().find(".cke_widget_wrapper"),w,v,t=0,u=x.count();t<u;++t){w=x.getItem(t),v=w.getFirst(aI.isDomWidgetElement),v.type==CKEDITOR.NODE_ELEMENT&&v.data("widget")?(v.replace(w),p.wrapElement(v)):w.remove()}}q=0;p.destroyAll(!0);p.initOnAll()});n.on("loadSnapshot",function(t){/data-cke-widget/.test(t.data)&&(q=1);p.destroyAll(!0)},null,null,9);n.on("paste",function(t){t=t.data;t.dataValue=t.dataValue.replace(o,s);t.range&&(t=aI.getNestedEditable(n.editable(),t.range.startContainer))&&(t=CKEDITOR.filter.instances[t.data("cke-filter")])&&n.setActiveFilter(t)});n.on("afterInsertHtml",function(t){t.data.intoRange?p.checkWidgets({initOnlyNew:!0}):(n.fire("lockSnapshot"),p.checkWidgets({initOnlyNew:!0,focusInited:r}),n.fire("unlockSnapshot"))})}function ax(p){var n=p.selected,t=[],r=n.slice(0),q=null;return{select:function(u){0>CKEDITOR.tools.indexOf(n,u)&&t.push(u);u=CKEDITOR.tools.indexOf(r,u);0<=u&&r.splice(u,1);return this},focus:function(u){q=u;return this},commit:function(){var w=p.focused!==q,u,v;p.editor.fire("lockSnapshot");for(w&&(u=p.focused)&&aD(p,u);u=r.pop();){n.splice(CKEDITOR.tools.indexOf(n,u),1),u.isInited()&&(v=u.editor.checkDirty(),u.setSelected(!1),!v&&u.editor.resetDirty())}w&&q&&(v=p.editor.checkDirty(),p.focused=q,p.fire("widgetFocused",{widget:q}),q.setFocused(!0),!v&&p.editor.resetDirty());for(;u=t.pop();){n.push(u),u.setSelected(!0)}p.editor.fire("unlockSnapshot")}}}function au(p,n,u){var t=0;n=at(n);var r=p.data.classes||{},q;if(n){for(r=CKEDITOR.tools.clone(r);q=n.pop();){u?r[q]||(t=r[q]=1):r[q]&&(delete r[q],t=1)}t&&p.setData("classes",r)}}function ar(n){n.cancel()}function ay(C,B){var A=C.editor,z=A.document;if(!z.getById("cke_copybin")){var y=A.blockless||CKEDITOR.env.ie?"span":"div",x=z.createElement(y),v=z.createElement(y),y=CKEDITOR.env.ie&&9>CKEDITOR.env.version;v.setAttributes({id:"cke_copybin","data-cke-temp":"1"});x.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"});x.setStyle("ltr"==A.config.contentsLangDirection?"left":"right","-5000px");var w=A.createRange();w.setStartBefore(C.wrapper);w.setEndAfter(C.wrapper);x.setHtml('\x3cspan data-cke-copybin-start\x3d"1"\x3e\x3c/span\x3e'+A.editable().getHtmlFromRange(w).getHtml()+'\x3cspan data-cke-copybin-end\x3d"1"\x3e\x3c/span\x3e');A.fire("saveSnapshot");A.fire("lockSnapshot");v.append(x);A.editable().append(v);var u=A.on("selectionChange",ar,null,null,0),t=C.repository.on("checkSelection",ar,null,null,0);if(y){var r=z.getDocumentElement().$,q=r.scrollTop}w=A.createRange();w.selectNodeContents(x);w.select();y&&(r.scrollTop=q);setTimeout(function(){B||C.focus();v.remove();u.removeListener();t.removeListener();A.fire("unlockSnapshot");B&&(C.repository.del(C),A.fire("saveSnapshot"))},100)}}function at(n){return(n=(n=n.getDefinition().attributes)&&n["class"])?n.split(/\s+/):null}function aq(){var p=CKEDITOR.document.getActive(),n=this.editor,q=n.editable();(q.isInline()?q:n.document.getWindow().getFrame()).equals(p)&&n.focusManager.focus(q)}function ap(){CKEDITOR.env.gecko&&this.editor.unlockSelection();CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function m(p){var n=null;p.on("data",function(){var q=this.data.classes,r;if(n!=q){for(r in n){q&&q[r]||this.removeClass(r)}for(r in q){this.addClass(r)}n=q}})}function l(p){if(p.draggable){var n=p.editor,r=p.wrapper.getLast(aI.isDomDragHandlerContainer),q;r?q=r.findOne("img"):(r=new CKEDITOR.dom.element("span",n.document),r.setAttributes({"class":"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+n.plugins.widget.path+"images/handle.png)"}),q=new CKEDITOR.dom.element("img",n.document),q.setAttributes({"class":"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:n.lang.widget.move,height:15}),p.inline&&q.setAttribute("draggable","true"),r.append(q),p.wrapper.append(r));p.wrapper.on("dragover",function(t){t.data.preventDefault()});p.wrapper.on("mouseenter",p.updateDragHandlerPosition,p);setTimeout(function(){p.on("data",p.updateDragHandlerPosition,p)},50);if(!p.inline&&(q.on("mousedown",k,p),CKEDITOR.env.ie&&9>CKEDITOR.env.version)){q.on("dragstart",function(t){t.data.preventDefault(!0)})}p.dragHandlerContainer=r}}function k(E){function D(){var H;for(u.reset();H=y.pop();){H.removeListener()}var n=w;H=E.sender;var G=this.repository.finder,F=this.repository.liner,q=this.editor,p=this.editor.editable();CKEDITOR.tools.isEmpty(F.visible)||(n=G.getRange(n[0]),this.focus(),q.fire("drop",{dropRange:n,target:n.startContainer}));p.removeClass("cke_widget_dragging");F.hideVisible();q.fire("dragend",{target:H})}var C=this.repository.finder,B=this.repository.locator,A=this.repository.liner,z=this.editor,x=z.editable(),y=[],w=[];this.repository._.draggedWidget=this;var v=C.greedySearch(),u=CKEDITOR.tools.eventsBuffer(50,function(){t=B.locate(v);w=B.sort(r,1);w.length&&(A.prepare(v,t),A.placeLine(w[0]),A.cleanup())}),t,r;x.addClass("cke_widget_dragging");y.push(x.on("mousemove",function(n){r=n.data.$.clientY;u.input()}));z.fire("dragstart",{target:E.sender});y.push(z.document.once("mouseup",D,this));x.isInline()||y.push(CKEDITOR.document.once("mouseup",D,this))}function j(p){var n,r,q=p.editables;p.editables={};if(p.editables){for(n in q){r=q[n],p.initEditable(n,"string"==typeof r?{selector:r}:r)}}}function i(p){if(p.mask){var n=p.wrapper.findOne(".cke_widget_mask");n||(n=new CKEDITOR.dom.element("img",p.editor.document),n.setAttributes({src:CKEDITOR.tools.transparentImageData,"class":"cke_reset cke_widget_mask"}),p.wrapper.append(n));p.mask=n}}function av(p){if(p.parts){var n={},r,q;for(q in p.parts){r=p.wrapper.findOne(p.parts[q]),n[q]=r}p.parts=n}}function ag(p,n){aJ(p);av(p);j(p);i(p);l(p);m(p);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version){p.wrapper.on("dragstart",function(r){var q=r.data.getTarget();aI.getNestedEditable(p,q)||p.inline&&aI.isDomDragHandler(q)||r.data.preventDefault()})}p.wrapper.removeClass("cke_widget_new");p.element.addClass("cke_widget_element");p.on("key",function(q){q=q.data.keyCode;if(13==q){p.edit()}else{if(q==CKEDITOR.CTRL+67||q==CKEDITOR.CTRL+88){ay(p,q==CKEDITOR.CTRL+88);return}if(q in aw||CKEDITOR.CTRL&q||CKEDITOR.ALT&q){return}}return !1},null,null,999);p.on("doubleclick",function(q){p.edit()&&q.cancel()});if(n.data){p.on("data",n.data)}if(n.edit){p.on("edit",n.edit)}}function aJ(n){(n.wrapper=n.element.getParent()).setAttribute("data-cke-widget-id",n.id)}function aE(n){n.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(n.data)))}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard",onLoad:function(){CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover\x3e.cke_widget_element{outline:2px solid yellow;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid yellow}.cke_widget_wrapper.cke_widget_focused\x3e.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #ace}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover\x3e.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}")},beforeInit:function(n){n.widgets=new aG(n)},afterInit:function(p){var n=p.widgets.registered,t,r,q;for(r in n){t=n[r],(q=t.button)&&p.ui.addButton&&p.ui.addButton(CKEDITOR.tools.capitalize(t.name,!0),{label:q,command:t.name,toolbar:"insert,10"})}ab(p)}});aG.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(p,n){n=CKEDITOR.tools.prototypedCopy(n);n.name=p;n._=n._||{};this.editor.fire("widgetDefinition",n);n.template&&(n.template=new CKEDITOR.template(n.template));af(this.editor,n);ae(this,n);return this.registered[p]=n},addUpcastCallback:function(n){this._.upcastCallbacks.push(n)},checkSelection:function(){var p=this.editor.getSelection(),n=p.getSelectedElement(),r=ax(this),q;if(n&&(q=this.getByElement(n,!0))){return r.focus(q).select(q).commit()}p=p.getRanges()[0];if(!p||p.collapsed){return r.commit()}p=new CKEDITOR.dom.walker(p);for(p.evaluator=aI.isDomWidgetWrapper;n=p.next();){r.select(this.getByElement(n))}r.commit()},checkWidgets:function(n){this.fire("checkWidgets",CKEDITOR.tools.copy(n||{}))},del:function(p){if(this.focused===p){var n=p.editor,r=n.createRange(),q;(q=r.moveToClosestEditablePosition(p.wrapper,!0))||(q=r.moveToClosestEditablePosition(p.wrapper,!1));q&&n.getSelection().selectRanges([r])}p.wrapper.remove();this.destroy(p,!0)},destroy:function(p,n){this.widgetHoldingFocusedEditable===p&&aH(this,p,null,n);p.destroy(n);delete this.instances[p.id];this.fire("instanceDestroyed",p)},destroyAll:function(p,n){var u,t,r=this.instances;if(n&&!p){t=n.find(".cke_widget_wrapper");for(var r=t.count(),q=0;q<r;++q){(u=this.getByElement(t.getItem(q),!0))&&this.destroy(u)}}else{for(t in r){u=r[t],this.destroy(u,p)}}},finalizeCreation:function(n){(n=n.getFirst())&&aI.isDomWidgetWrapper(n)&&(this.editor.insertElement(n),n=this.getByElement(n),n.ready=!0,n.fire("ready"),n.focus())},getByElement:function(){function p(q){return q.is(n)&&q.data("cke-widget-id")}var n={div:1,span:1};return function(q,u){if(!q){return null}var t=p(q);if(!u&&!t){var r=this.editor.editable();do{q=q.getParent()}while(q&&!q.equals(r)&&!(t=p(q)))}return this.instances[t]||null}}(),initOn:function(p,n,r){n?"string"==typeof n&&(n=this.registered[n]):n=this.registered[p.data("widget")];if(!n){return null}var q=this.wrapElement(p,n.name);return q?q.hasClass("cke_widget_new")?(p=new aI(this,this._.nextId++,p,n,r),p.isInited()?this.instances[p.id]=p:null):this.getByElement(p):null},initOnAll:function(p){p=(p||this.editor.editable()).find(".cke_widget_new");for(var n=[],r,q=p.count();q--;){(r=this.initOn(p.getItem(q).getFirst(aI.isDomWidgetElement)))&&n.push(r)}return n},onWidget:function(p){var n=Array.prototype.slice.call(arguments);n.shift();for(var r in this.instances){var q=this.instances[r];q.name==p&&q.on.apply(q,n)}this.on("instanceCreated",function(t){t=t.data;t.name==p&&t.on.apply(t,n)})},parseElementClasses:function(p){if(!p){return null}p=CKEDITOR.tools.trim(p).split(/\s+/);for(var n,r={},q=0;n=p.pop();){-1==n.indexOf("cke_")&&(r[n]=q=1)}return q?r:null},wrapElement:function(p,n){var u=null,t,r;if(p instanceof CKEDITOR.dom.element){t=this.registered[n||p.data("widget")];if(!t){return null}if((u=p.getParent())&&u.type==CKEDITOR.NODE_ELEMENT&&u.data("cke-widget-wrapper")){return u}p.hasAttribute("data-cke-widget-keep-attr")||p.data("cke-widget-keep-attr",p.data("widget")?1:0);n&&p.data("widget",n);r=az(t,p.getName());u=new CKEDITOR.dom.element(r?"span":"div");u.setAttributes(aB(r));u.data("cke-display-name",t.pathName?t.pathName:p.getName());p.getParent(!0)&&u.replace(p);p.appendTo(u)}else{if(p instanceof CKEDITOR.htmlParser.element){t=this.registered[n||p.attributes["data-widget"]];if(!t){return null}if((u=p.parent)&&u.type==CKEDITOR.NODE_ELEMENT&&u.attributes["data-cke-widget-wrapper"]){return u}"data-cke-widget-keep-attr" in p.attributes||(p.attributes["data-cke-widget-keep-attr"]=p.attributes["data-widget"]?1:0);n&&(p.attributes["data-widget"]=n);r=az(t,p.name);u=new CKEDITOR.htmlParser.element(r?"span":"div",aB(r));u.attributes["data-cke-display-name"]=t.pathName?t.pathName:p.name;t=p.parent;var q;t&&(q=p.getIndex(),p.remove());u.add(p);t&&aA(t,q,u)}}return u},_tests_createEditableFilter:aC};CKEDITOR.event.implementOn(aG.prototype);aI.prototype={addClass:function(n){this.element.addClass(n)},applyStyle:function(n){au(this,n,1)},checkStyleActive:function(p){p=at(p);var n;if(!p){return !1}for(;n=p.pop();){if(!this.hasClass(n)){return !1}}return !0},destroy:function(p){this.fire("destroy");if(this.editables){for(var n in this.editables){this.destroyEditable(n,p)}}p||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper));this.wrapper=null},destroyEditable:function(p,n){var q=this.editables[p];q.removeListener("focus",ap);q.removeListener("blur",aq);this.editor.focusManager.remove(q);n||(this.repository.destroyAll(!1,q),q.removeClass("cke_widget_editable"),q.removeClass("cke_widget_editable_focused"),q.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"]));delete this.editables[p]},edit:function(){var p={dialog:this.dialog},n=this;if(!1===this.fire("edit",p)||!p.dialog){return !1}this.editor.openDialog(p.dialog,function(q){var t,r;!1!==n.fire("dialog",q)&&(t=q.on("show",function(){q.setupContent(n)}),r=q.on("ok",function(){var v,u=n.on("data",function(w){v=1;w.cancel()},null,null,0);n.editor.fire("saveSnapshot");q.commitContent(n);u.removeListener();v&&(n.fire("data",n.data),n.editor.fire("saveSnapshot"))}),q.once("hide",function(){t.removeListener();r.removeListener()}))});return !0},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(n){return this.element.hasClass(n)},initEditable:function(p,n){var q=this._findOneNotNested(n.selector);return q&&q.is(CKEDITOR.dtd.$editable)?(q=new aF(this.editor,q,{filter:aC.call(this.repository,this.name,p,n)}),this.editables[p]=q,q.setAttributes({contenteditable:"true","data-cke-widget-editable":p,"data-cke-enter-mode":q.enterMode}),q.filter&&q.data("cke-filter",q.filter.id),q.addClass("cke_widget_editable"),q.removeClass("cke_widget_editable_focused"),n.pathName&&q.data("cke-display-name",n.pathName),this.editor.focusManager.add(q),q.on("focus",ap,this),CKEDITOR.env.ie&&q.on("blur",aq,this),q._.initialSetData=!0,q.setData(q.getHtml()),!0):!1},_findOneNotNested:function(p){p=this.wrapper.find(p);for(var n,r,q=0;q<p.count();q++){if(n=p.getItem(q),r=n.getAscendant(aI.isDomWidgetWrapper),this.wrapper.equals(r)){return n}}return null},isInited:function(){return !(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var p=this.editor.getSelection();if(p){var n=this.editor.checkDirty();p.fake(this.wrapper);!n&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(n){this.element.removeClass(n)},removeStyle:function(n){au(this,n,0)},setData:function(p,n){var t=this.data,r=0;if("string"==typeof p){t[p]!==n&&(t[p]=n,r=1)}else{var q=p;for(p in q){t[p]!==q[p]&&(r=1,t[p]=q[p])}}r&&this.dataReady&&(aE(this),this.fire("data",t));return this},setFocused:function(n){this.wrapper[n?"addClass":"removeClass"]("cke_widget_focused");this.fire(n?"focus":"blur");return this},setSelected:function(n){this.wrapper[n?"addClass":"removeClass"]("cke_widget_selected");this.fire(n?"select":"deselect");return this},updateDragHandlerPosition:function(){var p=this.editor,n=this.element.$,q=this._.dragHandlerOffset,n={x:n.offsetLeft,y:n.offsetTop-15};q&&n.x==q.x&&n.y==q.y||(q=p.checkDirty(),p.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:n.y+"px",left:n.x+"px",display:"block"}),p.fire("unlockSnapshot"),!q&&p.resetDirty(),this._.dragHandlerOffset=n)}};CKEDITOR.event.implementOn(aI.prototype);aI.getNestedEditable=function(p,n){return !n||n.equals(p)?null:aI.isDomNestedEditable(n)?n:aI.getNestedEditable(p,n.getParent())};aI.isDomDragHandler=function(n){return n.type==CKEDITOR.NODE_ELEMENT&&n.hasAttribute("data-cke-widget-drag-handler")};aI.isDomDragHandlerContainer=function(n){return n.type==CKEDITOR.NODE_ELEMENT&&n.hasClass("cke_widget_drag_handler_container")};aI.isDomNestedEditable=function(n){return n.type==CKEDITOR.NODE_ELEMENT&&n.hasAttribute("data-cke-widget-editable")};aI.isDomWidgetElement=function(n){return n.type==CKEDITOR.NODE_ELEMENT&&n.hasAttribute("data-widget")};aI.isDomWidgetWrapper=function(n){return n.type==CKEDITOR.NODE_ELEMENT&&n.hasAttribute("data-cke-widget-wrapper")};aI.isParserWidgetElement=function(n){return n.type==CKEDITOR.NODE_ELEMENT&&!!n.attributes["data-widget"]};aI.isParserWidgetWrapper=function(n){return n.type==CKEDITOR.NODE_ELEMENT&&!!n.attributes["data-cke-widget-wrapper"]};aF.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(n){this._.initialSetData||this.editor.widgets.destroyAll(!1,this);this._.initialSetData=!1;n=this.editor.dataProcessor.toHtml(n,{context:this.getName(),filter:this.filter,enterMode:this.enterMode});this.setHtml(n);this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var o=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,aw={37:1,38:1,39:1,40:1,8:1,46:1};(function(){function p(){}function n(r,q,t){return t&&this.checkElement(r)?(r=t.widgets.getByElement(r,!0))&&r.checkStyleActive(this):!1}CKEDITOR.style.addCustomHandler({type:"widget",setup:function(q){this.widget=q.widget},apply:function(q){q instanceof CKEDITOR.editor&&this.checkApplicable(q.elementPath(),q)&&q.widgets.focused.applyStyle(this)},remove:function(q){q instanceof CKEDITOR.editor&&this.checkApplicable(q.elementPath(),q)&&q.widgets.focused.removeStyle(this)},checkActive:function(r,q){return this.checkElementMatch(r.lastElement,0,q)},checkApplicable:function(r,q){return q instanceof CKEDITOR.editor?this.checkElement(r.lastElement):!1},checkElementMatch:n,checkElementRemovable:n,checkElement:function(q){return aI.isDomWidgetWrapper(q)?(q=q.getFirst(aI.isDomWidgetElement))&&q.data("widget")==this.widget:!1},buildPreview:function(q){return q||this._.definition.name},toAllowedContentRules:function(r){if(!r){return null}r=r.widgets.registered[this.widget];var q,t={};if(!r){return null}if(r.styleableElements){q=this.getClassesArray();if(!q){return null}t[r.styleableElements]={classes:q,propertiesOnly:!0};return t}return r.styleToAllowedContentRules?r.styleToAllowedContentRules(this):null},getClassesArray:function(){var q=this._.definition.attributes&&this._.definition.attributes["class"];return q?CKEDITOR.tools.trim(q).split(/\s+/):null},applyToRange:p,removeFromRange:p,applyToObject:p})})();CKEDITOR.plugins.widget=aI;aI.repository=aG;aI.nestedEditable=aF})();(function(){function i(l){CKEDITOR.tools.extend(this,l);this.queue=[];this.init?this.init(CKEDITOR.tools.bind(function(){for(var m;m=this.queue.pop();){m.call(this)}this.ready=!0},this)):this.ready=!0}function j(m){var l=m.config.codeSnippet_codeClass,p=/\r?\n/g,n=new CKEDITOR.dom.element("textarea");m.widgets.add("codeSnippet",{allowedContent:"pre; code(language-*)",requiredContent:"pre",styleableElements:"pre",template:'\x3cpre\x3e\x3ccode class\x3d"'+l+'"\x3e\x3c/code\x3e\x3c/pre\x3e',dialog:"codeSnippet",pathName:m.lang.codesnippet.pathName,mask:!0,parts:{pre:"pre",code:"code"},highlight:function(){var r=this,s=this.data,q=function(t){r.parts.code.setHtml(k?t:t.replace(p,"\x3cbr\x3e"))};q(CKEDITOR.tools.htmlEncode(s.code));m._.codesnippet.highlighter.highlight(s.code,s.lang,function(t){m.fire("lockSnapshot");q(t);m.fire("unlockSnapshot")})},data:function(){var r=this.data,q=this.oldData;r.code&&this.parts.code.setHtml(CKEDITOR.tools.htmlEncode(r.code));q&&r.lang!=q.lang&&this.parts.code.removeClass("language-"+q.lang);r.lang&&(this.parts.code.addClass("language-"+r.lang),this.highlight());this.oldData=CKEDITOR.tools.copy(r)},upcast:function(v,w){if("pre"==v.name){for(var s=[],u=v.children,r,q=u.length-1;0<=q;q--){r=u[q],r.type==CKEDITOR.NODE_TEXT&&r.value.match(o)||s.push(r)}var t;if(1==s.length&&"code"==(t=s[0]).name&&1==t.children.length&&t.children[0].type==CKEDITOR.NODE_TEXT){if(s=m._.codesnippet.langsRegex.exec(t.attributes["class"])){w.lang=s[1]}n.setHtml(t.getHtml());w.code=n.getValue();t.addClass(l);return v}}},downcast:function(q){var r=q.getFirst("code");r.children.length=0;r.removeClass(l);r.add(new CKEDITOR.htmlParser.text(CKEDITOR.tools.htmlEncode(this.data.code)));return q}});var o=/^[\s\n\r]*$/}var k=!CKEDITOR.env.ie||8<CKEDITOR.env.version;CKEDITOR.plugins.add("codesnippet",{requires:"widget,dialog",beforeInit:function(l){l._.codesnippet={};this.setHighlighter=function(m){l._.codesnippet.highlighter=m;m=l._.codesnippet.langs=l.config.codeSnippet_languages||m.languages;l._.codesnippet.langsRegex=new RegExp("(?:^|\\s)language-("+CKEDITOR.tools.objectKeys(m).join("|")+")(?:\\s|$)")}},onLoad:function(){CKEDITOR.dialog.add("codeSnippet",this.path+"dialogs/codesnippet.js")},init:function(l){l.ui.addButton&&l.ui.addButton("CodeSnippet",{label:l.lang.codesnippet.button,command:"codeSnippet",toolbar:"insert,10"})},afterInit:function(m){var l=this.path;j(m);if(!m._.codesnippet.highlighter){var n=new CKEDITOR.plugins.codesnippet.highlighter({languages:{apache:"Apache",bash:"Bash",coffeescript:"CoffeeScript",cpp:"C++",cs:"C#",css:"CSS",diff:"Diff",html:"HTML",http:"HTTP",ini:"INI",java:"Java",javascript:"JavaScript",json:"JSON",makefile:"Makefile",markdown:"Markdown",nginx:"Nginx",objectivec:"Objective-C",perl:"Perl",php:"PHP",python:"Python",ruby:"Ruby",sql:"SQL",vbscript:"VBScript",xhtml:"XHTML",xml:"XML"},init:function(o){var p=this;k&&CKEDITOR.scriptLoader.load(l+"lib/highlight/highlight.pack.js",function(){p.hljs=window.hljs;o()});m.addContentsCss&&m.addContentsCss(l+"lib/highlight/styles/"+m.config.codeSnippet_theme+".css")},highlighter:function(p,o,q){(p=this.hljs.highlightAuto(p,this.hljs.getLanguage(o)?[o]:void 0))&&q(p.value)}});this.setHighlighter(n)}}});CKEDITOR.plugins.codesnippet={highlighter:i};i.prototype.highlight=function(){var l=arguments;this.ready?this.highlighter.apply(this,l):this.queue.push(function(){this.highlighter.apply(this,l)})}})();CKEDITOR.config.codeSnippet_codeClass="hljs";CKEDITOR.config.codeSnippet_theme="default";var f={ace:"ace.js",aceExtWhitespace:"ext-whitespace.js",pbSyntaxHighlighter:CKEDITOR.plugins.getPath("pbckcode")+"dialogs/PBSyntaxHighlighter.js"},d="pbckcode";CKEDITOR.plugins.add("pbckcode",{icons:"pbckcode",lang:["fr","en"],init:function(j){var i=this;void 0===j.config.pbckcode&&(j.config.pbckcode={});j.settings=CKEDITOR.tools.extend({cls:"",modes:[["HTML","html"],["CSS","css"],["PHP","php"],["JS","javascript"]],theme:"textmate",tab_size:4,js:"http://cdn.jsdelivr.net//ace/1.1.4/noconflict///"},j.config.pbckcode,!0);j.settings.js=h(j.settings.js);j.on("instanceReady",function(){CKEDITOR.document.appendStyleSheet(i.path+"dialogs/style.css")});j.ui.addButton("pbckcode",{label:j.lang.pbckcode.addCode,command:d,toolbar:"pbckcode"});j.addCommand(d,new CKEDITOR.dialogCommand("pbckcodeDialog",{allowedContent:"pre[*]{*}(*)"}));j.getCommand(d).disable();CKEDITOR.dialog.add("pbckcodeDialog",i.path+"dialogs/pbckcode.js");j.contextMenu&&(j.addMenuGroup("pbckcodeGroup"),j.addMenuItem("pbckcodeItem",{label:j.lang.pbckcode.editCode,icon:i.path+"icons/pbckcode.png",command:d,group:"pbckcodeGroup"}),j.contextMenu.addListener(function(l){if(l.getAscendant("pre",true)){return{pbckcodeItem:CKEDITOR.TRISTATE_OFF}}}));var k=[e(j.settings.js,f.ace),f.pbSyntaxHighlighter];CKEDITOR.scriptLoader.load(k,function(){j.getCommand(d).enable();CKEDITOR.scriptLoader.load([e(j.settings.js,f.aceExtWhitespace)])})}});function h(i){return i.concat("/").replace(RegExp("([^:]/)/+","g"),"$1")}function e(j,i){return j+i}CKEDITOR.plugins.add("codeTag",{icons:"code",init:function(i){i.addCommand("wrapCode",{exec:function(j){j.insertHtml("<code>"+j.getSelection().getSelectedText()+"</code>")}});i.ui.addButton("Code",{label:"Wrap code",command:"wrapCode",toolbar:"insert"})}});CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc,youtube,lineutils,widget,codesnippet,pbckcode,codeTag";CKEDITOR.config.skin="moono";(function(){var i=function(k,l){var m=CKEDITOR.getUrl("plugins/"+l);k=k.split(",");for(var j=0;j<k.length;j++){CKEDITOR.skin.icons[k[j]]={path:m,offset:-k[++j],bgsize:k[++j]}}};if(CKEDITOR.env.hidpi){i("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,,codesnippet,2040,,pbckcode,4128,auto,code,4176,auto","icons_hidpi.png")}else{i("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto,codesnippet,2040,auto,pbckcode,2064,auto,code,2088,auto","icons.png")}})();CKEDITOR.lang.languages={af:1,sq:1,ar:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}}());